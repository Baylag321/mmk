import{f as Ds,H as Rl,ap as Ol,a as Xh,r as Os,o as wi,c as As,w as Er,h as oe,e as ta,O as zu,N as Gu,J as ja,t as wr,k as Qa,p as ea,v as na,i as Bu}from"./entry.fff4ff4b.js";import{m as Yh}from"./_mixin.6266d507.js";var Jh={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M365.3 518.5l246 178c5.3 3.8 12.7 0 12.7-6.5v-46.9c0-10.2-4.9-19.9-13.2-25.9L465.4 512l145.4-105.2c8.3-6 13.2-15.6 13.2-25.9V334c0-6.5-7.4-10.3-12.7-6.5l-246 178a8.05 8.05 0 000 13z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"left-square",theme:"outlined"};const Kh=Jh;function qu(o){for(var u=1;u<arguments.length;u++){var c=arguments[u]!=null?Object(arguments[u]):{},f=Object.keys(c);typeof Object.getOwnPropertySymbols=="function"&&(f=f.concat(Object.getOwnPropertySymbols(c).filter(function(l){return Object.getOwnPropertyDescriptor(c,l).enumerable}))),f.forEach(function(l){jh(o,l,c[l])})}return o}function jh(o,u,c){return u in o?Object.defineProperty(o,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[u]=c,o}var _u=function(u,c){var f=qu({},u,c.attrs);return Ds(Rl,qu({},f,{icon:Kh}),null)};_u.displayName="LeftSquareOutlined";_u.inheritAttrs=!1;const Qh=_u;var $h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M412.7 696.5l246-178c4.4-3.2 4.4-9.7 0-12.9l-246-178c-5.3-3.8-12.7 0-12.7 6.5V381c0 10.2 4.9 19.9 13.2 25.9L558.6 512 413.2 617.2c-8.3 6-13.2 15.6-13.2 25.9V690c0 6.5 7.4 10.3 12.7 6.5z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"right-square",theme:"outlined"};const tc=$h;function Uu(o){for(var u=1;u<arguments.length;u++){var c=arguments[u]!=null?Object(arguments[u]):{},f=Object.keys(c);typeof Object.getOwnPropertySymbols=="function"&&(f=f.concat(Object.getOwnPropertySymbols(c).filter(function(l){return Object.getOwnPropertyDescriptor(c,l).enumerable}))),f.forEach(function(l){ec(o,l,c[l])})}return o}function ec(o,u,c){return u in o?Object.defineProperty(o,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[u]=c,o}var xu=function(u,c){var f=Uu({},u,c.attrs);return Ds(Rl,Uu({},f,{icon:tc}),null)};xu.displayName="RightSquareOutlined";xu.inheritAttrs=!1;const nc=xu;var Y={exports:{}};/* @preserve
 * Leaflet 1.8.0, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(o,u){(function(c,f){f(u)})(Ol,function(c){var f="1.8.0";function l(r){var h,p,y,E;for(p=1,y=arguments.length;p<y;p++){E=arguments[p];for(h in E)r[h]=E[h]}return r}var d=Object.create||function(){function r(){}return function(h){return r.prototype=h,new r}}();function m(r,h){var p=Array.prototype.slice;if(r.bind)return r.bind.apply(r,p.call(arguments,1));var y=p.call(arguments,2);return function(){return r.apply(h,y.length?y.concat(p.call(arguments)):arguments)}}var _=0;function w(r){return"_leaflet_id"in r||(r._leaflet_id=++_),r._leaflet_id}function I(r,h,p){var y,E,N,D;return D=function(){y=!1,E&&(N.apply(p,E),E=!1)},N=function(){y?E=arguments:(r.apply(p,arguments),setTimeout(D,h),y=!0)},N}function b(r,h,p){var y=h[1],E=h[0],N=y-E;return r===y&&p?r:((r-E)%N+N)%N+E}function M(){return!1}function T(r,h){if(h===!1)return r;var p=Math.pow(10,h===void 0?6:h);return Math.round(r*p)/p}function q(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function k(r){return q(r).split(/\s+/)}function P(r,h){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?d(r.options):{});for(var p in h)r.options[p]=h[p];return r.options}function rt(r,h,p){var y=[];for(var E in r)y.push(encodeURIComponent(p?E.toUpperCase():E)+"="+encodeURIComponent(r[E]));return(!h||h.indexOf("?")===-1?"?":"&")+y.join("&")}var ot=/\{ *([\w_ -]+) *\}/g;function it(r,h){return r.replace(ot,function(p,y){var E=h[y];if(E===void 0)throw new Error("No value provided for variable "+p);return typeof E=="function"&&(E=E(h)),E})}var A=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function R(r,h){for(var p=0;p<r.length;p++)if(r[p]===h)return p;return-1}var Z="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function lt(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var F=0;function V(r){var h=+new Date,p=Math.max(0,16-(h-F));return F=h+p,window.setTimeout(r,p)}var G=window.requestAnimationFrame||lt("RequestAnimationFrame")||V,j=window.cancelAnimationFrame||lt("CancelAnimationFrame")||lt("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function X(r,h,p){if(p&&G===V)r.call(h);else return G.call(window,m(r,h))}function C(r){r&&j.call(window,r)}var nt={__proto__:null,extend:l,create:d,bind:m,get lastId(){return _},stamp:w,throttle:I,wrapNum:b,falseFn:M,formatNum:T,trim:q,splitWords:k,setOptions:P,getParamString:rt,template:it,isArray:A,indexOf:R,emptyImageUrl:Z,requestFn:G,cancelFn:j,requestAnimFrame:X,cancelAnimFrame:C};function _t(){}_t.extend=function(r){var h=function(){P(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=h.__super__=this.prototype,y=d(p);y.constructor=h,h.prototype=y;for(var E in this)Object.prototype.hasOwnProperty.call(this,E)&&E!=="prototype"&&E!=="__super__"&&(h[E]=this[E]);return r.statics&&l(h,r.statics),r.includes&&(Jt(r.includes),l.apply(null,[y].concat(r.includes))),l(y,r),delete y.statics,delete y.includes,y.options&&(y.options=p.options?d(p.options):{},l(y.options,r.options)),y._initHooks=[],y.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var N=0,D=y._initHooks.length;N<D;N++)y._initHooks[N].call(this)}},h},_t.include=function(r){var h=this.prototype.options;return l(this.prototype,r),r.options&&(this.prototype.options=h,this.mergeOptions(r.options)),this},_t.mergeOptions=function(r){return l(this.prototype.options,r),this},_t.addInitHook=function(r){var h=Array.prototype.slice.call(arguments,1),p=typeof r=="function"?r:function(){this[r].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function Jt(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=A(r)?r:[r];for(var h=0;h<r.length;h++)r[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Rt={on:function(r,h,p){if(typeof r=="object")for(var y in r)this._on(y,r[y],h);else{r=k(r);for(var E=0,N=r.length;E<N;E++)this._on(r[E],h,p)}return this},off:function(r,h,p){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var y in r)this._off(y,r[y],h);else{r=k(r);for(var E=arguments.length===1,N=0,D=r.length;N<D;N++)E?this._off(r[N]):this._off(r[N],h,p)}return this},_on:function(r,h,p){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}this._events=this._events||{};var y=this._events[r];y||(y=[],this._events[r]=y),p===this&&(p=void 0);for(var E={fn:h,ctx:p},N=y,D=0,U=N.length;D<U;D++)if(N[D].fn===h&&N[D].ctx===p)return;N.push(E)},_off:function(r,h,p){var y,E,N;if(!!this._events&&(y=this._events[r],!!y)){if(arguments.length===1){if(this._firingCount)for(E=0,N=y.length;E<N;E++)y[E].fn=M;delete this._events[r];return}if(p===this&&(p=void 0),typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}for(E=0,N=y.length;E<N;E++){var D=y[E];if(D.ctx===p&&D.fn===h){this._firingCount&&(D.fn=M,this._events[r]=y=y.slice()),y.splice(E,1);return}}console.warn("listener not found")}},fire:function(r,h,p){if(!this.listens(r,p))return this;var y=l({},h,{type:r,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var E=this._events[r];if(E){this._firingCount=this._firingCount+1||1;for(var N=0,D=E.length;N<D;N++){var U=E[N];U.fn.call(U.ctx||this,y)}this._firingCount--}}return p&&this._propagateEvent(y),this},listens:function(r,h){typeof r!="string"&&console.warn('"string" type argument expected');var p=this._events&&this._events[r];if(p&&p.length)return!0;if(h){for(var y in this._eventParents)if(this._eventParents[y].listens(r,h))return!0}return!1},once:function(r,h,p){if(typeof r=="object"){for(var y in r)this.once(y,r[y],h);return this}var E=m(function(){this.off(r,h,p).off(r,E,p)},this);return this.on(r,h,p).on(r,E,p)},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[w(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[w(r)],this},_propagateEvent:function(r){for(var h in this._eventParents)this._eventParents[h].fire(r.type,l({layer:r.target,propagatedFrom:r.target},r),!0)}};Rt.addEventListener=Rt.on,Rt.removeEventListener=Rt.clearAllEventListeners=Rt.off,Rt.addOneTimeEventListener=Rt.once,Rt.fireEvent=Rt.fire,Rt.hasEventListeners=Rt.listens;var ne=_t.extend(Rt);function z(r,h,p){this.x=p?Math.round(r):r,this.y=p?Math.round(h):h}var Kt=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};z.prototype={clone:function(){return new z(this.x,this.y)},add:function(r){return this.clone()._add(at(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(at(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new z(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new z(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Kt(this.x),this.y=Kt(this.y),this},distanceTo:function(r){r=at(r);var h=r.x-this.x,p=r.y-this.y;return Math.sqrt(h*h+p*p)},equals:function(r){return r=at(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=at(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+T(this.x)+", "+T(this.y)+")"}};function at(r,h,p){return r instanceof z?r:A(r)?new z(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new z(r.x,r.y):new z(r,h,p)}function mt(r,h){if(!!r)for(var p=h?[r,h]:r,y=0,E=p.length;y<E;y++)this.extend(p[y])}mt.prototype={extend:function(r){return r=at(r),!this.min&&!this.max?(this.min=r.clone(),this.max=r.clone()):(this.min.x=Math.min(r.x,this.min.x),this.max.x=Math.max(r.x,this.max.x),this.min.y=Math.min(r.y,this.min.y),this.max.y=Math.max(r.y,this.max.y)),this},getCenter:function(r){return new z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return new z(this.min.x,this.max.y)},getTopRight:function(){return new z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var h,p;return typeof r[0]=="number"||r instanceof z?r=at(r):r=jt(r),r instanceof mt?(h=r.min,p=r.max):h=p=r,h.x>=this.min.x&&p.x<=this.max.x&&h.y>=this.min.y&&p.y<=this.max.y},intersects:function(r){r=jt(r);var h=this.min,p=this.max,y=r.min,E=r.max,N=E.x>=h.x&&y.x<=p.x,D=E.y>=h.y&&y.y<=p.y;return N&&D},overlaps:function(r){r=jt(r);var h=this.min,p=this.max,y=r.min,E=r.max,N=E.x>h.x&&y.x<p.x,D=E.y>h.y&&y.y<p.y;return N&&D},isValid:function(){return!!(this.min&&this.max)}};function jt(r,h){return!r||r instanceof mt?r:new mt(r,h)}function ve(r,h){if(!!r)for(var p=h?[r,h]:r,y=0,E=p.length;y<E;y++)this.extend(p[y])}ve.prototype={extend:function(r){var h=this._southWest,p=this._northEast,y,E;if(r instanceof Q)y=r,E=r;else if(r instanceof ve){if(y=r._southWest,E=r._northEast,!y||!E)return this}else return r?this.extend(Vt(r)||Bt(r)):this;return!h&&!p?(this._southWest=new Q(y.lat,y.lng),this._northEast=new Q(E.lat,E.lng)):(h.lat=Math.min(y.lat,h.lat),h.lng=Math.min(y.lng,h.lng),p.lat=Math.max(E.lat,p.lat),p.lng=Math.max(E.lng,p.lng)),this},pad:function(r){var h=this._southWest,p=this._northEast,y=Math.abs(h.lat-p.lat)*r,E=Math.abs(h.lng-p.lng)*r;return new ve(new Q(h.lat-y,h.lng-E),new Q(p.lat+y,p.lng+E))},getCenter:function(){return new Q((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Q(this.getNorth(),this.getWest())},getSouthEast:function(){return new Q(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof Q||"lat"in r?r=Vt(r):r=Bt(r);var h=this._southWest,p=this._northEast,y,E;return r instanceof ve?(y=r.getSouthWest(),E=r.getNorthEast()):y=E=r,y.lat>=h.lat&&E.lat<=p.lat&&y.lng>=h.lng&&E.lng<=p.lng},intersects:function(r){r=Bt(r);var h=this._southWest,p=this._northEast,y=r.getSouthWest(),E=r.getNorthEast(),N=E.lat>=h.lat&&y.lat<=p.lat,D=E.lng>=h.lng&&y.lng<=p.lng;return N&&D},overlaps:function(r){r=Bt(r);var h=this._southWest,p=this._northEast,y=r.getSouthWest(),E=r.getNorthEast(),N=E.lat>h.lat&&y.lat<p.lat,D=E.lng>h.lng&&y.lng<p.lng;return N&&D},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,h){return r?(r=Bt(r),this._southWest.equals(r.getSouthWest(),h)&&this._northEast.equals(r.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Bt(r,h){return r instanceof ve?r:new ve(r,h)}function Q(r,h,p){if(isNaN(r)||isNaN(h))throw new Error("Invalid LatLng object: ("+r+", "+h+")");this.lat=+r,this.lng=+h,p!==void 0&&(this.alt=+p)}Q.prototype={equals:function(r,h){if(!r)return!1;r=Vt(r);var p=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return p<=(h===void 0?1e-9:h)},toString:function(r){return"LatLng("+T(this.lat,r)+", "+T(this.lng,r)+")"},distanceTo:function(r){return vn.distance(this,Vt(r))},wrap:function(){return vn.wrapLatLng(this)},toBounds:function(r){var h=180*r/40075017,p=h/Math.cos(Math.PI/180*this.lat);return Bt([this.lat-h,this.lng-p],[this.lat+h,this.lng+p])},clone:function(){return new Q(this.lat,this.lng,this.alt)}};function Vt(r,h,p){return r instanceof Q?r:A(r)&&typeof r[0]!="object"?r.length===3?new Q(r[0],r[1],r[2]):r.length===2?new Q(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new Q(r.lat,"lng"in r?r.lng:r.lon,r.alt):h===void 0?null:new Q(r,h,p)}var Ht={latLngToPoint:function(r,h){var p=this.projection.project(r),y=this.scale(h);return this.transformation._transform(p,y)},pointToLatLng:function(r,h){var p=this.scale(h),y=this.transformation.untransform(r,p);return this.projection.unproject(y)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var h=this.projection.bounds,p=this.scale(r),y=this.transformation.transform(h.min,p),E=this.transformation.transform(h.max,p);return new mt(y,E)},infinite:!1,wrapLatLng:function(r){var h=this.wrapLng?b(r.lng,this.wrapLng,!0):r.lng,p=this.wrapLat?b(r.lat,this.wrapLat,!0):r.lat,y=r.alt;return new Q(p,h,y)},wrapLatLngBounds:function(r){var h=r.getCenter(),p=this.wrapLatLng(h),y=h.lat-p.lat,E=h.lng-p.lng;if(y===0&&E===0)return r;var N=r.getSouthWest(),D=r.getNorthEast(),U=new Q(N.lat-y,N.lng-E),W=new Q(D.lat-y,D.lng-E);return new ve(U,W)}},vn=l({},Ht,{wrapLng:[-180,180],R:6371e3,distance:function(r,h){var p=Math.PI/180,y=r.lat*p,E=h.lat*p,N=Math.sin((h.lat-r.lat)*p/2),D=Math.sin((h.lng-r.lng)*p/2),U=N*N+Math.cos(y)*Math.cos(E)*D*D,W=2*Math.atan2(Math.sqrt(U),Math.sqrt(1-U));return this.R*W}}),Nr=6378137,Vi={R:Nr,MAX_LATITUDE:85.0511287798,project:function(r){var h=Math.PI/180,p=this.MAX_LATITUDE,y=Math.max(Math.min(p,r.lat),-p),E=Math.sin(y*h);return new z(this.R*r.lng*h,this.R*Math.log((1+E)/(1-E))/2)},unproject:function(r){var h=180/Math.PI;return new Q((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*h,r.x*h/this.R)},bounds:function(){var r=Nr*Math.PI;return new mt([-r,-r],[r,r])}()};function Zi(r,h,p,y){if(A(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=h,this._c=p,this._d=y}Zi.prototype={transform:function(r,h){return this._transform(r.clone(),h)},_transform:function(r,h){return h=h||1,r.x=h*(this._a*r.x+this._b),r.y=h*(this._c*r.y+this._d),r},untransform:function(r,h){return h=h||1,new z((r.x/h-this._b)/this._a,(r.y/h-this._d)/this._c)}};function dt(r,h,p,y){return new Zi(r,h,p,y)}var Tr=l({},vn,{code:"EPSG:3857",projection:Vi,transformation:function(){var r=.5/(Math.PI*Vi.R);return dt(r,.5,-r,.5)}()}),Bs=l({},Tr,{code:"EPSG:900913"});function ei(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function qs(r,h){var p="",y,E,N,D,U,W;for(y=0,N=r.length;y<N;y++){for(U=r[y],E=0,D=U.length;E<D;E++)W=U[E],p+=(E?"L":"M")+W.x+" "+W.y;p+=h?gt.svg?"z":"x":""}return p||"M0 0"}var Hi=document.documentElement.style,he="ActiveXObject"in window,Io=he&&!document.addEventListener,zt="msLaunchUri"in navigator&&!("documentMode"in document),en=ce("webkit"),jr=ce("android"),Us=ce("android 2")||ce("android 3"),de=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Qr=jr&&ce("Google")&&de<537&&!("AudioNode"in window),$r=!!window.opera,Ie=!zt&&ce("chrome"),yn=ce("gecko")&&!en&&!$r&&!he,K=!Ie&&ce("safari"),_n=ce("phantom"),ni="OTransition"in Hi,Nt=navigator.platform.indexOf("Win")===0,De=he&&"transition"in Hi,xn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Us,ts="MozPerspective"in Hi,Pa=!window.L_DISABLE_3D&&(De||xn||ts)&&!ni&&!_n,Pr=typeof orientation<"u"||ce("mobile"),Ma=Pr&&en,Ra=Pr&&xn,Co=!window.PointerEvent&&window.MSPointerEvent,So=!!(window.PointerEvent||Co),Be="ontouchstart"in window||!!window.TouchEvent,ae=!window.L_NO_TOUCH&&(Be||So),It=Pr&&$r,es=Pr&&yn,Qt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Nn=function(){var r=!1;try{var h=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",M,h),window.removeEventListener("testPassiveEventSupport",M,h)}catch{}return r}(),Ft=function(){return!!document.createElement("canvas").getContext}(),Te=!!(document.createElementNS&&ei("svg").createSVGRect),ie=!!Te&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Le=!Te&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var h=r.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}}();function ce(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var gt={ie:he,ielt9:Io,edge:zt,webkit:en,android:jr,android23:Us,androidStock:Qr,opera:$r,chrome:Ie,gecko:yn,safari:K,phantom:_n,opera12:ni,win:Nt,ie3d:De,webkit3d:xn,gecko3d:ts,any3d:Pa,mobile:Pr,mobileWebkit:Ma,mobileWebkit3d:Ra,msPointer:Co,pointer:So,touch:ae,touchNative:Be,mobileOpera:It,mobileGecko:es,retina:Qt,passiveEvents:Nn,canvas:Ft,svg:Te,vml:Le,inlineSvg:ie},ns=gt.msPointer?"MSPointerDown":"pointerdown",is=gt.msPointer?"MSPointerMove":"pointermove",rs=gt.msPointer?"MSPointerUp":"pointerup",qe=gt.msPointer?"MSPointerCancel":"pointercancel",Ln={touchstart:ns,touchmove:is,touchend:rs,touchcancel:qe},bo={touchstart:za,touchmove:ss,touchend:ss,touchcancel:ss},Wi={},No=!1;function Oa(r,h,p){return h==="touchstart"&&Fa(),bo[h]?(p=bo[h].bind(this,p),r.addEventListener(Ln[h],p,!1),p):(console.warn("wrong event specified:",h),L.Util.falseFn)}function Aa(r,h,p){if(!Ln[h]){console.warn("wrong event specified:",h);return}r.removeEventListener(Ln[h],p,!1)}function Da(r){Wi[r.pointerId]=r}function ka(r){Wi[r.pointerId]&&(Wi[r.pointerId]=r)}function To(r){delete Wi[r.pointerId]}function Fa(){No||(document.addEventListener(ns,Da,!0),document.addEventListener(is,ka,!0),document.addEventListener(rs,To,!0),document.addEventListener(qe,To,!0),No=!0)}function ss(r,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var p in Wi)h.touches.push(Wi[p]);h.changedTouches=[h],r(h)}}function za(r,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&qt(h),ss(r,h)}function Ga(r){var h={},p,y;for(y in r)p=r[y],h[y]=p&&p.bind?p.bind(r):p;return r=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var Vs=200;function Ba(r,h){r.addEventListener("dblclick",h);var p=0,y;function E(N){if(N.detail!==1){y=N.detail;return}if(!(N.pointerType==="mouse"||N.sourceCapabilities&&!N.sourceCapabilities.firesTouchEvents)){var D=Date.now();D-p<=Vs?(y++,y===2&&h(Ga(N))):y=1,p=D}}return r.addEventListener("click",E),{dblclick:h,simDblclick:E}}function qa(r,h){r.removeEventListener("dblclick",h.dblclick),r.removeEventListener("click",h.simDblclick)}var nn=Ye(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Mt=Ye(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),rn=Mt==="webkitTransition"||Mt==="OTransition"?Mt+"End":"transitionend";function St(r){return typeof r=="string"?document.getElementById(r):r}function Ii(r,h){var p=r.style[h]||r.currentStyle&&r.currentStyle[h];if((!p||p==="auto")&&document.defaultView){var y=document.defaultView.getComputedStyle(r,null);p=y?y[h]:null}return p==="auto"?null:p}function wt(r,h,p){var y=document.createElement(r);return y.className=h||"",p&&p.appendChild(y),y}function vt(r){var h=r.parentNode;h&&h.removeChild(r)}function ue(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function sn(r){var h=r.parentNode;h&&h.lastChild!==r&&h.appendChild(r)}function on(r){var h=r.parentNode;h&&h.firstChild!==r&&h.insertBefore(r,h.firstChild)}function et(r,h){if(r.classList!==void 0)return r.classList.contains(h);var p=Ci(r);return p.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(p)}function st(r,h){if(r.classList!==void 0)for(var p=k(h),y=0,E=p.length;y<E;y++)r.classList.add(p[y]);else if(!et(r,h)){var N=Ci(r);an(r,(N?N+" ":"")+h)}}function yt(r,h){r.classList!==void 0?r.classList.remove(h):an(r,q((" "+Ci(r)+" ").replace(" "+h+" "," ")))}function an(r,h){r.className.baseVal===void 0?r.className=h:r.className.baseVal=h}function Ci(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function $t(r,h){"opacity"in r.style?r.style.opacity=h:"filter"in r.style&&Xi(r,h)}function Xi(r,h){var p=!1,y="DXImageTransform.Microsoft.Alpha";try{p=r.filters.item(y)}catch{if(h===1)return}h=Math.round(h*100),p?(p.Enabled=h!==100,p.Opacity=h):r.style.filter+=" progid:"+y+"(opacity="+h+")"}function Ye(r){for(var h=document.documentElement.style,p=0;p<r.length;p++)if(r[p]in h)return r[p];return!1}function un(r,h,p){var y=h||new z(0,0);r.style[nn]=(gt.ie3d?"translate("+y.x+"px,"+y.y+"px)":"translate3d("+y.x+"px,"+y.y+"px,0)")+(p?" scale("+p+")":"")}function Dt(r,h){r._leaflet_pos=h,gt.any3d?un(r,h):(r.style.left=h.x+"px",r.style.top=h.y+"px")}function ln(r){return r._leaflet_pos||new z(0,0)}var ye,Vn,ke;if("onselectstart"in document)ye=function(){Tt(window,"selectstart",qt)},Vn=function(){Wt(window,"selectstart",qt)};else{var Zn=Ye(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ye=function(){if(Zn){var r=document.documentElement.style;ke=r[Zn],r[Zn]="none"}},Vn=function(){Zn&&(document.documentElement.style[Zn]=ke,ke=void 0)}}function Yi(){Tt(window,"dragstart",qt)}function Si(){Wt(window,"dragstart",qt)}var Tn,Hn;function ii(r){for(;r.tabIndex===-1;)r=r.parentNode;!r.style||(ri(),Tn=r,Hn=r.style.outline,r.style.outline="none",Tt(window,"keydown",ri))}function ri(){!Tn||(Tn.style.outline=Hn,Tn=void 0,Hn=void 0,Wt(window,"keydown",ri))}function os(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function Ji(r){var h=r.getBoundingClientRect();return{x:h.width/r.offsetWidth||1,y:h.height/r.offsetHeight||1,boundingClientRect:h}}var Pn={__proto__:null,TRANSFORM:nn,TRANSITION:Mt,TRANSITION_END:rn,get:St,getStyle:Ii,create:wt,remove:vt,empty:ue,toFront:sn,toBack:on,hasClass:et,addClass:st,removeClass:yt,setClass:an,getClass:Ci,setOpacity:$t,testProp:Ye,setTransform:un,setPosition:Dt,getPosition:ln,get disableTextSelection(){return ye},get enableTextSelection(){return Vn},disableImageDrag:Yi,enableImageDrag:Si,preventOutline:ii,restoreOutline:ri,getSizedParentNode:os,getScale:Ji};function Tt(r,h,p,y){if(h&&typeof h=="object")for(var E in h)ee(r,E,h[E],p);else{h=k(h);for(var N=0,D=h.length;N<D;N++)ee(r,h[N],p,y)}return this}var Pe="_leaflet_events";function Wt(r,h,p,y){if(arguments.length===1)Ce(r),delete r[Pe];else if(h&&typeof h=="object")for(var E in h)Zs(r,E,h[E],p);else if(h=k(h),arguments.length===2)Ce(r,function(U){return R(h,U)!==-1});else for(var N=0,D=h.length;N<D;N++)Zs(r,h[N],p,y);return this}function Ce(r,h){for(var p in r[Pe]){var y=p.split(/\d/)[0];(!h||h(y))&&Zs(r,y,null,null,p)}}var Se={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ee(r,h,p,y){var E=h+w(p)+(y?"_"+w(y):"");if(r[Pe]&&r[Pe][E])return this;var N=function(U){return p.call(y||r,U||window.event)},D=N;!gt.touchNative&&gt.pointer&&h.indexOf("touch")===0?N=Oa(r,h,N):gt.touch&&h==="dblclick"?N=Ba(r,N):"addEventListener"in r?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?r.addEventListener(Se[h]||h,N,gt.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(N=function(U){U=U||window.event,Je(r,U)&&D(U)},r.addEventListener(Se[h],N,!1)):r.addEventListener(h,D,!1):r.attachEvent("on"+h,N),r[Pe]=r[Pe]||{},r[Pe][E]=N}function Zs(r,h,p,y,E){E=E||h+w(p)+(y?"_"+w(y):"");var N=r[Pe]&&r[Pe][E];if(!N)return this;!gt.touchNative&&gt.pointer&&h.indexOf("touch")===0?Aa(r,h,N):gt.touch&&h==="dblclick"?qa(r,N):"removeEventListener"in r?r.removeEventListener(Se[h]||h,N,!1):r.detachEvent("on"+h,N),r[Pe][E]=null}function Mn(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function Zt(r){return ee(r,"wheel",Mn),this}function Wn(r){return Tt(r,"mousedown touchstart dblclick contextmenu",Mn),r._leaflet_disable_click=!0,this}function qt(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function Xn(r){return qt(r),Mn(r),this}function as(r,h){if(!h)return new z(r.clientX,r.clientY);var p=Ji(h),y=p.boundingClientRect;return new z((r.clientX-y.left)/p.x-h.clientLeft,(r.clientY-y.top)/p.y-h.clientTop)}var Po=gt.win&&gt.chrome?2*window.devicePixelRatio:gt.gecko?window.devicePixelRatio:1;function us(r){return gt.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/Po:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function Je(r,h){var p=h.relatedTarget;if(!p)return!0;try{for(;p&&p!==r;)p=p.parentNode}catch{return!1}return p!==r}var Mr={__proto__:null,on:Tt,off:Wt,stopPropagation:Mn,disableScrollPropagation:Zt,disableClickPropagation:Wn,preventDefault:qt,stop:Xn,getMousePosition:as,getWheelDelta:us,isExternalTarget:Je,addListener:Tt,removeListener:Wt},ls=ne.extend({run:function(r,h,p,y){this.stop(),this._el=r,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(y||.5,.2),this._startPos=ln(r),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=X(this._animate,this),this._step()},_step:function(r){var h=+new Date-this._startTime,p=this._duration*1e3;h<p?this._runFrame(this._easeOut(h/p),r):(this._runFrame(1),this._complete())},_runFrame:function(r,h){var p=this._startPos.add(this._offset.multiplyBy(r));h&&p._round(),Dt(this._el,p),this.fire("step")},_complete:function(){C(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),ht=ne.extend({options:{crs:Tr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,h){h=P(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=m(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(Vt(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Mt&&gt.any3d&&!gt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Tt(this._proxy,rn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,h,p){if(h=h===void 0?this._zoom:this._limitZoom(h),r=this._limitCenter(Vt(r),h,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=l({animate:p.animate},p.zoom),p.pan=l({animate:p.animate,duration:p.duration},p.pan));var y=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,h,p.zoom):this._tryAnimatedPan(r,p.pan);if(y)return clearTimeout(this._sizeTimer),this}return this._resetView(r,h),this},setZoom:function(r,h){return this._loaded?this.setView(this.getCenter(),r,{zoom:h}):(this._zoom=r,this)},zoomIn:function(r,h){return r=r||(gt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,h)},zoomOut:function(r,h){return r=r||(gt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,h)},setZoomAround:function(r,h,p){var y=this.getZoomScale(h),E=this.getSize().divideBy(2),N=r instanceof z?r:this.latLngToContainerPoint(r),D=N.subtract(E).multiplyBy(1-1/y),U=this.containerPointToLatLng(E.add(D));return this.setView(U,h,{zoom:p})},_getBoundsCenterZoom:function(r,h){h=h||{},r=r.getBounds?r.getBounds():Bt(r);var p=at(h.paddingTopLeft||h.padding||[0,0]),y=at(h.paddingBottomRight||h.padding||[0,0]),E=this.getBoundsZoom(r,!1,p.add(y));if(E=typeof h.maxZoom=="number"?Math.min(h.maxZoom,E):E,E===1/0)return{center:r.getCenter(),zoom:E};var N=y.subtract(p).divideBy(2),D=this.project(r.getSouthWest(),E),U=this.project(r.getNorthEast(),E),W=this.unproject(D.add(U).divideBy(2).add(N),E);return{center:W,zoom:E}},fitBounds:function(r,h){if(r=Bt(r),!r.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(r,h);return this.setView(p.center,p.zoom,h)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,h){return this.setView(r,this._zoom,{pan:h})},panBy:function(r,h){if(r=at(r).round(),h=h||{},!r.x&&!r.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ls,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){st(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,p,h.duration||.25,h.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,h,p){if(p=p||{},p.animate===!1||!gt.any3d)return this.setView(r,h,p);this._stop();var y=this.project(this.getCenter()),E=this.project(r),N=this.getSize(),D=this._zoom;r=Vt(r),h=h===void 0?D:h;var U=Math.max(N.x,N.y),W=U*this.getZoomScale(D,h),tt=E.distanceTo(y)||1,ft=1.42,Et=ft*ft;function Ct(Ut){var dr=Ut?-1:1,pe=Ut?W:U,Ze=W*W-U*U+dr*Et*Et*tt*tt,Ls=2*pe*Et*tt,gr=Ze/Ls,pr=Math.sqrt(gr*gr+1)-gr,Es=pr<1e-9?-18:Math.log(pr);return Es}function tn(Ut){return(Math.exp(Ut)-Math.exp(-Ut))/2}function Oe(Ut){return(Math.exp(Ut)+Math.exp(-Ut))/2}function hr(Ut){return tn(Ut)/Oe(Ut)}var Ae=Ct(0);function cr(Ut){return U*(Oe(Ae)/Oe(Ae+ft*Ut))}function js(Ut){return U*(Oe(Ae)*hr(Ae+ft*Ut)-tn(Ae))/Et}function fr(Ut){return 1-Math.pow(1-Ut,1.5)}var _s=Date.now(),xs=(Ct(1)-Ae)/ft,qr=p.duration?1e3*p.duration:1e3*xs*.8;function Ur(){var Ut=(Date.now()-_s)/qr,dr=fr(Ut)*xs;Ut<=1?(this._flyToFrame=X(Ur,this),this._move(this.unproject(y.add(E.subtract(y).multiplyBy(js(dr)/tt)),D),this.getScaleZoom(U/cr(dr),D),{flyTo:!0})):this._move(r,h)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),Ur.call(this),this},flyToBounds:function(r,h){var p=this._getBoundsCenterZoom(r,h);return this.flyTo(p.center,p.zoom,h)},setMaxBounds:function(r){if(r=Bt(r),r.isValid())this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds);else return this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds);return this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(r){var h=this.options.minZoom;return this.options.minZoom=r,this._loaded&&h!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var h=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&h!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,h){this._enforcingBounds=!0;var p=this.getCenter(),y=this._limitCenter(p,this._zoom,Bt(r));return p.equals(y)||this.panTo(y,h),this._enforcingBounds=!1,this},panInside:function(r,h){h=h||{};var p=at(h.paddingTopLeft||h.padding||[0,0]),y=at(h.paddingBottomRight||h.padding||[0,0]),E=this.project(this.getCenter()),N=this.project(r),D=this.getPixelBounds(),U=jt([D.min.add(p),D.max.subtract(y)]),W=U.getSize();if(!U.contains(N)){this._enforcingBounds=!0;var tt=N.subtract(U.getCenter()),ft=U.extend(N).getSize().subtract(W);E.x+=tt.x<0?-ft.x:ft.x,E.y+=tt.y<0?-ft.y:ft.y,this.panTo(this.unproject(E),h),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=l({animate:!1,pan:!0},r===!0?{animate:!0}:r);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),y=h.divideBy(2).round(),E=p.divideBy(2).round(),N=y.subtract(E);return!N.x&&!N.y?this:(r.animate&&r.pan?this.panBy(N):(r.pan&&this._rawPanBy(N),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(m(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=l({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=m(this._handleGeolocationResponse,this),p=m(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,p,r):navigator.geolocation.getCurrentPosition(h,p,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(!!this._container._leaflet_id){var h=r.code,p=r.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(r){if(!!this._container._leaflet_id){var h=r.coords.latitude,p=r.coords.longitude,y=new Q(h,p),E=y.toBounds(r.coords.accuracy*2),N=this._locateOptions;if(N.setView){var D=this.getBoundsZoom(E);this.setView(y,N.maxZoom?Math.min(D,N.maxZoom):D)}var U={latlng:y,bounds:E,timestamp:r.timestamp};for(var W in r.coords)typeof r.coords[W]=="number"&&(U[W]=r.coords[W]);this.fire("locationfound",U)}},addHandler:function(r,h){if(!h)return this;var p=this[r]=new h(this);return this._handlers.push(p),this.options[r]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),vt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(C(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)vt(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,h){var p="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),y=wt("div",p,h||this._mapPane);return r&&(this._panes[r]=y),y},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),h=this.unproject(r.getBottomLeft()),p=this.unproject(r.getTopRight());return new ve(h,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,h,p){r=Bt(r),p=at(p||[0,0]);var y=this.getZoom()||0,E=this.getMinZoom(),N=this.getMaxZoom(),D=r.getNorthWest(),U=r.getSouthEast(),W=this.getSize().subtract(p),tt=jt(this.project(U,y),this.project(D,y)).getSize(),ft=gt.any3d?this.options.zoomSnap:1,Et=W.x/tt.x,Ct=W.y/tt.y,tn=h?Math.max(Et,Ct):Math.min(Et,Ct);return y=this.getScaleZoom(tn,y),ft&&(y=Math.round(y/(ft/100))*(ft/100),y=h?Math.ceil(y/ft)*ft:Math.floor(y/ft)*ft),Math.max(E,Math.min(N,y))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,h){var p=this._getTopLeftPoint(r,h);return new mt(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,h){var p=this.options.crs;return h=h===void 0?this._zoom:h,p.scale(r)/p.scale(h)},getScaleZoom:function(r,h){var p=this.options.crs;h=h===void 0?this._zoom:h;var y=p.zoom(r*p.scale(h));return isNaN(y)?1/0:y},project:function(r,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(Vt(r),h)},unproject:function(r,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(at(r),h)},layerPointToLatLng:function(r){var h=at(r).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(r){var h=this.project(Vt(r))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(Vt(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(Bt(r))},distance:function(r,h){return this.options.crs.distance(Vt(r),Vt(h))},containerPointToLayerPoint:function(r){return at(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return at(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var h=this.containerPointToLayerPoint(at(r));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Vt(r)))},mouseEventToContainerPoint:function(r){return as(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var h=this._container=St(r);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Tt(h,"scroll",this._onScroll,this),this._containerId=w(h)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&gt.any3d,st(r,"leaflet-container"+(gt.touch?" leaflet-touch":"")+(gt.retina?" leaflet-retina":"")+(gt.ielt9?" leaflet-oldie":"")+(gt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=Ii(r,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Dt(this._mapPane,new z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(st(r.markerPane,"leaflet-zoom-hide"),st(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,h){Dt(this._mapPane,new z(0,0));var p=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var y=this._zoom!==h;this._moveStart(y,!1)._move(r,h)._moveEnd(y),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(r,h){return r&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(r,h,p,y){h===void 0&&(h=this._zoom);var E=this._zoom!==h;return this._zoom=h,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),y?p&&p.pinch&&this.fire("zoom",p):((E||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return C(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){Dt(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[w(this._container)]=this;var h=r?Wt:Tt;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),gt.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){C(this._resizeRequest),this._resizeRequest=X(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,h){for(var p=[],y,E=h==="mouseout"||h==="mouseover",N=r.target||r.srcElement,D=!1;N;){if(y=this._targets[w(N)],y&&(h==="click"||h==="preclick")&&this._draggableMoved(y)){D=!0;break}if(y&&y.listens(h,!0)&&(E&&!Je(N,r)||(p.push(y),E))||N===this._container)break;N=N.parentNode}return!p.length&&!D&&!E&&this.listens(h,!0)&&(p=[this]),p},_isClickDisabled:function(r){for(;r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var h=r.target||r.srcElement;if(!(!this._loaded||h._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(h))){var p=r.type;p==="mousedown"&&ii(h),this._fireDOMEvent(r,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,h,p){if(r.type==="click"){var y=l({},r);y.type="preclick",this._fireDOMEvent(y,y.type,p)}var E=this._findEventTargets(r,h);if(p){for(var N=[],D=0;D<p.length;D++)p[D].listens(h,!0)&&N.push(p[D]);E=N.concat(E)}if(!!E.length){h==="contextmenu"&&qt(r);var U=E[0],W={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var tt=U.getLatLng&&(!U._radius||U._radius<=10);W.containerPoint=tt?this.latLngToContainerPoint(U.getLatLng()):this.mouseEventToContainerPoint(r),W.layerPoint=this.containerPointToLayerPoint(W.containerPoint),W.latlng=tt?U.getLatLng():this.layerPointToLatLng(W.layerPoint)}for(D=0;D<E.length;D++)if(E[D].fire(h,W,!0),W.originalEvent._stopped||E[D].options.bubblingMouseEvents===!1&&R(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,h=this._handlers.length;r<h;r++)this._handlers[r].disable()},whenReady:function(r,h){return this._loaded?r.call(h||this,{target:this}):this.on("load",r,h),this},_getMapPanePos:function(){return ln(this._mapPane)||new z(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,h){var p=r&&h!==void 0?this._getNewPixelOrigin(r,h):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,h){var p=this.getSize()._divideBy(2);return this.project(r,h)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,h,p){var y=this._getNewPixelOrigin(p,h);return this.project(r,h)._subtract(y)},_latLngBoundsToNewLayerBounds:function(r,h,p){var y=this._getNewPixelOrigin(p,h);return jt([this.project(r.getSouthWest(),h)._subtract(y),this.project(r.getNorthWest(),h)._subtract(y),this.project(r.getSouthEast(),h)._subtract(y),this.project(r.getNorthEast(),h)._subtract(y)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,h,p){if(!p)return r;var y=this.project(r,h),E=this.getSize().divideBy(2),N=new mt(y.subtract(E),y.add(E)),D=this._getBoundsOffset(N,p,h);return D.round().equals([0,0])?r:this.unproject(y.add(D),h)},_limitOffset:function(r,h){if(!h)return r;var p=this.getPixelBounds(),y=new mt(p.min.add(r),p.max.add(r));return r.add(this._getBoundsOffset(y,h))},_getBoundsOffset:function(r,h,p){var y=jt(this.project(h.getNorthEast(),p),this.project(h.getSouthWest(),p)),E=y.min.subtract(r.min),N=y.max.subtract(r.max),D=this._rebound(E.x,-N.x),U=this._rebound(E.y,-N.y);return new z(D,U)},_rebound:function(r,h){return r+h>0?Math.round(r-h)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(h))},_limitZoom:function(r){var h=this.getMinZoom(),p=this.getMaxZoom(),y=gt.any3d?this.options.zoomSnap:1;return y&&(r=Math.round(r/y)*y),Math.max(h,Math.min(p,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){yt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,h){var p=this._getCenterOffset(r)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,h),!0)},_createAnimProxy:function(){var r=this._proxy=wt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(h){var p=nn,y=this._proxy.style[p];un(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),y===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){vt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),h=this.getZoom();un(this._proxy,this.project(r,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,h,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var y=this.getZoomScale(h),E=this._getCenterOffset(r)._divideBy(1-1/y);return p.animate!==!0&&!this.getSize().contains(E)?!1:(X(function(){this._moveStart(!0,!1)._animateZoom(r,h,!0)},this),!0)},_animateZoom:function(r,h,p,y){!this._mapPane||(p&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=h,st(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:h,noUpdate:y}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(m(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&yt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function hn(r,h){return new ht(r,h)}var Ue=_t.extend({options:{position:"topright"},initialize:function(r){P(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var h=this._map;return h&&h.removeControl(this),this.options.position=r,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var h=this._container=this.onAdd(r),p=this.getPosition(),y=r._controlCorners[p];return st(h,"leaflet-control"),p.indexOf("bottom")!==-1?y.insertBefore(h,y.firstChild):y.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(vt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),si=function(r){return new Ue(r)};ht.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},h="leaflet-",p=this._controlContainer=wt("div",h+"control-container",this._container);function y(E,N){var D=h+E+" "+h+N;r[E+N]=wt("div",D,p)}y("top","left"),y("top","right"),y("bottom","left"),y("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)vt(this._controlCorners[r]);vt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Yn=Ue.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,h,p,y){return p<y?-1:y<p?1:0}},initialize:function(r,h,p){P(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var y in r)this._addLayer(r[y],y);for(y in h)this._addLayer(h[y],y,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return Ue.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,h){return this._addLayer(r,h),this._map?this._update():this},addOverlay:function(r,h){return this._addLayer(r,h,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var h=this._getLayer(w(r));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){st(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(st(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):yt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return yt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",h=this._container=wt("div",r),p=this.options.collapsed;h.setAttribute("aria-haspopup",!0),Wn(h),Zt(h);var y=this._section=wt("section",r+"-list");p&&(this._map.on("click",this.collapse,this),Tt(h,{mouseenter:function(){Tt(y,"click",qt),this.expand(),setTimeout(function(){Wt(y,"click",qt)})},mouseleave:this.collapse},this));var E=this._layersLink=wt("a",r+"-toggle",h);E.href="#",E.title="Layers",E.setAttribute("role","button"),Tt(E,"click",qt),Tt(E,"focus",this.expand,this),p||this.expand(),this._baseLayersList=wt("div",r+"-base",y),this._separator=wt("div",r+"-separator",y),this._overlaysList=wt("div",r+"-overlays",y),h.appendChild(y)},_getLayer:function(r){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&w(this._layers[h].layer)===r)return this._layers[h]},_addLayer:function(r,h,p){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:h,overlay:p}),this.options.sortLayers&&this._layers.sort(m(function(y,E){return this.options.sortFunction(y.layer,E.layer,y.name,E.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ue(this._baseLayersList),ue(this._overlaysList),this._layerControlInputs=[];var r,h,p,y,E=0;for(p=0;p<this._layers.length;p++)y=this._layers[p],this._addItem(y),h=h||y.overlay,r=r||!y.overlay,E+=y.overlay?0:1;return this.options.hideSingleBase&&(r=r&&E>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=h&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var h=this._getLayer(w(r.target)),p=h.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;p&&this._map.fire(p,h)},_createRadioElement:function(r,h){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(h?' checked="checked"':"")+"/>",y=document.createElement("div");return y.innerHTML=p,y.firstChild},_addItem:function(r){var h=document.createElement("label"),p=this._map.hasLayer(r.layer),y;r.overlay?(y=document.createElement("input"),y.type="checkbox",y.className="leaflet-control-layers-selector",y.defaultChecked=p):y=this._createRadioElement("leaflet-base-layers_"+w(this),p),this._layerControlInputs.push(y),y.layerId=w(r.layer),Tt(y,"click",this._onInputClick,this);var E=document.createElement("span");E.innerHTML=" "+r.name;var N=document.createElement("span");h.appendChild(N),N.appendChild(y),N.appendChild(E);var D=r.overlay?this._overlaysList:this._baseLayersList;return D.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){var r=this._layerControlInputs,h,p,y=[],E=[];this._handlingClick=!0;for(var N=r.length-1;N>=0;N--)h=r[N],p=this._getLayer(h.layerId).layer,h.checked?y.push(p):h.checked||E.push(p);for(N=0;N<E.length;N++)this._map.hasLayer(E[N])&&this._map.removeLayer(E[N]);for(N=0;N<y.length;N++)this._map.hasLayer(y[N])||this._map.addLayer(y[N]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,h,p,y=this._map.getZoom(),E=r.length-1;E>=0;E--)h=r[E],p=this._getLayer(h.layerId).layer,h.disabled=p.options.minZoom!==void 0&&y<p.options.minZoom||p.options.maxZoom!==void 0&&y>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this}}),Rr=function(r,h,p){return new Yn(r,h,p)},Me=Ue.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var h="leaflet-control-zoom",p=wt("div",h+" leaflet-bar"),y=this.options;return this._zoomInButton=this._createButton(y.zoomInText,y.zoomInTitle,h+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(y.zoomOutText,y.zoomOutTitle,h+"-out",p,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,h,p,y,E){var N=wt("a",p,y);return N.innerHTML=r,N.href="#",N.title=h,N.setAttribute("role","button"),N.setAttribute("aria-label",h),Wn(N),Tt(N,"click",Xn),Tt(N,"click",E,this),Tt(N,"click",this._refocusOnMap,this),N},_updateDisabled:function(){var r=this._map,h="leaflet-disabled";yt(this._zoomInButton,h),yt(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(st(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(st(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});ht.mergeOptions({zoomControl:!0}),ht.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Me,this.addControl(this.zoomControl))});var Or=function(r){return new Me(r)},Rn=Ue.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var h="leaflet-control-scale",p=wt("div",h),y=this.options;return this._addScales(y,h+"-line",p),r.on(y.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),p},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,h,p){r.metric&&(this._mScale=wt("div",h,p)),r.imperial&&(this._iScale=wt("div",h,p))},_update:function(){var r=this._map,h=r.getSize().y/2,p=r.distance(r.containerPointToLatLng([0,h]),r.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(p)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var h=this._getRoundNum(r),p=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,p,h/r)},_updateImperial:function(r){var h=r*3.2808399,p,y,E;h>5280?(p=h/5280,y=this._getRoundNum(p),this._updateScale(this._iScale,y+" mi",y/p)):(E=this._getRoundNum(h),this._updateScale(this._iScale,E+" ft",E/h))},_updateScale:function(r,h,p){r.style.width=Math.round(this.options.maxWidth*p)+"px",r.innerHTML=h},_getRoundNum:function(r){var h=Math.pow(10,(Math.floor(r)+"").length-1),p=r/h;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,h*p}}),Ar=function(r){return new Rn(r)},bi='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',oi=Ue.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(gt.inlineSvg?bi+" ":"")+"Leaflet</a>"},initialize:function(r){P(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=wt("div","leaflet-control-attribution"),Wn(this._container);for(var h in r._layers)r._layers[h].getAttribution&&this.addAttribution(r._layers[h].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(!!this._map){var r=[];for(var h in this._attributions)this._attributions[h]&&r.push(h);var p=[];this.options.prefix&&p.push(this.options.prefix),r.length&&p.push(r.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});ht.mergeOptions({attributionControl:!0}),ht.addInitHook(function(){this.options.attributionControl&&new oi().addTo(this)});var $=function(r){return new oi(r)};Ue.Layers=Yn,Ue.Zoom=Me,Ue.Scale=Rn,Ue.Attribution=oi,si.layers=Rr,si.zoom=Or,si.scale=Ar,si.attribution=$;var le=_t.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});le.addTo=function(r,h){return r.addHandler(h,this),this};var re={Events:Rt},Ni=gt.touch?"touchstart mousedown":"mousedown",En=ne.extend({options:{clickTolerance:3},initialize:function(r,h,p,y){P(this,y),this._element=r,this._dragStartTarget=h||r,this._preventOutline=p},enable:function(){this._enabled||(Tt(this._dragStartTarget,Ni,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(En._dragging===this&&this.finishDrag(!0),Wt(this._dragStartTarget,Ni,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(!!this._enabled&&(this._moved=!1,!et(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){En._dragging===this&&this.finishDrag();return}if(!(En._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(En._dragging=this,this._preventOutline&&ii(this._element),Yi(),ye(),!this._moving)){this.fire("down");var h=r.touches?r.touches[0]:r,p=os(this._element);this._startPoint=new z(h.clientX,h.clientY),this._startPos=ln(this._element),this._parentScale=Ji(p);var y=r.type==="mousedown";Tt(document,y?"mousemove":"touchmove",this._onMove,this),Tt(document,y?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(!!this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var h=r.touches&&r.touches.length===1?r.touches[0]:r,p=new z(h.clientX,h.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,qt(r),this._moved||(this.fire("dragstart"),this._moved=!0,st(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),st(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),Dt(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){!this._enabled||this.finishDrag()},finishDrag:function(r){yt(document.body,"leaflet-dragging"),this._lastTarget&&(yt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Wt(document,"mousemove touchmove",this._onMove,this),Wt(document,"mouseup touchend touchcancel",this._onUp,this),Si(),Vn(),this._moved&&this._moving&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,En._dragging=!1}});function Ki(r,h){if(!h||!r.length)return r.slice();var p=h*h;return r=Ti(r,p),r=ji(r,p),r}function Jn(r,h,p){return Math.sqrt(ui(r,h,p,!0))}function On(r,h,p){return ui(r,h,p)}function ji(r,h){var p=r.length,y=typeof Uint8Array!=void 0+""?Uint8Array:Array,E=new y(p);E[0]=E[p-1]=1,Ke(r,E,h,0,p-1);var N,D=[];for(N=0;N<p;N++)E[N]&&D.push(r[N]);return D}function Ke(r,h,p,y,E){var N=0,D,U,W;for(U=y+1;U<=E-1;U++)W=ui(r[U],r[y],r[E],!0),W>N&&(D=U,N=W);N>p&&(h[D]=1,Ke(r,h,p,y,D),Ke(r,h,p,D,E))}function Ti(r,h){for(var p=[r[0]],y=1,E=0,N=r.length;y<N;y++)Hs(r[y],r[E])>h&&(p.push(r[y]),E=y);return E<N-1&&p.push(r[N-1]),p}var ai;function cn(r,h,p,y,E){var N=y?ai:Kn(r,p),D=Kn(h,p),U,W,tt;for(ai=D;;){if(!(N|D))return[r,h];if(N&D)return!1;U=N||D,W=Pi(r,h,U,p,E),tt=Kn(W,p),U===N?(r=W,N=tt):(h=W,D=tt)}}function Pi(r,h,p,y,E){var N=h.x-r.x,D=h.y-r.y,U=y.min,W=y.max,tt,ft;return p&8?(tt=r.x+N*(W.y-r.y)/D,ft=W.y):p&4?(tt=r.x+N*(U.y-r.y)/D,ft=U.y):p&2?(tt=W.x,ft=r.y+D*(W.x-r.x)/N):p&1&&(tt=U.x,ft=r.y+D*(U.x-r.x)/N),new z(tt,ft,E)}function Kn(r,h){var p=0;return r.x<h.min.x?p|=1:r.x>h.max.x&&(p|=2),r.y<h.min.y?p|=4:r.y>h.max.y&&(p|=8),p}function Hs(r,h){var p=h.x-r.x,y=h.y-r.y;return p*p+y*y}function ui(r,h,p,y){var E=h.x,N=h.y,D=p.x-E,U=p.y-N,W=D*D+U*U,tt;return W>0&&(tt=((r.x-E)*D+(r.y-N)*U)/W,tt>1?(E=p.x,N=p.y):tt>0&&(E+=D*tt,N+=U*tt)),D=r.x-E,U=r.y-N,y?D*D+U*U:new z(E,N)}function ge(r){return!A(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function li(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ge(r)}var hs={__proto__:null,simplify:Ki,pointToSegmentDistance:Jn,closestPointOnSegment:On,clipSegment:cn,_getEdgeIntersection:Pi,_getBitCode:Kn,_sqClosestPointOnSegment:ui,isFlat:ge,_flat:li};function Mi(r,h,p){var y,E=[1,4,2,8],N,D,U,W,tt,ft,Et,Ct;for(N=0,ft=r.length;N<ft;N++)r[N]._code=Kn(r[N],h);for(U=0;U<4;U++){for(Et=E[U],y=[],N=0,ft=r.length,D=ft-1;N<ft;D=N++)W=r[N],tt=r[D],W._code&Et?tt._code&Et||(Ct=Pi(tt,W,Et,h,p),Ct._code=Kn(Ct,h),y.push(Ct)):(tt._code&Et&&(Ct=Pi(tt,W,Et,h,p),Ct._code=Kn(Ct,h),y.push(Ct)),y.push(W));r=y}return r}var Ws={__proto__:null,clipPolygon:Mi},fn={project:function(r){return new z(r.lng,r.lat)},unproject:function(r){return new Q(r.y,r.x)},bounds:new mt([-180,-90],[180,90])},Qi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new mt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var h=Math.PI/180,p=this.R,y=r.lat*h,E=this.R_MINOR/p,N=Math.sqrt(1-E*E),D=N*Math.sin(y),U=Math.tan(Math.PI/4-y/2)/Math.pow((1-D)/(1+D),N/2);return y=-p*Math.log(Math.max(U,1e-10)),new z(r.lng*h*p,y)},unproject:function(r){for(var h=180/Math.PI,p=this.R,y=this.R_MINOR/p,E=Math.sqrt(1-y*y),N=Math.exp(-r.y/p),D=Math.PI/2-2*Math.atan(N),U=0,W=.1,tt;U<15&&Math.abs(W)>1e-7;U++)tt=E*Math.sin(D),tt=Math.pow((1-tt)/(1+tt),E/2),W=Math.PI/2-2*Math.atan(N*tt)-D,D+=W;return new Q(D*h,r.x*h/p)}},hi={__proto__:null,LonLat:fn,Mercator:Qi,SphericalMercator:Vi},cs=l({},vn,{code:"EPSG:3395",projection:Qi,transformation:function(){var r=.5/(Math.PI*Qi.R);return dt(r,.5,-r,.5)}()}),ci=l({},vn,{code:"EPSG:4326",projection:fn,transformation:dt(1/180,1,-1/180,.5)}),Xs=l({},Ht,{projection:fn,transformation:dt(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,h){var p=h.lng-r.lng,y=h.lat-r.lat;return Math.sqrt(p*p+y*y)},infinite:!0});Ht.Earth=vn,Ht.EPSG3395=cs,Ht.EPSG3857=Tr,Ht.EPSG900913=Bs,Ht.EPSG4326=ci,Ht.Simple=Xs;var He=ne.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[w(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[w(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var h=r.target;if(!!h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var p=this.getEvents();h.on(p,this),this.once("remove",function(){h.off(p,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});ht.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var h=w(r);return this._layers[h]?this:(this._layers[h]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var h=w(r);return this._layers[h]?(this._loaded&&r.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return w(r)in this._layers},eachLayer:function(r,h){for(var p in this._layers)r.call(h,this._layers[p]);return this},_addLayers:function(r){r=r?A(r)?r:[r]:[];for(var h=0,p=r.length;h<p;h++)this.addLayer(r[h])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[w(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var h=w(r);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,h=-1/0,p=this._getZoomSpan();for(var y in this._zoomBoundLayers){var E=this._zoomBoundLayers[y].options;r=E.minZoom===void 0?r:Math.min(r,E.minZoom),h=E.maxZoom===void 0?h:Math.max(h,E.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=r===1/0?void 0:r,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var jn=He.extend({initialize:function(r,h){P(this,h),this._layers={};var p,y;if(r)for(p=0,y=r.length;p<y;p++)this.addLayer(r[p])},addLayer:function(r){var h=this.getLayerId(r);return this._layers[h]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var h=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(r){var h=typeof r=="number"?r:this.getLayerId(r);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var h=Array.prototype.slice.call(arguments,1),p,y;for(p in this._layers)y=this._layers[p],y[r]&&y[r].apply(y,h);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,h){for(var p in this._layers)r.call(h,this._layers[p]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return w(r)}}),Ys=function(r,h){return new jn(r,h)},fe=jn.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),jn.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),jn.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new ve;for(var h in this._layers){var p=this._layers[h];r.extend(p.getBounds?p.getBounds():p.getLatLng())}return r}}),fs=function(r,h){return new fe(r,h)},An=_t.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){P(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,h){var p=this._getIconUrl(r);if(!p){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var y=this._createImg(p,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(y,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),y},_setIconStyles:function(r,h){var p=this.options,y=p[h+"Size"];typeof y=="number"&&(y=[y,y]);var E=at(y),N=at(h==="shadow"&&p.shadowAnchor||p.iconAnchor||E&&E.divideBy(2,!0));r.className="leaflet-marker-"+h+" "+(p.className||""),N&&(r.style.marginLeft=-N.x+"px",r.style.marginTop=-N.y+"px"),E&&(r.style.width=E.x+"px",r.style.height=E.y+"px")},_createImg:function(r,h){return h=h||document.createElement("img"),h.src=r,h},_getIconUrl:function(r){return gt.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function ds(r){return new An(r)}var fi=An.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof fi.imagePath!="string"&&(fi.imagePath=this._detectIconPath()),(this.options.imagePath||fi.imagePath)+An.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var h=function(p,y,E){var N=y.exec(p);return N&&N[E]};return r=h(r,/^url\((['"])?(.+)\1\)$/,2),r&&h(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=wt("div","leaflet-default-icon-path",document.body),h=Ii(r,"background-image")||Ii(r,"backgroundImage");if(document.body.removeChild(r),h=this._stripUrl(h),h)return h;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),gs=le.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new En(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),st(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&yt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var h=this._marker,p=h._map,y=this._marker.options.autoPanSpeed,E=this._marker.options.autoPanPadding,N=ln(h._icon),D=p.getPixelBounds(),U=p.getPixelOrigin(),W=jt(D.min._subtract(U).add(E),D.max._subtract(U).subtract(E));if(!W.contains(N)){var tt=at((Math.max(W.max.x,N.x)-W.max.x)/(D.max.x-W.max.x)-(Math.min(W.min.x,N.x)-W.min.x)/(D.min.x-W.min.x),(Math.max(W.max.y,N.y)-W.max.y)/(D.max.y-W.max.y)-(Math.min(W.min.y,N.y)-W.min.y)/(D.min.y-W.min.y)).multiplyBy(y);p.panBy(tt,{animate:!1}),this._draggable._newPos._add(tt),this._draggable._startPos._add(tt),Dt(h._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=X(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(C(this._panRequest),this._panRequest=X(this._adjustPan.bind(this,r)))},_onDrag:function(r){var h=this._marker,p=h._shadow,y=ln(h._icon),E=h._map.layerPointToLatLng(y);p&&Dt(p,y),h._latlng=E,r.latlng=E,r.oldLatLng=this._oldLatLng,h.fire("move",r).fire("drag",r)},_onDragEnd:function(r){C(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),$i=He.extend({options:{icon:new fi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,h){P(this,h),this._latlng=Vt(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var h=this._latlng;return this._latlng=Vt(r),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=r.icon.createIcon(this._icon),y=!1;p!==this._icon&&(this._icon&&this._removeIcon(),y=!0,r.title&&(p.title=r.title),p.tagName==="IMG"&&(p.alt=r.alt||"")),st(p,h),r.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Tt(p,"focus",this._panOnFocus,this);var E=r.icon.createShadow(this._shadow),N=!1;E!==this._shadow&&(this._removeShadow(),N=!0),E&&(st(E,h),E.alt=""),this._shadow=E,r.opacity<1&&this._updateOpacity(),y&&this.getPane().appendChild(this._icon),this._initInteraction(),E&&N&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Wt(this._icon,"focus",this._panOnFocus,this),vt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&vt(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&Dt(this._icon,r),this._shadow&&Dt(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var h=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(h)},_initInteraction:function(){if(!!this.options.interactive&&(st(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),gs)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new gs(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&$t(this._icon,r),this._shadow&&$t(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(!!r){var h=this.options.icon.options,p=h.iconSize?at(h.iconSize):at(0,0),y=h.iconAnchor?at(h.iconAnchor):at(0,0);r.panInside(this._latlng,{paddingTopLeft:y,paddingBottomRight:p.subtract(y)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Dr(r,h){return new $i(r,h)}var Dn=He.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return P(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ve=Dn.extend({options:{fill:!0,radius:10},initialize:function(r,h){P(this,h),this._latlng=Vt(r),this._radius=this.options.radius},setLatLng:function(r){var h=this._latlng;return this._latlng=Vt(r),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var h=r&&r.radius||this._radius;return Dn.prototype.setStyle.call(this,r),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,h=this._radiusY||r,p=this._clickTolerance(),y=[r+p,h+p];this._pxBounds=new mt(this._point.subtract(y),this._point.add(y))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function je(r,h){return new Ve(r,h)}var Re=Ve.extend({initialize:function(r,h,p){if(typeof h=="number"&&(h=l({},p,{radius:h})),P(this,h),this._latlng=Vt(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new ve(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:Dn.prototype.setStyle,_project:function(){var r=this._latlng.lng,h=this._latlng.lat,p=this._map,y=p.options.crs;if(y.distance===vn.distance){var E=Math.PI/180,N=this._mRadius/vn.R/E,D=p.project([h+N,r]),U=p.project([h-N,r]),W=D.add(U).divideBy(2),tt=p.unproject(W).lat,ft=Math.acos((Math.cos(N*E)-Math.sin(h*E)*Math.sin(tt*E))/(Math.cos(h*E)*Math.cos(tt*E)))/E;(isNaN(ft)||ft===0)&&(ft=N/Math.cos(Math.PI/180*h)),this._point=W.subtract(p.getPixelOrigin()),this._radius=isNaN(ft)?0:W.x-p.project([tt,r-ft]).x,this._radiusY=W.y-D.y}else{var Et=y.unproject(y.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(Et).x}this._updateBounds()}});function di(r,h,p){return new Re(r,h,p)}var Fe=Dn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,h){P(this,h),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var h=1/0,p=null,y=ui,E,N,D=0,U=this._parts.length;D<U;D++)for(var W=this._parts[D],tt=1,ft=W.length;tt<ft;tt++){E=W[tt-1],N=W[tt];var Et=y(r,E,N,!0);Et<h&&(h=Et,p=y(r,E,N))}return p&&(p.distance=Math.sqrt(h)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var r,h,p,y,E,N,D,U=this._rings[0],W=U.length;if(!W)return null;for(r=0,h=0;r<W-1;r++)h+=U[r].distanceTo(U[r+1])/2;if(h===0)return this._map.layerPointToLatLng(U[0]);for(r=0,y=0;r<W-1;r++)if(E=U[r],N=U[r+1],p=E.distanceTo(N),y+=p,y>h)return D=(y-h)/p,this._map.layerPointToLatLng([N.x-D*(N.x-E.x),N.y-D*(N.y-E.y)])},getBounds:function(){return this._bounds},addLatLng:function(r,h){return h=h||this._defaultShape(),r=Vt(r),h.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new ve,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return ge(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var h=[],p=ge(r),y=0,E=r.length;y<E;y++)p?(h[y]=Vt(r[y]),this._bounds.extend(h[y])):h[y]=this._convertLatLngs(r[y]);return h},_project:function(){var r=new mt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),h=new z(r,r);!this._rawPxBounds||(this._pxBounds=new mt([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(r,h,p){var y=r[0]instanceof Q,E=r.length,N,D;if(y){for(D=[],N=0;N<E;N++)D[N]=this._map.latLngToLayerPoint(r[N]),p.extend(D[N]);h.push(D)}else for(N=0;N<E;N++)this._projectLatlngs(r[N],h,p)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,p,y,E,N,D,U,W;for(p=0,E=0,N=this._rings.length;p<N;p++)for(W=this._rings[p],y=0,D=W.length;y<D-1;y++)U=cn(W[y],W[y+1],r,y,!0),U&&(h[E]=h[E]||[],h[E].push(U[0]),(U[1]!==W[y+1]||y===D-2)&&(h[E].push(U[1]),E++))}},_simplifyPoints:function(){for(var r=this._parts,h=this.options.smoothFactor,p=0,y=r.length;p<y;p++)r[p]=Ki(r[p],h)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,h){var p,y,E,N,D,U,W=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(p=0,N=this._parts.length;p<N;p++)for(U=this._parts[p],y=0,D=U.length,E=D-1;y<D;E=y++)if(!(!h&&y===0)&&Jn(r,U[E],U[y])<=W)return!0;return!1}});function ps(r,h){return new Fe(r,h)}Fe._flat=li;var ct=Fe.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var r,h,p,y,E,N,D,U,W,tt=this._rings[0],ft=tt.length;if(!ft)return null;for(N=D=U=0,r=0,h=ft-1;r<ft;h=r++)p=tt[r],y=tt[h],E=p.y*y.x-y.y*p.x,D+=(p.x+y.x)*E,U+=(p.y+y.y)*E,N+=E*3;return N===0?W=tt[0]:W=[D/N,U/N],this._map.layerPointToLatLng(W)},_convertLatLngs:function(r){var h=Fe.prototype._convertLatLngs.call(this,r),p=h.length;return p>=2&&h[0]instanceof Q&&h[0].equals(h[p-1])&&h.pop(),h},_setLatLngs:function(r){Fe.prototype._setLatLngs.call(this,r),ge(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ge(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,h=this.options.weight,p=new z(h,h);if(r=new mt(r.min.subtract(p),r.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var y=0,E=this._rings.length,N;y<E;y++)N=Mi(this._rings[y],r,!0),N.length&&this._parts.push(N)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var h=!1,p,y,E,N,D,U,W,tt;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(N=0,W=this._parts.length;N<W;N++)for(p=this._parts[N],D=0,tt=p.length,U=tt-1;D<tt;U=D++)y=p[D],E=p[U],y.y>r.y!=E.y>r.y&&r.x<(E.x-y.x)*(r.y-y.y)/(E.y-y.y)+y.x&&(h=!h);return h||Fe.prototype._containsPoint.call(this,r,!0)}});function Qe(r,h){return new ct(r,h)}var Xt=fe.extend({initialize:function(r,h){P(this,h),this._layers={},r&&this.addData(r)},addData:function(r){var h=A(r)?r:r.features,p,y,E;if(h){for(p=0,y=h.length;p<y;p++)E=h[p],(E.geometries||E.geometry||E.features||E.coordinates)&&this.addData(E);return this}var N=this.options;if(N.filter&&!N.filter(r))return this;var D=We(r,N);return D?(D.feature=_e(r),D.defaultOptions=D.options,this.resetStyle(D),N.onEachFeature&&N.onEachFeature(r,D),this.addLayer(D)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=l({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(h){this._setLayerStyle(h,r)},this)},_setLayerStyle:function(r,h){r.setStyle&&(typeof h=="function"&&(h=h(r.feature)),r.setStyle(h))}});function We(r,h){var p=r.type==="Feature"?r.geometry:r,y=p?p.coordinates:null,E=[],N=h&&h.pointToLayer,D=h&&h.coordsToLatLng||tr,U,W,tt,ft;if(!y&&!p)return null;switch(p.type){case"Point":return U=D(y),Ri(N,r,U,h);case"MultiPoint":for(tt=0,ft=y.length;tt<ft;tt++)U=D(y[tt]),E.push(Ri(N,r,U,h));return new fe(E);case"LineString":case"MultiLineString":return W=Oi(y,p.type==="LineString"?0:1,D),new Fe(W,h);case"Polygon":case"MultiPolygon":return W=Oi(y,p.type==="Polygon"?1:2,D),new ct(W,h);case"GeometryCollection":for(tt=0,ft=p.geometries.length;tt<ft;tt++){var Et=We({geometry:p.geometries[tt],type:"Feature",properties:r.properties},h);Et&&E.push(Et)}return new fe(E);default:throw new Error("Invalid GeoJSON object.")}}function Ri(r,h,p,y){return r?r(h,p):new $i(p,y&&y.markersInheritOptions&&y)}function tr(r){return new Q(r[1],r[0],r[2])}function Oi(r,h,p){for(var y=[],E=0,N=r.length,D;E<N;E++)D=h?Oi(r[E],h-1,p):(p||tr)(r[E]),y.push(D);return y}function xt(r,h){return r=Vt(r),r.alt!==void 0?[T(r.lng,h),T(r.lat,h),T(r.alt,h)]:[T(r.lng,h),T(r.lat,h)]}function kt(r,h,p,y){for(var E=[],N=0,D=r.length;N<D;N++)E.push(h?kt(r[N],h-1,p,y):xt(r[N],y));return!h&&p&&E.push(E[0]),E}function Xe(r,h){return r.feature?l({},r.feature,{geometry:h}):_e(h)}function _e(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var kn={toGeoJSON:function(r){return Xe(this,{type:"Point",coordinates:xt(this.getLatLng(),r)})}};$i.include(kn),Re.include(kn),Ve.include(kn),Fe.include({toGeoJSON:function(r){var h=!ge(this._latlngs),p=kt(this._latlngs,h?1:0,!1,r);return Xe(this,{type:(h?"Multi":"")+"LineString",coordinates:p})}}),ct.include({toGeoJSON:function(r){var h=!ge(this._latlngs),p=h&&!ge(this._latlngs[0]),y=kt(this._latlngs,p?2:h?1:0,!0,r);return h||(y=[y]),Xe(this,{type:(p?"Multi":"")+"Polygon",coordinates:y})}}),jn.include({toMultiPoint:function(r){var h=[];return this.eachLayer(function(p){h.push(p.toGeoJSON(r).geometry.coordinates)}),Xe(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(r){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(r);var p=h==="GeometryCollection",y=[];return this.eachLayer(function(E){if(E.toGeoJSON){var N=E.toGeoJSON(r);if(p)y.push(N.geometry);else{var D=_e(N);D.type==="FeatureCollection"?y.push.apply(y,D.features):y.push(D)}}}),p?Xe(this,{geometries:y,type:"GeometryCollection"}):{type:"FeatureCollection",features:y}}});function er(r,h){return new Xt(r,h)}var Fn=er,be=He.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,h,p){this._url=r,this._bounds=Bt(h),P(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(st(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){vt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&sn(this._image),this},bringToBack:function(){return this._map&&on(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=Bt(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",h=this._image=r?this._url:wt("img");if(st(h,"leaflet-image-layer"),this._zoomAnimated&&st(h,"leaflet-zoom-animated"),this.options.className&&st(h,this.options.className),h.onselectstart=M,h.onmousemove=M,h.onload=m(this.fire,this,"load"),h.onerror=m(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(r){var h=this._map.getZoomScale(r.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;un(this._image,p,h)},_reset:function(){var r=this._image,h=new mt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=h.getSize();Dt(r,h.min),r.style.width=p.x+"px",r.style.height=p.y+"px"},_updateOpacity:function(){$t(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),nr=function(r,h,p){return new be(r,h,p)},kr=be.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",h=this._image=r?this._url:wt("video");if(st(h,"leaflet-image-layer"),this._zoomAnimated&&st(h,"leaflet-zoom-animated"),this.options.className&&st(h,this.options.className),h.onselectstart=M,h.onmousemove=M,h.onloadeddata=m(this.fire,this,"load"),r){for(var p=h.getElementsByTagName("source"),y=[],E=0;E<p.length;E++)y.push(p[E].src);this._url=p.length>0?y:[h.src];return}A(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var N=0;N<this._url.length;N++){var D=wt("source");D.src=this._url[N],h.appendChild(D)}}});function ms(r,h,p){return new kr(r,h,p)}var ir=be.extend({_initImage:function(){var r=this._image=this._url;st(r,"leaflet-image-layer"),this._zoomAnimated&&st(r,"leaflet-zoom-animated"),this.options.className&&st(r,this.options.className),r.onselectstart=M,r.onmousemove=M}});function wn(r,h,p){return new ir(r,h,p)}var ze=He.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0},initialize:function(r,h){P(this,r),this._source=h},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&$t(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&$t(this._container,1),this.bringToFront(),this.options.interactive&&(st(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?($t(this._container,0),this._removeTimeout=setTimeout(m(vt,void 0,this._container),200)):vt(this._container),this.options.interactive&&(yt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=Vt(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&sn(this._container),this},bringToBack:function(){return this._map&&on(this._container),this},_prepareOpen:function(r){var h=this._source;if(!h._map)return!1;if(h instanceof fe){h=null;var p=this._source._layers;for(var y in p)if(p[y]._map){h=p[y];break}if(!h)return!1;this._source=h}if(!r)if(h.getCenter)r=h.getCenter();else if(h.getLatLng)r=h.getLatLng();else if(h.getBounds)r=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(!!this._content){var r=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")r.innerHTML=h;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var r=this._map.latLngToLayerPoint(this._latlng),h=at(this.options.offset),p=this._getAnchor();this._zoomAnimated?Dt(this._container,r.add(p)):h=h.add(r).add(p);var y=this._containerBottom=-h.y,E=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=y+"px",this._container.style.left=E+"px"}},_getAnchor:function(){return[0,0]}});ht.include({_initOverlay:function(r,h,p,y){var E=h;return E instanceof r||(E=new r(y).setContent(h)),p&&E.setLatLng(p),E}}),He.include({_initOverlay:function(r,h,p,y){var E=p;return E instanceof r?(P(E,y),E._source=this):(E=h&&!y?h:new r(y,this),E.setContent(p)),E}});var vs=ze.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,ze.prototype.openOn.call(this,r)},onAdd:function(r){ze.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Dn||this._source.on("preclick",Mn))},onRemove:function(r){ze.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Dn||this._source.off("preclick",Mn))},getEvents:function(){var r=ze.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",h=this._container=wt("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=wt("div",r+"-content-wrapper",h);if(this._contentNode=wt("div",r+"-content",p),Wn(h),Zt(this._contentNode),Tt(h,"contextmenu",Mn),this._tipContainer=wt("div",r+"-tip-container",h),this._tip=wt("div",r+"-tip",this._tipContainer),this.options.closeButton){var y=this._closeButton=wt("a",r+"-close-button",h);y.setAttribute("role","button"),y.setAttribute("aria-label","Close popup"),y.href="#close",y.innerHTML='<span aria-hidden="true">&#215;</span>',Tt(y,"click",this.close,this)}},_updateLayout:function(){var r=this._contentNode,h=r.style;h.width="",h.whiteSpace="nowrap";var p=r.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),h.width=p+1+"px",h.whiteSpace="",h.height="";var y=r.offsetHeight,E=this.options.maxHeight,N="leaflet-popup-scrolled";E&&y>E?(h.height=E+"px",st(r,N)):yt(r,N),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var h=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),p=this._getAnchor();Dt(this._container,h.add(p))},_adjustPan:function(r){if(!!this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var h=this._map,p=parseInt(Ii(this._container,"marginBottom"),10)||0,y=this._container.offsetHeight+p,E=this._containerWidth,N=new z(this._containerLeft,-y-this._containerBottom);N._add(ln(this._container));var D=h.layerPointToContainerPoint(N),U=at(this.options.autoPanPadding),W=at(this.options.autoPanPaddingTopLeft||U),tt=at(this.options.autoPanPaddingBottomRight||U),ft=h.getSize(),Et=0,Ct=0;D.x+E+tt.x>ft.x&&(Et=D.x+E-ft.x+tt.x),D.x-Et-W.x<0&&(Et=D.x-W.x),D.y+y+tt.y>ft.y&&(Ct=D.y+y-ft.y+tt.y),D.y-Ct-W.y<0&&(Ct=D.y-W.y),(Et||Ct)&&h.fire("autopanstart").panBy([Et,Ct],{animate:r&&r.type==="moveend"})}},_getAnchor:function(){return at(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Fr=function(r,h){return new vs(r,h)};ht.mergeOptions({closePopupOnClick:!0}),ht.include({openPopup:function(r,h,p){return this._initOverlay(vs,r,h,p).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),He.include({bindPopup:function(r,h){return this._popup=this._initOverlay(vs,this._popup,r,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&this._popup._prepareOpen(r)&&this._popup.openOn(this._map),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){Xn(r);var h=r.layer||r.target;if(this._popup._source===h&&!(h instanceof Dn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=h,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var dn=ze.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){ze.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){ze.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=ze.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",h=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=wt("div",h)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var h,p,y=this._map,E=this._container,N=y.latLngToContainerPoint(y.getCenter()),D=y.layerPointToContainerPoint(r),U=this.options.direction,W=E.offsetWidth,tt=E.offsetHeight,ft=at(this.options.offset),Et=this._getAnchor();U==="top"?(h=W/2,p=tt):U==="bottom"?(h=W/2,p=0):U==="center"?(h=W/2,p=tt/2):U==="right"?(h=0,p=tt/2):U==="left"?(h=W,p=tt/2):D.x<N.x?(U="right",h=0,p=tt/2):(U="left",h=W+(ft.x+Et.x)*2,p=tt/2),r=r.subtract(at(h,p,!0)).add(ft).add(Et),yt(E,"leaflet-tooltip-right"),yt(E,"leaflet-tooltip-left"),yt(E,"leaflet-tooltip-top"),yt(E,"leaflet-tooltip-bottom"),st(E,"leaflet-tooltip-"+U),Dt(E,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&$t(this._container,r)},_animateZoom:function(r){var h=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(h)},_getAnchor:function(){return at(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),gi=function(r,h){return new dn(r,h)};ht.include({openTooltip:function(r,h,p){return this._initOverlay(dn,r,h,p).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),He.include({bindTooltip:function(r,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(dn,this._tooltip,r,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var h=r?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[h](p),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&this._tooltip._prepareOpen(r)&&this._tooltip.openOn(this._map),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_openTooltip:function(r){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0))},_moveTooltip:function(r){var h=r.latlng,p,y;this._tooltip.options.sticky&&r.originalEvent&&(p=this._map.mouseEventToContainerPoint(r.originalEvent),y=this._map.containerPointToLayerPoint(p),h=this._map.layerPointToLatLng(y)),this._tooltip.setLatLng(h)}});var pi=An.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var h=r&&r.tagName==="DIV"?r:document.createElement("div"),p=this.options;if(p.html instanceof Element?(ue(h),h.appendChild(p.html)):h.innerHTML=p.html!==!1?p.html:"",p.bgPos){var y=at(p.bgPos);h.style.backgroundPosition=-y.x+"px "+-y.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function mi(r){return new pi(r)}An.Default=fi;var Ai=He.extend({options:{tileSize:256,opacity:1,updateWhenIdle:gt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){P(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),vt(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(sn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(on(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=I(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof z?r:new z(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var h=this.getPane().children,p=-r(-1/0,1/0),y=0,E=h.length,N;y<E;y++)N=h[y].style.zIndex,h[y]!==this._container&&N&&(p=r(p,+N));isFinite(p)&&(this.options.zIndex=p+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!gt.ielt9){$t(this._container,this.options.opacity);var r=+new Date,h=!1,p=!1;for(var y in this._tiles){var E=this._tiles[y];if(!(!E.current||!E.loaded)){var N=Math.min(1,(r-E.loaded)/200);$t(E.el,N),N<1?h=!0:(E.active?p=!0:this._onOpaqueTile(E),E.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),h&&(C(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this))}},_onOpaqueTile:M,_initContainer:function(){this._container||(this._container=wt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,h=this.options.maxZoom;if(r!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===r?(this._levels[p].el.style.zIndex=h-Math.abs(r-p),this._onUpdateLevel(p)):(vt(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var y=this._levels[r],E=this._map;return y||(y=this._levels[r]={},y.el=wt("div","leaflet-tile-container leaflet-zoom-animated",this._container),y.el.style.zIndex=h,y.origin=E.project(E.unproject(E.getPixelOrigin()),r).round(),y.zoom=r,this._setZoomTransform(y,E.getCenter(),E.getZoom()),M(y.el.offsetWidth),this._onCreateLevel(y)),this._level=y,y}},_onUpdateLevel:M,_onRemoveLevel:M,_onCreateLevel:M,_pruneTiles:function(){if(!!this._map){var r,h,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)h=this._tiles[r],h.retain=h.current;for(r in this._tiles)if(h=this._tiles[r],h.current&&!h.active){var y=h.coords;this._retainParent(y.x,y.y,y.z,y.z-5)||this._retainChildren(y.x,y.y,y.z,y.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var h in this._tiles)this._tiles[h].coords.z===r&&this._removeTile(h)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)vt(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,h,p,y){var E=Math.floor(r/2),N=Math.floor(h/2),D=p-1,U=new z(+E,+N);U.z=+D;var W=this._tileCoordsToKey(U),tt=this._tiles[W];return tt&&tt.active?(tt.retain=!0,!0):(tt&&tt.loaded&&(tt.retain=!0),D>y?this._retainParent(E,N,D,y):!1)},_retainChildren:function(r,h,p,y){for(var E=2*r;E<2*r+2;E++)for(var N=2*h;N<2*h+2;N++){var D=new z(E,N);D.z=p+1;var U=this._tileCoordsToKey(D),W=this._tiles[U];if(W&&W.active){W.retain=!0;continue}else W&&W.loaded&&(W.retain=!0);p+1<y&&this._retainChildren(E,N,p+1,y)}},_resetView:function(r){var h=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var h=this.options;return h.minNativeZoom!==void 0&&r<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<r?h.maxNativeZoom:r},_setView:function(r,h,p,y){var E=Math.round(h);this.options.maxZoom!==void 0&&E>this.options.maxZoom||this.options.minZoom!==void 0&&E<this.options.minZoom?E=void 0:E=this._clampZoom(E);var N=this.options.updateWhenZooming&&E!==this._tileZoom;(!y||N)&&(this._tileZoom=E,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),E!==void 0&&this._update(r),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(r,h)},_setZoomTransforms:function(r,h){for(var p in this._levels)this._setZoomTransform(this._levels[p],r,h)},_setZoomTransform:function(r,h,p){var y=this._map.getZoomScale(p,r.zoom),E=r.origin.multiplyBy(y).subtract(this._map._getNewPixelOrigin(h,p)).round();gt.any3d?un(r.el,E,y):Dt(r.el,E)},_resetGrid:function(){var r=this._map,h=r.options.crs,p=this._tileSize=this.getTileSize(),y=this._tileZoom,E=this._map.getPixelWorldBounds(this._tileZoom);E&&(this._globalTileRange=this._pxBoundsToTileRange(E)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,h.wrapLng[0]],y).x/p.x),Math.ceil(r.project([0,h.wrapLng[1]],y).x/p.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([h.wrapLat[0],0],y).y/p.x),Math.ceil(r.project([h.wrapLat[1],0],y).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var h=this._map,p=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),y=h.getZoomScale(p,this._tileZoom),E=h.project(r,this._tileZoom).floor(),N=h.getSize().divideBy(y*2);return new mt(E.subtract(N),E.add(N))},_update:function(r){var h=this._map;if(!!h){var p=this._clampZoom(h.getZoom());if(r===void 0&&(r=h.getCenter()),this._tileZoom!==void 0){var y=this._getTiledPixelBounds(r),E=this._pxBoundsToTileRange(y),N=E.getCenter(),D=[],U=this.options.keepBuffer,W=new mt(E.getBottomLeft().subtract([U,-U]),E.getTopRight().add([U,-U]));if(!(isFinite(E.min.x)&&isFinite(E.min.y)&&isFinite(E.max.x)&&isFinite(E.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var tt in this._tiles){var ft=this._tiles[tt].coords;(ft.z!==this._tileZoom||!W.contains(new z(ft.x,ft.y)))&&(this._tiles[tt].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(r,p);return}for(var Et=E.min.y;Et<=E.max.y;Et++)for(var Ct=E.min.x;Ct<=E.max.x;Ct++){var tn=new z(Ct,Et);if(tn.z=this._tileZoom,!!this._isValidTile(tn)){var Oe=this._tiles[this._tileCoordsToKey(tn)];Oe?Oe.current=!0:D.push(tn)}}if(D.sort(function(Ae,cr){return Ae.distanceTo(N)-cr.distanceTo(N)}),D.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var hr=document.createDocumentFragment();for(Ct=0;Ct<D.length;Ct++)this._addTile(D[Ct],hr);this._level.el.appendChild(hr)}}}},_isValidTile:function(r){var h=this._map.options.crs;if(!h.infinite){var p=this._globalTileRange;if(!h.wrapLng&&(r.x<p.min.x||r.x>p.max.x)||!h.wrapLat&&(r.y<p.min.y||r.y>p.max.y))return!1}if(!this.options.bounds)return!0;var y=this._tileCoordsToBounds(r);return Bt(this.options.bounds).overlaps(y)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var h=this._map,p=this.getTileSize(),y=r.scaleBy(p),E=y.add(p),N=h.unproject(y,r.z),D=h.unproject(E,r.z);return[N,D]},_tileCoordsToBounds:function(r){var h=this._tileCoordsToNwSe(r),p=new ve(h[0],h[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var h=r.split(":"),p=new z(+h[0],+h[1]);return p.z=+h[2],p},_removeTile:function(r){var h=this._tiles[r];!h||(vt(h.el),delete this._tiles[r],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){st(r,"leaflet-tile");var h=this.getTileSize();r.style.width=h.x+"px",r.style.height=h.y+"px",r.onselectstart=M,r.onmousemove=M,gt.ielt9&&this.options.opacity<1&&$t(r,this.options.opacity)},_addTile:function(r,h){var p=this._getTilePos(r),y=this._tileCoordsToKey(r),E=this.createTile(this._wrapCoords(r),m(this._tileReady,this,r));this._initTile(E),this.createTile.length<2&&X(m(this._tileReady,this,r,null,E)),Dt(E,p),this._tiles[y]={el:E,coords:r,current:!0},h.appendChild(E),this.fire("tileloadstart",{tile:E,coords:r})},_tileReady:function(r,h,p){h&&this.fire("tileerror",{error:h,tile:p,coords:r});var y=this._tileCoordsToKey(r);p=this._tiles[y],p&&(p.loaded=+new Date,this._map._fadeAnimated?($t(p.el,0),C(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),h||(st(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),gt.ielt9||!this._map._fadeAnimated?X(this._pruneTiles,this):setTimeout(m(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var h=new z(this._wrapX?b(r.x,this._wrapX):r.x,this._wrapY?b(r.y,this._wrapY):r.y);return h.z=r.z,h},_pxBoundsToTileRange:function(r){var h=this.getTileSize();return new mt(r.min.unscaleBy(h).floor(),r.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function Mo(r){return new Ai(r)}var Di=Ai.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,h){this._url=r,h=P(this,h),h.detectRetina&&gt.retina&&h.maxZoom>0&&(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom++):(h.zoomOffset++,h.maxZoom--),h.minZoom=Math.max(0,h.minZoom)),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,h){return this._url===r&&h===void 0&&(h=!0),this._url=r,h||this.redraw(),this},createTile:function(r,h){var p=document.createElement("img");return Tt(p,"load",m(this._tileOnLoad,this,h,p)),Tt(p,"error",m(this._tileOnError,this,h,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.setAttribute("role","presentation"),p.src=this.getTileUrl(r),p},getTileUrl:function(r){var h={r:gt.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-r.y;this.options.tms&&(h.y=p),h["-y"]=p}return it(this._url,l(h,this.options))},_tileOnLoad:function(r,h){gt.ielt9?setTimeout(m(r,this,null,h),0):r(null,h)},_tileOnError:function(r,h,p){var y=this.options.errorTileUrl;y&&h.getAttribute("src")!==y&&(h.src=y),r(p,h)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,h=this.options.maxZoom,p=this.options.zoomReverse,y=this.options.zoomOffset;return p&&(r=h-r),r+y},_getSubdomain:function(r){var h=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var r,h;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(h=this._tiles[r].el,h.onload=M,h.onerror=M,!h.complete)){h.src=Z;var p=this._tiles[r].coords;vt(h),delete this._tiles[r],this.fire("tileabort",{tile:h,coords:p})}},_removeTile:function(r){var h=this._tiles[r];if(!!h)return h.el.setAttribute("src",Z),Ai.prototype._removeTile.call(this,r)},_tileReady:function(r,h,p){if(!(!this._map||p&&p.getAttribute("src")===Z))return Ai.prototype._tileReady.call(this,r,h,p)}});function Js(r,h){return new Di(r,h)}var rr=Di.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,h){this._url=r;var p=l({},this.defaultWmsParams);for(var y in h)y in this.options||(p[y]=h[y]);h=P(this,h);var E=h.detectRetina&&gt.retina?2:1,N=this.getTileSize();p.width=N.x*E,p.height=N.y*E,this.wmsParams=p},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,Di.prototype.onAdd.call(this,r)},getTileUrl:function(r){var h=this._tileCoordsToNwSe(r),p=this._crs,y=jt(p.project(h[0]),p.project(h[1])),E=y.min,N=y.max,D=(this._wmsVersion>=1.3&&this._crs===ci?[E.y,E.x,N.y,N.x]:[E.x,E.y,N.x,N.y]).join(","),U=Di.prototype.getTileUrl.call(this,r);return U+rt(this.wmsParams,U,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+D},setParams:function(r,h){return l(this.wmsParams,r),h||this.redraw(),this}});function Ro(r,h){return new rr(r,h)}Di.WMS=rr,Js.wms=Ro;var $e=He.extend({options:{padding:.1},initialize:function(r){P(this,r),w(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&st(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,h){var p=this._map.getZoomScale(h,this._zoom),y=this._map.getSize().multiplyBy(.5+this.options.padding),E=this._map.project(this._center,h),N=y.multiplyBy(-p).add(E).subtract(this._map._getNewPixelOrigin(r,h));gt.any3d?un(this._container,N,p):Dt(this._container,N)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,h=this._map.getSize(),p=this._map.containerPointToLayerPoint(h.multiplyBy(-r)).round();this._bounds=new mt(p,p.add(h.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),sr=$e.extend({options:{tolerance:0},getEvents:function(){var r=$e.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){$e.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");Tt(r,"mousemove",this._onMouseMove,this),Tt(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Tt(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){C(this._redrawRequest),delete this._ctx,vt(this._container),Wt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var h in this._layers)r=this._layers[h],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){$e.prototype._update.call(this);var r=this._bounds,h=this._container,p=r.getSize(),y=gt.retina?2:1;Dt(h,r.min),h.width=y*p.x,h.height=y*p.y,h.style.width=p.x+"px",h.style.height=p.y+"px",gt.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){$e.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[w(r)]=r;var h=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var h=r._order,p=h.next,y=h.prev;p?p.prev=y:this._drawLast=y,y?y.next=p:this._drawFirst=p,delete r._order,delete this._layers[w(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var h=r.options.dashArray.split(/[, ]+/),p=[],y,E;for(E=0;E<h.length;E++){if(y=Number(h[E]),isNaN(y))return;p.push(y)}r.options._dashArray=p}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){!this._map||(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||X(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var h=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new mt,this._redrawBounds.extend(r._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(r._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var h=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,h=this._redrawBounds;if(this._ctx.save(),h){var p=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var y=this._drawFirst;y;y=y.next)r=y.layer,(!h||r._pxBounds&&r._pxBounds.intersects(h))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,h){if(!!this._drawing){var p,y,E,N,D=r._parts,U=D.length,W=this._ctx;if(!!U){for(W.beginPath(),p=0;p<U;p++){for(y=0,E=D[p].length;y<E;y++)N=D[p][y],W[y?"lineTo":"moveTo"](N.x,N.y);h&&W.closePath()}this._fillStroke(W,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var h=r._point,p=this._ctx,y=Math.max(Math.round(r._radius),1),E=(Math.max(Math.round(r._radiusY),1)||y)/y;E!==1&&(p.save(),p.scale(1,E)),p.beginPath(),p.arc(h.x,h.y/E,y,0,Math.PI*2,!1),E!==1&&p.restore(),this._fillStroke(p,r)}},_fillStroke:function(r,h){var p=h.options;p.fill&&(r.globalAlpha=p.fillOpacity,r.fillStyle=p.fillColor||p.color,r.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(r.setLineDash&&r.setLineDash(h.options&&h.options._dashArray||[]),r.globalAlpha=p.opacity,r.lineWidth=p.weight,r.strokeStyle=p.color,r.lineCap=p.lineCap,r.lineJoin=p.lineJoin,r.stroke())},_onClick:function(r){for(var h=this._map.mouseEventToLayerPoint(r),p,y,E=this._drawFirst;E;E=E.next)p=E.layer,p.options.interactive&&p._containsPoint(h)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(p))&&(y=p);this._fireEvent(y?[y]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,h)}},_handleMouseOut:function(r){var h=this._hoveredLayer;h&&(yt(this._container,"leaflet-interactive"),this._fireEvent([h],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,h){if(!this._mouseHoverThrottled){for(var p,y,E=this._drawFirst;E;E=E.next)p=E.layer,p.options.interactive&&p._containsPoint(h)&&(y=p);y!==this._hoveredLayer&&(this._handleMouseOut(r),y&&(st(this._container,"leaflet-interactive"),this._fireEvent([y],r,"mouseover"),this._hoveredLayer=y)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(m(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,h,p){this._map._fireDOMEvent(h,p||h.type,r)},_bringToFront:function(r){var h=r._order;if(!!h){var p=h.next,y=h.prev;if(p)p.prev=y;else return;y?y.next=p:p&&(this._drawFirst=p),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(r)}},_bringToBack:function(r){var h=r._order;if(!!h){var p=h.next,y=h.prev;if(y)y.next=p;else return;p?p.prev=y:y&&(this._drawLast=y),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(r)}}});function zr(r){return gt.canvas?new sr(r):null}var Pt=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Ks={_initContainer:function(){this._container=wt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||($e.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var h=r._container=Pt("shape");st(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",r._path=Pt("path"),h.appendChild(r._path),this._updateStyle(r),this._layers[w(r)]=r},_addPath:function(r){var h=r._container;this._container.appendChild(h),r.options.interactive&&r.addInteractiveTarget(h)},_removePath:function(r){var h=r._container;vt(h),r.removeInteractiveTarget(h),delete this._layers[w(r)]},_updateStyle:function(r){var h=r._stroke,p=r._fill,y=r.options,E=r._container;E.stroked=!!y.stroke,E.filled=!!y.fill,y.stroke?(h||(h=r._stroke=Pt("stroke")),E.appendChild(h),h.weight=y.weight+"px",h.color=y.color,h.opacity=y.opacity,y.dashArray?h.dashStyle=A(y.dashArray)?y.dashArray.join(" "):y.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=y.lineCap.replace("butt","flat"),h.joinstyle=y.lineJoin):h&&(E.removeChild(h),r._stroke=null),y.fill?(p||(p=r._fill=Pt("fill")),E.appendChild(p),p.color=y.fillColor||y.color,p.opacity=y.fillOpacity):p&&(E.removeChild(p),r._fill=null)},_updateCircle:function(r){var h=r._point.round(),p=Math.round(r._radius),y=Math.round(r._radiusY||p);this._setPath(r,r._empty()?"M0 0":"AL "+h.x+","+h.y+" "+p+","+y+" 0,"+65535*360)},_setPath:function(r,h){r._path.v=h},_bringToFront:function(r){sn(r._container)},_bringToBack:function(r){on(r._container)}},ki=gt.vml?Pt:ei,Fi=$e.extend({_initContainer:function(){this._container=ki("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ki("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){vt(this._container),Wt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){$e.prototype._update.call(this);var r=this._bounds,h=r.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,p.setAttribute("width",h.x),p.setAttribute("height",h.y)),Dt(p,r.min),p.setAttribute("viewBox",[r.min.x,r.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(r){var h=r._path=ki("path");r.options.className&&st(h,r.options.className),r.options.interactive&&st(h,"leaflet-interactive"),this._updateStyle(r),this._layers[w(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){vt(r._path),r.removeInteractiveTarget(r._path),delete this._layers[w(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var h=r._path,p=r.options;!h||(p.stroke?(h.setAttribute("stroke",p.color),h.setAttribute("stroke-opacity",p.opacity),h.setAttribute("stroke-width",p.weight),h.setAttribute("stroke-linecap",p.lineCap),h.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?h.setAttribute("stroke-dasharray",p.dashArray):h.removeAttribute("stroke-dasharray"),p.dashOffset?h.setAttribute("stroke-dashoffset",p.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),p.fill?(h.setAttribute("fill",p.fillColor||p.color),h.setAttribute("fill-opacity",p.fillOpacity),h.setAttribute("fill-rule",p.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(r,h){this._setPath(r,qs(r._parts,h))},_updateCircle:function(r){var h=r._point,p=Math.max(Math.round(r._radius),1),y=Math.max(Math.round(r._radiusY),1)||p,E="a"+p+","+y+" 0 1,0 ",N=r._empty()?"M0 0":"M"+(h.x-p)+","+h.y+E+p*2+",0 "+E+-p*2+",0 ";this._setPath(r,N)},_setPath:function(r,h){r._path.setAttribute("d",h)},_bringToFront:function(r){sn(r._path)},_bringToBack:function(r){on(r._path)}});gt.vml&&Fi.include(Ks);function Ee(r){return gt.svg||gt.vml?new Fi(r):null}ht.include({getRenderer:function(r){var h=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var h=this._paneRenderers[r];return h===void 0&&(h=this._createRenderer({pane:r}),this._paneRenderers[r]=h),h},_createRenderer:function(r){return this.options.preferCanvas&&zr(r)||Ee(r)}});var or=ct.extend({initialize:function(r,h){ct.prototype.initialize.call(this,this._boundsToLatLngs(r),h)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=Bt(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function In(r,h){return new or(r,h)}Fi.create=ki,Fi.pointsToPath=qs,Xt.geometryToLayer=We,Xt.coordsToLatLng=tr,Xt.coordsToLatLngs=Oi,Xt.latLngToCoords=xt,Xt.latLngsToCoords=kt,Xt.getFeature=Xe,Xt.asFeature=_e,ht.mergeOptions({boxZoom:!0});var ar=le.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){Tt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Wt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){vt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ye(),Yi(),this._startPoint=this._map.mouseEventToContainerPoint(r),Tt(document,{contextmenu:Xn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=wt("div","leaflet-zoom-box",this._container),st(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var h=new mt(this._point,this._startPoint),p=h.getSize();Dt(this._box,h.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(vt(this._box),yt(this._container,"leaflet-crosshair")),Vn(),Si(),Wt(document,{contextmenu:Xn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(m(this._resetState,this),0);var h=new ve(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ht.addInitHook("addHandler","boxZoom",ar),ht.mergeOptions({doubleClickZoom:!0});var Gr=le.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var h=this._map,p=h.getZoom(),y=h.options.zoomDelta,E=r.originalEvent.shiftKey?p-y:p+y;h.options.doubleClickZoom==="center"?h.setZoom(E):h.setZoomAround(r.containerPoint,E)}});ht.addInitHook("addHandler","doubleClickZoom",Gr),ht.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Br=le.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new En(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}st(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){yt(this._map._container,"leaflet-grab"),yt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=Bt(this._map.options.maxBounds);this._offsetLimit=jt(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var h=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(h),this._prunePositions(h)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,h){return r-(r-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;r.x<h.min.x&&(r.x=this._viscousLimit(r.x,h.min.x)),r.y<h.min.y&&(r.y=this._viscousLimit(r.y,h.min.y)),r.x>h.max.x&&(r.x=this._viscousLimit(r.x,h.max.x)),r.y>h.max.y&&(r.y=this._viscousLimit(r.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,h=Math.round(r/2),p=this._initialWorldOffset,y=this._draggable._newPos.x,E=(y-h+p)%r+h-p,N=(y+h+p)%r-h-p,D=Math.abs(E+p)<Math.abs(N+p)?E:N;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=D},_onDragEnd:function(r){var h=this._map,p=h.options,y=!p.inertia||r.noInertia||this._times.length<2;if(h.fire("dragend",r),y)h.fire("moveend");else{this._prunePositions(+new Date);var E=this._lastPos.subtract(this._positions[0]),N=(this._lastTime-this._times[0])/1e3,D=p.easeLinearity,U=E.multiplyBy(D/N),W=U.distanceTo([0,0]),tt=Math.min(p.inertiaMaxSpeed,W),ft=U.multiplyBy(tt/W),Et=tt/(p.inertiaDeceleration*D),Ct=ft.multiplyBy(-Et/2).round();!Ct.x&&!Ct.y?h.fire("moveend"):(Ct=h._limitOffset(Ct,h.options.maxBounds),X(function(){h.panBy(Ct,{duration:Et,easeLinearity:D,noMoveStart:!0,animate:!0})}))}}});ht.addInitHook("addHandler","dragging",Br),ht.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ys=le.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),Tt(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Wt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,h=document.documentElement,p=r.scrollTop||h.scrollTop,y=r.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(y,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var h=this._panKeys={},p=this.keyCodes,y,E;for(y=0,E=p.left.length;y<E;y++)h[p.left[y]]=[-1*r,0];for(y=0,E=p.right.length;y<E;y++)h[p.right[y]]=[r,0];for(y=0,E=p.down.length;y<E;y++)h[p.down[y]]=[0,r];for(y=0,E=p.up.length;y<E;y++)h[p.up[y]]=[0,-1*r]},_setZoomDelta:function(r){var h=this._zoomKeys={},p=this.keyCodes,y,E;for(y=0,E=p.zoomIn.length;y<E;y++)h[p.zoomIn[y]]=r;for(y=0,E=p.zoomOut.length;y<E;y++)h[p.zoomOut[y]]=-r},_addHooks:function(){Tt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Wt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var h=r.keyCode,p=this._map,y;if(h in this._panKeys)(!p._panAnim||!p._panAnim._inProgress)&&(y=this._panKeys[h],r.shiftKey&&(y=at(y).multiplyBy(3)),p.panBy(y),p.options.maxBounds&&p.panInsideBounds(p.options.maxBounds));else if(h in this._zoomKeys)p.setZoom(p.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;Xn(r)}}});ht.addInitHook("addHandler","keyboard",ys),ht.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ur=le.extend({addHooks:function(){Tt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Wt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var h=us(r),p=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var y=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(m(this._performZoom,this),y),Xn(r)},_performZoom:function(){var r=this._map,h=r.getZoom(),p=this._map.options.zoomSnap||0;r._stop();var y=this._delta/(this._map.options.wheelPxPerZoomLevel*4),E=4*Math.log(2/(1+Math.exp(-Math.abs(y))))/Math.LN2,N=p?Math.ceil(E/p)*p:E,D=r._limitZoom(h+(this._delta>0?N:-N))-h;this._delta=0,this._startTime=null,D&&(r.options.scrollWheelZoom==="center"?r.setZoom(h+D):r.setZoomAround(this._lastMousePos,h+D))}});ht.addInitHook("addHandler","scrollWheelZoom",ur);var vi=600;ht.mergeOptions({tapHold:gt.touchNative&&gt.safari&&gt.mobile,tapTolerance:15});var lr=le.extend({addHooks:function(){Tt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Wt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var h=r.touches[0];this._startPos=this._newPos=new z(h.clientX,h.clientY),this._holdTimeout=setTimeout(m(function(){this._cancel(),this._isTapValid()&&(Tt(document,"touchend",qt),Tt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),vi),Tt(document,"touchend touchcancel contextmenu",this._cancel,this),Tt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){Wt(document,"touchend",qt),Wt(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Wt(document,"touchend touchcancel contextmenu",this._cancel,this),Wt(document,"touchmove",this._onMove,this)},_onMove:function(r){var h=r.touches[0];this._newPos=new z(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,h){var p=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});p._simulated=!0,h.target.dispatchEvent(p)}});ht.addInitHook("addHandler","tapHold",lr),ht.mergeOptions({touchZoom:gt.touch,bounceAtZoomLimits:!0});var zi=le.extend({addHooks:function(){st(this._map._container,"leaflet-touch-zoom"),Tt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){yt(this._map._container,"leaflet-touch-zoom"),Wt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var h=this._map;if(!(!r.touches||r.touches.length!==2||h._animatingZoom||this._zooming)){var p=h.mouseEventToContainerPoint(r.touches[0]),y=h.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(p.add(y)._divideBy(2))),this._startDist=p.distanceTo(y),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),Tt(document,"touchmove",this._onTouchMove,this),Tt(document,"touchend touchcancel",this._onTouchEnd,this),qt(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var h=this._map,p=h.mouseEventToContainerPoint(r.touches[0]),y=h.mouseEventToContainerPoint(r.touches[1]),E=p.distanceTo(y)/this._startDist;if(this._zoom=h.getScaleZoom(E,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&E<1||this._zoom>h.getMaxZoom()&&E>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,E===1)return}else{var N=p._add(y)._divideBy(2)._subtract(this._centerPoint);if(E===1&&N.x===0&&N.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(N),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),C(this._animRequest);var D=m(h._move,h,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=X(D,this,!0),qt(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,C(this._animRequest),Wt(document,"touchmove",this._onTouchMove,this),Wt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ht.addInitHook("addHandler","touchZoom",zi),ht.BoxZoom=ar,ht.DoubleClickZoom=Gr,ht.Drag=Br,ht.Keyboard=ys,ht.ScrollWheelZoom=ur,ht.TapHold=lr,ht.TouchZoom=zi,c.Bounds=mt,c.Browser=gt,c.CRS=Ht,c.Canvas=sr,c.Circle=Re,c.CircleMarker=Ve,c.Class=_t,c.Control=Ue,c.DivIcon=pi,c.DivOverlay=ze,c.DomEvent=Mr,c.DomUtil=Pn,c.Draggable=En,c.Evented=ne,c.FeatureGroup=fe,c.GeoJSON=Xt,c.GridLayer=Ai,c.Handler=le,c.Icon=An,c.ImageOverlay=be,c.LatLng=Q,c.LatLngBounds=ve,c.Layer=He,c.LayerGroup=jn,c.LineUtil=hs,c.Map=ht,c.Marker=$i,c.Mixin=re,c.Path=Dn,c.Point=z,c.PolyUtil=Ws,c.Polygon=ct,c.Polyline=Fe,c.Popup=vs,c.PosAnimation=ls,c.Projection=hi,c.Rectangle=or,c.Renderer=$e,c.SVG=Fi,c.SVGOverlay=ir,c.TileLayer=Di,c.Tooltip=dn,c.Transformation=Zi,c.Util=nt,c.VideoOverlay=kr,c.bind=m,c.bounds=jt,c.canvas=zr,c.circle=di,c.circleMarker=je,c.control=si,c.divIcon=mi,c.extend=l,c.featureGroup=fs,c.geoJSON=er,c.geoJson=Fn,c.gridLayer=Mo,c.icon=ds,c.imageOverlay=nr,c.latLng=Vt,c.latLngBounds=Bt,c.layerGroup=Ys,c.map=hn,c.marker=Dr,c.point=at,c.polygon=Qe,c.polyline=ps,c.popup=Fr,c.rectangle=In,c.setOptions=P,c.stamp=w,c.svg=Ee,c.svgOverlay=wn,c.tileLayer=Js,c.tooltip=gi,c.transformation=dt,c.version=f,c.videoOverlay=ms;var yi=window.L;c.noConflict=function(){return window.L=yi,this},window.L=c})})(Y,Y.exports);const ic="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC",rc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",sc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=";var pa=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,Cr=document.documentElement.style.pointerEvents==="",Yr={cors:pa,pointerEvents:Cr},oc={attributionWidthOffset:55},Vu=0;function ma(o){var u="";o.f=o.f||"json";for(var c in o)if(Object.prototype.hasOwnProperty.call(o,c)){var f=o[c],l=Object.prototype.toString.call(f),d;u.length&&(u+="&"),l==="[object Array]"?d=Object.prototype.toString.call(f[0])==="[object Object]"?JSON.stringify(f):f.join(","):l==="[object Object]"?d=JSON.stringify(f):l==="[object Date]"?d=f.valueOf():d=f,u+=encodeURIComponent(c)+"="+encodeURIComponent(d)}return u}function Lu(o,u){var c=new window.XMLHttpRequest;return c.onerror=function(f){c.onreadystatechange=Y.exports.Util.falseFn,o.call(u,{error:{code:500,message:"XMLHttpRequest error"}},null)},c.onreadystatechange=function(){var f,l;if(c.readyState===4){try{f=JSON.parse(c.responseText)}catch{f=null,l={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!l&&f.error&&(l=f.error,f=null),c.onerror=Y.exports.Util.falseFn,o.call(u,l,f)}},c.ontimeout=function(){this.onerror()},c}function ac(o,u,c,f){var l=Lu(c,f);return l.open("POST",o),typeof f<"u"&&f!==null&&typeof f.options<"u"&&(l.timeout=f.options.timeout),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),l.send(ma(u)),l}function Al(o,u,c,f){var l=Lu(c,f);return l.open("GET",o+"?"+ma(u),!0),typeof f<"u"&&f!==null&&typeof f.options<"u"&&(l.timeout=f.options.timeout,f.options.withCredentials&&(l.withCredentials=!0)),l.send(null),l}function Dl(o,u,c,f){var l=ma(u),d=Lu(c,f),m=(o+"?"+l).length;if(m<=2e3&&Yr.cors?d.open("GET",o+"?"+l):m>2e3&&Yr.cors&&(d.open("POST",o),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),typeof f<"u"&&f!==null&&typeof f.options<"u"&&(d.timeout=f.options.timeout,f.options.withCredentials&&(d.withCredentials=!0)),m<=2e3&&Yr.cors)d.send(null);else if(m>2e3&&Yr.cors)d.send(l);else{if(m<=2e3&&!Yr.cors)return Eu(o,u,c,f);Jr("a request to "+o+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy https://developers.arcgis.com/esri-leaflet/api-reference/request/");return}return d}function Eu(o,u,c,f){window._EsriLeafletCallbacks=window._EsriLeafletCallbacks||{};var l="c"+Vu;u.callback="window._EsriLeafletCallbacks."+l,window._EsriLeafletCallbacks[l]=function(m){if(window._EsriLeafletCallbacks[l]!==!0){var _,w=Object.prototype.toString.call(m);w==="[object Object]"||w==="[object Array]"||(_={error:{code:500,message:"Expected array or object as JSONP response"}},m=null),!_&&m.error&&(_=m,m=null),c.call(f,_,m),window._EsriLeafletCallbacks[l]=!0}};var d=Y.exports.DomUtil.create("script",null,document.body);return d.type="text/javascript",d.src=o+"?"+ma(u),d.id=l,d.onerror=function(m){if(m&&window._EsriLeafletCallbacks[l]!==!0){var _={error:{code:500,message:"An unknown error occurred"}};c.call(f,_),window._EsriLeafletCallbacks[l]=!0}},Y.exports.DomUtil.addClass(d,"esri-leaflet-jsonp"),Vu++,{id:l,url:d.src,abort:function(){window._EsriLeafletCallbacks._callback[l]({code:0,message:"Request aborted."})}}}var wu=Yr.cors?Al:Eu;wu.CORS=Al;wu.JSONP=Eu;function Jr(){console&&console.warn&&console.warn.apply(console,arguments)}var ha={request:Dl,get:wu,post:ac};/* @preserve
* @terraformer/arcgis - v2.1.1 - MIT
* Copyright (c) 2012-2022 Environmental Systems Research Institute, Inc.
* Tue Aug 02 2022 14:23:48 GMT-0700 (Pacific Daylight Time)
*/var uc=function(u,c,f,l){var d=(l[0]-f[0])*(u[1]-f[1])-(l[1]-f[1])*(u[0]-f[0]),m=(c[0]-u[0])*(u[1]-f[1])-(c[1]-u[1])*(u[0]-f[0]),_=(l[1]-f[1])*(c[0]-u[0])-(l[0]-f[0])*(c[1]-u[1]);if(_!==0){var w=d/_,I=m/_;if(w>=0&&w<=1&&I>=0&&I<=1)return!0}return!1},lc=function(u,c){for(var f=!1,l=-1,d=u.length,m=d-1;++l<d;m=l)(u[l][1]<=c[1]&&c[1]<u[m][1]||u[m][1]<=c[1]&&c[1]<u[l][1])&&c[0]<(u[m][0]-u[l][0])*(c[1]-u[l][1])/(u[m][1]-u[l][1])+u[l][0]&&(f=!f);return f},hc=function(u,c){for(var f=0;f<u.length;f++)if(u[f]!==c[f])return!1;return!0},kl=function(u,c){for(var f=0;f<u.length-1;f++)for(var l=0;l<c.length-1;l++)if(uc(u[f],u[f+1],c[l],c[l+1]))return!0;return!1},uu=function(u){return hc(u[0],u[u.length-1])||u.push(u[0]),u},lu=function(u){var c=0,f=0,l=u.length,d=u[f],m;for(f;f<l-1;f++)m=u[f+1],c+=(m[0]-d[0])*(m[1]+d[1]),d=m;return c>=0},Fl=function(u){var c={};for(var f in u)u.hasOwnProperty(f)&&(c[f]=u[f]);return c},cc=function(u,c){var f=kl(u,c),l=lc(u,c[0]);return!!(!f&&l)},fc=function(u){for(var c=[],f=[],l,d,m,_=0;_<u.length;_++){var w=uu(u[_].slice(0));if(!(w.length<4))if(lu(w)){var I=[w.slice().reverse()];c.push(I)}else f.push(w.slice().reverse())}for(var b=[];f.length;){m=f.pop();var M=!1;for(l=c.length-1;l>=0;l--)if(d=c[l][0],cc(d,m)){c[l].push(m),M=!0;break}M||b.push(m)}for(;b.length;){m=b.pop();var T=!1;for(l=c.length-1;l>=0;l--)if(d=c[l][0],kl(d,m)){c[l].push(m),T=!0;break}T||c.push([m.reverse()])}return c.length===1?{type:"Polygon",coordinates:c[0]}:{type:"MultiPolygon",coordinates:c}},dc=function(u,c){for(var f=c?[c,"OBJECTID","FID"]:["OBJECTID","FID"],l=0;l<f.length;l++){var d=f[l];if(d in u&&(typeof u[d]=="string"||typeof u[d]=="number"))return u[d]}throw Error("No valid id attribute found")},gc=function o(u,c){var f={};if(u.features){f.type="FeatureCollection",f.features=[];for(var l=0;l<u.features.length;l++)f.features.push(o(u.features[l],c))}if(typeof u.x=="number"&&typeof u.y=="number"&&(f.type="Point",f.coordinates=[u.x,u.y],typeof u.z=="number"&&f.coordinates.push(u.z)),u.points&&(f.type="MultiPoint",f.coordinates=u.points.slice(0)),u.paths&&(u.paths.length===1?(f.type="LineString",f.coordinates=u.paths[0].slice(0)):(f.type="MultiLineString",f.coordinates=u.paths.slice(0))),u.rings&&(f=fc(u.rings.slice(0))),typeof u.xmin=="number"&&typeof u.ymin=="number"&&typeof u.xmax=="number"&&typeof u.ymax=="number"&&(f.type="Polygon",f.coordinates=[[[u.xmax,u.ymax],[u.xmin,u.ymax],[u.xmin,u.ymin],[u.xmax,u.ymin],[u.xmax,u.ymax]]]),(u.geometry||u.attributes)&&(f.type="Feature",f.geometry=u.geometry?o(u.geometry):null,f.properties=u.attributes?Fl(u.attributes):null,u.attributes))try{f.id=dc(u.attributes,c)}catch{}return JSON.stringify(f.geometry)===JSON.stringify({})&&(f.geometry=null),u.spatialReference&&u.spatialReference.wkid&&u.spatialReference.wkid!==4326&&console.warn("Object converted in non-standard crs - "+JSON.stringify(u.spatialReference)),f},zl=function(u){var c=[],f=u.slice(0),l=uu(f.shift().slice(0));if(l.length>=4){lu(l)||l.reverse(),c.push(l);for(var d=0;d<f.length;d++){var m=uu(f[d].slice(0));m.length>=4&&(lu(m)&&m.reverse(),c.push(m))}}return c},pc=function(u){for(var c=[],f=0;f<u.length;f++)for(var l=zl(u[f]),d=l.length-1;d>=0;d--){var m=l[d].slice(0);c.push(m)}return c},mc=function o(u,c){c=c||"OBJECTID";var f={wkid:4326},l={},d;switch(u.type){case"Point":l.x=u.coordinates[0],l.y=u.coordinates[1],u.coordinates[2]!=null&&(l.z=u.coordinates[2]),l.spatialReference=f;break;case"MultiPoint":l.points=u.coordinates.slice(0),u.coordinates[0][2]!=null&&(l.hasZ=!0),l.spatialReference=f;break;case"LineString":l.paths=[u.coordinates.slice(0)],u.coordinates[0][2]!=null&&(l.hasZ=!0),l.spatialReference=f;break;case"MultiLineString":l.paths=u.coordinates.slice(0),u.coordinates[0][0][2]!=null&&(l.hasZ=!0),l.spatialReference=f;break;case"Polygon":l.rings=zl(u.coordinates.slice(0)),u.coordinates[0][0][2]!=null&&(l.hasZ=!0),l.spatialReference=f;break;case"MultiPolygon":l.rings=pc(u.coordinates.slice(0)),u.coordinates[0][0][0][2]!=null&&(l.hasZ=!0),l.spatialReference=f;break;case"Feature":u.geometry&&(l.geometry=o(u.geometry,c)),l.attributes=u.properties?Fl(u.properties):{},u.id&&(l.attributes[c]=u.id);break;case"FeatureCollection":for(l=[],d=0;d<u.features.length;d++)l.push(o(u.features[d],c));break;case"GeometryCollection":for(l=[],d=0;d<u.geometries.length;d++)l.push(o(u.geometries[d],c));break}return l},Gl='<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>',vc='Powered by <a href="https://www.esri.com">Esri</a>';function ca(o,u){return mc(o,u)}function yc(o,u){return gc(o,u)}function Zu(o){if(o.xmin!=="NaN"&&o.ymin!=="NaN"&&o.xmax!=="NaN"&&o.ymax!=="NaN"){var u=Y.exports.latLng(o.ymin,o.xmin),c=Y.exports.latLng(o.ymax,o.xmax);return Y.exports.latLngBounds(u,c)}else return null}function Bl(o){return o=Y.exports.latLngBounds(o),{xmin:o.getSouthWest().lng,ymin:o.getSouthWest().lat,xmax:o.getNorthEast().lng,ymax:o.getNorthEast().lat,spatialReference:{wkid:4326}}}var ql=/^(OBJECTID|FID|OID|ID)$/i;function _c(o){var u;if(o.objectIdFieldName)u=o.objectIdFieldName;else if(o.fields){for(var c=0;c<=o.fields.length-1;c++)if(o.fields[c].type==="esriFieldTypeOID"){u=o.fields[c].name;break}if(!u){for(c=0;c<=o.fields.length-1;c++)if(o.fields[c].name.match(ql)){u=o.fields[c].name;break}}}return u}function xc(o){for(var u in o.attributes)if(u.match(ql))return u}function va(o,u){var c,f=o.features||o.results,l=f&&f.length;u?c=u:c=_c(o);var d={type:"FeatureCollection",features:[]};if(l)for(var m=f.length-1;m>=0;m--){var _=yc(f[m],c||xc(f[m]));d.features.push(_)}return d}function Iu(o){return o=Y.exports.Util.trim(o),o[o.length-1]!=="/"&&(o+="/"),o}function ya(o){if(o.url.indexOf("?")!==-1){o.requestParams=o.requestParams||{};var u=o.url.substring(o.url.indexOf("?")+1);o.url=o.url.split("?")[0],o.requestParams=JSON.parse('{"'+decodeURI(u).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}return o.url=Iu(o.url.split("?")[0]),o}function Lc(o){return/^(?!.*utility\.arcgis\.com).*\.arcgis\.com.*FeatureServer/i.test(o)}function Hu(o){var u;switch(o){case"Point":u="esriGeometryPoint";break;case"MultiPoint":u="esriGeometryMultipoint";break;case"LineString":u="esriGeometryPolyline";break;case"MultiLineString":u="esriGeometryPolyline";break;case"Polygon":u="esriGeometryPolygon";break;case"MultiPolygon":u="esriGeometryPolygon";break}return u}function hu(o){return o.getSize().x-oc.attributionWidthOffset+"px"}function _a(o){if(!!o.attributionControl){if(o.attributionControl._esriAttributionLayerCount||(o.attributionControl._esriAttributionLayerCount=0),o.attributionControl._esriAttributionLayerCount===0){if(!o.attributionControl._esriAttributionAddedOnce){var u=document.createElement("style");u.type="text/css",u.innerHTML=".esri-truncated-attribution:hover {white-space: normal;}",document.getElementsByTagName("head")[0].appendChild(u);var c=document.createElement("style");c.type="text/css",c.innerHTML=".esri-truncated-attribution {vertical-align: -3px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;display: inline-block;transition: 0s white-space;transition-delay: 1s;max-width: "+hu(o)+";}",document.getElementsByTagName("head")[0].appendChild(c),o.on("resize",function(f){o.attributionControl&&(o.attributionControl._container.style.maxWidth=hu(f.target))}),o.attributionControl._esriAttributionAddedOnce=!0}o.attributionControl.setPrefix(Gl+" | "+vc),Y.exports.DomUtil.addClass(o.attributionControl._container,"esri-truncated-attribution:hover"),Y.exports.DomUtil.addClass(o.attributionControl._container,"esri-truncated-attribution")}o.attributionControl._esriAttributionLayerCount=o.attributionControl._esriAttributionLayerCount+1}}function xa(o){!o.attributionControl||(o.attributionControl._esriAttributionLayerCount&&o.attributionControl._esriAttributionLayerCount===1&&(o.attributionControl.setPrefix(Gl),Y.exports.DomUtil.removeClass(o.attributionControl._container,"esri-truncated-attribution:hover"),Y.exports.DomUtil.removeClass(o.attributionControl._container,"esri-truncated-attribution")),o.attributionControl._esriAttributionLayerCount=o.attributionControl._esriAttributionLayerCount-1)}function Ul(o){var u={geometry:null,geometryType:null};if(o instanceof Y.exports.LatLngBounds)return u.geometry=Bl(o),u.geometryType="esriGeometryEnvelope",u;if(o.getLatLng&&(o=o.getLatLng()),o instanceof Y.exports.LatLng&&(o={type:"Point",coordinates:[o.lng,o.lat]}),o instanceof Y.exports.GeoJSON&&(o=o.getLayers()[0].feature.geometry,u.geometry=ca(o),u.geometryType=Hu(o.type)),o.toGeoJSON&&(o=o.toGeoJSON()),o.type==="Feature"&&(o=o.geometry),o.type==="Point"||o.type==="LineString"||o.type==="Polygon"||o.type==="MultiPolygon")return u.geometry=ca(o),u.geometryType=Hu(o.type),u;Jr("invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object")}function Ec(o,u){Yr.cors&&Dl(o,{},Y.exports.Util.bind(function(c,f){if(!c){u._esriAttributions=[];for(var l=0;l<f.contributors.length;l++)for(var d=f.contributors[l],m=0;m<d.coverageAreas.length;m++){var _=d.coverageAreas[m],w=Y.exports.latLng(_.bbox[0],_.bbox[1]),I=Y.exports.latLng(_.bbox[2],_.bbox[3]);u._esriAttributions.push({attribution:d.attribution,score:_.score,bounds:Y.exports.latLngBounds(w,I),minZoom:_.zoomMin,maxZoom:_.zoomMax})}u._esriAttributions.sort(function(M,T){return T.score-M.score});var b={target:u};cu(b)}},this))}function cu(o){var u=o.target,c=u._esriAttributions;if(!(!u||!u.attributionControl)){var f=u.attributionControl._container.querySelector(".esri-dynamic-attribution");if(f&&c){for(var l="",d=u.getBounds(),m=Y.exports.latLngBounds(d.getSouthWest().wrap(),d.getNorthEast().wrap()),_=u.getZoom(),w=0;w<c.length;w++){var I=c[w],b=I.attribution;!l.match(b)&&I.bounds.intersects(m)&&_>=I.minZoom&&_<=I.maxZoom&&(l+=", "+b)}l=l.substr(2),f.innerHTML=l,f.style.maxWidth=hu(u),u.fire("attributionupdated",{attribution:l})}}}var Cu=Y.exports.Class.extend({options:{proxy:!1,useCors:pa},generateSetter:function(o,u){return Y.exports.Util.bind(function(c){return this.params[o]=c,this},u)},initialize:function(o){if(o.request&&o.options?(this._service=o,Y.exports.Util.setOptions(this,o.options)):(Y.exports.Util.setOptions(this,o),this.options.url=Iu(o.url)),this.params=Y.exports.Util.extend({},this.params||{}),this.setters)for(var u in this.setters){var c=this.setters[u];this[u]=this.generateSetter(c,this)}},token:function(o){return this._service?this._service.authenticate(o):this.params.token=o,this},apikey:function(o){return this.token(o)},format:function(o){return this.params.returnUnformattedValues=!o,this},request:function(o,u){return this.options.requestParams&&Y.exports.Util.extend(this.params,this.options.requestParams),this._service?this._service.request(this.path,this.params,o,u):this._request("request",this.path,this.params,o,u)},_request:function(o,u,c,f,l){var d=this.options.proxy?this.options.proxy+"?"+this.options.url+u:this.options.url+u;return(o==="get"||o==="request")&&!this.options.useCors?ha.get.JSONP(d,c,f,l):ha[o](d,c,f,l)}}),wc=Cu.extend({setters:{offset:"resultOffset",limit:"resultRecordCount",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",returnM:"returnM",transform:"datumTransformation",token:"token"},path:"query",params:{returnGeometry:!0,where:"1=1",outSR:4326,outFields:"*"},within:function(o){return this._setGeometryParams(o),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(o){return this._setGeometryParams(o),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(o){return this._setGeometryParams(o),this.params.spatialRel="esriSpatialRelWithin",this},crosses:function(o){return this._setGeometryParams(o),this.params.spatialRel="esriSpatialRelCrosses",this},touches:function(o){return this._setGeometryParams(o),this.params.spatialRel="esriSpatialRelTouches",this},overlaps:function(o){return this._setGeometryParams(o),this.params.spatialRel="esriSpatialRelOverlaps",this},bboxIntersects:function(o){return this._setGeometryParams(o),this.params.spatialRel="esriSpatialRelEnvelopeIntersects",this},indexIntersects:function(o){return this._setGeometryParams(o),this.params.spatialRel="esriSpatialRelIndexIntersects",this},nearby:function(o,u){return o=Y.exports.latLng(o),this.params.geometry=[o.lng,o.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=u,this.params.inSR=4326,this},where:function(o){return this.params.where=o,this},between:function(o,u){return this.params.time=[o.valueOf(),u.valueOf()],this},simplify:function(o,u){var c=Math.abs(o.getBounds().getWest()-o.getBounds().getEast());return this.params.maxAllowableOffset=c/o.getSize().y*u,this},orderBy:function(o,u){return u=u||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[o,u].join(" "),this},run:function(o,u){return this._cleanParams(),this.options.isModern||Lc(this.options.url)&&this.options.isModern===void 0?(this.params.f="geojson",this.request(function(c,f){this._trapSQLerrors(c),o.call(u,c,f,f)},this)):this.request(function(c,f){this._trapSQLerrors(c),o.call(u,c,f&&va(f),f)},this)},count:function(o,u){return this._cleanParams(),this.params.returnCountOnly=!0,this.request(function(c,f){o.call(this,c,f&&f.count,f)},u)},ids:function(o,u){return this._cleanParams(),this.params.returnIdsOnly=!0,this.request(function(c,f){o.call(this,c,f&&f.objectIds,f)},u)},bounds:function(o,u){return this._cleanParams(),this.params.returnExtentOnly=!0,this.request(function(c,f){f&&f.extent&&Zu(f.extent)?o.call(u,c,Zu(f.extent),f):(c={message:"Invalid Bounds"},o.call(u,c,null,f))},u)},distinct:function(){return this.params.returnGeometry=!1,this.params.returnDistinctValues=!0,this},pixelSize:function(o){var u=Y.exports.point(o);return this.params.pixelSize=[u.x,u.y],this},layer:function(o){return this.path=o+"/query",this},_trapSQLerrors:function(o){o&&o.code==="400"&&Jr("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometryParams:function(o){this.params.inSR=4326;var u=Ul(o);this.params.geometry=u.geometry,this.params.geometryType=u.geometryType}});function Su(o){return new wc(o)}var Ic=Cu.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!0,returnGeometry:!0,returnZ:!0,returnM:!1},layerDefs:function(o,u){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[o,u].join(":"),this},simplify:function(o,u){var c=Math.abs(o.getBounds().getWest()-o.getBounds().getEast());return this.params.maxAllowableOffset=c/o.getSize().y*u,this},run:function(o,u){return this.request(function(c,f){o.call(u,c,f&&va(f),f)},u)}});function Cc(o){return new Ic(o)}var Vl=Cu.extend({path:"identify",between:function(o,u){return this.params.time=[o.valueOf(),u.valueOf()],this}}),Sc=Vl.extend({setters:{layers:"layers",precision:"geometryPrecision",tolerance:"tolerance",returnGeometry:"returnGeometry"},params:{sr:4326,layers:"all",tolerance:3,returnGeometry:!0},on:function(o){var u=Bl(o.getBounds()),c=o.getSize();return this.params.imageDisplay=[c.x,c.y,96],this.params.mapExtent=[u.xmin,u.ymin,u.xmax,u.ymax],this},at:function(o){return o.length===2&&(o=Y.exports.latLng(o)),this._setGeometryParams(o),this},layerDef:function(o,u){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[o,u].join(":"),this},simplify:function(o,u){var c=Math.abs(o.getBounds().getWest()-o.getBounds().getEast());return this.params.maxAllowableOffset=c/o.getSize().y*u,this},run:function(o,u){return this.request(function(c,f){if(c)o.call(u,c,void 0,f);else{var l=va(f);f.results=f.results.reverse();for(var d=0;d<l.features.length;d++){var m=l.features[d];m.layerId=f.results[d].layerId}o.call(u,void 0,l,f)}})},_setGeometryParams:function(o){var u=Ul(o);this.params.geometry=u.geometry,this.params.geometryType=u.geometryType}});function bc(o){return new Sc(o)}var Nc=Vl.extend({setters:{setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setPixelSize:"pixelSize",returnCatalogItems:"returnCatalogItems",returnGeometry:"returnGeometry"},params:{returnGeometry:!1},at:function(o){return o=Y.exports.latLng(o),this.params.geometry=JSON.stringify({x:o.lng,y:o.lat,spatialReference:{wkid:4326}}),this.params.geometryType="esriGeometryPoint",this},getMosaicRule:function(){return this.params.mosaicRule},getRenderingRule:function(){return this.params.renderingRule},getPixelSize:function(){return this.params.pixelSize},run:function(o,u){return this.request(function(c,f){o.call(u,c,f&&this._responseToGeoJSON(f),f)},this)},_responseToGeoJSON:function(o){var u=o.location,c=o.catalogItems,f=o.catalogItemVisibilities,l={pixel:{type:"Feature",geometry:{type:"Point",coordinates:[u.x,u.y]},crs:{type:"EPSG",properties:{code:u.spatialReference.wkid}},properties:{OBJECTID:o.objectId,name:o.name,value:o.value},id:o.objectId}};if(o.properties&&o.properties.Values&&(l.pixel.properties.values=o.properties.Values),c&&c.features&&(l.catalogItems=va(c),f&&f.length===l.catalogItems.features.length))for(var d=f.length-1;d>=0;d--)l.catalogItems.features[d].properties.catalogItemVisibility=f[d];return l}});function Tc(o){return new Nc(o)}var bu=Y.exports.Evented.extend({options:{proxy:!1,useCors:pa,timeout:0},initialize:function(o){o=o||{},this._requestQueue=[],this._authenticating=!1,Y.exports.Util.setOptions(this,o),this.options.url=Iu(this.options.url)},get:function(o,u,c,f){return this._request("get",o,u,c,f)},post:function(o,u,c,f){return this._request("post",o,u,c,f)},request:function(o,u,c,f){return this._request("request",o,u,c,f)},metadata:function(o,u){return this._request("get","",{},o,u)},authenticate:function(o){return this._authenticating=!1,this.options.token=o,this._runQueue(),this},getTimeout:function(){return this.options.timeout},setTimeout:function(o){this.options.timeout=o},_request:function(o,u,c,f,l){this.fire("requeststart",{url:this.options.url+u,params:c,method:o},!0);var d=this._createServiceCallback(o,u,c,f,l);if(this.options.token&&(c.token=this.options.token),this.options.requestParams&&Y.exports.Util.extend(c,this.options.requestParams),this._authenticating)this._requestQueue.push([o,u,c,f,l]);else{var m=this.options.proxy?this.options.proxy+"?"+this.options.url+u:this.options.url+u;return(o==="get"||o==="request")&&!this.options.useCors?ha.get.JSONP(m,c,d,l):ha[o](m,c,d,l)}},_createServiceCallback:function(o,u,c,f,l){return Y.exports.Util.bind(function(d,m){d&&(d.code===499||d.code===498)&&(this._authenticating=!0,this._requestQueue.push([o,u,c,f,l]),this.fire("authenticationrequired",{authenticate:Y.exports.Util.bind(this.authenticate,this)},!0),d.authenticate=Y.exports.Util.bind(this.authenticate,this)),f.call(l,d,m),d?this.fire("requesterror",{url:this.options.url+u,params:c,message:d.message,code:d.code,method:o},!0):this.fire("requestsuccess",{url:this.options.url+u,params:c,response:m,method:o},!0),this.fire("requestend",{url:this.options.url+u,params:c,method:o},!0)},this)},_runQueue:function(){for(var o=this._requestQueue.length-1;o>=0;o--){var u=this._requestQueue[o],c=u.shift();this[c].apply(this,u)}this._requestQueue=[]}}),Pc=bu.extend({identify:function(){return bc(this)},find:function(){return Cc(this)},query:function(){return Su(this)}});function Zl(o){return new Pc(o)}var Mc=bu.extend({query:function(){return Su(this)},identify:function(){return Tc(this)}});function Rc(o){return new Mc(o)}var Oc=bu.extend({options:{idAttribute:"OBJECTID"},query:function(){return Su(this)},addFeature:function(o,u,c){this.addFeatures(o,u,c)},addFeatures:function(o,u,c){for(var f=o.features?o.features:[o],l=f.length-1;l>=0;l--)delete f[l].id;return o=ca(o),o=f.length>1?o:[o],this.post("addFeatures",{features:o},function(d,m){var _=m&&m.addResults?m.addResults.length>1?m.addResults:m.addResults[0]:void 0;u&&u.call(c,d||m.addResults[0].error,_)},c)},updateFeature:function(o,u,c){this.updateFeatures(o,u,c)},updateFeatures:function(o,u,c){var f=o.features?o.features:[o];return o=ca(o,this.options.idAttribute),o=f.length>1?o:[o],this.post("updateFeatures",{features:o},function(l,d){var m=d&&d.updateResults?d.updateResults.length>1?d.updateResults:d.updateResults[0]:void 0;u&&u.call(c,l||d.updateResults[0].error,m)},c)},deleteFeature:function(o,u,c){this.deleteFeatures(o,u,c)},deleteFeatures:function(o,u,c){return this.post("deleteFeatures",{objectIds:o},function(f,l){var d=l&&l.deleteResults?l.deleteResults.length>1?l.deleteResults:l.deleteResults[0]:void 0;u&&u.call(c,f||l.deleteResults[0].error,d)},c)}});function Ac(o){return new Oc(o)}var Ne=window.location.protocol!=="https:"?"http:":"https:",Wu=Y.exports.TileLayer.extend({statics:{TILES:{Streets:{urlTemplate:Ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Street_Map"}},Topographic:{urlTemplate:Ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Topo_Map"}},Oceans:{urlTemplate:Ne+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/Ocean_Basemap"}},OceansLabels:{urlTemplate:Ne+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:Cr?"esri-labels":"tilePane",attribution:""}},NationalGeographic:{urlTemplate:Ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"National Geographic, DeLorme, HERE, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, increment P Corp."}},DarkGray:{urlTemplate:Ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},DarkGrayLabels:{urlTemplate:Ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:Cr?"esri-labels":"tilePane",attribution:""}},Gray:{urlTemplate:Ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},GrayLabels:{urlTemplate:Ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:Cr?"esri-labels":"tilePane",attribution:""}},Imagery:{urlTemplate:Ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}},ImageryLabels:{urlTemplate:Ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:Cr?"esri-labels":"tilePane",attribution:""}},ImageryTransportation:{urlTemplate:Ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:Cr?"esri-labels":"tilePane",attribution:""}},ShadedRelief:{urlTemplate:Ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS"}},ShadedReliefLabels:{urlTemplate:Ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:12,subdomains:["server","services"],pane:Cr?"esri-labels":"tilePane",attribution:""}},Terrain:{urlTemplate:Ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS, NOAA"}},TerrainLabels:{urlTemplate:Ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],pane:Cr?"esri-labels":"tilePane",attribution:""}},USATopo:{urlTemplate:Ne+"//{s}.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:15,subdomains:["server","services"],attribution:"USGS, National Geographic Society, i-cubed"}},ImageryClarity:{urlTemplate:Ne+"//clarity.maptiles.arcgis.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community"}},Physical:{urlTemplate:Ne+"//{s}.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:8,subdomains:["server","services"],attribution:"U.S. National Park Service"}},ImageryFirefly:{urlTemplate:Ne+"//fly.maptiles.arcgis.com/arcgis/rest/services/World_Imagery_Firefly/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}}}},initialize:function(o,u){var c;if(typeof o=="object"&&o.urlTemplate&&o.options)c=o;else if(typeof o=="string"&&Wu.TILES[o])c=Wu.TILES[o];else throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", "Physical", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", "ImageryLabels", "ImageryTransportation", "ImageryClarity", "ImageryFirefly", ShadedRelief", "ShadedReliefLabels", "Terrain", "TerrainLabels" or "USATopo"');var f=Y.exports.Util.extend(c.options,u);Y.exports.Util.setOptions(this,f),this.options.ignoreDeprecationWarning||console.warn("WARNING: L.esri.BasemapLayer uses data services that are in mature support and are not being updated. Please use L.esri.Vector.vectorBasemapLayer instead. More info: https://esriurl.com/esri-leaflet-basemap"),this.options.token&&c.urlTemplate.indexOf("token=")===-1&&(c.urlTemplate+="?token="+this.options.token),this.options.proxy&&(c.urlTemplate=this.options.proxy+"?"+c.urlTemplate),Y.exports.TileLayer.prototype.initialize.call(this,c.urlTemplate,f)},onAdd:function(o){_a(o),this.options.pane==="esri-labels"&&this._initPane(),this.options.attributionUrl&&Ec((this.options.proxy?this.options.proxy+"?":"")+this.options.attributionUrl,o),o.on("moveend",cu),Y.exports.TileLayer.prototype.onAdd.call(this,o)},onRemove:function(o){xa(o),o.off("moveend",cu),Y.exports.TileLayer.prototype.onRemove.call(this,o)},_initPane:function(){if(!this._map.getPane(this.options.pane)){var o=this._map.createPane(this.options.pane);o.style.pointerEvents="none",o.style.zIndex=500}},getAttribution:function(){if(this.options.attribution)var o='<span class="esri-dynamic-attribution">'+this.options.attribution+"</span>";return o}}),Dc=Y.exports.TileLayer.extend({options:{zoomOffsetAllowance:.1,errorTileUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAA1BMVEUzNDVszlHHAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAAAAAAAAAB6mUWpAAAADZJREFUeJztwQEBAAAAgiD/r25IQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7waBAAABw08RwAAAAABJRU5ErkJggg=="},statics:{MercatorZoomLevels:{0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763}},initialize:function(o){o=Y.exports.Util.setOptions(this,o),o=ya(o),this.tileUrl=(o.proxy?o.proxy+"?":"")+o.url+"tile/{z}/{y}/{x}"+(o.requestParams&&Object.keys(o.requestParams).length>0?Y.exports.Util.getParamString(o.requestParams):""),o.url.indexOf("{s}")!==-1&&o.subdomains&&(o.url=o.url.replace("{s}",o.subdomains[0])),this.service=Zl(o),this.service.addEventParent(this);var u=new RegExp(/tiles.arcgis(online)?\.com/g);u.test(o.url)&&(this.tileUrl=this.tileUrl.replace("://tiles","://tiles{s}"),o.subdomains=["1","2","3","4"]),this.options.token&&(this.tileUrl+="?token="+this.options.token),Y.exports.TileLayer.prototype.initialize.call(this,this.tileUrl,o)},getTileUrl:function(o){var u=this._getZoomForUrl();return Y.exports.Util.template(this.tileUrl,Y.exports.Util.extend({s:this._getSubdomain(o),x:o.x,y:o.y,z:this._lodMap&&this._lodMap[u]?this._lodMap[u]:u},this.options))},createTile:function(o,u){var c=document.createElement("img");return Y.exports.DomEvent.on(c,"load",Y.exports.Util.bind(this._tileOnLoad,this,u,c)),Y.exports.DomEvent.on(c,"error",Y.exports.Util.bind(this._tileOnError,this,u,c)),this.options.crossOrigin&&(c.crossOrigin=""),c.alt="",!this._lodMap||this._lodMap&&this._lodMap[this._getZoomForUrl()]?c.src=this.getTileUrl(o):this.once("lodmap",function(){c.src=this.getTileUrl(o)},this),c},onAdd:function(o){_a(o),this._lodMap||this.metadata(function(u,c){if(!u&&c.spatialReference){var f=c.spatialReference.latestWkid||c.spatialReference.wkid;if(!this.options.attribution&&o.attributionControl&&c.copyrightText&&(this.options.attribution=c.copyrightText,o.attributionControl.addAttribution(this.getAttribution())),o.options.crs===Y.exports.CRS.EPSG3857&&(f===102100||f===3857)){this._lodMap={};for(var l=c.tileInfo.lods,d=Dc.MercatorZoomLevels,m=0;m<l.length;m++){var _=l[m];for(var w in d){var I=d[w];if(this._withinPercentage(_.resolution,I,this.options.zoomOffsetAllowance)){this._lodMap[w]=_.level;break}}}this.fire("lodmap")}else o.options.crs&&o.options.crs.code&&o.options.crs.code.indexOf(f)>-1||Jr("L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet https://developers.arcgis.com/esri-leaflet/samples/non-mercator-projection/")}},this),Y.exports.TileLayer.prototype.onAdd.call(this,o)},onRemove:function(o){xa(o),Y.exports.TileLayer.prototype.onRemove.call(this,o)},metadata:function(o,u){return this.service.metadata(o,u),this},identify:function(){return this.service.identify()},find:function(){return this.service.find()},query:function(){return this.service.query()},authenticate:function(o){var u="?token="+o;return this.tileUrl=this.options.token?this.tileUrl.replace(/\?token=(.+)/g,u):this.tileUrl+u,this.options.token=o,this.service.authenticate(o),this},_withinPercentage:function(o,u,c){var f=Math.abs(o/u-1);return f<c}}),kc=Y.exports.ImageOverlay.extend({onAdd:function(o){this._topLeft=o.getPixelBounds().min,Y.exports.ImageOverlay.prototype.onAdd.call(this,o)},_reset:function(){this._map.options.crs===Y.exports.CRS.EPSG3857?Y.exports.ImageOverlay.prototype._reset.call(this):Y.exports.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))}}),Hl=Y.exports.Layer.extend({options:{opacity:1,position:"front",f:"image",useCors:pa,attribution:null,interactive:!1,alt:""},onAdd:function(o){_a(o),this.options.zIndex&&(this.options.position=null),this._update=Y.exports.Util.throttle(this._update,this.options.updateInterval,this),o.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?o.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this.metadata(function(u,c){!u&&!this.options.attribution&&o.attributionControl&&c.copyrightText&&(this.options.attribution=c.copyrightText,o.attributionControl.addAttribution(this.getAttribution()))},this)},onRemove:function(o){xa(o),this._currentImage&&this._map.removeLayer(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this)},bindPopup:function(o,u){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=Y.exports.popup(u),this._popupFunction=o,this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},bringToFront:function(){return this.options.position="front",this._currentImage&&(this._currentImage.bringToFront(),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this.options.position="back",this._currentImage&&(this._currentImage.bringToBack(),this._setAutoZIndex(Math.min)),this},setZIndex:function(o){return this.options.zIndex=o,this._currentImage&&this._currentImage.setZIndex(o),this},_setAutoZIndex:function(o){if(!!this._currentImage){for(var u=this._currentImage.getPane().children,c=-o(-1/0,1/0),f=0,l=u.length,d;f<l;f++)d=u[f].style.zIndex,u[f]!==this._currentImage._image&&d&&(c=o(c,+d));isFinite(c)&&(this.options.zIndex=c+o(-1,1),this.setZIndex(this.options.zIndex))}},getAttribution:function(){return this.options.attribution},getOpacity:function(){return this.options.opacity},setOpacity:function(o){return this.options.opacity=o,this._currentImage&&this._currentImage.setOpacity(o),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(o,u){return this.options.from=o,this.options.to=u,this._update(),this},metadata:function(o,u){return this.service.metadata(o,u),this},authenticate:function(o){return this.service.authenticate(o),this},redraw:function(){this._update()},_renderImage:function(o,u,c){if(this._map){if(c&&(o="data:"+c+";base64,"+o),!o)return;var f=new kc(o,u,{opacity:0,crossOrigin:this.options.withCredentials?"use-credentials":this.options.useCors,alt:this.options.alt,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),l=function(){this._map.removeLayer(f),this.fire("error"),f.off("load",d,this)},d=function(m){if(f.off("error",l,this),this._map){var _=m.target,w=this._currentImage;_._bounds.equals(u)&&_._bounds.equals(this._map.getBounds())?(this._currentImage=_,this.options.position==="front"?this.bringToFront():this.options.position==="back"&&this.bringToBack(),this.options.zIndex&&this.setZIndex(this.options.zIndex),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map.removeLayer(this._currentImage),w&&this._map&&this._map.removeLayer(w),w&&w._map&&w._map.removeLayer(w)):this._map.removeLayer(_)}this.fire("load",{bounds:u})};f.once("error",l,this),f.once("load",d,this)}},_update:function(){if(!!this._map){var o=this._map.getZoom(),u=this._map.getBounds();if(!this._animatingZoom&&!(this._map._panTransition&&this._map._panTransition._inProgress)){if(o>this.options.maxZoom||o<this.options.minZoom){this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null);return}var c=this._buildExportParams();Y.exports.Util.extend(c,this.options.requestParams),c?(this._requestExport(c,u),this.fire("loading",{bounds:u})):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null)}}},_renderPopup:function(o,u,c,f){if(o=Y.exports.latLng(o),this._shouldRenderPopup&&this._lastClick.equals(o)){var l=this._popupFunction(u,c,f);l&&this._popup.setLatLng(o).setContent(l).openOn(this._map)}},_resetPopupState:function(o){this._shouldRenderPopup=!1,this._lastClick=o.latlng},_calculateBbox:function(){var o=this._map.getPixelBounds(),u=this._map.unproject(o.getBottomLeft()),c=this._map.unproject(o.getTopRight()),f=this._map.options.crs.project(c),l=this._map.options.crs.project(u),d=Y.exports.bounds(f,l);return[d.getBottomLeft().x,d.getBottomLeft().y,d.getTopRight().x,d.getTopRight().y].join(",")},_calculateImageSize:function(){var o=this._map.getPixelBounds(),u=this._map.getSize(),c=this._map.unproject(o.getBottomLeft()),f=this._map.unproject(o.getTopRight()),l=this._map.latLngToLayerPoint(f).y,d=this._map.latLngToLayerPoint(c).y;return(l>0||d<u.y)&&(u.y=d-l),u.x+","+u.y}});Hl.extend({options:{updateInterval:150,format:"jpgpng",transparent:!0,f:"image"},query:function(){return this.service.query()},identify:function(){return this.service.identify()},initialize:function(o){o=ya(o),this.service=Rc(o),this.service.addEventParent(this),Y.exports.Util.setOptions(this,o)},setPixelType:function(o){return this.options.pixelType=o,this._update(),this},getPixelType:function(){return this.options.pixelType},setBandIds:function(o){return Y.exports.Util.isArray(o)?this.options.bandIds=o.join(","):this.options.bandIds=o.toString(),this._update(),this},getBandIds:function(){return this.options.bandIds},setNoData:function(o,u){return Y.exports.Util.isArray(o)?this.options.noData=o.join(","):this.options.noData=o.toString(),u&&(this.options.noDataInterpretation=u),this._update(),this},getNoData:function(){return this.options.noData},getNoDataInterpretation:function(){return this.options.noDataInterpretation},setRenderingRule:function(o){this.options.renderingRule=o,this._update()},getRenderingRule:function(){return this.options.renderingRule},setMosaicRule:function(o){this.options.mosaicRule=o,this._update()},getMosaicRule:function(){return this.options.mosaicRule},_getPopupData:function(o){var u=Y.exports.Util.bind(function(f,l,d){f||setTimeout(Y.exports.Util.bind(function(){this._renderPopup(o.latlng,f,l,d)},this),300)},this),c=this.identify().at(o.latlng);this.options.mosaicRule&&c.setMosaicRule(this.options.mosaicRule),c.run(u),this._shouldRenderPopup=!0,this._lastClick=o.latlng},_buildExportParams:function(){var o=parseInt(this._map.options.crs.code.split(":")[1],10),u={bbox:this._calculateBbox(),size:this._calculateImageSize(),format:this.options.format,transparent:this.options.transparent,bboxSR:o,imageSR:o};return this.options.from&&this.options.to&&(u.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.options.pixelType&&(u.pixelType=this.options.pixelType),this.options.interpolation&&(u.interpolation=this.options.interpolation),this.options.compressionQuality&&(u.compressionQuality=this.options.compressionQuality),this.options.bandIds&&(u.bandIds=this.options.bandIds),(this.options.noData===0||this.options.noData)&&(u.noData=this.options.noData),this.options.noDataInterpretation&&(u.noDataInterpretation=this.options.noDataInterpretation),this.service.options.token&&(u.token=this.service.options.token),this.options.renderingRule&&(u.renderingRule=JSON.stringify(this.options.renderingRule)),this.options.mosaicRule&&(u.mosaicRule=JSON.stringify(this.options.mosaicRule)),u},_requestExport:function(o,u){if(this.options.f==="json")this.service.request("exportImage",o,function(f,l){f||(this.options.token&&(l.href+="?token="+this.options.token),this.options.proxy&&(l.href=this.options.proxy+"?"+l.href),this._renderImage(l.href,u))},this);else{o.f="image";var c=this.options.url+"exportImage"+Y.exports.Util.getParamString(o);this.options.proxy&&(c=this.options.proxy+"?"+c),this._renderImage(c,u)}}});Hl.extend({options:{updateInterval:150,layers:!1,layerDefs:!1,timeOptions:!1,format:"png32",transparent:!0,f:"json"},initialize:function(o){o=ya(o),this.service=Zl(o),this.service.addEventParent(this),Y.exports.Util.setOptions(this,o)},getDynamicLayers:function(){return this.options.dynamicLayers},setDynamicLayers:function(o){return this.options.dynamicLayers=o,this._update(),this},getLayers:function(){return this.options.layers},setLayers:function(o){return this.options.layers=o,this._update(),this},getLayerDefs:function(){return this.options.layerDefs},setLayerDefs:function(o){return this.options.layerDefs=o,this._update(),this},getTimeOptions:function(){return this.options.timeOptions},setTimeOptions:function(o){return this.options.timeOptions=o,this._update(),this},query:function(){return this.service.query()},identify:function(){return this.service.identify()},find:function(){return this.service.find()},_getPopupData:function(o){var u=Y.exports.Util.bind(function(l,d,m){l||setTimeout(Y.exports.Util.bind(function(){this._renderPopup(o.latlng,l,d,m)},this),300)},this),c;if(this.options.popup?c=this.options.popup.on(this._map).at(o.latlng):c=this.identify().on(this._map).at(o.latlng),c.params.maxAllowableOffset||c.simplify(this._map,.5),this.options.popup&&this.options.popup.params&&this.options.popup.params.layers||(this.options.layers?c.layers("visible:"+this.options.layers.join(",")):c.layers("visible")),this.options.layerDefs&&typeof this.options.layerDefs!="string"&&!c.params.layerDefs)for(var f in this.options.layerDefs)Object.prototype.hasOwnProperty.call(this.options.layerDefs,f)&&c.layerDef(f,this.options.layerDefs[f]);c.run(u),this._shouldRenderPopup=!0,this._lastClick=o.latlng},_buildExportParams:function(){var o=parseInt(this._map.options.crs.code.split(":")[1],10),u={bbox:this._calculateBbox(),size:this._calculateImageSize(),dpi:96,format:this.options.format,transparent:this.options.transparent,bboxSR:o,imageSR:o};if(this.options.dynamicLayers&&(u.dynamicLayers=this.options.dynamicLayers),this.options.layers){if(this.options.layers.length===0)return;u.layers="show:"+this.options.layers.join(",")}return this.options.layerDefs&&(u.layerDefs=typeof this.options.layerDefs=="string"?this.options.layerDefs:JSON.stringify(this.options.layerDefs)),this.options.timeOptions&&(u.timeOptions=JSON.stringify(this.options.timeOptions)),this.options.from&&this.options.to&&(u.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.service.options.token&&(u.token=this.service.options.token),this.options.proxy&&(u.proxy=this.options.proxy),this.options.disableCache&&(u._ts=Date.now()),u},_requestExport:function(o,u){if(this.options.f==="json")this.service.request("export",o,function(f,l){f||(this.options.token&&l.href&&(l.href+="?token="+this.options.token),this.options.proxy&&l.href&&(l.href=this.options.proxy+"?"+l.href),l.href?this._renderImage(l.href,u):this._renderImage(l.imageData,u,l.contentType))},this);else{o.f="image";var c=this.options.url+"export"+Y.exports.Util.getParamString(o);this.options.proxy&&(c=this.options.proxy+"?"+c),this._renderImage(c,u)}}});var ia=Y.exports.Layer.extend({options:{cellSize:512,updateWhenIdle:Y.exports.Browser.mobile,updateInterval:150,noWrap:!1,keepBuffer:1.5},initialize:function(o){Y.exports.Util.setOptions(this,o)},onAdd:function(o){this._cells={},this._activeCells={},this._resetView(),this._update()},onRemove:function(o){this._removeAllCells(),this._cellZoom=void 0},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllCells(),this._update()),this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=Y.exports.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),o},createCell:function(){return document.createElement("div")},removeCell:function(){},reuseCell:function(){},cellLeave:function(){},cellEnter:function(){},getCellSize:function(){var o=this.options.cellSize;return o instanceof Y.exports.Point?o:new Y.exports.Point(o,o)},_pruneCells:function(){if(!!this._map){var o,u;for(o in this._cells)u=this._cells[o],u.retain=u.current;for(o in this._cells)if(u=this._cells[o],u.current&&!u.active){var c=u.coords;this._retainParent(c.x,c.y,c.z,c.z-5)||this._retainChildren(c.x,c.y,c.z,c.z+2)}for(o in this._cells)this._cells[o].retain||this._removeCell(o)}},_removeAllCells:function(){for(var o in this._cells)this._removeCell(o)},_invalidateAll:function(){this._removeAllCells(),this._cellZoom=void 0},_retainParent:function(o,u,c,f){var l=Math.floor(o/2),d=Math.floor(u/2),m=c-1,_=new Y.exports.Point(+l,+d);_.z=+m;var w=this._cellCoordsToKey(_),I=this._cells[w];return I&&I.active?(I.retain=!0,!0):(I&&I.loaded&&(I.retain=!0),m>f?this._retainParent(l,d,m,f):!1)},_retainChildren:function(o,u,c,f){for(var l=2*o;l<2*o+2;l++)for(var d=2*u;d<2*u+2;d++){var m=new Y.exports.Point(l,d);m.z=c+1;var _=this._cellCoordsToKey(m),w=this._cells[_];if(w&&w.active){w.retain=!0;continue}else w&&w.loaded&&(w.retain=!0);c+1<f&&this._retainChildren(l,d,c+1,f)}},_resetView:function(o){var u=o&&(o.pinch||o.flyTo);u||this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_setView:function(o,u,c,f){var l=Math.round(u);f||(this._cellZoom=l,this._abortLoading&&this._abortLoading(),this._resetGrid(),l!==void 0&&this._update(o),c||this._pruneCells(),this._noPrune=!!c)},_resetGrid:function(){var o=this._map,u=o.options.crs,c=this._cellSize=this.getCellSize(),f=this._cellZoom,l=this._map.getPixelWorldBounds(this._cellZoom);l&&(this._globalCellRange=this._pxBoundsToCellRange(l)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,u.wrapLng[0]],f).x/c.x),Math.ceil(o.project([0,u.wrapLng[1]],f).x/c.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([u.wrapLat[0],0],f).y/c.x),Math.ceil(o.project([u.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(o){var u=o&&(o.pinch||o.flyTo);u||!this._map||this._map._animatingZoom||this._update()},_getCelldPixelBounds:function(o){var u=this._map,c=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),f=u.getZoomScale(c,this._cellZoom),l=u.project(o,this._cellZoom).floor(),d=u.getSize().divideBy(f*2);return new Y.exports.Bounds(l.subtract(d),l.add(d))},_update:function(o){var u=this._map;if(!!u){var c=Math.round(u.getZoom());o===void 0&&(o=u.getCenter());var f=this._getCelldPixelBounds(o),l=this._pxBoundsToCellRange(f),d=l.getCenter(),m=[],_=this.options.keepBuffer,w=new Y.exports.Bounds(l.getBottomLeft().subtract([_,-_]),l.getTopRight().add([_,-_]));if(!(isFinite(l.min.x)&&isFinite(l.min.y)&&isFinite(l.max.x)&&isFinite(l.max.y)))throw new Error("Attempted to load an infinite number of cells");for(var I in this._cells){var b=this._cells[I].coords;(b.z!==this._cellZoom||!w.contains(new Y.exports.Point(b.x,b.y)))&&(this._cells[I].current=!1)}if(Math.abs(c-this._cellZoom)>1){this._setView(o,c);return}for(var M=l.min.y;M<=l.max.y;M++)for(var T=l.min.x;T<=l.max.x;T++){var q=new Y.exports.Point(T,M);if(q.z=this._cellZoom,!!this._isValidCell(q)){var k=this._cells[this._cellCoordsToKey(q)];k?k.current=!0:m.push(q)}}if(m.sort(function(ot,it){return ot.distanceTo(d)-it.distanceTo(d)}),m.length!==0)for(this._loading||(this._loading=!0),T=0;T<m.length;T++){var P=this._cellCoordsToKey(m[T]),rt=this._keyToCellCoords(P);this._activeCells[rt]?this._reuseCell(m[T]):this._createCell(m[T])}}},_isValidCell:function(o){var u=this._map.options.crs;if(!u.infinite){var c=this._globalCellRange;if(!u.wrapLng&&(o.x<c.min.x||o.x>c.max.x)||!u.wrapLat&&(o.y<c.min.y||o.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._cellCoordsToBounds(o);return Y.exports.toLatLngBounds(this.options.bounds).overlaps(f)},_keyToBounds:function(o){return this._cellCoordsToBounds(this._keyToCellCoords(o))},_cellCoordsToNwSe:function(o){var u=this._map,c=this.getCellSize(),f=o.scaleBy(c),l=f.add(c),d=u.unproject(f,o.z),m=u.unproject(l,o.z);return[d,m]},_cellCoordsToBounds:function(o){var u=this._cellCoordsToNwSe(o),c=new Y.exports.LatLngBounds(u[0],u[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_cellCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToCellCoords:function(o){var u=o.split(":"),c=new Y.exports.Point(+u[0],+u[1]);return c.z=+u[2],c},_removeCell:function(o){var u=this._cells[o];if(!!u){var c=this._keyToCellCoords(o),f=this._wrapCoords(c),l=this._cellCoordsToBounds(this._wrapCoords(c));u.current=!1,delete this._cells[o],this._activeCells[o]=u,this.cellLeave(l,f,o),this.fire("cellleave",{key:o,coords:f,bounds:l})}},_reuseCell:function(o){var u=this._cellCoordsToKey(o);this._cells[u]=this._activeCells[u],this._cells[u].current=!0;var c=this._wrapCoords(o),f=this._cellCoordsToBounds(this._wrapCoords(o));this.cellEnter(f,c,u),this.fire("cellenter",{key:u,coords:c,bounds:f})},_createCell:function(o){var u=this._cellCoordsToKey(o),c=this._wrapCoords(o),f=this._cellCoordsToBounds(this._wrapCoords(o));this.createCell(f,c,u),this.fire("cellcreate",{key:u,coords:c,bounds:f}),this._cells[u]={coords:o,current:!0},Y.exports.Util.requestAnimFrame(this._pruneCells,this)},_cellReady:function(o,u,c){var f=this._cellCoordsToKey(o);c=this._cells[f],c&&(c.loaded=+new Date,c.active=!0)},_getCellPos:function(o){return o.scaleBy(this.getCellSize())},_wrapCoords:function(o){var u=new Y.exports.Point(this._wrapX?Y.exports.Util.wrapNum(o.x,this._wrapX):o.x,this._wrapY?Y.exports.Util.wrapNum(o.y,this._wrapY):o.y);return u.z=o.z,u},_pxBoundsToCellRange:function(o){var u=this.getCellSize();return new Y.exports.Bounds(o.min.unscaleBy(u).floor(),o.max.unscaleBy(u).ceil().subtract([1,1]))}});function qi(o){this.values=[].concat(o||[])}qi.prototype.query=function(o){var u=this.getIndex(o);return this.values[u]};qi.prototype.getIndex=function(u){this.dirty&&this.sort();for(var c=0,f=this.values.length-1,l,d;c<=f;)if(l=(c+f)/2|0,d=this.values[Math.round(l)],+d.value<+u)c=l+1;else if(+d.value>+u)f=l-1;else return l;return Math.abs(~f)};qi.prototype.between=function(u,c){var f=this.getIndex(u),l=this.getIndex(c);if(f===0&&l===0)return[];for(;this.values[f-1]&&this.values[f-1].value===u;)f--;for(;this.values[l+1]&&this.values[l+1].value===c;)l++;return this.values[l]&&this.values[l].value===c&&this.values[l+1]&&l++,this.values.slice(f,l)};qi.prototype.insert=function(u){return this.values.splice(this.getIndex(u.value),0,u),this};qi.prototype.bulkAdd=function(u,c){return this.values=this.values.concat([].concat(u||[])),c?this.sort():this.dirty=!0,this};qi.prototype.sort=function(){return this.values.sort(function(u,c){return+c.value-+u.value}).reverse(),this.dirty=!1,this};var $a=ia.extend({options:{attribution:null,where:"1=1",fields:["*"],from:!1,to:!1,timeField:!1,timeFilterMode:"server",simplifyFactor:0,precision:6,fetchAllFeatures:!1},initialize:function(o){if(ia.prototype.initialize.call(this,o),o=ya(o),o=Y.exports.Util.setOptions(this,o),this.service=Ac(o),this.service.addEventParent(this),this.options.fields[0]!=="*"){for(var u=!1,c=0;c<this.options.fields.length;c++)this.options.fields[c].match(/^(OBJECTID|FID|OID|ID)$/i)&&(u=!0);u===!1&&Jr("no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.")}this.options.timeField.start&&this.options.timeField.end?(this._startTimeIndex=new qi,this._endTimeIndex=new qi):this.options.timeField&&(this._timeIndex=new qi),this._cache={},this._currentSnapshot=[],this._activeRequests=0},onAdd:function(o){return _a(o),this.service.metadata(function(u,c){if(!u){var f=c.supportedQueryFormats,l=!1;(this.service.options.isModern===!1||this.options.fetchAllFeatures)&&(l=!0),!l&&f&&f.indexOf("geoJSON")!==-1&&(this.service.options.isModern=!0),c.objectIdField&&(this.service.options.idAttribute=c.objectIdField),!this.options.attribution&&o.attributionControl&&c.copyrightText&&(this.options.attribution=c.copyrightText,o.attributionControl.addAttribution(this.getAttribution()))}},this),o.on("zoomend",this._handleZoomChange,this),ia.prototype.onAdd.call(this,o)},onRemove:function(o){return xa(o),o.off("zoomend",this._handleZoomChange,this),ia.prototype.onRemove.call(this,o)},getAttribution:function(){return this.options.attribution},createCell:function(o,u){this._visibleZoom()&&this._requestFeatures(o,u)},_requestFeatures:function(o,u,c,f){this._activeRequests++,f=f||0;var l=this.options.where;return this._activeRequests===1&&this.fire("loading",{bounds:o},!0),this._buildQuery(o,f).run(function(d,m,_){_&&_.exceededTransferLimit&&this.fire("drawlimitexceeded"),this.options.where===l&&(!d&&m&&m.features.length&&Y.exports.Util.requestAnimFrame(Y.exports.Util.bind(function(){this._addFeatures(m.features,u),this._postProcessFeatures(o)},this)),!d&&m&&!m.features.length&&this._postProcessFeatures(o),d&&this._postProcessFeatures(o),c&&c.call(this,d,m),_&&(_.exceededTransferLimit||_.properties&&_.properties.exceededTransferLimit)&&this.options.fetchAllFeatures&&this._requestFeatures(o,u,c,f+m.features.length))},this)},_postProcessFeatures:function(o){this._activeRequests--,this._activeRequests<=0&&this.fire("load",{bounds:o})},_cacheKey:function(o){return o.z+":"+o.x+":"+o.y},_addFeatures:function(o,u){if(u){var c=this._cacheKey(u);this._cache[c]=this._cache[c]||[]}for(var f=o.length-1;f>=0;f--){var l=o[f].id;this._currentSnapshot.indexOf(l)===-1&&this._currentSnapshot.push(l),typeof c<"u"&&this._cache[c].indexOf(l)===-1&&this._cache[c].push(l)}this.options.timeField&&this._buildTimeIndexes(o),this.createLayers(o)},_buildQuery:function(o,u){var c=this.service.query().intersects(o).where(this.options.where).fields(this.options.fields).precision(this.options.precision);return this.options.fetchAllFeatures&&!isNaN(parseInt(u))&&(c=c.offset(u)),c.params.resultType="tile",this.options.requestParams&&Y.exports.Util.extend(c.params,this.options.requestParams),this.options.simplifyFactor&&c.simplify(this._map,this.options.simplifyFactor),this.options.timeFilterMode==="server"&&this.options.from&&this.options.to&&c.between(this.options.from,this.options.to),c},setWhere:function(o,u,c){this.options.where=o&&o.length?o:"1=1";for(var f=[],l=[],d=0,m=null,_=Y.exports.Util.bind(function(T,q){if(T&&(m=T),q)for(var k=q.features.length-1;k>=0;k--)l.push(q.features[k].id);d--,d<=0&&this._visibleZoom()&&o===this.options.where&&(this._currentSnapshot=l,Y.exports.Util.requestAnimFrame(Y.exports.Util.bind(function(){this.removeLayers(f),this.addLayers(l),u&&u.call(c,m)},this)))},this),w=this._currentSnapshot.length-1;w>=0;w--)f.push(this._currentSnapshot[w]);this._cache={};for(var I in this._cells){d++;var b=this._keyToCellCoords(I),M=this._cellCoordsToBounds(b);this._requestFeatures(M,b,_)}return this},getWhere:function(){return this.options.where},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(o,u,c,f){var l=this.options.from,d=this.options.to,m=0,_=null,w=Y.exports.Util.bind(function(T){T&&(_=T),this._filterExistingFeatures(l,d,o,u),m--,c&&m<=0&&c.call(f,_)},this);if(this.options.from=o,this.options.to=u,this._filterExistingFeatures(l,d,o,u),this.options.timeFilterMode==="server")for(var I in this._cells){m++;var b=this._keyToCellCoords(I),M=this._cellCoordsToBounds(b);this._requestFeatures(M,b,w)}return this},refresh:function(){this.setWhere(this.options.where)},_filterExistingFeatures:function(o,u,c,f){var l=o&&u?this._getFeaturesInTimeRange(o,u):this._currentSnapshot,d=this._getFeaturesInTimeRange(c,f);if(d.indexOf)for(var m=0;m<d.length;m++){var _=l.indexOf(d[m]);_>=0&&l.splice(_,1)}Y.exports.Util.requestAnimFrame(Y.exports.Util.bind(function(){this.removeLayers(l),this.addLayers(d)},this))},_getFeaturesInTimeRange:function(o,u){var c=[],f;if(this.options.timeField.start&&this.options.timeField.end){var l=this._startTimeIndex.between(o,u),d=this._endTimeIndex.between(o,u);f=l.concat(d)}else if(this._timeIndex)f=this._timeIndex.between(o,u);else return Jr("You must set timeField in the layer constructor in order to manipulate the start and end time filter."),[];for(var m=f.length-1;m>=0;m--)c.push(f[m].id);return c},_buildTimeIndexes:function(o){var u,c;if(this.options.timeField.start&&this.options.timeField.end){var f=[],l=[];for(u=o.length-1;u>=0;u--)c=o[u],f.push({id:c.id,value:new Date(c.properties[this.options.timeField.start])}),l.push({id:c.id,value:new Date(c.properties[this.options.timeField.end])});this._startTimeIndex.bulkAdd(f),this._endTimeIndex.bulkAdd(l)}else{var d=[];for(u=o.length-1;u>=0;u--)c=o[u],d.push({id:c.id,value:new Date(c.properties[this.options.timeField])});this._timeIndex.bulkAdd(d)}},_featureWithinTimeRange:function(o){if(!this.options.from||!this.options.to)return!0;var u=+this.options.from.valueOf(),c=+this.options.to.valueOf();if(typeof this.options.timeField=="string"){var f=+o.properties[this.options.timeField];return f>=u&&f<=c}if(this.options.timeField.start&&this.options.timeField.end){var l=+o.properties[this.options.timeField.start],d=+o.properties[this.options.timeField.end];return l>=u&&l<=c||d>=u&&d<=c||l<=u&&d>=c}},_visibleZoom:function(){if(!this._map)return!1;var o=this._map.getZoom();return!(o>this.options.maxZoom||o<this.options.minZoom)},_handleZoomChange:function(){if(!this._visibleZoom())this.removeLayers(this._currentSnapshot),this._currentSnapshot=[];else for(var o in this._cells){var u=this._cells[o].coords,c=this._cacheKey(u);this._cache[c]&&this.addLayers(this._cache[c])}},authenticate:function(o){return this.service.authenticate(o),this},metadata:function(o,u){return this.service.metadata(o,u),this},query:function(){return this.service.query()},_getMetadata:function(o){if(this._metadata){var u;o(u,this._metadata)}else this.metadata(Y.exports.Util.bind(function(c,f){this._metadata=f,o(c,this._metadata)},this))},addFeature:function(o,u,c){this.addFeatures(o,u,c)},addFeatures:function(o,u,c){this._getMetadata(Y.exports.Util.bind(function(f,l){if(f){u&&u.call(this,f,null);return}var d=o.features?o.features:[o];this.service.addFeatures(o,Y.exports.Util.bind(function(m,_){if(!m){for(var w=d.length-1;w>=0;w--)d[w].properties[l.objectIdField]=d.length>1?_[w].objectId:_.objectId,d[w].id=d.length>1?_[w].objectId:_.objectId;this._addFeatures(d)}u&&u.call(c,m,_)},this))},this))},updateFeature:function(o,u,c){this.updateFeatures(o,u,c)},updateFeatures:function(o,u,c){var f=o.features?o.features:[o];this.service.updateFeatures(o,function(l,d){if(!l){for(var m=f.length-1;m>=0;m--)this.removeLayers([f[m].id],!0);this._addFeatures(f)}u&&u.call(c,l,d)},this)},deleteFeature:function(o,u,c){this.deleteFeatures(o,u,c)},deleteFeatures:function(o,u,c){return this.service.deleteFeatures(o,function(f,l){var d=l.length?l:[l];if(!f&&d.length>0)for(var m=d.length-1;m>=0;m--)this.removeLayers([d[m].objectId],!0);u&&u.call(c,f,l)},this)}});$a.extend({options:{cacheLayers:!0},initialize:function(o){o.apikey&&(o.token=o.apikey),$a.prototype.initialize.call(this,o),this._originalStyle=this.options.style,this._layers={}},onRemove:function(o){for(var u in this._layers)o.removeLayer(this._layers[u]),this.fire("removefeature",{feature:this._layers[u].feature,permanent:!1},!0);return $a.prototype.onRemove.call(this,o)},createNewLayer:function(o){var u=Y.exports.GeoJSON.geometryToLayer(o,this.options);return u&&(u.defaultOptions=u.options),u},_updateLayer:function(o,u){var c=[],f=this.options.coordsToLatLng||Y.exports.GeoJSON.coordsToLatLng;switch(u.properties&&(o.feature.properties=u.properties),u.geometry.type){case"Point":c=Y.exports.GeoJSON.coordsToLatLng(u.geometry.coordinates),o.setLatLng(c);break;case"LineString":c=Y.exports.GeoJSON.coordsToLatLngs(u.geometry.coordinates,0,f),o.setLatLngs(c);break;case"MultiLineString":c=Y.exports.GeoJSON.coordsToLatLngs(u.geometry.coordinates,1,f),o.setLatLngs(c);break;case"Polygon":c=Y.exports.GeoJSON.coordsToLatLngs(u.geometry.coordinates,1,f),o.setLatLngs(c);break;case"MultiPolygon":c=Y.exports.GeoJSON.coordsToLatLngs(u.geometry.coordinates,2,f),o.setLatLngs(c);break}this.redraw(o.feature.id)},createLayers:function(o){for(var u=o.length-1;u>=0;u--){var c=o[u],f=this._layers[c.id],l;this._visibleZoom()&&f&&!this._map.hasLayer(f)&&(!this.options.timeField||this._featureWithinTimeRange(c))&&(this._map.addLayer(f),this.fire("addfeature",{feature:f.feature},!0)),f&&(f.setLatLngs||f.setLatLng)&&this._updateLayer(f,c),f||(l=this.createNewLayer(c),l?(l.feature=c,l.addEventParent(this),this.options.onEachFeature&&this.options.onEachFeature(l.feature,l),this._layers[l.feature.id]=l,this.setFeatureStyle(l.feature.id,this.options.style),this.fire("createfeature",{feature:l.feature},!0),this._visibleZoom()&&(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(c))&&this._map.addLayer(l)):Jr("invalid GeoJSON encountered"))}},addLayers:function(o){for(var u=o.length-1;u>=0;u--){var c=this._layers[o[u]];c&&(!this.options.timeField||this._featureWithinTimeRange(c.feature))&&(this._map.addLayer(c),this.fire("addfeature",{feature:c.feature},!0))}},removeLayers:function(o,u){for(var c=o.length-1;c>=0;c--){var f=o[c],l=this._layers[f];l&&(this.fire("removefeature",{feature:l.feature,permanent:u},!0),this._map.removeLayer(l)),l&&u&&delete this._layers[f]}},cellEnter:function(o,u){this._visibleZoom()&&!this._zooming&&this._map&&Y.exports.Util.requestAnimFrame(Y.exports.Util.bind(function(){var c=this._cacheKey(u),f=this._cellCoordsToKey(u),l=this._cache[c];this._activeCells[f]&&l&&this.addLayers(l)},this))},cellLeave:function(o,u){this._zooming||Y.exports.Util.requestAnimFrame(Y.exports.Util.bind(function(){if(this._map){var c=this._cacheKey(u),f=this._cellCoordsToKey(u),l=this._cache[c],d=this._map.getBounds();if(!this._activeCells[f]&&l){for(var m=!0,_=0;_<l.length;_++){var w=this._layers[l[_]];w&&w.getBounds&&d.intersects(w.getBounds())&&(m=!1)}m&&this.removeLayers(l,!this.options.cacheLayers),!this.options.cacheLayers&&m&&(delete this._cache[c],delete this._cells[f],delete this._activeCells[f])}}},this))},resetStyle:function(){return this.options.style=this._originalStyle,this.eachFeature(function(o){this.resetFeatureStyle(o.feature.id)},this),this},setStyle:function(o){return this.options.style=o,this.eachFeature(function(u){this.setFeatureStyle(u.feature.id,o)},this),this},resetFeatureStyle:function(o){var u=this._layers[o],c=this._originalStyle||Y.exports.Path.prototype.options;return u&&(Y.exports.Util.extend(u.options,u.defaultOptions),this.setFeatureStyle(o,c)),this},setFeatureStyle:function(o,u){var c=this._layers[o];return typeof u=="function"&&(u=u(c.feature)),c.setStyle&&c.setStyle(u),this},eachActiveFeature:function(o,u){if(this._map){var c=this._map.getBounds();for(var f in this._layers)this._currentSnapshot.indexOf(this._layers[f].feature.id)!==-1&&(typeof this._layers[f].getLatLng=="function"&&c.contains(this._layers[f].getLatLng())?o.call(u,this._layers[f]):typeof this._layers[f].getBounds=="function"&&c.intersects(this._layers[f].getBounds())&&o.call(u,this._layers[f]))}return this},eachFeature:function(o,u){for(var c in this._layers)o.call(u,this._layers[c]);return this},getFeature:function(o){return this._layers[o]},bringToBack:function(){this.eachFeature(function(o){o.bringToBack&&o.bringToBack()})},bringToFront:function(){this.eachFeature(function(o){o.bringToFront&&o.bringToFront()})},redraw:function(o){return o&&this._redraw(o),this},_redraw:function(o){var u=this._layers[o],c=u.feature;if(u&&u.setIcon&&this.options.pointToLayer&&this.options.pointToLayer){var f=this.options.pointToLayer(c,Y.exports.latLng(c.geometry.coordinates[1],c.geometry.coordinates[0])),l=f.options.icon;u.setIcon(l)}if(u&&u.setStyle&&this.options.pointToLayer){var d=this.options.pointToLayer(c,Y.exports.latLng(c.geometry.coordinates[1],c.geometry.coordinates[0])),m=d.options;this.setFeatureStyle(c.id,m)}u&&u.setStyle&&this.options.style&&this.resetStyle(c.id)}});(function(o,u,c){function f(l,d){for(;(l=l.parentElement)&&!l.classList.contains(d););return l}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(l,d){this._map=l,this._container=l._container,this._overlayPane=l._panes.overlayPane,this._popupPane=l._panes.popupPane,d&&d.shapeOptions&&(d.shapeOptions=L.Util.extend({},this.options.shapeOptions,d.shapeOptions)),L.setOptions(this,d);var m=L.version.split(".");parseInt(m[0],10)===1&&parseInt(m[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var l=this._map;l&&(L.DomUtil.disableTextSelection(),l.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(l){L.setOptions(this,l)},_fireCreatedEvent:function(l){this._map.fire(L.Draw.Event.CREATED,{layer:l,layerType:this.type})},_cancelDrawing:function(l){l.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(l,d){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,d&&d.drawError&&(d.drawError=L.Util.extend({},this.options.drawError,d.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,l,d)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var l=this._markers.pop(),d=this._poly,m=d.getLatLngs(),_=m.splice(-1,1)[0];this._poly.setLatLngs(m),this._markerGroup.removeLayer(l),d.getLatLngs().length<2&&this._map.removeLayer(d),this._vertexChanged(_,!1)}},addVertex:function(l){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(l))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(l)),this._poly.addLatLng(l),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(l,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var l=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),d=this._poly.newLatLngIntersects(l[l.length-1]);if(!this.options.allowIntersection&&d||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(l){var d=this._map.mouseEventToLayerPoint(l.originalEvent),m=this._map.layerPointToLatLng(d);this._currentLatLng=m,this._updateTooltip(m),this._updateGuide(d),this._mouseMarker.setLatLng(m),L.DomEvent.preventDefault(l.originalEvent)},_vertexChanged:function(l,d){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(l,d),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(l){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(l),this._clickHandled=!0,this._disableNewMarkers();var d=l.originalEvent,m=d.clientX,_=d.clientY;this._startPoint.call(this,m,_)}},_startPoint:function(l,d){this._mouseDownOrigin=L.point(l,d)},_onMouseUp:function(l){var d=l.originalEvent,m=d.clientX,_=d.clientY;this._endPoint.call(this,m,_,l),this._clickHandled=null},_endPoint:function(l,d,m){if(this._mouseDownOrigin){var _=L.point(l,d).distanceTo(this._mouseDownOrigin),w=this._calculateFinishDistance(m.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(m.latlng),this._finishShape()):w<10&&L.Browser.touch?this._finishShape():Math.abs(_)<9*(o.devicePixelRatio||1)&&this.addVertex(m.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(l){var d,m,_=l.originalEvent;!_.touches||!_.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(d=_.touches[0].clientX,m=_.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,d,m),this._endPoint.call(this,d,m,l),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(l){var d;if(this._markers.length>0){var m;if(this.type===L.Draw.Polyline.TYPE)m=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;m=this._markers[0]}var _=this._map.latLngToContainerPoint(m.getLatLng()),w=new L.Marker(l,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),I=this._map.latLngToContainerPoint(w.getLatLng());d=_.distanceTo(I)}else d=1/0;return d},_updateFinishHandler:function(){var l=this._markers.length;l>1&&this._markers[l-1].on("click",this._finishShape,this),l>2&&this._markers[l-2].off("click",this._finishShape,this)},_createMarker:function(l){var d=new L.Marker(l,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(d),d},_updateGuide:function(l){var d=this._markers?this._markers.length:0;d>0&&(l=l||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[d-1].getLatLng()),l))},_updateTooltip:function(l){var d=this._getTooltipText();l&&this._tooltip.updatePosition(l),this._errorShown||this._tooltip.updateContent(d)},_drawGuide:function(l,d){var m,_,w,I=Math.floor(Math.sqrt(Math.pow(d.x-l.x,2)+Math.pow(d.y-l.y,2))),b=this.options.guidelineDistance,M=this.options.maxGuideLineLength,T=I>M?I-M:b;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));T<I;T+=this.options.guidelineDistance)m=T/I,_={x:Math.floor(l.x*(1-m)+m*d.x),y:Math.floor(l.y*(1-m)+m*d.y)},w=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),w.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(w,_)},_updateGuideColor:function(l){if(this._guidesContainer)for(var d=0,m=this._guidesContainer.childNodes.length;d<m;d++)this._guidesContainer.childNodes[d].style.backgroundColor=l},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var l,d,m=this.options.showLength;return this._markers.length===0?l={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(d=m?this._getMeasurementString():"",l=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:d}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:d}),l},_updateRunningMeasure:function(l,d){var m,_,w=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(m=w-(d?2:1),_=L.GeometryUtil.isVersion07x()?l.distanceTo(this._markers[m].getLatLng())*(this.options.factor||1):this._map.distance(l,this._markers[m].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=_*(d?1:-1))},_getMeasurementString:function(){var l,d=this._currentLatLng,m=this._markers[this._markers.length-1].getLatLng();return l=L.GeometryUtil.isVersion07x()?m&&d&&d.distanceTo?this._measurementRunningTotal+d.distanceTo(m)*(this.options.factor||1):this._measurementRunningTotal||0:m&&d?this._measurementRunningTotal+this._map.distance(d,m)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(l,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var l=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,l)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(l,d){L.Draw.Polyline.prototype.initialize.call(this,l,d),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var l=this._markers.length;l===1&&this._markers[0].on("click",this._finishShape,this),l>2&&(this._markers[l-1].on("dblclick",this._finishShape,this),l>3&&this._markers[l-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var l,d;return this._markers.length===0?l=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(l=L.drawLocal.draw.handlers.polygon.tooltip.cont,d=this._getMeasurementString()):(l=L.drawLocal.draw.handlers.polygon.tooltip.end,d=this._getMeasurementString()),{text:l,subtext:d}},_getMeasurementString:function(){var l=this._area,d="";return l||this.options.showLength?(this.options.showLength&&(d=L.Draw.Polyline.prototype._getMeasurementString.call(this)),l&&(d+="<br>"+L.GeometryUtil.readableArea(l,this.options.metric,this.options.precision)),d):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(l,d){var m;!this.options.allowIntersection&&this.options.showArea&&(m=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(m)),L.Draw.Polyline.prototype._vertexChanged.call(this,l,d)},_cleanUpShape:function(){var l=this._markers.length;l>0&&(this._markers[0].off("click",this._finishShape,this),l>2&&this._markers[l-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(l,d){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,l,d)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),u.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(u,"mouseup",this._onMouseUp,this),L.DomEvent.off(u,"touchend",this._onMouseUp,this),u.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(l){this._isDrawing=!0,this._startLatLng=l.latlng,L.DomEvent.on(u,"mouseup",this._onMouseUp,this).on(u,"touchend",this._onMouseUp,this).preventDefault(l.originalEvent)},_onMouseMove:function(l){var d=l.latlng;this._tooltip.updatePosition(d),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(d))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(l,d){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,l,d)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(l){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!f(l.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(l){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,l)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,l),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var l=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,l)},_getTooltipText:function(){var l,d,m,_=L.Draw.SimpleShape.prototype._getTooltipText.call(this),w=this._shape,I=this.options.showArea;return w&&(l=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),d=L.GeometryUtil.geodesicArea(l),m=I?L.GeometryUtil.readableArea(d,this.options.metric):""),{text:_.text,subtext:m}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(l,d){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,l,d)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(l){var d=l.latlng;this._tooltip.updatePosition(d),this._mouseMarker.setLatLng(d),this._marker?(d=this._mouseMarker.getLatLng(),this._marker.setLatLng(d)):(this._marker=this._createMarker(d),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(l){return new L.Marker(l,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(l){this._onMouseMove(l),this._onClick()},_fireCreatedEvent:function(){var l=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,l)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(l,d){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,l,d)},_fireCreatedEvent:function(){var l=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,l)},_createMarker:function(l){return new L.CircleMarker(l,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(l,d){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,l,d)},_drawShape:function(l){if(L.GeometryUtil.isVersion07x())var d=this._startLatLng.distanceTo(l);else var d=this._map.distance(this._startLatLng,l);this._shape?this._shape.setRadius(d):(this._shape=new L.Circle(this._startLatLng,d,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var l=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,l)},_onMouseMove:function(l){var d,m=l.latlng,_=this.options.showRadius,w=this.options.metric;if(this._tooltip.updatePosition(m),this._isDrawing){this._drawShape(m),d=this._shape.getRadius().toFixed(1);var I="";_&&(I=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(d,w,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:I})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(l,d){this._marker=l,L.setOptions(this,d)},addHooks:function(){var l=this._marker;l.dragging.enable(),l.on("dragend",this._onDragEnd,l),this._toggleMarkerHighlight()},removeHooks:function(){var l=this._marker;l.dragging.disable(),l.off("dragend",this._onDragEnd,l),this._toggleMarkerHighlight()},_onDragEnd:function(l){var d=l.target;d.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:d})},_toggleMarkerHighlight:function(){var l=this._marker._icon;l&&(l.style.display="none",L.DomUtil.hasClass(l,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(l,"leaflet-edit-marker-selected"),this._offsetMarker(l,-4)):(L.DomUtil.addClass(l,"leaflet-edit-marker-selected"),this._offsetMarker(l,4)),l.style.display="")},_offsetMarker:function(l,d){var m=parseInt(l.style.marginTop,10)-d,_=parseInt(l.style.marginLeft,10)-d;l.style.marginTop=m+"px",l.style.marginLeft=_+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(l){this.latlngs=[l._latlngs],l._holes&&(this.latlngs=this.latlngs.concat(l._holes)),this._poly=l,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(l){for(var d=0;d<this._verticesHandlers.length;d++)l(this._verticesHandlers[d])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(l){l.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(l){l.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(l){l.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var l=0;l<this.latlngs.length;l++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[l],this._poly.options.poly))},_updateLatLngs:function(l){this.latlngs=[l.layer._latlngs],l.layer._holes&&(this.latlngs=this.latlngs.concat(l.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(l,d,m){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=l,m&&m.drawError&&(m.drawError=L.Util.extend({},this.options.drawError,m.drawError)),this._latlngs=d,L.setOptions(this,m)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var l=this._poly,d=l._path;l instanceof L.Polygon||(l.options.fill=!1,l.options.editing&&(l.options.editing.fill=!1)),d&&l.options.editing&&l.options.editing.className&&(l.options.original.className&&l.options.original.className.split(" ").forEach(function(m){L.DomUtil.removeClass(d,m)}),l.options.editing.className.split(" ").forEach(function(m){L.DomUtil.addClass(d,m)})),l.setStyle(l.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var l=this._poly,d=l._path;d&&l.options.editing&&l.options.editing.className&&(l.options.editing.className.split(" ").forEach(function(m){L.DomUtil.removeClass(d,m)}),l.options.original.className&&l.options.original.className.split(" ").forEach(function(m){L.DomUtil.addClass(d,m)})),l.setStyle(l.options.original),l._map&&(l._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var l,d,m,_,w=this._defaultShape();for(l=0,m=w.length;l<m;l++)_=this._createMarker(w[l],l),_.on("click",this._onMarkerClick,this),_.on("contextmenu",this._onContextMenu,this),this._markers.push(_);var I,b;for(l=0,d=m-1;l<m;d=l++)(l!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(I=this._markers[d],b=this._markers[l],this._createMiddleMarker(I,b),this._updatePrevNext(I,b))},_createMarker:function(l,d){var m=new L.Marker.Touch(l,{draggable:!0,icon:this.options.icon});return m._origLatLng=l,m._index=d,m.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(m),m},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var l=this._defaultShape(),d=[].splice.apply(l,arguments);return this._poly._convertLatLngs(l,!0),this._poly.redraw(),d},_removeMarker:function(l){var d=l._index;this._markerGroup.removeLayer(l),this._markers.splice(d,1),this._spliceLatLngs(d,1),this._updateIndexes(d,-1),l.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(l){var d=l.target,m=this._poly,_=L.LatLngUtil.cloneLatLng(d._origLatLng);if(L.extend(d._origLatLng,d._latlng),m.options.poly){var w=m._map._editTooltip;if(!m.options.poly.allowIntersection&&m.intersects()){L.extend(d._origLatLng,_),d.setLatLng(_);var I=m.options.color;m.setStyle({color:this.options.drawError.color}),w&&w.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){m.setStyle({color:I}),w&&w.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}d._middleLeft&&d._middleLeft.setLatLng(this._getMiddleLatLng(d._prev,d)),d._middleRight&&d._middleRight.setLatLng(this._getMiddleLatLng(d,d._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var b=this._poly.getLatLngs();this._poly._convertLatLngs(b,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(l){var d=L.Polygon&&this._poly instanceof L.Polygon?4:3,m=l.target;this._defaultShape().length<d||(this._removeMarker(m),this._updatePrevNext(m._prev,m._next),m._middleLeft&&this._markerGroup.removeLayer(m._middleLeft),m._middleRight&&this._markerGroup.removeLayer(m._middleRight),m._prev&&m._next?this._createMiddleMarker(m._prev,m._next):m._prev?m._next||(m._prev._middleRight=null):m._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(l){var d=l.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:d,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(l){var d=this._map.mouseEventToLayerPoint(l.originalEvent.touches[0]),m=this._map.layerPointToLatLng(d),_=l.target;L.extend(_._origLatLng,m),_._middleLeft&&_._middleLeft.setLatLng(this._getMiddleLatLng(_._prev,_)),_._middleRight&&_._middleRight.setLatLng(this._getMiddleLatLng(_,_._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(l,d){this._markerGroup.eachLayer(function(m){m._index>l&&(m._index+=d)})},_createMiddleMarker:function(l,d){var m,_,w,I=this._getMiddleLatLng(l,d),b=this._createMarker(I);b.setOpacity(.6),l._middleRight=d._middleLeft=b,_=function(){b.off("touchmove",_,this);var M=d._index;b._index=M,b.off("click",m,this).on("click",this._onMarkerClick,this),I.lat=b.getLatLng().lat,I.lng=b.getLatLng().lng,this._spliceLatLngs(M,0,I),this._markers.splice(M,0,b),b.setOpacity(1),this._updateIndexes(M,1),d._index++,this._updatePrevNext(l,b),this._updatePrevNext(b,d),this._poly.fire("editstart")},w=function(){b.off("dragstart",_,this),b.off("dragend",w,this),b.off("touchmove",_,this),this._createMiddleMarker(l,b),this._createMiddleMarker(b,d)},m=function(){_.call(this),w.call(this),this._fireEdit()},b.on("click",m,this).on("dragstart",_,this).on("dragend",w,this).on("touchmove",_,this),this._markerGroup.addLayer(b)},_updatePrevNext:function(l,d){l&&(l._next=d),d&&(d._prev=l)},_getMiddleLatLng:function(l,d){var m=this._poly._map,_=m.project(l.getLatLng()),w=m.project(d.getLatLng());return m.unproject(_._add(w)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(l,d){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=l,L.Util.setOptions(this,d)},addHooks:function(){var l=this._shape;this._shape._map&&(this._map=this._shape._map,l.setStyle(l.options.editing),l._map&&(this._map=l._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var l=this._shape;if(l.setStyle(l.options.original),l._map){this._unbindMarker(this._moveMarker);for(var d=0,m=this._resizeMarkers.length;d<m;d++)this._unbindMarker(this._resizeMarkers[d]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(l,d){var m=new L.Marker.Touch(l,{draggable:!0,icon:d,zIndexOffset:10});return this._bindMarker(m),this._markerGroup.addLayer(m),m},_bindMarker:function(l){l.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(l){l.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(l){l.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(l){var d=l.target,m=d.getLatLng();d===this._moveMarker?this._move(m):this._resize(m),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(l){l.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(l){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,l),typeof this._getCorners=="function"){var d=this._getCorners(),m=l.target,_=m._cornerIndex;m.setOpacity(0),this._oppositeCorner=d[(_+2)%4],this._toggleCornerMarkers(0,_)}this._shape.fire("editstart")},_onTouchMove:function(l){var d=this._map.mouseEventToLayerPoint(l.originalEvent.touches[0]),m=this._map.layerPointToLatLng(d);return l.target===this._moveMarker?this._move(m):this._resize(m),this._shape.redraw(),!1},_onTouchEnd:function(l){l.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var l=this._shape.getBounds(),d=l.getCenter();this._moveMarker=this._createMarker(d,this.options.moveIcon)},_createResizeMarker:function(){var l=this._getCorners();this._resizeMarkers=[];for(var d=0,m=l.length;d<m;d++)this._resizeMarkers.push(this._createMarker(l[d],this.options.resizeIcon)),this._resizeMarkers[d]._cornerIndex=d},_onMarkerDragStart:function(l){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,l);var d=this._getCorners(),m=l.target,_=m._cornerIndex;this._oppositeCorner=d[(_+2)%4],this._toggleCornerMarkers(0,_)},_onMarkerDragEnd:function(l){var d,m,_=l.target;_===this._moveMarker&&(d=this._shape.getBounds(),m=d.getCenter(),_.setLatLng(m)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,l)},_move:function(l){for(var d,m=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),_=this._shape.getBounds(),w=_.getCenter(),I=[],b=0,M=m.length;b<M;b++)d=[m[b].lat-w.lat,m[b].lng-w.lng],I.push([l.lat+d[0],l.lng+d[1]]);this._shape.setLatLngs(I),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(l){var d;this._shape.setBounds(L.latLngBounds(l,this._oppositeCorner)),d=this._shape.getBounds(),this._moveMarker.setLatLng(d.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var l=this._shape.getBounds();return[l.getNorthWest(),l.getNorthEast(),l.getSouthEast(),l.getSouthWest()]},_toggleCornerMarkers:function(l){for(var d=0,m=this._resizeMarkers.length;d<m;d++)this._resizeMarkers[d].setOpacity(l)},_repositionCornerMarkers:function(){for(var l=this._getCorners(),d=0,m=this._resizeMarkers.length;d<m;d++)this._resizeMarkers[d].setLatLng(l[d])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var l=this._shape.getLatLng();this._moveMarker=this._createMarker(l,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(l){if(this._resizeMarkers.length){var d=this._getResizeMarkerPoint(l);this._resizeMarkers[0].setLatLng(d)}this._shape.setLatLng(l),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var l=this._shape.getLatLng(),d=this._getResizeMarkerPoint(l);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(d,this.options.resizeIcon))},_getResizeMarkerPoint:function(l){var d=this._shape._radius*Math.cos(Math.PI/4),m=this._map.project(l);return this._map.unproject([m.x+d,m.y-d])},_resize:function(l){var d=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=d.distanceTo(l):radius=this._map.distance(d,l),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(l,d){var m={};if(l.touches!==void 0){if(!l.touches.length)return;m=l.touches[0]}else if(l.pointerType!=="touch"||(m=l,!this._filterClick(l)))return;var _=this._map.mouseEventToContainerPoint(m),w=this._map.mouseEventToLayerPoint(m),I=this._map.layerPointToLatLng(w);this._map.fire(d,{latlng:I,layerPoint:w,containerPoint:_,pageX:m.pageX,pageY:m.pageY,originalEvent:l})},_filterClick:function(l){var d=l.timeStamp||l.originalEvent.timeStamp,m=L.DomEvent._lastClick&&d-L.DomEvent._lastClick;return m&&m>100&&m<500||l.target._simulatedClick&&!l._simulated?(L.DomEvent.stop(l),!1):(L.DomEvent._lastClick=d,!0)},_onTouchStart:function(l){this._map._loaded&&this._touchEvent(l,"touchstart")},_onTouchEnd:function(l){this._map._loaded&&this._touchEvent(l,"touchend")},_onTouchCancel:function(l){if(this._map._loaded){var d="touchcancel";this._detectIE()&&(d="pointercancel"),this._touchEvent(l,d)}},_onTouchLeave:function(l){this._map._loaded&&this._touchEvent(l,"touchleave")},_onTouchMove:function(l){this._map._loaded&&this._touchEvent(l,"touchmove")},_detectIE:function(){var l=o.navigator.userAgent,d=l.indexOf("MSIE ");if(d>0)return parseInt(l.substring(d+5,l.indexOf(".",d)),10);if(l.indexOf("Trident/")>0){var m=l.indexOf("rv:");return parseInt(l.substring(m+3,l.indexOf(".",m)),10)}var _=l.indexOf("Edge/");return _>0&&parseInt(l.substring(_+5,l.indexOf(".",_)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var l=this._icon,d=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?d.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):d.concat(["touchcancel"]),L.DomUtil.addClass(l,"leaflet-clickable"),L.DomEvent.on(l,"click",this._onMouseClick,this),L.DomEvent.on(l,"keypress",this._onKeyPress,this);for(var m=0;m<d.length;m++)L.DomEvent.on(l,d[m],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var l=o.navigator.userAgent,d=l.indexOf("MSIE ");if(d>0)return parseInt(l.substring(d+5,l.indexOf(".",d)),10);if(l.indexOf("Trident/")>0){var m=l.indexOf("rv:");return parseInt(l.substring(m+3,l.indexOf(".",m)),10)}var _=l.indexOf("Edge/");return _>0&&parseInt(l.substring(_+5,l.indexOf(".",_)),10)}}),L.LatLngUtil={cloneLatLngs:function(l){for(var d=[],m=0,_=l.length;m<_;m++)Array.isArray(l[m])?d.push(L.LatLngUtil.cloneLatLngs(l[m])):d.push(this.cloneLatLng(l[m]));return d},cloneLatLng:function(l){return L.latLng(l.lat,l.lng)}},function(){var l={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(d){var m,_,w=d.length,I=0,b=Math.PI/180;if(w>2){for(var M=0;M<w;M++)m=d[M],_=d[(M+1)%w],I+=(_.lng-m.lng)*b*(2+Math.sin(m.lat*b)+Math.sin(_.lat*b));I=6378137*I*6378137/2}return Math.abs(I)},formattedNumber:function(d,m){var _=parseFloat(d).toFixed(m),w=L.drawLocal.format&&L.drawLocal.format.numeric,I=w&&w.delimiters,b=I&&I.thousands,M=I&&I.decimal;if(b||M){var T=_.split(".");_=b?T[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+b):T[0],M=M||".",T.length>1&&(_=_+M+T[1])}return _},readableArea:function(d,m,b){var w,I,b=L.Util.extend({},l,b);return m?(I=["ha","m"],type=typeof m,type==="string"?I=[m]:type!=="boolean"&&(I=m),w=d>=1e6&&I.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*d,b.km)+" km\xB2":d>=1e4&&I.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*d,b.ha)+" ha":L.GeometryUtil.formattedNumber(d,b.m)+" m\xB2"):(d/=.836127,w=d>=3097600?L.GeometryUtil.formattedNumber(d/3097600,b.mi)+" mi\xB2":d>=4840?L.GeometryUtil.formattedNumber(d/4840,b.ac)+" acres":L.GeometryUtil.formattedNumber(d,b.yd)+" yd\xB2"),w},readableDistance:function(d,m,_,w,M){var b,M=L.Util.extend({},l,M);switch(m?typeof m=="string"?m:"metric":_?"feet":w?"nauticalMile":"yards"){case"metric":b=d>1e3?L.GeometryUtil.formattedNumber(d/1e3,M.km)+" km":L.GeometryUtil.formattedNumber(d,M.m)+" m";break;case"feet":d*=3.28083,b=L.GeometryUtil.formattedNumber(d,M.ft)+" ft";break;case"nauticalMile":d*=.53996,b=L.GeometryUtil.formattedNumber(d/1e3,M.nm)+" nm";break;case"yards":default:d*=1.09361,b=d>1760?L.GeometryUtil.formattedNumber(d/1760,M.mi)+" miles":L.GeometryUtil.formattedNumber(d,M.yd)+" yd"}return b},isVersion07x:function(){var d=L.version.split(".");return parseInt(d[0],10)===0&&parseInt(d[1],10)===7}})}(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(l,d,m,_){return this._checkCounterclockwise(l,m,_)!==this._checkCounterclockwise(d,m,_)&&this._checkCounterclockwise(l,d,m)!==this._checkCounterclockwise(l,d,_)},_checkCounterclockwise:function(l,d,m){return(m.y-l.y)*(d.x-l.x)>(d.y-l.y)*(m.x-l.x)}}),L.Polyline.include({intersects:function(){var l,d,m,_=this._getProjectedPoints(),w=_?_.length:0;if(this._tooFewPointsForIntersection())return!1;for(l=w-1;l>=3;l--)if(d=_[l-1],m=_[l],this._lineSegmentsIntersectsRange(d,m,l-2))return!0;return!1},newLatLngIntersects:function(l,d){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(l),d)},newPointIntersects:function(l,d){var m=this._getProjectedPoints(),_=m?m.length:0,w=m?m[_-1]:null,I=_-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(w,l,I,d?1:0)},_tooFewPointsForIntersection:function(l){var d=this._getProjectedPoints(),m=d?d.length:0;return m+=l||0,!d||m<=3},_lineSegmentsIntersectsRange:function(l,d,m,_){var w,I,b=this._getProjectedPoints();_=_||0;for(var M=m;M>_;M--)if(w=b[M-1],I=b[M],L.LineUtil.segmentsIntersect(l,d,w,I))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var l=[],d=this._defaultShape(),m=0;m<d.length;m++)l.push(this._map.latLngToLayerPoint(d[m]));return l}}),L.Polygon.include({intersects:function(){var l,d,m,_,w=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(l=w.length,d=w[0],m=w[l-1],_=l-2,this._lineSegmentsIntersectsRange(m,d,_,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(l){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,l);var d;this._toolbars={},L.DrawToolbar&&this.options.draw&&(d=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=d,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(d=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=d,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(l){var d,m=L.DomUtil.create("div","leaflet-draw"),_=!1;for(var w in this._toolbars)this._toolbars.hasOwnProperty(w)&&(d=this._toolbars[w].addToolbar(l))&&(_||(L.DomUtil.hasClass(d,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(d.childNodes[0],"leaflet-draw-toolbar-top"),_=!0),m.appendChild(d));return m},onRemove:function(){for(var l in this._toolbars)this._toolbars.hasOwnProperty(l)&&this._toolbars[l].removeToolbar()},setDrawingOptions:function(l){for(var d in this._toolbars)this._toolbars[d]instanceof L.DrawToolbar&&this._toolbars[d].setOptions(l)},_toolbarEnabled:function(l){var d=l.target;for(var m in this._toolbars)this._toolbars[m]!==d&&this._toolbars[m].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(l){L.setOptions(this,l),this._modes={},this._actionButtons=[],this._activeMode=null;var d=L.version.split(".");parseInt(d[0],10)===1&&parseInt(d[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(l){var d,m=L.DomUtil.create("div","leaflet-draw-section"),_=0,w=this._toolbarClass||"",I=this.getModeHandlers(l);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=l,d=0;d<I.length;d++)I[d].enabled&&this._initModeHandler(I[d].handler,this._toolbarContainer,_++,w,I[d].title);if(_)return this._lastButtonIndex=--_,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),m.appendChild(this._toolbarContainer),m.appendChild(this._actionsContainer),m},removeToolbar:function(){for(var l in this._modes)this._modes.hasOwnProperty(l)&&(this._disposeButton(this._modes[l].button,this._modes[l].handler.enable,this._modes[l].handler),this._modes[l].handler.disable(),this._modes[l].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var d=0,m=this._actionButtons.length;d<m;d++)this._disposeButton(this._actionButtons[d].button,this._actionButtons[d].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(l,d,m,_,w){var I=l.type;this._modes[I]={},this._modes[I].handler=l,this._modes[I].button=this._createButton({type:I,title:w,className:_+"-"+I,container:d,callback:this._modes[I].handler.enable,context:this._modes[I].handler}),this._modes[I].buttonIndex=m,this._modes[I].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!o.MSStream},_createButton:function(l){var d=L.DomUtil.create("a",l.className||"",l.container),m=L.DomUtil.create("span","sr-only",l.container);d.href="#",d.appendChild(m),l.title&&(d.title=l.title,m.innerHTML=l.title),l.text&&(d.innerHTML=l.text,m.innerHTML=l.text);var _=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(d,"click",L.DomEvent.stopPropagation).on(d,"mousedown",L.DomEvent.stopPropagation).on(d,"dblclick",L.DomEvent.stopPropagation).on(d,"touchstart",L.DomEvent.stopPropagation).on(d,"click",L.DomEvent.preventDefault).on(d,_,l.callback,l.context),d},_disposeButton:function(l,d){var m=this._detectIOS()?"touchstart":"click";L.DomEvent.off(l,"click",L.DomEvent.stopPropagation).off(l,"mousedown",L.DomEvent.stopPropagation).off(l,"dblclick",L.DomEvent.stopPropagation).off(l,"touchstart",L.DomEvent.stopPropagation).off(l,"click",L.DomEvent.preventDefault).off(l,m,d)},_handlerActivated:function(l){this.disable(),this._activeMode=this._modes[l.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(l){var d,m,_,w,I=this._actionsContainer,b=this.getActions(l),M=b.length;for(m=0,_=this._actionButtons.length;m<_;m++)this._disposeButton(this._actionButtons[m].button,this._actionButtons[m].callback);for(this._actionButtons=[];I.firstChild;)I.removeChild(I.firstChild);for(var T=0;T<M;T++)"enabled"in b[T]&&!b[T].enabled||(d=L.DomUtil.create("li","",I),w=this._createButton({title:b[T].title,text:b[T].text,container:d,callback:b[T].callback,context:b[T].context}),this._actionButtons.push({button:w,callback:b[T].callback}))},_showActionsToolbar:function(){var l=this._activeMode.buttonIndex,d=this._lastButtonIndex,m=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=m+"px",l===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),l===d&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(l){this._map=l,this._popupPane=l._panes.popupPane,this._visible=!1,this._container=l.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(l){return this._container?(l.subtext=l.subtext||"",l.subtext.length!==0||this._singleLineLabel?l.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(l.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+l.subtext+"</span><br />":"")+"<span>"+l.text+"</span>",l.text||l.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(l){var d=this._map.latLngToLayerPoint(l),m=this._container;return this._container&&(this._visible&&(m.style.visibility="inherit"),L.DomUtil.setPosition(m,d)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(l){for(var d in this.options)this.options.hasOwnProperty(d)&&l[d]&&(l[d]=L.extend({},this.options[d],l[d]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,l)},getModeHandlers:function(l){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(l,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(l,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(l,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(l,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(l,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(l,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(l){return[{enabled:l.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:l.completeShape,context:l},{enabled:l.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:l.deleteLastVertex,context:l},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(l){L.setOptions(this,l);for(var d in this._modes)this._modes.hasOwnProperty(d)&&l.hasOwnProperty(d)&&this._modes[d].handler.setOptions(l[d])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(l){l.edit&&(l.edit.selectedPathOptions===void 0&&(l.edit.selectedPathOptions=this.options.edit.selectedPathOptions),l.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,l.edit.selectedPathOptions)),l.remove&&(l.remove=L.extend({},this.options.remove,l.remove)),l.poly&&(l.poly=L.extend({},this.options.poly,l.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,l),this._selectedFeatureCount=0},getModeHandlers:function(l){var d=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(l,{featureGroup:d,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(l,{featureGroup:d}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(l){var d=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return l.removeAllLayers&&d.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),d},addToolbar:function(l){var d=L.Toolbar.prototype.addToolbar.call(this,l);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),d},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var l,d=this.options.featureGroup,m=d.getLayers().length!==0;this.options.edit&&(l=this._modes[L.EditToolbar.Edit.TYPE].button,m?L.DomUtil.removeClass(l,"leaflet-disabled"):L.DomUtil.addClass(l,"leaflet-disabled"),l.setAttribute("title",m?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(l=this._modes[L.EditToolbar.Delete.TYPE].button,m?L.DomUtil.removeClass(l,"leaflet-disabled"):L.DomUtil.addClass(l,"leaflet-disabled"),l.setAttribute("title",m?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(l,d){if(L.Handler.prototype.initialize.call(this,l),L.setOptions(this,d),this._featureGroup=d.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var m=L.version.split(".");parseInt(m[0],10)===1&&parseInt(m[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var l=this._map;l&&(l.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),l._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(l){this._revertLayer(l)},this)},save:function(){var l=new L.LayerGroup;this._featureGroup.eachLayer(function(d){d.edited&&(l.addLayer(d),d.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:l})},_backupLayer:function(l){var d=L.Util.stamp(l);this._uneditedLayerProps[d]||(l instanceof L.Polyline||l instanceof L.Polygon||l instanceof L.Rectangle?this._uneditedLayerProps[d]={latlngs:L.LatLngUtil.cloneLatLngs(l.getLatLngs())}:l instanceof L.Circle?this._uneditedLayerProps[d]={latlng:L.LatLngUtil.cloneLatLng(l.getLatLng()),radius:l.getRadius()}:(l instanceof L.Marker||l instanceof L.CircleMarker)&&(this._uneditedLayerProps[d]={latlng:L.LatLngUtil.cloneLatLng(l.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(l){var d=L.Util.stamp(l);l.edited=!1,this._uneditedLayerProps.hasOwnProperty(d)&&(l instanceof L.Polyline||l instanceof L.Polygon||l instanceof L.Rectangle?l.setLatLngs(this._uneditedLayerProps[d].latlngs):l instanceof L.Circle?(l.setLatLng(this._uneditedLayerProps[d].latlng),l.setRadius(this._uneditedLayerProps[d].radius)):(l instanceof L.Marker||l instanceof L.CircleMarker)&&l.setLatLng(this._uneditedLayerProps[d].latlng),l.fire("revert-edited",{layer:l}))},_enableLayerEdit:function(l){var d,m,_=l.layer||l.target||l;this._backupLayer(_),this.options.poly&&(m=L.Util.extend({},this.options.poly),_.options.poly=m),this.options.selectedPathOptions&&(d=L.Util.extend({},this.options.selectedPathOptions),d.maintainColor&&(d.color=_.options.color,d.fillColor=_.options.fillColor),_.options.original=L.extend({},_.options),_.options.editing=d),_ instanceof L.Marker?(_.editing&&_.editing.enable(),_.dragging.enable(),_.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):_.editing.enable()},_disableLayerEdit:function(l){var d=l.layer||l.target||l;d.edited=!1,d.editing&&d.editing.disable(),delete d.options.editing,delete d.options.original,this._selectedPathOptions&&(d instanceof L.Marker?this._toggleMarkerHighlight(d):(d.setStyle(d.options.previousOptions),delete d.options.previousOptions)),d instanceof L.Marker?(d.dragging.disable(),d.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):d.editing.disable()},_onMouseMove:function(l){this._tooltip.updatePosition(l.latlng)},_onMarkerDragEnd:function(l){var d=l.target;d.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:d})},_onTouchMove:function(l){var d=l.originalEvent.changedTouches[0],m=this._map.mouseEventToLayerPoint(d),_=this._map.layerPointToLatLng(m);l.target.setLatLng(_)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(l,d){if(L.Handler.prototype.initialize.call(this,l),L.Util.setOptions(this,d),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var m=L.version.split(".");parseInt(m[0],10)===1&&parseInt(m[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var l=this._map;l&&(l.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(l){this._deletableLayers.addLayer(l),l.fire("revert-deleted",{layer:l})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(l){this._removeLayer({layer:l})},this),this.save()},_enableLayerDelete:function(l){(l.layer||l.target||l).on("click",this._removeLayer,this)},_disableLayerDelete:function(l){var d=l.layer||l.target||l;d.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(d)},_removeLayer:function(l){var d=l.layer||l.target||l;this._deletableLayers.removeLayer(d),this._deletedLayers.addLayer(d),d.fire("deleted")},_onMouseMove:function(l){this._tooltip.updatePosition(l.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);var qn={exports:{}},bt={};function Sr(o,u){return{type:"Feature",properties:u||{},geometry:o}}bt.feature=Sr;bt.point=function(o,u){if(!Array.isArray(o))throw new Error("Coordinates must be an array");if(o.length<2)throw new Error("Coordinates must be at least 2 numbers long");return Sr({type:"Point",coordinates:o.slice()},u)};bt.polygon=function(o,u){if(!o)throw new Error("No coordinates passed");for(var c=0;c<o.length;c++){var f=o[c];if(f.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<f[f.length-1].length;l++)if(f[f.length-1][l]!==f[0][l])throw new Error("First and last Position are not equivalent.")}return Sr({type:"Polygon",coordinates:o},u)};bt.lineString=function(o,u){if(!o)throw new Error("No coordinates passed");return Sr({type:"LineString",coordinates:o},u)};bt.featureCollection=function(o){return{type:"FeatureCollection",features:o}};bt.multiLineString=function(o,u){if(!o)throw new Error("No coordinates passed");return Sr({type:"MultiLineString",coordinates:o},u)};bt.multiPoint=function(o,u){if(!o)throw new Error("No coordinates passed");return Sr({type:"MultiPoint",coordinates:o},u)};bt.multiPolygon=function(o,u){if(!o)throw new Error("No coordinates passed");return Sr({type:"MultiPolygon",coordinates:o},u)};bt.geometryCollection=function(o,u){return Sr({type:"GeometryCollection",geometries:o},u)};var Nu={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,kilometers:6373,kilometres:6373};bt.radiansToDistance=function(o,u){var c=Nu[u||"kilometers"];if(c===void 0)throw new Error("Invalid unit");return o*c};bt.distanceToRadians=function(o,u){var c=Nu[u||"kilometers"];if(c===void 0)throw new Error("Invalid unit");return o/c};bt.distanceToDegrees=function(o,u){var c=Nu[u||"kilometers"];if(c===void 0)throw new Error("Invalid unit");return o/c*57.2958};var Fc=bt.polygon,zc=bt.featureCollection,Tu=function(o,u){return zc(qc(o.features.map(function(c){var f={x:c.geometry.coordinates[0],y:c.geometry.coordinates[1]};return u&&(f.z=c.properties[u]),f})).map(function(c){return Fc([[[c.a.x,c.a.y],[c.b.x,c.b.y],[c.c.x,c.c.y],[c.a.x,c.a.y]]],{a:c.a.z,b:c.b.z,c:c.c.z})}))};function Xu(o,u,c){this.a=o,this.b=u,this.c=c;var f=u.x-o.x,l=u.y-o.y,d=c.x-o.x,m=c.y-o.y,_=f*(o.x+u.x)+l*(o.y+u.y),w=d*(o.x+c.x)+m*(o.y+c.y),I=2*(f*(c.y-u.y)-l*(c.x-u.x)),b,M,T,q;Math.abs(I)<1e-6?(b=Math.min(o.x,u.x,c.x),M=Math.min(o.y,u.y,c.y),T=(Math.max(o.x,u.x,c.x)-b)*.5,q=(Math.max(o.y,u.y,c.y)-M)*.5,this.x=b+T,this.y=M+q,this.r=T*T+q*q):(this.x=(m*_-l*w)/I,this.y=(f*w-d*_)/I,T=this.x-o.x,q=this.y-o.y,this.r=T*T+q*q)}function Gc(o,u){return u.x-o.x}function Bc(o){var u=o.length,c,f,l,d,m;t:for(;u;)for(f=o[--u],c=o[--u],l=u;l;)if(m=o[--l],d=o[--l],c===d&&f===m||c===m&&f===d){o.splice(u,2),o.splice(l,2),u-=2;continue t}}function qc(o){if(o.length<3)return[];o.sort(Gc);for(var u=o.length-1,c=o[u].x,f=o[0].x,l=o[u].y,d=l;u--;)o[u].y<l&&(l=o[u].y),o[u].y>d&&(d=o[u].y);var m=f-c,_=d-l,w=m>_?m:_,I=(f+c)*.5,b=(d+l)*.5,M=[new Xu({x:I-20*w,y:b-w,__sentinel:!0},{x:I,y:b+20*w,__sentinel:!0},{x:I+20*w,y:b-w,__sentinel:!0})],T=[],q=[],k,P,rt;for(u=o.length;u--;){for(q.length=0,k=M.length;k--;){if(m=o[u].x-M[k].x,m>0&&m*m>M[k].r){T.push(M[k]),M.splice(k,1);continue}_=o[u].y-M[k].y,!(m*m+_*_>M[k].r)&&(q.push(M[k].a,M[k].b,M[k].b,M[k].c,M[k].c,M[k].a),M.splice(k,1))}for(Bc(q),k=q.length;k;)rt=q[--k],P=q[--k],M.push(new Xu(P,rt,o[u]))}for(Array.prototype.push.apply(T,M),u=T.length;u--;)(T[u].a.__sentinel||T[u].b.__sentinel||T[u].c.__sentinel)&&T.splice(u,1);return T}var br={};function Uc(o){if(Array.isArray(o)&&typeof o[0]=="number"&&typeof o[1]=="number")return o;if(o){if(o.type==="Feature"&&o.geometry&&o.geometry.type==="Point"&&Array.isArray(o.geometry.coordinates))return o.geometry.coordinates;if(o.type==="Point"&&Array.isArray(o.coordinates))return o.coordinates}throw new Error("A coordinate, feature, or point geometry is required")}function Vc(o,u,c){if(!u||!c)throw new Error("type and name required");if(!o||o.type!==u)throw new Error("Invalid input to "+c+": must be a "+u+", given "+o.type)}function Zc(o,u,c){if(!c)throw new Error(".featureOf() requires a name");if(!o||o.type!=="Feature"||!o.geometry)throw new Error("Invalid input to "+c+", Feature with geometry required");if(!o.geometry||o.geometry.type!==u)throw new Error("Invalid input to "+c+": must be a "+u+", given "+o.geometry.type)}function Hc(o,u,c){if(!c)throw new Error(".collectionOf() requires a name");if(!o||o.type!=="FeatureCollection")throw new Error("Invalid input to "+c+", FeatureCollection required");for(var f=0;f<o.features.length;f++){var l=o.features[f];if(!l||l.type!=="Feature"||!l.geometry)throw new Error("Invalid input to "+c+", Feature with geometry required");if(!l.geometry||l.geometry.type!==u)throw new Error("Invalid input to "+c+": must be a "+u+", given "+l.geometry.type)}}br.geojsonType=Vc;br.collectionOf=Hc;br.featureOf=Zc;br.getCoord=Uc;var Wc=br,zs=function(u,c){var f=Wc.getCoord(u),l=c.geometry.coordinates;c.geometry.type==="Polygon"&&(l=[l]);for(var d=0,m=!1;d<l.length&&!m;d++)if(Yu(f,l[d][0])){for(var _=!1,w=1;w<l[d].length&&!_;)Yu(f,l[d][w])&&(_=!0),w++;_||(m=!0)}return m};function Yu(o,u){for(var c=!1,f=0,l=u.length-1;f<u.length;l=f++){var d=u[f][0],m=u[f][1],_=u[l][0],w=u[l][1],I=m>o[1]!=w>o[1]&&o[0]<(_-d)*(o[1]-m)/(w-m)+d;I&&(c=!c)}return c}var Xc=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"},Yc=function(o,u){if(!Xc(o))throw new Error("Coordinates must be an array");if(o.length<2)throw new Error("Coordinates must be at least 2 numbers long");return{type:"Feature",geometry:{type:"Point",coordinates:o},properties:u||{}}},Jc=Yc,Kc=function(o,u){var c=o[0],f=o[1],l=o[2];o[3];for(var d=(l-c)/u,m={type:"FeatureCollection",features:[]},_=0;_<=u;_++)for(var w=0;w<=u;w++)m.features.push(Jc([_*d+c,w*d+f]));return m},Un={};function Pu(o,u,c){var f,l,d,m,_,w,I,b,M,T=0,q,k=o.type==="FeatureCollection",P=o.type==="Feature",rt=k?o.features.length:1;for(f=0;f<rt;f++)for(M=k?o.features[f].geometry:P?o.geometry:o,q=M.type==="GeometryCollection",I=q?M.geometries.length:1,m=0;m<I;m++)if(w=q?M.geometries[m]:M,b=w.coordinates,T=c&&(w.type==="Polygon"||w.type==="MultiPolygon")?1:0,w.type==="Point")u(b);else if(w.type==="LineString"||w.type==="MultiPoint")for(l=0;l<b.length;l++)u(b[l]);else if(w.type==="Polygon"||w.type==="MultiLineString")for(l=0;l<b.length;l++)for(d=0;d<b[l].length-T;d++)u(b[l][d]);else if(w.type==="MultiPolygon")for(l=0;l<b.length;l++)for(d=0;d<b[l].length;d++)for(_=0;_<b[l][d].length-T;_++)u(b[l][d][_]);else throw new Error("Unknown Geometry Type")}Un.coordEach=Pu;function jc(o,u,c,f){return Pu(o,function(l){c=u(c,l)},f),c}Un.coordReduce=jc;function Wl(o,u){var c;switch(o.type){case"FeatureCollection":for(c=0;c<o.features.length;c++)u(o.features[c].properties);break;case"Feature":u(o.properties);break}}Un.propEach=Wl;function Qc(o,u,c){return Wl(o,function(f){c=u(c,f)}),c}Un.propReduce=Qc;function $c(o,u){if(o.type==="Feature")u(o);else if(o.type==="FeatureCollection")for(var c=0;c<o.features.length;c++)u(o.features[c])}Un.featureEach=$c;function tf(o){var u=[];return Pu(o,function(c){u.push(c)}),u}Un.coordAll=tf;var ef=Un.coordEach,La=function(o){var u=[1/0,1/0,-1/0,-1/0];return ef(o,function(c){u[0]>c[0]&&(u[0]=c[0]),u[1]>c[1]&&(u[1]=c[1]),u[2]<c[0]&&(u[2]=c[0]),u[3]<c[1]&&(u[3]=c[1])}),u},Xl=function(o,u){var c=o.geometry.coordinates[0],f=o.geometry.coordinates[1],l=u.geometry.coordinates[0][0][0],d=u.geometry.coordinates[0][0][1],m=u.properties.a,_=u.geometry.coordinates[0][1][0],w=u.geometry.coordinates[0][1][1],I=u.properties.b,b=u.geometry.coordinates[0][2][0],M=u.geometry.coordinates[0][2][1],T=u.properties.c,q=(T*(c-l)*(f-w)+m*(c-_)*(f-M)+I*(c-b)*(f-d)-I*(c-l)*(f-M)-T*(c-_)*(f-d)-m*(c-b)*(f-w))/((c-l)*(f-w)+(c-_)*(f-M)+(c-b)*(f-d)-(c-l)*(f-M)-(c-_)*(f-d)-(c-b)*(f-w));return q},Ju=br.getCoord,nf=bt.radiansToDistance,bn=function(o,u,c){var f=Math.PI/180,l=Ju(o),d=Ju(u),m=f*(d[1]-l[1]),_=f*(d[0]-l[0]),w=f*l[1],I=f*d[1],b=Math.pow(Math.sin(m/2),2)+Math.pow(Math.sin(_/2),2)*Math.cos(w)*Math.cos(I);return nf(2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b)),c)},Ku=bn,Yl=function(o){var u=Ku(o.slice(0,2),[o[2],o[1]],"miles"),c=Ku(o.slice(0,2),[o[0],o[3]],"miles");if(u>=c){var f=(o[1]+o[3])/2;return[o[0],f-(o[2]-o[0])/2,o[2],f+(o[2]-o[0])/2]}else{var l=(o[0]+o[2])/2;return[l-(o[3]-o[1])/2,o[1],l+(o[3]-o[1])/2,o[3]]}},rf=Jl,fu=1e-10;function ra(o,u){var c=o.x-u.x,f=o.y-u.y;return c*c+f*f<fu}function ju(o){for(var u=o.head;u;){var c=u.next;u.next=u.prev,u.prev=c,u=c}var c=o.head;o.head=o.tail,o.tail=c}function Mu(o){this.level=o,this.s=null,this.count=0}Mu.prototype.remove_seq=function(o){o.prev?o.prev.next=o.next:this.s=o.next,o.next&&(o.next.prev=o.prev),--this.count};Mu.prototype.addSegment=function(o,u){for(var c=this.s,f=null,l=null,d=!1,m=!1;c&&(f==null&&(ra(o,c.head.p)?(f=c,d=!0):ra(o,c.tail.p)&&(f=c)),l==null&&(ra(u,c.head.p)?(l=c,m=!0):ra(u,c.tail.p)&&(l=c)),!(l!=null&&f!=null));)c=c.next;var _=(f!=null?1:0)|(l!=null?2:0);switch(_){case 0:var w={p:o,prev:null},I={p:u,next:null};w.next=I,I.prev=w,f={head:w,tail:I,next:this.s,prev:null,closed:!1},this.s&&(this.s.prev=f),this.s=f,++this.count;break;case 1:var b={p:u};d?(b.next=f.head,b.prev=null,f.head.prev=b,f.head=b):(b.next=null,b.prev=f.tail,f.tail.next=b,f.tail=b);break;case 2:var b={p:o};m?(b.next=l.head,b.prev=null,l.head.prev=b,l.head=b):(b.next=null,b.prev=l.tail,l.tail.next=b,l.tail=b);break;case 3:if(f===l){var b={p:f.tail.p,next:f.head,prev:null};f.head.prev=b,f.head=b,f.closed=!0;break}switch((d?1:0)|(m?2:0)){case 0:ju(f);case 1:l.tail.next=f.head,f.head.prev=l.tail,l.tail=f.tail,this.remove_seq(f);break;case 3:ju(f);case 2:f.tail.next=l.head,l.head.prev=f.tail,f.tail=l.tail,this.remove_seq(l);break}}};function Jl(o){if(o)this.drawContour=o;else{var u=this;u.contours={},this.drawContour=function(c,f,l,d,m,_){var w=u.contours[_];w||(w=u.contours[_]=new Mu(m)),w.addSegment({x:c,y:f},{x:l,y:d})},this.contourList=function(){var c=[],f=u.contours;for(var l in f)for(var d=f[l].s,m=f[l].level;d;){var _=d.head,w=[];for(w.level=m,w.k=l;_&&_.p;)w.push(_.p),_=_.next;c.push(w),d=d.next}return c.sort(function(I,b){return I.k-b.k}),c}}this.h=new Array(5),this.sh=new Array(5),this.xh=new Array(5),this.yh=new Array(5)}Jl.prototype.contour=function(o,u,c,f,l,d,m,_,w){var I=this.h,b=this.sh,M=this.xh,T=this.yh,q=this.drawContour;this.contours={};for(var k=function(Kt,at){return(I[at]*M[Kt]-I[Kt]*M[at])/(I[at]-I[Kt])},P=function(Kt,at){return(I[at]*T[Kt]-I[Kt]*T[at])/(I[at]-I[Kt])},rt,ot,it,A,R,Z,lt=0,F=0,V=0,G=0,j=[0,1,1,0],X=[0,0,1,1],C=[[[0,0,8],[0,2,5],[7,6,9]],[[0,3,4],[1,3,1],[4,3,0]],[[9,6,7],[5,2,0],[8,0,0]]],nt=l-1;nt>=f;nt--)for(var _t=u;_t<=c-1;_t++){var Jt,Rt;if(Jt=Math.min(o[_t][nt],o[_t][nt+1]),Rt=Math.min(o[_t+1][nt],o[_t+1][nt+1]),R=Math.min(Jt,Rt),Jt=Math.max(o[_t][nt],o[_t][nt+1]),Rt=Math.max(o[_t+1][nt],o[_t+1][nt+1]),Z=Math.max(Jt,Rt),Z>=w[0]&&R<=w[_-1]){for(var ne=0;ne<_;ne++)if(w[ne]>=R&&w[ne]<=Z){for(var z=4;z>=0;z--)z>0?(I[z]=o[_t+j[z-1]][nt+X[z-1]]-w[ne],M[z]=d[_t+j[z-1]],T[z]=m[nt+X[z-1]]):(I[0]=.25*(I[1]+I[2]+I[3]+I[4]),M[0]=.5*(d[_t]+d[_t+1]),T[0]=.5*(m[nt]+m[nt+1])),I[z]>fu?b[z]=1:I[z]<-fu?b[z]=-1:b[z]=0;for(z=1;z<=4;z++)if(rt=z,ot=0,z!=4?it=z+1:it=1,A=C[b[rt]+1][b[ot]+1][b[it]+1],A!=0){switch(A){case 1:lt=M[rt],V=T[rt],F=M[ot],G=T[ot];break;case 2:lt=M[ot],V=T[ot],F=M[it],G=T[it];break;case 3:lt=M[it],V=T[it],F=M[rt],G=T[rt];break;case 4:lt=M[rt],V=T[rt],F=k(ot,it),G=P(ot,it);break;case 5:lt=M[ot],V=T[ot],F=k(it,rt),G=P(it,rt);break;case 6:lt=M[it],V=T[it],F=k(rt,ot),G=P(rt,ot);break;case 7:lt=k(rt,ot),V=P(rt,ot),F=k(ot,it),G=P(ot,it);break;case 8:lt=k(ot,it),V=P(ot,it),F=k(it,rt),G=P(it,rt);break;case 9:lt=k(it,rt),V=P(it,rt),F=k(rt,ot),G=P(rt,ot);break}q(lt,V,F,G,w[ne],ne)}}}}};var sf=Tu,of=zs,af=Kc,uf=La,lf=Xl,hf=bt.featureCollection,cf=bt.lineString,ff=Yl,df=rf,gf=function(o,u,c,f){for(var l=sf(o,u),d=uf(o),m=ff(d),_=af(m,c),w=[],I=0;I<_.features.length;I++)for(var b=_.features[I],M=0;M<l.features.length;M++){var T=l.features[M];of(b,T)&&(b.properties={},b.properties[u]=lf(b,T))}for(var q=Math.sqrt(_.features.length),k=0;k<q;k++){for(var P=_.features.slice(k*q,(k+1)*q),rt=[],ot=0;ot<P.length;ot++)P[ot].properties?rt.push(P[ot].properties[u]):rt.push(0);w.push(rt)}for(var it=(m[2]-m[0])/q,A=[],R=[],Z=0;Z<q;Z++)A.push(Z*it+m[0]),R.push(Z*it+m[1]);var lt=new df;lt.contour(w,0,c,0,c,A,R,f.length,f);var F=lt.contourList(),V=hf([]);return F.forEach(function(G){if(G.length>2){var j=[];G.forEach(function(C){j.push([C.x,C.y])});var X=cf(j);X.properties={},X.properties[u]=G.level,V.features.push(X)}}),V},pf=mf;function mf(o){for(var u=0,c=0,f=1;f<o.length;++f)o[f][0]<o[u][0]&&(u=f),o[f][0]>o[c][0]&&(c=f);return u<c?[[u],[c]]:u>c?[[c],[u]]:[[u]]}var Ea={exports:{}},Kl=vf,Qu=+(Math.pow(2,27)+1);function vf(o,u,c){var f=o*u,l=Qu*o,d=l-o,m=l-d,_=o-m,w=Qu*u,I=w-u,b=w-I,M=u-b,T=f-m*b,q=T-_*b,k=q-m*M,P=_*M-k;return c?(c[0]=P,c[1]=f,c):[P,f]}var yf=xf;function _f(o,u){var c=o+u,f=c-o,l=c-f,d=u-f,m=o-l,_=m+d;return _?[_,c]:[c]}function xf(o,u){var c=o.length|0,f=u.length|0;if(c===1&&f===1)return _f(o[0],u[0]);var l=c+f,d=new Array(l),m=0,_=0,w=0,I=Math.abs,b=o[_],M=I(b),T=u[w],q=I(T),k,P;M<q?(P=b,_+=1,_<c&&(b=o[_],M=I(b))):(P=T,w+=1,w<f&&(T=u[w],q=I(T))),_<c&&M<q||w>=f?(k=b,_+=1,_<c&&(b=o[_],M=I(b))):(k=T,w+=1,w<f&&(T=u[w],q=I(T)));for(var rt=k+P,ot=rt-k,it=P-ot,A=it,R=rt,Z,lt,F,V,G;_<c&&w<f;)M<q?(k=b,_+=1,_<c&&(b=o[_],M=I(b))):(k=T,w+=1,w<f&&(T=u[w],q=I(T))),P=A,rt=k+P,ot=rt-k,it=P-ot,it&&(d[m++]=it),Z=R+rt,lt=Z-R,F=Z-lt,V=rt-lt,G=R-F,A=G+V,R=Z;for(;_<c;)k=b,P=A,rt=k+P,ot=rt-k,it=P-ot,it&&(d[m++]=it),Z=R+rt,lt=Z-R,F=Z-lt,V=rt-lt,G=R-F,A=G+V,R=Z,_+=1,_<c&&(b=o[_]);for(;w<f;)k=T,P=A,rt=k+P,ot=rt-k,it=P-ot,it&&(d[m++]=it),Z=R+rt,lt=Z-R,F=Z-lt,V=rt-lt,G=R-F,A=G+V,R=Z,w+=1,w<f&&(T=u[w]);return A&&(d[m++]=A),R&&(d[m++]=R),m||(d[m++]=0),d.length=m,d}var Lf=Ef;function Ef(o,u,c){var f=o+u,l=f-o,d=f-l,m=u-l,_=o-d;return c?(c[0]=_+m,c[1]=f,c):[_+m,f]}var tu=Kl,wf=Lf,If=Cf;function Cf(o,u){var c=o.length;if(c===1){var f=tu(o[0],u);return f[0]?f:[f[1]]}var l=new Array(2*c),d=[.1,.1],m=[.1,.1],_=0;tu(o[0],u,d),d[0]&&(l[_++]=d[0]);for(var w=1;w<c;++w){tu(o[w],u,m);var I=d[1];wf(I,m[0],d),d[0]&&(l[_++]=d[0]);var b=m[1],M=d[1],T=b+M,q=T-b,k=M-q;d[1]=T,k&&(l[_++]=k)}return d[1]&&(l[_++]=d[1]),_===0&&(l[_++]=0),l.length=_,l}var Sf=Nf;function bf(o,u){var c=o+u,f=c-o,l=c-f,d=u-f,m=o-l,_=m+d;return _?[_,c]:[c]}function Nf(o,u){var c=o.length|0,f=u.length|0;if(c===1&&f===1)return bf(o[0],-u[0]);var l=c+f,d=new Array(l),m=0,_=0,w=0,I=Math.abs,b=o[_],M=I(b),T=-u[w],q=I(T),k,P;M<q?(P=b,_+=1,_<c&&(b=o[_],M=I(b))):(P=T,w+=1,w<f&&(T=-u[w],q=I(T))),_<c&&M<q||w>=f?(k=b,_+=1,_<c&&(b=o[_],M=I(b))):(k=T,w+=1,w<f&&(T=-u[w],q=I(T)));for(var rt=k+P,ot=rt-k,it=P-ot,A=it,R=rt,Z,lt,F,V,G;_<c&&w<f;)M<q?(k=b,_+=1,_<c&&(b=o[_],M=I(b))):(k=T,w+=1,w<f&&(T=-u[w],q=I(T))),P=A,rt=k+P,ot=rt-k,it=P-ot,it&&(d[m++]=it),Z=R+rt,lt=Z-R,F=Z-lt,V=rt-lt,G=R-F,A=G+V,R=Z;for(;_<c;)k=b,P=A,rt=k+P,ot=rt-k,it=P-ot,it&&(d[m++]=it),Z=R+rt,lt=Z-R,F=Z-lt,V=rt-lt,G=R-F,A=G+V,R=Z,_+=1,_<c&&(b=o[_]);for(;w<f;)k=T,P=A,rt=k+P,ot=rt-k,it=P-ot,it&&(d[m++]=it),Z=R+rt,lt=Z-R,F=Z-lt,V=rt-lt,G=R-F,A=G+V,R=Z,w+=1,w<f&&(T=-u[w]);return A&&(d[m++]=A),R&&(d[m++]=R),m||(d[m++]=0),d.length=m,d}(function(o){var u=Kl,c=yf,f=If,l=Sf,d=5,m=11102230246251565e-32,_=(3+16*m)*m,w=(7+56*m)*m;function I(A,R,Z,lt){return function(V,G,j){var X=A(A(R(G[1],j[0]),R(-j[1],G[0])),A(R(V[1],G[0]),R(-G[1],V[0]))),C=A(R(V[1],j[0]),R(-j[1],V[0])),nt=lt(X,C);return nt[nt.length-1]}}function b(A,R,Z,lt){return function(V,G,j,X){var C=A(A(Z(A(R(j[1],X[0]),R(-X[1],j[0])),G[2]),A(Z(A(R(G[1],X[0]),R(-X[1],G[0])),-j[2]),Z(A(R(G[1],j[0]),R(-j[1],G[0])),X[2]))),A(Z(A(R(G[1],X[0]),R(-X[1],G[0])),V[2]),A(Z(A(R(V[1],X[0]),R(-X[1],V[0])),-G[2]),Z(A(R(V[1],G[0]),R(-G[1],V[0])),X[2])))),nt=A(A(Z(A(R(j[1],X[0]),R(-X[1],j[0])),V[2]),A(Z(A(R(V[1],X[0]),R(-X[1],V[0])),-j[2]),Z(A(R(V[1],j[0]),R(-j[1],V[0])),X[2]))),A(Z(A(R(G[1],j[0]),R(-j[1],G[0])),V[2]),A(Z(A(R(V[1],j[0]),R(-j[1],V[0])),-G[2]),Z(A(R(V[1],G[0]),R(-G[1],V[0])),j[2])))),_t=lt(C,nt);return _t[_t.length-1]}}function M(A,R,Z,lt){return function(V,G,j,X,C){var nt=A(A(A(Z(A(Z(A(R(X[1],C[0]),R(-C[1],X[0])),j[2]),A(Z(A(R(j[1],C[0]),R(-C[1],j[0])),-X[2]),Z(A(R(j[1],X[0]),R(-X[1],j[0])),C[2]))),G[3]),A(Z(A(Z(A(R(X[1],C[0]),R(-C[1],X[0])),G[2]),A(Z(A(R(G[1],C[0]),R(-C[1],G[0])),-X[2]),Z(A(R(G[1],X[0]),R(-X[1],G[0])),C[2]))),-j[3]),Z(A(Z(A(R(j[1],C[0]),R(-C[1],j[0])),G[2]),A(Z(A(R(G[1],C[0]),R(-C[1],G[0])),-j[2]),Z(A(R(G[1],j[0]),R(-j[1],G[0])),C[2]))),X[3]))),A(Z(A(Z(A(R(j[1],X[0]),R(-X[1],j[0])),G[2]),A(Z(A(R(G[1],X[0]),R(-X[1],G[0])),-j[2]),Z(A(R(G[1],j[0]),R(-j[1],G[0])),X[2]))),-C[3]),A(Z(A(Z(A(R(X[1],C[0]),R(-C[1],X[0])),G[2]),A(Z(A(R(G[1],C[0]),R(-C[1],G[0])),-X[2]),Z(A(R(G[1],X[0]),R(-X[1],G[0])),C[2]))),V[3]),Z(A(Z(A(R(X[1],C[0]),R(-C[1],X[0])),V[2]),A(Z(A(R(V[1],C[0]),R(-C[1],V[0])),-X[2]),Z(A(R(V[1],X[0]),R(-X[1],V[0])),C[2]))),-G[3])))),A(A(Z(A(Z(A(R(G[1],C[0]),R(-C[1],G[0])),V[2]),A(Z(A(R(V[1],C[0]),R(-C[1],V[0])),-G[2]),Z(A(R(V[1],G[0]),R(-G[1],V[0])),C[2]))),X[3]),A(Z(A(Z(A(R(G[1],X[0]),R(-X[1],G[0])),V[2]),A(Z(A(R(V[1],X[0]),R(-X[1],V[0])),-G[2]),Z(A(R(V[1],G[0]),R(-G[1],V[0])),X[2]))),-C[3]),Z(A(Z(A(R(j[1],X[0]),R(-X[1],j[0])),G[2]),A(Z(A(R(G[1],X[0]),R(-X[1],G[0])),-j[2]),Z(A(R(G[1],j[0]),R(-j[1],G[0])),X[2]))),V[3]))),A(Z(A(Z(A(R(j[1],X[0]),R(-X[1],j[0])),V[2]),A(Z(A(R(V[1],X[0]),R(-X[1],V[0])),-j[2]),Z(A(R(V[1],j[0]),R(-j[1],V[0])),X[2]))),-G[3]),A(Z(A(Z(A(R(G[1],X[0]),R(-X[1],G[0])),V[2]),A(Z(A(R(V[1],X[0]),R(-X[1],V[0])),-G[2]),Z(A(R(V[1],G[0]),R(-G[1],V[0])),X[2]))),j[3]),Z(A(Z(A(R(G[1],j[0]),R(-j[1],G[0])),V[2]),A(Z(A(R(V[1],j[0]),R(-j[1],V[0])),-G[2]),Z(A(R(V[1],G[0]),R(-G[1],V[0])),j[2]))),-X[3]))))),_t=A(A(A(Z(A(Z(A(R(X[1],C[0]),R(-C[1],X[0])),j[2]),A(Z(A(R(j[1],C[0]),R(-C[1],j[0])),-X[2]),Z(A(R(j[1],X[0]),R(-X[1],j[0])),C[2]))),V[3]),Z(A(Z(A(R(X[1],C[0]),R(-C[1],X[0])),V[2]),A(Z(A(R(V[1],C[0]),R(-C[1],V[0])),-X[2]),Z(A(R(V[1],X[0]),R(-X[1],V[0])),C[2]))),-j[3])),A(Z(A(Z(A(R(j[1],C[0]),R(-C[1],j[0])),V[2]),A(Z(A(R(V[1],C[0]),R(-C[1],V[0])),-j[2]),Z(A(R(V[1],j[0]),R(-j[1],V[0])),C[2]))),X[3]),Z(A(Z(A(R(j[1],X[0]),R(-X[1],j[0])),V[2]),A(Z(A(R(V[1],X[0]),R(-X[1],V[0])),-j[2]),Z(A(R(V[1],j[0]),R(-j[1],V[0])),X[2]))),-C[3]))),A(A(Z(A(Z(A(R(j[1],C[0]),R(-C[1],j[0])),G[2]),A(Z(A(R(G[1],C[0]),R(-C[1],G[0])),-j[2]),Z(A(R(G[1],j[0]),R(-j[1],G[0])),C[2]))),V[3]),Z(A(Z(A(R(j[1],C[0]),R(-C[1],j[0])),V[2]),A(Z(A(R(V[1],C[0]),R(-C[1],V[0])),-j[2]),Z(A(R(V[1],j[0]),R(-j[1],V[0])),C[2]))),-G[3])),A(Z(A(Z(A(R(G[1],C[0]),R(-C[1],G[0])),V[2]),A(Z(A(R(V[1],C[0]),R(-C[1],V[0])),-G[2]),Z(A(R(V[1],G[0]),R(-G[1],V[0])),C[2]))),j[3]),Z(A(Z(A(R(G[1],j[0]),R(-j[1],G[0])),V[2]),A(Z(A(R(V[1],j[0]),R(-j[1],V[0])),-G[2]),Z(A(R(V[1],G[0]),R(-G[1],V[0])),j[2]))),-C[3])))),Jt=lt(nt,_t);return Jt[Jt.length-1]}}function T(A){var R=A===3?I:A===4?b:M;return R(c,u,f,l)}var q=T(3),k=T(4),P=[function(){return 0},function(){return 0},function(R,Z){return Z[0]-R[0]},function(R,Z,lt){var F=(R[1]-lt[1])*(Z[0]-lt[0]),V=(R[0]-lt[0])*(Z[1]-lt[1]),G=F-V,j;if(F>0){if(V<=0)return G;j=F+V}else if(F<0){if(V>=0)return G;j=-(F+V)}else return G;var X=_*j;return G>=X||G<=-X?G:q(R,Z,lt)},function(R,Z,lt,F){var V=R[0]-F[0],G=Z[0]-F[0],j=lt[0]-F[0],X=R[1]-F[1],C=Z[1]-F[1],nt=lt[1]-F[1],_t=R[2]-F[2],Jt=Z[2]-F[2],Rt=lt[2]-F[2],ne=G*nt,z=j*C,Kt=j*X,at=V*nt,mt=V*C,jt=G*X,ve=_t*(ne-z)+Jt*(Kt-at)+Rt*(mt-jt),Bt=(Math.abs(ne)+Math.abs(z))*Math.abs(_t)+(Math.abs(Kt)+Math.abs(at))*Math.abs(Jt)+(Math.abs(mt)+Math.abs(jt))*Math.abs(Rt),Q=w*Bt;return ve>Q||-ve>Q?ve:k(R,Z,lt,F)}];function rt(A){var R=P[A.length];return R||(R=P[A.length]=T(A.length)),R.apply(void 0,A)}function ot(A,R,Z,lt,F,V,G){return function(X,C,nt,_t,Jt){switch(arguments.length){case 0:case 1:return 0;case 2:return lt(X,C);case 3:return F(X,C,nt);case 4:return V(X,C,nt,_t);case 5:return G(X,C,nt,_t,Jt)}for(var Rt=new Array(arguments.length),ne=0;ne<arguments.length;++ne)Rt[ne]=arguments[ne];return A(Rt)}}function it(){for(;P.length<=d;)P.push(T(P.length));o.exports=ot.apply(void 0,[rt].concat(P));for(var A=0;A<=d;++A)o.exports[A]=P[A]}it()})(Ea);var Tf=Pf,$u=Ea.exports[3];function Pf(o){var u=o.length;if(u<3){for(var I=new Array(u),c=0;c<u;++c)I[c]=c;return u===2&&o[0][0]===o[1][0]&&o[0][1]===o[1][1]?[0]:I}for(var f=new Array(u),c=0;c<u;++c)f[c]=c;f.sort(function(q,k){var P=o[q][0]-o[k][0];return P||o[q][1]-o[k][1]});for(var l=[f[0],f[1]],d=[f[0],f[1]],c=2;c<u;++c){for(var m=f[c],_=o[m],w=l.length;w>1&&$u(o[l[w-2]],o[l[w-1]],_)<=0;)w-=1,l.pop();for(l.push(m),w=d.length;w>1&&$u(o[d[w-2]],o[d[w-1]],_)>=0;)w-=1,d.pop();d.push(m)}for(var I=new Array(d.length+l.length-2),b=0,c=0,M=l.length;c<M;++c)I[b++]=l[c];for(var T=d.length-2;T>0;--T)I[b++]=d[T];return I}var Mf=Of,Rf=Tf;function Of(o){var u=Rf(o),c=u.length;if(c<=2)return[];for(var f=new Array(c),l=u[c-1],d=0;d<c;++d){var m=u[d];f[d]=[l,m],l=m}return f}var mn={},we={},Ru=32;we.INT_BITS=Ru;we.INT_MAX=2147483647;we.INT_MIN=-1<<Ru-1;we.sign=function(o){return(o>0)-(o<0)};we.abs=function(o){var u=o>>Ru-1;return(o^u)-u};we.min=function(o,u){return u^(o^u)&-(o<u)};we.max=function(o,u){return o^(o^u)&-(o<u)};we.isPow2=function(o){return!(o&o-1)&&!!o};we.log2=function(o){var u,c;return u=(o>65535)<<4,o>>>=u,c=(o>255)<<3,o>>>=c,u|=c,c=(o>15)<<2,o>>>=c,u|=c,c=(o>3)<<1,o>>>=c,u|=c,u|o>>1};we.log10=function(o){return o>=1e9?9:o>=1e8?8:o>=1e7?7:o>=1e6?6:o>=1e5?5:o>=1e4?4:o>=1e3?3:o>=100?2:o>=10?1:0};we.popCount=function(o){return o=o-(o>>>1&1431655765),o=(o&858993459)+(o>>>2&858993459),(o+(o>>>4)&252645135)*16843009>>>24};function jl(o){var u=32;return o&=-o,o&&u--,o&65535&&(u-=16),o&16711935&&(u-=8),o&252645135&&(u-=4),o&858993459&&(u-=2),o&1431655765&&(u-=1),u}we.countTrailingZeros=jl;we.nextPow2=function(o){return o+=o===0,--o,o|=o>>>1,o|=o>>>2,o|=o>>>4,o|=o>>>8,o|=o>>>16,o+1};we.prevPow2=function(o){return o|=o>>>1,o|=o>>>2,o|=o>>>4,o|=o>>>8,o|=o>>>16,o-(o>>>1)};we.parity=function(o){return o^=o>>>16,o^=o>>>8,o^=o>>>4,o&=15,27030>>>o&1};var mo=new Array(256);(function(o){for(var u=0;u<256;++u){var c=u,f=u,l=7;for(c>>>=1;c;c>>>=1)f<<=1,f|=c&1,--l;o[u]=f<<l&255}})(mo);we.reverse=function(o){return mo[o&255]<<24|mo[o>>>8&255]<<16|mo[o>>>16&255]<<8|mo[o>>>24&255]};we.interleave2=function(o,u){return o&=65535,o=(o|o<<8)&16711935,o=(o|o<<4)&252645135,o=(o|o<<2)&858993459,o=(o|o<<1)&1431655765,u&=65535,u=(u|u<<8)&16711935,u=(u|u<<4)&252645135,u=(u|u<<2)&858993459,u=(u|u<<1)&1431655765,o|u<<1};we.deinterleave2=function(o,u){return o=o>>>u&1431655765,o=(o|o>>>1)&858993459,o=(o|o>>>2)&252645135,o=(o|o>>>4)&16711935,o=(o|o>>>16)&65535,o<<16>>16};we.interleave3=function(o,u,c){return o&=1023,o=(o|o<<16)&4278190335,o=(o|o<<8)&251719695,o=(o|o<<4)&3272356035,o=(o|o<<2)&1227133513,u&=1023,u=(u|u<<16)&4278190335,u=(u|u<<8)&251719695,u=(u|u<<4)&3272356035,u=(u|u<<2)&1227133513,o|=u<<1,c&=1023,c=(c|c<<16)&4278190335,c=(c|c<<8)&251719695,c=(c|c<<4)&3272356035,c=(c|c<<2)&1227133513,o|c<<2};we.deinterleave3=function(o,u){return o=o>>>u&1227133513,o=(o|o>>>2)&3272356035,o=(o|o>>>4)&251719695,o=(o|o>>>8)&4278190335,o=(o|o>>>16)&1023,o<<22>>22};we.nextCombination=function(o){var u=o|o-1;return u+1|(~u&-~u)-1>>>jl(o)+1};var Af=Ql;function Ql(o){this.roots=new Array(o),this.ranks=new Array(o);for(var u=0;u<o;++u)this.roots[u]=u,this.ranks[u]=0}var wa=Ql.prototype;Object.defineProperty(wa,"length",{get:function(){return this.roots.length}});wa.makeSet=function(){var o=this.roots.length;return this.roots.push(o),this.ranks.push(0),o};wa.find=function(o){for(var u=o,c=this.roots;c[o]!==o;)o=c[o];for(;c[u]!==o;){var f=c[u];c[u]=o,u=f}return o};wa.link=function(o,u){var c=this.find(o),f=this.find(u);if(c!==f){var l=this.ranks,d=this.roots,m=l[c],_=l[f];m<_?d[c]=f:_<m?d[f]=c:(d[f]=c,++l[c])}};var $l=we,th=Af;function Df(o){for(var u=0,c=Math.max,f=0,l=o.length;f<l;++f)u=c(u,o[f].length);return u-1}mn.dimension=Df;function kf(o){for(var u=-1,c=Math.max,f=0,l=o.length;f<l;++f)for(var d=o[f],m=0,_=d.length;m<_;++m)u=c(u,d[m]);return u+1}mn.countVertices=kf;function Ff(o){for(var u=new Array(o.length),c=0,f=o.length;c<f;++c)u[c]=o[c].slice(0);return u}mn.cloneCells=Ff;function Gs(o,u){var c=o.length,f=o.length-u.length,l=Math.min;if(f)return f;switch(c){case 0:return 0;case 1:return o[0]-u[0];case 2:var I=o[0]+o[1]-u[0]-u[1];return I||l(o[0],o[1])-l(u[0],u[1]);case 3:var d=o[0]+o[1],m=u[0]+u[1];if(I=d+o[2]-(m+u[2]),I)return I;var _=l(o[0],o[1]),w=l(u[0],u[1]),I=l(_,o[2])-l(w,u[2]);return I||l(_+o[2],d)-l(w+u[2],m);default:var b=o.slice(0);b.sort();var M=u.slice(0);M.sort();for(var T=0;T<c;++T)if(f=b[T]-M[T],f)return f;return 0}}mn.compareCells=Gs;function zf(o,u){return Gs(o[0],u[0])}function Lo(o,u){if(u){for(var c=o.length,f=new Array(c),l=0;l<c;++l)f[l]=[o[l],u[l]];f.sort(zf);for(var l=0;l<c;++l)o[l]=f[l][0],u[l]=f[l][1];return o}else return o.sort(Gs),o}mn.normalize=Lo;function Ou(o){if(o.length===0)return[];for(var u=1,c=o.length,f=1;f<c;++f){var l=o[f];if(Gs(l,o[f-1])){if(f===u){u++;continue}o[u++]=l}}return o.length=u,o}mn.unique=Ou;function vo(o,u){for(var c=0,f=o.length-1,l=-1;c<=f;){var d=c+f>>1,m=Gs(o[d],u);m<=0?(m===0&&(l=d),c=d+1):m>0&&(f=d-1)}return l}mn.findCell=vo;function eh(o,u){for(var c=new Array(o.length),f=0,l=c.length;f<l;++f)c[f]=[];for(var d=[],f=0,m=u.length;f<m;++f)for(var _=u[f],w=_.length,I=1,b=1<<w;I<b;++I){d.length=$l.popCount(I);for(var M=0,T=0;T<w;++T)I&1<<T&&(d[M++]=_[T]);var q=vo(o,d);if(!(q<0))for(;c[q++].push(f),!(q>=o.length||Gs(o[q],d)!==0););}return c}mn.incidence=eh;function Gf(o,u){if(!u)return eh(Ou(Au(o,0)),o);for(var c=new Array(u),f=0;f<u;++f)c[f]=[];for(var f=0,l=o.length;f<l;++f)for(var d=o[f],m=0,_=d.length;m<_;++m)c[d[m]].push(f);return c}mn.dual=Gf;function Bf(o){for(var u=[],c=0,f=o.length;c<f;++c)for(var l=o[c],d=l.length|0,m=1,_=1<<d;m<_;++m){for(var w=[],I=0;I<d;++I)m>>>I&1&&w.push(l[I]);u.push(w)}return Lo(u)}mn.explode=Bf;function Au(o,u){if(u<0)return[];for(var c=[],f=(1<<u+1)-1,l=0;l<o.length;++l)for(var d=o[l],m=f;m<1<<d.length;m=$l.nextCombination(m)){for(var _=new Array(u+1),w=0,I=0;I<d.length;++I)m&1<<I&&(_[w++]=d[I]);c.push(_)}return Lo(c)}mn.skeleton=Au;function qf(o){for(var u=[],c=0,f=o.length;c<f;++c)for(var l=o[c],d=0,m=l.length;d<m;++d){for(var _=new Array(l.length-1),w=0,I=0;w<m;++w)w!==d&&(_[I++]=l[w]);u.push(_)}return Lo(u)}mn.boundary=qf;function Uf(o,u){for(var c=new th(u),f=0;f<o.length;++f)for(var l=o[f],d=0;d<l.length;++d)for(var m=d+1;m<l.length;++m)c.link(l[d],l[m]);for(var _=[],w=c.ranks,f=0;f<w.length;++f)w[f]=-1;for(var f=0;f<o.length;++f){var I=c.find(o[f][0]);w[I]<0?(w[I]=_.length,_.push([o[f].slice(0)])):_[w[I]].push(o[f].slice(0))}return _}function Vf(o){for(var u=Ou(Lo(Au(o,0))),c=new th(u.length),f=0;f<o.length;++f)for(var l=o[f],d=0;d<l.length;++d)for(var m=vo(u,[l[d]]),_=d+1;_<l.length;++_)c.link(m,vo(u,[l[_]]));for(var w=[],I=c.ranks,f=0;f<I.length;++f)I[f]=-1;for(var f=0;f<o.length;++f){var b=c.find(vo(u,[o[f][0]]));I[b]<0?(I[b]=w.length,w.push([o[f].slice(0)])):w[I[b]].push(o[f].slice(0))}return w}function Zf(o,u){return u?Uf(o,u):Vf(o)}mn.connectedComponents=Zf;var Hf=Kf,du=Ea.exports,Wf=mn.compareCells;function fa(o,u,c){this.vertices=o,this.adjacent=u,this.boundary=c,this.lastVisited=-1}fa.prototype.flip=function(){var o=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=o;var u=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=u};function Xf(o,u,c){this.vertices=o,this.cell=u,this.index=c}function Yf(o,u){return Wf(o.vertices,u.vertices)}function Jf(o){for(var u=["function orient(){var tuple=this.tuple;return test("],c=0;c<=o;++c)c>0&&u.push(","),u.push("tuple[",c,"]");u.push(")}return orient");var f=new Function("test",u.join("")),l=du[o+1];return l||(l=du),f(l)}var tl=[];function nh(o,u,c){this.dimension=o,this.vertices=u,this.simplices=c,this.interior=c.filter(function(d){return!d.boundary}),this.tuple=new Array(o+1);for(var f=0;f<=o;++f)this.tuple[f]=this.vertices[f];var l=tl[o];l||(l=tl[o]=Jf(o)),this.orient=l}var Eo=nh.prototype;Eo.handleBoundaryDegeneracy=function(o,u){var c=this.dimension,f=this.vertices.length-1,l=this.tuple,d=this.vertices,m=[o];for(o.lastVisited=-f;m.length>0;){o=m.pop(),o.vertices;for(var _=o.adjacent,w=0;w<=c;++w){var I=_[w];if(!(!I.boundary||I.lastVisited<=-f)){for(var b=I.vertices,M=0;M<=c;++M){var T=b[M];T<0?l[M]=u:l[M]=d[T]}var q=this.orient();if(q>0)return I;I.lastVisited=-f,q===0&&m.push(I)}}}return null};Eo.walk=function(o,u){var c=this.vertices.length-1,f=this.dimension,l=this.vertices,d=this.tuple,m=u?this.interior.length*Math.random()|0:this.interior.length-1,_=this.interior[m];t:for(;!_.boundary;){for(var w=_.vertices,I=_.adjacent,b=0;b<=f;++b)d[b]=l[w[b]];_.lastVisited=c;for(var b=0;b<=f;++b){var M=I[b];if(!(M.lastVisited>=c)){var T=d[b];d[b]=o;var q=this.orient();if(d[b]=T,q<0){_=M;continue t}else M.boundary?M.lastVisited=-c:M.lastVisited=c}}return}return _};Eo.addPeaks=function(o,u){var c=this.vertices.length-1,f=this.dimension,l=this.vertices,d=this.tuple,m=this.interior,_=this.simplices,w=[u];u.lastVisited=c,u.vertices[u.vertices.indexOf(-1)]=c,u.boundary=!1,m.push(u);for(var I=[];w.length>0;){var u=w.pop(),b=u.vertices,M=u.adjacent,T=b.indexOf(c);if(!(T<0)){for(var q=0;q<=f;++q)if(q!==T){var k=M[q];if(!(!k.boundary||k.lastVisited>=c)){var P=k.vertices;if(k.lastVisited!==-c){for(var rt=0,ot=0;ot<=f;++ot)P[ot]<0?(rt=ot,d[ot]=o):d[ot]=l[P[ot]];var it=this.orient();if(it>0){P[rt]=c,k.boundary=!1,m.push(k),w.push(k),k.lastVisited=c;continue}else k.lastVisited=-c}var A=k.adjacent,R=b.slice(),Z=M.slice(),lt=new fa(R,Z,!0);_.push(lt);var F=A.indexOf(u);if(!(F<0)){A[F]=lt,Z[T]=k,R[q]=-1,Z[q]=u,M[q]=lt,lt.flip();for(var ot=0;ot<=f;++ot){var V=R[ot];if(!(V<0||V===c)){for(var G=new Array(f-1),j=0,X=0;X<=f;++X){var C=R[X];C<0||X===ot||(G[j++]=C)}I.push(new Xf(G,lt,ot))}}}}}}}I.sort(Yf);for(var q=0;q+1<I.length;q+=2){var nt=I[q],_t=I[q+1],Jt=nt.index,Rt=_t.index;Jt<0||Rt<0||(nt.cell.adjacent[nt.index]=_t.cell,_t.cell.adjacent[_t.index]=nt.cell)}};Eo.insert=function(o,u){var c=this.vertices;c.push(o);var f=this.walk(o,u);if(!!f){for(var l=this.dimension,d=this.tuple,m=0;m<=l;++m){var _=f.vertices[m];_<0?d[m]=o:d[m]=c[_]}var w=this.orient(d);w<0||w===0&&(f=this.handleBoundaryDegeneracy(f,o),!f)||this.addPeaks(o,f)}};Eo.boundary=function(){for(var o=this.dimension,u=[],c=this.simplices,f=c.length,l=0;l<f;++l){var d=c[l];if(d.boundary){for(var m=new Array(o),_=d.vertices,w=0,I=0,b=0;b<=o;++b)_[b]>=0?m[w++]=_[b]:I=b&1;if(I===(o&1)){var M=m[0];m[0]=m[1],m[1]=M}u.push(m)}}return u};function Kf(o,u){var c=o.length;if(c===0)throw new Error("Must have at least d+1 points");var f=o[0].length;if(c<=f)throw new Error("Must input at least d+1 points");var l=o.slice(0,f+1),d=du.apply(void 0,l);if(d===0)throw new Error("Input not in general position");for(var m=new Array(f+1),_=0;_<=f;++_)m[_]=_;d<0&&(m[0]=1,m[1]=0);for(var w=new fa(m,new Array(f+1),!1),I=w.adjacent,b=new Array(f+2),_=0;_<=f;++_){for(var M=m.slice(),T=0;T<=f;++T)T===_&&(M[T]=-1);var q=M[0];M[0]=M[1],M[1]=q;var k=new fa(M,new Array(f+1),!0);I[_]=k,b[_]=k}b[f+1]=w;for(var _=0;_<=f;++_)for(var M=I[_].vertices,P=I[_].adjacent,T=0;T<=f;++T){var rt=M[T];if(rt<0){P[T]=w;continue}for(var ot=0;ot<=f;++ot)I[ot].vertices.indexOf(rt)<0&&(P[T]=I[ot])}for(var it=new nh(f,l,b),A=!!u,_=f+1;_<c;++_)it.insert(o[_],A);return it.boundary()}var jf=td,Qf=Ea.exports;function $f(o,u){for(var c=new Array(u+1),f=0;f<o.length;++f)c[f]=o[f];for(var f=0;f<=o.length;++f){for(var l=o.length;l<=u;++l){for(var d=new Array(u),m=0;m<u;++m)d[m]=Math.pow(l+1-f,m);c[l]=d}var _=Qf.apply(void 0,c);if(_)return!0}return!1}function td(o){var u=o.length;if(u===0)return[];if(u===1)return[0];for(var c=o[0].length,f=[o[0]],l=[0],d=1;d<u;++d){if(f.push(o[d]),!$f(f,c)){f.pop();continue}if(l.push(d),l.length===c+1)return l}return l}var ed=sd,el=Hf,nd=jf;function id(o,u){for(var c=o.length,f=new Array(c),l=0;l<u.length;++l)f[l]=o[u[l]];for(var d=u.length,l=0;l<c;++l)u.indexOf(l)<0&&(f[d++]=o[l]);return f}function rd(o,u){for(var c=o.length,f=u.length,l=0;l<c;++l)for(var d=o[l],m=0;m<d.length;++m){var _=d[m];if(_<f)d[m]=u[_];else{_=_-f;for(var w=0;w<f;++w)_>=u[w]&&(_+=1);d[m]=_}}return o}function sd(o,u){try{return el(o,!0)}catch{var c=nd(o);if(c.length<=u)return[];var f=id(o,c),l=el(f,!0);return rd(l,c)}}var od=pf,ad=Mf,ud=ed,ld=hd;function hd(o){var u=o.length;if(u===0)return[];if(u===1)return[[0]];var c=o[0].length;return c===0?[]:c===1?od(o):c===2?ad(o):ud(o,c)}var cd=Un.coordEach,fd=ld,dd=bt.polygon,gd=function(o){var u=[];cd(o,function(d){u.push(d)});var c=fd(u);if(c.length>0){for(var f=[],l=0;l<c.length;l++)f.push(u[c[l][0]]);return f.push(u[c[c.length-1][1]]),dd([f])}},pd=zs,md=bt.featureCollection,vd=function(o,u){for(var c=md([]),f=0;f<u.features.length;f++)for(var l=0;l<o.features.length;l++){var d=pd(o.features[l],u.features[f]);d&&c.features.push(o.features[l])}return c},Fs={exports:{}};(function(o,u){(function(c,f){f(u)})(Ol,function(c){function f(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function l(){}function d(){}function m(){}function _(){}function w(){}function I(){}function b(){}function M(t){this.message=t}function T(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}function q(){if(arguments.length===0)M.call(this);else if(arguments.length===1){var t=arguments[0];M.call(this,t)}}function k(){}function P(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)P.call(this,0,0);else if(arguments.length===1){var t=arguments[0];P.call(this,t.x,t.y,t.z)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];P.call(this,e,n,P.NULL_ORDINATE)}else if(arguments.length===3){var s=arguments[0],a=arguments[1],g=arguments[2];this.x=s,this.y=a,this.z=g}}function rt(){if(this.dimensionsToTest=2,arguments.length===0)rt.call(this,2);else if(arguments.length===1){var t=arguments[0];if(t!==2&&t!==3)throw new d;this.dimensionsToTest=t}}function ot(){}function it(){}function A(t){this.message=t||""}function R(){}function Z(t){this.message=t||""}function lt(t){this.message=t||""}function F(){this.array_=[],arguments[0]instanceof it&&this.addAll(arguments[0])}function V(){if(F.apply(this),arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}}function G(){if(this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof P){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof G){var e=arguments[0];this.init(e)}}else if(arguments.length===2){var n=arguments[0],s=arguments[1];this.init(n.x,s.x,n.y,s.y)}else if(arguments.length===4){var a=arguments[0],g=arguments[1],v=arguments[2],x=arguments[3];this.init(a,g,v,x)}}function j(){}function X(){j.call(this,"Projective point not representable on the Cartesian plane.")}function C(){}function nt(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1}function _t(){}function Jt(t){this.str=t}function Rt(t){this.value=t}function ne(){}function z(){if(this.hi=0,this.lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof z){var e=arguments[0];this.init(e)}else if(typeof arguments[0]=="string"){var n=arguments[0];z.call(this,z.parse(n))}}else if(arguments.length===2){var s=arguments[0],a=arguments[1];this.init(s,a)}}function Kt(){}function at(){}function mt(){}function jt(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],n=arguments[1];this.x=e,this.y=n,this.w=1}else if(arguments[0]instanceof jt&&arguments[1]instanceof jt){var s=arguments[0],a=arguments[1];this.x=s.y*a.w-a.y*s.w,this.y=a.x*s.w-s.x*a.w,this.w=s.x*a.y-a.x*s.y}else if(arguments[0]instanceof P&&arguments[1]instanceof P){var g=arguments[0],v=arguments[1];this.x=g.y-v.y,this.y=v.x-g.x,this.w=g.x*v.y-v.x*g.y}}else if(arguments.length===3){var x=arguments[0],S=arguments[1],O=arguments[2];this.x=x,this.y=S,this.w=O}else if(arguments.length===4){var B=arguments[0],H=arguments[1],J=arguments[2],ut=arguments[3],pt=B.y-H.y,Lt=H.x-B.x,Yt=B.x*H.y-H.x*B.y,me=J.y-ut.y,Bn=ut.x-J.x,Xr=J.x*ut.y-ut.x*J.y;this.x=Lt*Xr-Bn*Yt,this.y=me*Yt-pt*Xr,this.w=pt*Bn-me*Lt}}function ve(){}function Bt(){}function Q(){this.envelope=null,this.factory=null,this.SRID=null,this.userData=null;var t=arguments[0];this.factory=t,this.SRID=t.getSRID()}function Vt(){}function Ht(){}function vn(){}function Nr(){}function Vi(){}function Zi(){}function dt(){}function Tr(){}function Bs(){}function ei(){}function qs(){}function Hi(){}function he(){this.array_=[],arguments[0]instanceof it&&this.addAll(arguments[0])}function Io(t){return t==null?xi:t.color}function zt(t){return t==null?null:t.parent}function en(t,e){t!==null&&(t.color=e)}function jr(t){return t==null?null:t.left}function Us(t){return t==null?null:t.right}function de(){this.root_=null,this.size_=0}function Qr(){}function $r(){}function Ie(){this.array_=[],arguments[0]instanceof it&&this.addAll(arguments[0])}function yn(){}function K(){}function _n(){}function ni(){}function Nt(){this.geometries=null;var t=arguments[0],e=arguments[1];if(Q.call(this,e),t===null&&(t=[]),Q.hasNullElements(t))throw new d;this.geometries=t}function De(){var t=arguments[0],e=arguments[1];Nt.call(this,t,e)}function xn(){if(this.geom=null,this.geomFact=null,this.bnRule=null,this.endpointMap=null,arguments.length===1){var t=arguments[0];xn.call(this,t,Ht.MOD2_BOUNDARY_RULE)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.geom=e,this.geomFact=e.getFactory(),this.bnRule=n}}function ts(){this.count=null}function Pa(){}function Pr(){}function Ma(){}function Ra(){}function Co(){}function So(){}function Be(){}function ae(){}function It(){this.points=null;var t=arguments[0],e=arguments[1];Q.call(this,e),this.init(t)}function es(){}function Qt(){this.coordinates=null;var t=arguments[0],e=arguments[1];Q.call(this,e),this.init(t)}function Nn(){}function Ft(){this.shell=null,this.holes=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(Q.call(this,n),t===null&&(t=this.getFactory().createLinearRing()),e===null&&(e=[]),Q.hasNullElements(e))throw new d;if(t.isEmpty()&&Q.hasNonEmptyElements(e))throw new d;this.shell=t,this.holes=e}function Te(){var t=arguments[0],e=arguments[1];Nt.call(this,t,e)}function ie(){if(arguments[0]instanceof P&&arguments[1]instanceof St){var t=arguments[0],e=arguments[1];ie.call(this,e.getCoordinateSequenceFactory().create(t),e)}else if(nt(arguments[0],at)&&arguments[1]instanceof St){var n=arguments[0],s=arguments[1];It.call(this,n,s),this.validateConstruction()}}function Le(){var t=arguments[0],e=arguments[1];Nt.call(this,t,e)}function ce(){if(this.factory=null,this.isUserDataCopied=!1,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.factory=t}}}function gt(){}function ns(){}function is(){}function rs(){}function qe(){if(this.dimension=3,this.coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];qe.call(this,t,3)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.coordinates=new Array(e).fill(null);for(var n=0;e>n;n++)this.coordinates[n]=new P}else if(nt(arguments[0],at)){var s=arguments[0];if(s===null)return this.coordinates=new Array(0).fill(null),null;this.dimension=s.getDimension(),this.coordinates=new Array(s.size()).fill(null);for(var n=0;n<this.coordinates.length;n++)this.coordinates[n]=s.getCoordinateCopy(n)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var a=arguments[0],g=arguments[1];this.coordinates=a,this.dimension=g,a===null&&(this.coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var v=arguments[0],x=arguments[1];this.coordinates=new Array(v).fill(null),this.dimension=x;for(var n=0;v>n;n++)this.coordinates[n]=new P}}}function Ln(){}function bo(t,e){return t===e||t!==t&&e!==e}function Wi(t,e){function n(s){return this&&this.constructor===n?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,void(s&&No.call(this,s))):new n(s)}return e||Lh(t,"size",{get:Ba}),t.constructor=n,n.prototype=t,n}function No(t){this.add?t.forEach(this.add,this):t.forEach(function(e){this.set(e[0],e[1])},this)}function Oa(t){return this.has(t)&&(this._keys.splice($n,1),this._values.splice($n,1),this._itp.forEach(function(e){$n<e[0]&&e[0]--})),$n>-1}function Aa(t){return this.has(t)?this._values[$n]:void 0}function Da(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!==e||e===0)for($n=t.length;$n--&&!bo(t[$n],e););else $n=t.indexOf(e);return $n>-1}function ka(t){return Da.call(this,this._keys,t)}function To(t,e){return this.has(t)?this._values[$n]=e:this._values[this._keys.push(t)-1]=e,this}function Fa(){(this._keys||0).length=this._values.length=0}function ss(){return Vs(this._itp,this._keys)}function za(){return Vs(this._itp,this._values)}function Ga(){return Vs(this._itp,this._keys,this._values)}function Vs(t,e,n){var s=[0],a=!1;return t.push(s),{next:function(){var g,v=s[0];return!a&&v<e.length?(g=n?[e[v],n[v]]:e[v],s[0]++):(a=!0,t.splice(t.indexOf(s),1)),{done:a,value:g}}}}function Ba(){return this._values.length}function qa(t,e){for(var n=this.entries();;){var s=n.next();if(s.done)break;t.call(e,s.value[1],s.value[0],this)}}function nn(){this.map_=new wh}function Mt(){if(this.modelType=null,this.scale=null,arguments.length===0)this.modelType=Mt.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof rn){var t=arguments[0];this.modelType=t,t===Mt.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var e=arguments[0];this.modelType=Mt.FIXED,this.setScale(e)}else if(arguments[0]instanceof Mt){var n=arguments[0];this.modelType=n.modelType,this.scale=n.scale}}}function rn(){this.name=null;var t=arguments[0];this.name=t,rn.nameToTypeMap.put(t,this)}function St(){if(this.precisionModel=null,this.coordinateSequenceFactory=null,this.SRID=null,arguments.length===0)St.call(this,new Mt,0);else if(arguments.length===1){if(nt(arguments[0],ve)){var t=arguments[0];St.call(this,new Mt,0,t)}else if(arguments[0]instanceof Mt){var e=arguments[0];St.call(this,e,0,St.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var n=arguments[0],s=arguments[1];St.call(this,n,s,St.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var a=arguments[0],g=arguments[1],v=arguments[2];this.precisionModel=a,this.coordinateSequenceFactory=v,this.SRID=g}}function Ii(t){this.geometryFactory=t||new St}function wt(t){this.parser=new Ii(t)}function vt(){this.result=null,this.inputLines=Array(2).fill().map(function(){return Array(2)}),this.intPt=new Array(2).fill(null),this.intLineIndex=null,this._isProper=null,this.pa=null,this.pb=null,this.precisionModel=null,this.intPt[0]=new P,this.intPt[1]=new P,this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=0}function ue(){vt.apply(this)}function sn(){}function on(){this.p=null,this.crossingCount=0,this.isPointOnSegment=!1;var t=arguments[0];this.p=t}function et(){}function st(){if(this.p0=null,this.p1=null,arguments.length===0)st.call(this,new P,new P);else if(arguments.length===1){var t=arguments[0];st.call(this,t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p0=e,this.p1=n}else if(arguments.length===4){var s=arguments[0],a=arguments[1],g=arguments[2],v=arguments[3];st.call(this,new P(s,a),new P(g,v))}}function yt(){if(this.matrix=null,arguments.length===0)this.matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(K.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var t=arguments[0];yt.call(this),this.set(t)}else if(arguments[0]instanceof yt){var e=arguments[0];yt.call(this),this.matrix[C.INTERIOR][C.INTERIOR]=e.matrix[C.INTERIOR][C.INTERIOR],this.matrix[C.INTERIOR][C.BOUNDARY]=e.matrix[C.INTERIOR][C.BOUNDARY],this.matrix[C.INTERIOR][C.EXTERIOR]=e.matrix[C.INTERIOR][C.EXTERIOR],this.matrix[C.BOUNDARY][C.INTERIOR]=e.matrix[C.BOUNDARY][C.INTERIOR],this.matrix[C.BOUNDARY][C.BOUNDARY]=e.matrix[C.BOUNDARY][C.BOUNDARY],this.matrix[C.BOUNDARY][C.EXTERIOR]=e.matrix[C.BOUNDARY][C.EXTERIOR],this.matrix[C.EXTERIOR][C.INTERIOR]=e.matrix[C.EXTERIOR][C.INTERIOR],this.matrix[C.EXTERIOR][C.BOUNDARY]=e.matrix[C.EXTERIOR][C.BOUNDARY],this.matrix[C.EXTERIOR][C.EXTERIOR]=e.matrix[C.EXTERIOR][C.EXTERIOR]}}}function an(){this.areaBasePt=null,this.triangleCent3=new P,this.areasum2=0,this.cg3=new P,this.lineCentSum=new P,this.totalLength=0,this.ptCount=0,this.ptCentSum=new P;var t=arguments[0];this.areaBasePt=null,this.add(t)}function Ci(t){this.message=t||""}function $t(){this.array_=[]}function Xi(){this.treeSet=new Ie,this.list=new F}function Ye(){if(this.geomFactory=null,this.inputPts=null,arguments.length===1){var t=arguments[0];Ye.call(this,Ye.extractCoordinates(t),t.getFactory())}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.inputPts=Xi.filterCoordinates(e),this.geomFactory=n}}function un(){this.origin=null;var t=arguments[0];this.origin=t}function Dt(){this.inputGeom=null,this.factory=null,this.pruneEmptyGeometry=!0,this.preserveGeometryCollectionType=!0,this.preserveCollections=!1,this.preserveType=!1}function ln(){if(this.snapTolerance=0,this.srcPts=null,this.seg=new st,this.allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof It&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];ln.call(this,t.getCoordinates(),e)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var n=arguments[0],s=arguments[1];this.srcPts=n,this._isClosed=ln.isClosed(n),this.snapTolerance=s}}function ye(){this.srcGeom=null;var t=arguments[0];this.srcGeom=t}function Vn(){if(Dt.apply(this),this.snapTolerance=null,this.snapPts=null,this.isSelfSnap=!1,arguments.length===2){var t=arguments[0],e=arguments[1];this.snapTolerance=t,this.snapPts=e}else if(arguments.length===3){var n=arguments[0],s=arguments[1],a=arguments[2];this.snapTolerance=n,this.snapPts=s,this.isSelfSnap=a}}function ke(){this.isFirst=!0,this.commonMantissaBitsCount=53,this.commonBits=0,this.commonSignExp=null}function Zn(){this.commonCoord=null,this.ccFilter=new Yi}function Yi(){this.commonBitsX=new ke,this.commonBitsY=new ke}function Si(){this.trans=null;var t=arguments[0];this.trans=t}function Tn(){this.parent=null,this.atStart=null,this.max=null,this.index=null,this.subcollectionIterator=null;var t=arguments[0];this.parent=t,this.atStart=!0,this.index=0,this.max=t.getNumGeometries()}function Hn(){if(this.boundaryRule=Ht.OGC_SFS_BOUNDARY_RULE,this.isIn=null,this.numBoundaries=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];if(t===null)throw new d;this.boundaryRule=t}}}function ii(){}function ri(){}function os(){this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function Ji(){}function Pn(){this.bounds=null,this.item=null;var t=arguments[0],e=arguments[1];this.bounds=t,this.item=e}function Tt(){this._size=null,this.items=null,this._size=0,this.items=new F,this.items.add(null)}function Pe(){}function Wt(){}function Ce(){if(this.childBoundables=new F,this.bounds=null,this.level=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.level=t}}}function Se(){this.boundable1=null,this.boundable2=null,this._distance=null,this.itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.boundable1=t,this.boundable2=e,this.itemDistance=n,this._distance=this.distance()}function ee(){if(this.root=null,this.built=!1,this.itemBoundables=new F,this.nodeCapacity=null,arguments.length===0)ee.call(this,ee.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var t=arguments[0];k.isTrue(t>1,"Node capacity must be greater than 1"),this.nodeCapacity=t}}function Zs(){}function Mn(){}function Zt(){if(arguments.length===0)Zt.call(this,Zt.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var t=arguments[0];ee.call(this,t)}}function Wn(){var t=arguments[0];Ce.call(this,t)}function qt(){}function Xn(){this.segString=null,this.coord=null,this.segmentIndex=null,this.segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],s=arguments[3];this.segString=t,this.coord=new P(e),this.segmentIndex=n,this.segmentOctant=s,this._isInterior=!e.equals2D(t.getCoordinate(n))}function as(){this.nodeMap=new de,this.edge=null;var t=arguments[0];this.edge=t}function Po(){this.nodeList=null,this.edge=null,this.nodeIt=null,this.currNode=null,this.nextNode=null,this.currSegIndex=0;var t=arguments[0];this.nodeList=t,this.edge=t.getEdge(),this.nodeIt=t.iterator(),this.readNextNode()}function us(){}function Je(){this.nodeList=new as(this),this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function Mr(){this.tempEnv1=new G,this.tempEnv2=new G,this.overlapSeg1=new st,this.overlapSeg2=new st}function ls(){this.pts=null,this.start=null,this.end=null,this.env=null,this.context=null,this.id=null;var t=arguments[0],e=arguments[1],n=arguments[2],s=arguments[3];this.pts=t,this.start=e,this.end=n,this.context=s}function ht(){}function hn(){}function Ue(){}function si(){if(this.segInt=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setSegmentIntersector(t)}}}function Yn(){if(this.monoChains=new F,this.index=new Zt,this.idCounter=0,this.nodedSegStrings=null,this.nOverlaps=0,arguments.length!==0){if(arguments.length===1){var t=arguments[0];si.call(this,t)}}}function Rr(){Mr.apply(this),this.si=null;var t=arguments[0];this.si=t}function Me(){if(this.pt=null,arguments.length===1){var t=arguments[0];M.call(this,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];M.call(this,Me.msgWithCoord(e,n)),this.pt=new P(n)}}function Or(){}function Rn(){this.findAllIntersections=!1,this.isCheckEndSegmentsOnly=!1,this.li=null,this.interiorIntersection=null,this.intSegments=null,this.intersections=new F,this.intersectionCount=0,this.keepIntersections=!0;var t=arguments[0];this.li=t,this.interiorIntersection=null}function Ar(){this.li=new ue,this.segStrings=null,this.findAllIntersections=!1,this.segInt=null,this._isValid=!0;var t=arguments[0];this.segStrings=t}function bi(){this.nv=null;var t=arguments[0];this.nv=new Ar(bi.toSegmentStrings(t))}function oi(){this.mapOp=null;var t=arguments[0];this.mapOp=t}function $(){}function le(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[$.ON]=e}else if(arguments[0]instanceof le){var n=arguments[0];if(this.init(n.location.length),n!==null)for(var s=0;s<this.location.length;s++)this.location[s]=n.location[s]}}else if(arguments.length===3){var a=arguments[0],g=arguments[1],v=arguments[2];this.init(3),this.location[$.ON]=a,this.location[$.LEFT]=g,this.location[$.RIGHT]=v}}function re(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new le(t),this.elt[1]=new le(t)}else if(arguments[0]instanceof re){var e=arguments[0];this.elt[0]=new le(e.elt[0]),this.elt[1]=new le(e.elt[1])}}else if(arguments.length===2){var n=arguments[0],s=arguments[1];this.elt[0]=new le(C.NONE),this.elt[1]=new le(C.NONE),this.elt[n].setLocation(s)}else if(arguments.length===3){var a=arguments[0],g=arguments[1],v=arguments[2];this.elt[0]=new le(a,g,v),this.elt[1]=new le(a,g,v)}else if(arguments.length===4){var x=arguments[0],S=arguments[1],O=arguments[2],B=arguments[3];this.elt[0]=new le(C.NONE,C.NONE,C.NONE),this.elt[1]=new le(C.NONE,C.NONE,C.NONE),this.elt[x].setLocations(S,O,B)}}function Ni(){this.startDe=null,this.maxNodeDegree=-1,this.edges=new F,this.pts=new F,this.label=new re(C.NONE),this.ring=null,this._isHole=null,this.shell=null,this.holes=new F,this.geometryFactory=null;var t=arguments[0],e=arguments[1];this.geometryFactory=e,this.computePoints(t),this.computeRing()}function En(){var t=arguments[0],e=arguments[1];Ni.call(this,t,e)}function Ki(){var t=arguments[0],e=arguments[1];Ni.call(this,t,e)}function Jn(){if(this.label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.label=t}}}function On(){Jn.apply(this),this.coord=null,this.edges=null;var t=arguments[0],e=arguments[1];this.coord=t,this.edges=e,this.label=new re(0,C.NONE)}function ji(){this.nodeMap=new de,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}function Ke(){if(this.edge=null,this.label=null,this.node=null,this.p0=null,this.p1=null,this.dx=null,this.dy=null,this.quadrant=null,arguments.length===1){var t=arguments[0];this.edge=t}else if(arguments.length===3){var e=arguments[0],n=arguments[1],s=arguments[2];Ke.call(this,e,n,s,null)}else if(arguments.length===4){var a=arguments[0],g=arguments[1],v=arguments[2],x=arguments[3];Ke.call(this,a),this.init(g,v),this.label=x}}function Ti(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this.sym=null,this.next=null,this.nextMin=null,this.edgeRing=null,this.minEdgeRing=null,this.depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(Ke.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}function ai(){}function cn(){if(this.edges=new F,this.nodes=null,this.edgeEndList=new F,arguments.length===0)this.nodes=new ji(new ai);else if(arguments.length===1){var t=arguments[0];this.nodes=new ji(t)}}function Pi(){this.geometryFactory=null,this.shellList=new F;var t=arguments[0];this.geometryFactory=t}function Kn(){this.op=null,this.geometryFactory=null,this.ptLocator=null,this.lineEdgesList=new F,this.resultLineList=new F;var t=arguments[0],e=arguments[1],n=arguments[2];this.op=t,this.geometryFactory=e,this.ptLocator=n}function Hs(){this.op=null,this.geometryFactory=null,this.resultPointList=new F;var t=arguments[0],e=arguments[1];this.op=t,this.geometryFactory=e}function ui(){}function ge(){this.geom=null;var t=arguments[0];this.geom=t}function li(){this.edgeMap=new de,this.edgeList=null,this.ptInAreaLocation=[C.NONE,C.NONE]}function hs(){li.apply(this),this.resultAreaEdgeList=null,this.label=null,this.SCANNING_FOR_INCOMING=1,this.LINKING_TO_OUTGOING=2}function Mi(){ai.apply(this)}function Ws(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}function fn(){if(this.label=null,this.xValue=null,this.eventType=null,this.insertEvent=null,this.deleteEventIndex=null,this.obj=null,arguments.length===2){var t=arguments[0],e=arguments[1];this.eventType=fn.DELETE,this.xValue=t,this.insertEvent=e}else if(arguments.length===3){var n=arguments[0],s=arguments[1],a=arguments[2];this.eventType=fn.INSERT,this.label=n,this.xValue=s,this.obj=a}}function Qi(){}function hi(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.properIntersectionPoint=null,this.li=null,this.includeProper=null,this.recordIsolated=null,this.isSelfIntersection=null,this.numIntersections=0,this.numTests=0,this.bdyNodes=null,this._isDone=!1,this.isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.li=t,this.includeProper=e,this.recordIsolated=n}function cs(){Qi.apply(this),this.events=new F,this.nOverlaps=null}function ci(){this.min=m.POSITIVE_INFINITY,this.max=m.NEGATIVE_INFINITY}function Xs(){}function He(){ci.apply(this),this.item=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.min=t,this.max=e,this.item=n}function jn(){ci.apply(this),this.node1=null,this.node2=null;var t=arguments[0],e=arguments[1];this.node1=t,this.node2=e,this.buildExtent(this.node1,this.node2)}function Ys(){this.leaves=new F,this.root=null,this.level=0}function fe(){if(this.lines=null,this.isForcedToLineString=!1,arguments.length===1){var t=arguments[0];this.lines=t}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.lines=e,this.isForcedToLineString=n}}function fs(){this.items=new F}function An(){this.index=null;var t=arguments[0];if(!nt(t,Nn))throw new d;this.index=new fi(t)}function ds(){this.counter=null;var t=arguments[0];this.counter=t}function fi(){this.index=new Ys;var t=arguments[0];this.init(t)}function gs(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new P(t),this.segmentIndex=e,this.dist=n}function $i(){this.nodeMap=new de,this.edge=null;var t=arguments[0];this.edge=t}function Dr(){}function Dn(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new G,this.env2=new G;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Dr;this.startIndex=e.getChainStartIndices(this.pts)}function Ve(){this.depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;2>t;t++)for(var e=0;3>e;e++)this.depth[t][e]=Ve.NULL_VALUE}function je(){if(Jn.apply(this),this.pts=null,this.env=null,this.eiList=new $i(this),this.name=null,this.mce=null,this._isIsolated=!0,this.depth=new Ve,this.depthDelta=0,arguments.length===1){var t=arguments[0];je.call(this,t,null)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.pts=e,this.label=n}}function Re(){if(cn.apply(this),this.parentGeom=null,this.lineEdgeMap=new nn,this.boundaryNodeRule=null,this.useBoundaryDeterminationRule=!0,this.argIndex=null,this.boundaryNodes=null,this._hasTooFewPoints=!1,this.invalidPoint=null,this.areaPtLocator=null,this.ptLocator=new Hn,arguments.length===2){var t=arguments[0],e=arguments[1];Re.call(this,t,e,Ht.OGC_SFS_BOUNDARY_RULE)}else if(arguments.length===3){var n=arguments[0],s=arguments[1],a=arguments[2];this.argIndex=n,this.parentGeom=s,this.boundaryNodeRule=a,s!==null&&this.add(s)}}function di(){if(this.li=new ue,this.resultPrecisionModel=null,this.arg=null,arguments.length===1){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this.arg=new Array(1).fill(null),this.arg[0]=new Re(0,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];di.call(this,e,n,Ht.OGC_SFS_BOUNDARY_RULE)}else if(arguments.length===3){var s=arguments[0],a=arguments[1],g=arguments[2];s.getPrecisionModel().compareTo(a.getPrecisionModel())>=0?this.setComputationPrecision(s.getPrecisionModel()):this.setComputationPrecision(a.getPrecisionModel()),this.arg=new Array(2).fill(null),this.arg[0]=new Re(0,s,g),this.arg[1]=new Re(1,a,g)}}function Fe(){this.pts=null,this._orientation=null;var t=arguments[0];this.pts=t,this._orientation=Fe.orientation(t)}function ps(){this.edges=new F,this.ocaMap=new de}function ct(){this.ptLocator=new Hn,this.geomFact=null,this.resultGeom=null,this.graph=null,this.edgeList=new ps,this.resultPolyList=new F,this.resultLineList=new F,this.resultPointList=new F;var t=arguments[0],e=arguments[1];di.call(this,t,e),this.graph=new cn(new Mi),this.geomFact=t.getFactory()}function Qe(){this.geom=new Array(2).fill(null),this.snapTolerance=null,this.cbr=null;var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e,this.computeSnapTolerance()}function Xt(){this.geom=new Array(2).fill(null);var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e}function We(){this.factory=null,this.interiorPoint=null,this.maxWidth=0;var t=arguments[0];this.factory=t.getFactory(),this.add(t)}function Ri(){this.poly=null,this.centreY=null,this.hiY=m.MAX_VALUE,this.loY=-m.MAX_VALUE;var t=arguments[0];this.poly=t,this.hiY=t.getEnvelopeInternal().getMaxY(),this.loY=t.getEnvelopeInternal().getMinY(),this.centreY=We.avg(this.loY,this.hiY)}function tr(){this.centroid=null,this.minDistance=m.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.addInterior(t),this.interiorPoint===null&&this.addEndpoints(t)}function Oi(){this.centroid=null,this.minDistance=m.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.add(t)}function xt(){}function kt(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}function Xe(){this.input=null,this.extremalPts=null,this.centre=null,this.radius=0;var t=arguments[0];this.input=t}function _e(){if(this.inputGeom=null,this.isConvex=null,this.convexHullPts=null,this.minBaseSeg=new st,this.minWidthPt=null,this.minPtIndex=null,this.minWidth=0,arguments.length===1){var t=arguments[0];_e.call(this,t,!1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isConvex=n}}function kn(){this.inputGeom=null,this.distanceTolerance=null;var t=arguments[0];this.inputGeom=t}function er(){Dt.apply(this),this.distanceTolerance=null;var t=arguments[0];this.distanceTolerance=t}function Fn(){this._orig=null,this._sym=null,this._next=null;var t=arguments[0];this._orig=t}function be(){this._isMarked=!1;var t=arguments[0];Fn.call(this,t)}function nr(){this.vertexMap=new nn}function kr(){this._isStart=!1;var t=arguments[0];be.call(this,t)}function ms(){nr.apply(this)}function ir(){this.result=null,this.factory=null,this.graph=null,this.lines=new F,this.nodeEdgeStack=new $t,this.ringStartEdge=null,this.graph=new ms}function wn(){this.items=new F,this.subnode=new Array(4).fill(null)}function ze(){}function vs(t,e){var n,s,a,g,v={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}},x={32:8,64:11}[t];if(g||(n=0>e||0>1/e,isFinite(e)||(g=v[t],n&&(g.d+=1<<t/4-1),s=Math.pow(2,x)-1,a=0)),!g){for(s={32:127,64:1023}[t],a=Math.abs(e);a>=2;)s++,a/=2;for(;1>a&&s>0;)s--,a*=2;0>=s&&(a/=2),t===32&&s>254&&(g={d:n?255:127,c:128,b:0,a:0},s=Math.pow(2,x)-1,a=0)}return s}function Fr(){this.pt=new P,this.level=0,this.env=null;var t=arguments[0];this.computeKey(t)}function dn(){wn.apply(this),this.env=null,this.centrex=null,this.centrey=null,this.level=null;var t=arguments[0],e=arguments[1];this.env=t,this.level=e,this.centrex=(t.getMinX()+t.getMaxX())/2,this.centrey=(t.getMinY()+t.getMaxY())/2}function gi(){}function pi(){wn.apply(this)}function mi(){this.root=null,this.minExtent=1,this.root=new pi}function Ai(t){this.geometryFactory=t||new St}function Mo(t){this.geometryFactory=t||new St,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Ai(this.geometryFactory)}function Di(){this.parser=new Ai(this.geometryFactory)}function Js(t){this.geometryFactory=t||new St,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Ii(this.geometryFactory)}function rr(t){return[t.x,t.y]}function Ro(t){this.geometryFactory=t||new St}function $e(){if(this.noder=null,this.scaleFactor=null,this.offsetX=null,this.offsetY=null,this.isScaled=!1,arguments.length===2){var t=arguments[0],e=arguments[1];$e.call(this,t,e,0,0)}else if(arguments.length===4){var n=arguments[0],s=arguments[1];this.noder=n,this.scaleFactor=s,this.isScaled=!this.isIntegerPrecision()}}function sr(){if(this.inputGeom=null,this.isClosedEndpointsInInterior=!0,this.nonSimpleLocation=null,arguments.length===1){var t=arguments[0];this.inputGeom=t}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isClosedEndpointsInInterior=!n.isInBoundary(2)}}function zr(){this.pt=null,this.isClosed=null,this.degree=null;var t=arguments[0];this.pt=t,this.isClosed=!1,this.degree=0}function Pt(){if(this.quadrantSegments=Pt.DEFAULT_QUADRANT_SEGMENTS,this.endCapStyle=Pt.CAP_ROUND,this.joinStyle=Pt.JOIN_ROUND,this.mitreLimit=Pt.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this.simplifyFactor=Pt.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(n)}else if(arguments.length===4){var s=arguments[0],a=arguments[1],g=arguments[2],v=arguments[3];this.setQuadrantSegments(s),this.setEndCapStyle(a),this.setJoinStyle(g),this.setMitreLimit(v)}}}function Ks(){this.minIndex=-1,this.minCoord=null,this.minDe=null,this.orientedDe=null}function ki(){this.array_=[]}function Fi(){this.finder=null,this.dirEdgeList=new F,this.nodes=new F,this.rightMostCoord=null,this.env=null,this.finder=new Ks}function Ee(){this.inputLine=null,this.distanceTol=null,this.isDeleted=null,this.angleOrientation=et.COUNTERCLOCKWISE;var t=arguments[0];this.inputLine=t}function or(){this.ptList=null,this.precisionModel=null,this.minimimVertexDistance=0,this.ptList=new F}function In(){this.maxCurveSegmentError=0,this.filletAngleQuantum=null,this.closingSegLengthFactor=1,this.segList=null,this.distance=0,this.precisionModel=null,this.bufParams=null,this.li=null,this.s0=null,this.s1=null,this.s2=null,this.seg0=new st,this.seg1=new st,this.offset0=new st,this.offset1=new st,this.side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.precisionModel=t,this.bufParams=e,this.li=new ue,this.filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===Pt.JOIN_ROUND&&(this.closingSegLengthFactor=In.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}function ar(){this.distance=0,this.precisionModel=null,this.bufParams=null;var t=arguments[0],e=arguments[1];this.precisionModel=t,this.bufParams=e}function Gr(){this.subgraphs=null,this.seg=new st,this.cga=new et;var t=arguments[0];this.subgraphs=t}function Br(){this.upwardSeg=null,this.leftDepth=null;var t=arguments[0],e=arguments[1];this.upwardSeg=new st(t),this.leftDepth=e}function ys(){this.inputGeom=null,this.distance=null,this.curveBuilder=null,this.curveList=new F;var t=arguments[0],e=arguments[1],n=arguments[2];this.inputGeom=t,this.distance=e,this.curveBuilder=n}function ur(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.hasInterior=!1,this.properIntersectionPoint=null,this.li=null,this.isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this.li=t}function vi(){this.bufParams=null,this.workingPrecisionModel=null,this.workingNoder=null,this.geomFact=null,this.graph=null,this.edgeList=new ps;var t=arguments[0];this.bufParams=t}function lr(){this.li=new ue,this.segStrings=null;var t=arguments[0];this.segStrings=t}function zi(){this.li=null,this.pt=null,this.originalPt=null,this.ptScaled=null,this.p0Scaled=null,this.p1Scaled=null,this.scaleFactor=null,this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,this.corner=new Array(4).fill(null),this.safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this.originalPt=t,this.pt=t,this.scaleFactor=e,this.li=n,0>=e)throw new d;e!==1&&(this.pt=new P(this.scale(t.x),this.scale(t.y)),this.p0Scaled=new P,this.p1Scaled=new P),this.initCorners(this.pt)}function yi(){this.tempEnv1=new G,this.selectedSegment=new st}function r(){this.index=null;var t=arguments[0];this.index=t}function h(){yi.apply(this),this.hotPixel=null,this.parentEdge=null,this.hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.hotPixel=t,this.parentEdge=e,this.hotPixelVertexIndex=n}function p(){this.li=null,this.interiorIntersections=null;var t=arguments[0];this.li=t,this.interiorIntersections=new F}function y(){this.pm=null,this.li=null,this.scaleFactor=null,this.noder=null,this.pointSnapper=null,this.nodedSegStrings=null;var t=arguments[0];this.pm=t,this.li=new ue,this.li.setPrecisionModel(t),this.scaleFactor=t.getScale()}function E(){if(this.argGeom=null,this.distance=null,this.bufParams=new Pt,this.resultGeometry=null,this.saveException=null,arguments.length===1){var t=arguments[0];this.argGeom=t}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.argGeom=e,this.bufParams=n}}function N(){this.comps=null;var t=arguments[0];this.comps=t}function D(){if(this.component=null,this.segIndex=null,this.pt=null,arguments.length===2){var t=arguments[0],e=arguments[1];D.call(this,t,D.INSIDE_AREA,e)}else if(arguments.length===3){var n=arguments[0],s=arguments[1],a=arguments[2];this.component=n,this.segIndex=s,this.pt=a}}function U(){this.pts=null;var t=arguments[0];this.pts=t}function W(){this.locations=null;var t=arguments[0];this.locations=t}function tt(){if(this.geom=null,this.terminateDistance=0,this.ptLocator=new Hn,this.minDistanceLocation=null,this.minDistance=m.MAX_VALUE,arguments.length===2){var t=arguments[0],e=arguments[1];tt.call(this,t,e,0)}else if(arguments.length===3){var n=arguments[0],s=arguments[1],a=arguments[2];this.geom=new Array(2).fill(null),this.geom[0]=n,this.geom[1]=s,this.terminateDistance=a}}function ft(){this.factory=null,this.directedEdges=new F,this.coordinates=null;var t=arguments[0];this.factory=t}function Et(){this._isMarked=!1,this._isVisited=!1,this.data=null}function Ct(){Et.apply(this),this.parentEdge=null,this.from=null,this.to=null,this.p0=null,this.p1=null,this.sym=null,this.edgeDirection=null,this.quadrant=null,this.angle=null;var t=arguments[0],e=arguments[1],n=arguments[2],s=arguments[3];this.from=t,this.to=e,this.edgeDirection=s,this.p0=t.getCoordinate(),this.p1=n;var a=this.p1.x-this.p0.x,g=this.p1.y-this.p0.y;this.quadrant=ht.quadrant(a,g),this.angle=Math.atan2(g,a)}function tn(){var t=arguments[0],e=arguments[1],n=arguments[2],s=arguments[3];Ct.call(this,t,e,n,s)}function Oe(){if(Et.apply(this),this.dirEdge=null,arguments.length!==0){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.setDirectedEdges(t,e)}}}function hr(){this.outEdges=new F,this.sorted=!1}function Ae(){if(Et.apply(this),this.pt=null,this.deStar=null,arguments.length===1){var t=arguments[0];Ae.call(this,t,new hr)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.pt=e,this.deStar=n}}function cr(){Oe.apply(this),this.line=null;var t=arguments[0];this.line=t}function js(){this.nodeMap=new de}function fr(){this.edges=new he,this.dirEdges=new he,this.nodeMap=new js}function _s(){fr.apply(this)}function xs(){this.graph=new _s,this.mergedLineStrings=null,this.factory=null,this.edgeStrings=null}function qr(){this.edgeRing=null,this.next=null,this.label=-1;var t=arguments[0],e=arguments[1],n=arguments[2],s=arguments[3];Ct.call(this,t,e,n,s)}function Ur(){Oe.apply(this),this.line=null;var t=arguments[0];this.line=t}function Ut(){this.factory=null,this.deList=new F,this.lowestEdge=null,this.ring=null,this.ringPts=null,this.holes=null,this.shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;var t=arguments[0];this.factory=t}function dr(){}function pe(){fr.apply(this),this.factory=null;var t=arguments[0];this.factory=t}function Ze(){if(this.lineStringAdder=new Ls(this),this.graph=null,this.dangles=new F,this.cutEdges=new F,this.invalidRingLines=new F,this.holeList=null,this.shellList=null,this.polyList=null,this.isCheckingRingsValid=!0,this.extractOnlyPolygonal=null,this.geomFactory=null,arguments.length===0)Ze.call(this,!1);else if(arguments.length===1){var t=arguments[0];this.extractOnlyPolygonal=t}}function Ls(){this.p=null;var t=arguments[0];this.p=t}function gr(){}function pr(){if(this.edgeEnds=new F,arguments.length===1){var t=arguments[0];pr.call(this,null,t)}else if(arguments.length===2){var e=arguments[1];Ke.call(this,e.getEdge(),e.getCoordinate(),e.getDirectedCoordinate(),new re(e.getLabel())),this.insert(e)}}function Es(){li.apply(this)}function Oo(){var t=arguments[0],e=arguments[1];On.call(this,t,e)}function Qs(){ai.apply(this)}function Ao(){this.li=new ue,this.ptLocator=new Hn,this.arg=null,this.nodes=new ji(new Qs),this.im=null,this.isolatedEdges=new F,this.invalidPoint=null;var t=arguments[0];this.arg=t}function $s(){this.rectEnv=null;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal()}function Ua(){this.li=new ue,this.rectEnv=null,this.diagUp0=null,this.diagUp1=null,this.diagDown0=null,this.diagDown1=null;var t=arguments[0];this.rectEnv=t,this.diagUp0=new P(t.getMinX(),t.getMinY()),this.diagUp1=new P(t.getMaxX(),t.getMaxY()),this.diagDown0=new P(t.getMinX(),t.getMaxY()),this.diagDown1=new P(t.getMaxX(),t.getMinY())}function mr(){this._isDone=!1}function ws(){this.rectangle=null,this.rectEnv=null;var t=arguments[0];this.rectangle=t,this.rectEnv=t.getEnvelopeInternal()}function Do(){mr.apply(this),this.rectEnv=null,this._intersects=!1;var t=arguments[0];this.rectEnv=t}function ko(){mr.apply(this),this.rectSeq=null,this.rectEnv=null,this._containsPoint=!1;var t=arguments[0];this.rectSeq=t.getExteriorRing().getCoordinateSequence(),this.rectEnv=t.getEnvelopeInternal()}function Fo(){mr.apply(this),this.rectEnv=null,this.rectIntersector=null,this.hasIntersection=!1,this.p0=new P,this.p1=new P;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal(),this.rectIntersector=new Ua(this.rectEnv)}function At(){if(this._relate=null,arguments.length===2){var t=arguments[0],e=arguments[1];di.call(this,t,e),this._relate=new Ao(this.arg)}else if(arguments.length===3){var n=arguments[0],s=arguments[1],a=arguments[2];di.call(this,n,s,a),this._relate=new Ao(this.arg)}}function gn(){this.geomFactory=null,this.skipEmpty=!1,this.inputGeoms=null;var t=arguments[0];this.geomFactory=gn.extractFactory(t),this.inputGeoms=t}function to(){this.pointGeom=null,this.otherGeom=null,this.geomFact=null;var t=arguments[0],e=arguments[1];this.pointGeom=t,this.otherGeom=e,this.geomFact=e.getFactory()}function vr(){this.sortIndex=-1,this.comps=null;var t=arguments[0],e=arguments[1];this.sortIndex=t,this.comps=e}function Cn(){this.inputPolys=null,this.geomFactory=null;var t=arguments[0];this.inputPolys=t,this.inputPolys===null&&(this.inputPolys=new F)}function yr(){if(this.polygons=new F,this.lines=new F,this.points=new F,this.geomFact=null,arguments.length===1){if(nt(arguments[0],it)){var t=arguments[0];this.extract(t)}else if(arguments[0]instanceof Q){var e=arguments[0];this.extract(e)}}else if(arguments.length===2){var n=arguments[0],s=arguments[1];this.geomFact=s,this.extract(n)}}function eo(){this.geometryFactory=new St,this.geomGraph=null,this.disconnectedRingcoord=null;var t=arguments[0];this.geomGraph=t}function Qn(){this.items=new F,this.subnode=[null,null]}function _i(){if(this.min=null,this.max=null,arguments.length===0)this.min=0,this.max=0;else if(arguments.length===1){var t=arguments[0];this.init(t.min,t.max)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.init(e,n)}}function no(){this.pt=0,this.level=0,this.interval=null;var t=arguments[0];this.computeKey(t)}function Gi(){Qn.apply(this),this.interval=null,this.centre=null,this.level=null;var t=arguments[0],e=arguments[1];this.interval=t,this.level=e,this.centre=(t.getMin()+t.getMax())/2}function Is(){Qn.apply(this)}function Cs(){this.root=null,this.minExtent=1,this.root=new Is}function Va(){}function zo(){this.ring=null,this.tree=null,this.crossings=0,this.interval=new _i;var t=arguments[0];this.ring=t,this.buildIndex()}function io(){yi.apply(this),this.mcp=null,this.p=null;var t=arguments[0],e=arguments[1];this.mcp=t,this.p=e}function Za(){this.nodes=new ji(new Qs)}function Ha(){this.li=new ue,this.geomGraph=null,this.nodeGraph=new Za,this.invalidPoint=null;var t=arguments[0];this.geomGraph=t}function Wa(){this.graph=null,this.rings=new F,this.totalEnv=new G,this.index=null,this.nestedPt=null;var t=arguments[0];this.graph=t}function Ot(){if(this.errorType=null,this.pt=null,arguments.length===1){var t=arguments[0];Ot.call(this,t,null)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.errorType=e,n!==null&&(this.pt=n.copy())}}function Sn(){this.parentGeometry=null,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null;var t=arguments[0];this.parentGeometry=t}function Go(){ce.CoordinateOperation.apply(this),this.targetPM=null,this.removeCollapsed=!0;var t=arguments[0],e=arguments[1];this.targetPM=t,this.removeCollapsed=e}function Vr(){this.targetPM=null,this.removeCollapsed=!0,this.changePrecisionModel=!1,this.isPointwise=!1;var t=arguments[0];this.targetPM=t}function ro(){this.pts=null,this.usePt=null,this.distanceTolerance=null,this.seg=new st;var t=arguments[0];this.pts=t}function Ss(){this.inputGeom=null,this.distanceTolerance=null,this.isEnsureValidTopology=!0;var t=arguments[0];this.inputGeom=t}function so(){Dt.apply(this),this.isEnsureValidTopology=!0,this.distanceTolerance=null;var t=arguments[0],e=arguments[1];this.isEnsureValidTopology=t,this.distanceTolerance=e}function oo(){if(this.parent=null,this.index=null,arguments.length===2){var t=arguments[0],e=arguments[1];oo.call(this,t,e,null,-1)}else if(arguments.length===4){var n=arguments[0],s=arguments[1],a=arguments[2],g=arguments[3];st.call(this,n,s),this.parent=a,this.index=g}}function Bi(){if(this.parentLine=null,this.segs=null,this.resultSegs=new F,this.minimumSize=null,arguments.length===1){var t=arguments[0];Bi.call(this,t,2)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.parentLine=e,this.minimumSize=n,this.init()}}function bs(){this.index=new mi}function Xa(){this.querySeg=null,this.items=new F;var t=arguments[0];this.querySeg=t}function ao(){this.li=new ue,this.inputIndex=new bs,this.outputIndex=new bs,this.line=null,this.linePts=null,this.distanceTolerance=0;var t=arguments[0],e=arguments[1];this.inputIndex=t,this.outputIndex=e}function Ya(){this.inputIndex=new bs,this.outputIndex=new bs,this.distanceTolerance=0}function Zr(){this.inputGeom=null,this.lineSimplifier=new Ya,this.linestringMap=null;var t=arguments[0];this.inputGeom=t}function uo(){Dt.apply(this),this.linestringMap=null;var t=arguments[0];this.linestringMap=t}function Bo(){this.tps=null;var t=arguments[0];this.tps=t}function Ns(){this.seg=null,this.segLen=null,this.splitPt=null,this.minimumLen=0;var t=arguments[0];this.seg=t,this.segLen=t.getLength()}function Ja(){}function lo(){}function te(){}function Gt(){if(this.p=null,arguments.length===1){var t=arguments[0];this.p=new P(t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p=new P(e,n)}else if(arguments.length===3){var s=arguments[0],a=arguments[1],g=arguments[2];this.p=new P(s,a,g)}}function _r(){this._isOnConstraint=null,this.constraint=null;var t=arguments[0];Gt.call(this,t)}function se(){this._rot=null,this.vertex=null,this.next=null,this.data=null}function ho(){this.subdiv=null,this.isUsingTolerance=!1;var t=arguments[0];this.subdiv=t,this.isUsingTolerance=t.getTolerance()>0}function Ka(){}function qo(){this.subdiv=null,this.lastEdge=null;var t=arguments[0];this.subdiv=t,this.init()}function Ts(){if(this.seg=null,arguments.length===1){if(typeof arguments[0]=="string"){var t=arguments[0];M.call(this,t)}else if(arguments[0]instanceof st){var e=arguments[0];M.call(this,"Locate failed to converge (at edge: "+e+").  Possible causes include invalid Subdivision topology or very close sites"),this.seg=new st(e)}}else if(arguments.length===2){var n=arguments[0],s=arguments[1];M.call(this,Ts.msgWithSpatial(n,s)),this.seg=new st(s)}}function Ps(){}function pn(){this.visitedKey=0,this.quadEdges=new F,this.startingEdge=null,this.tolerance=null,this.edgeCoincidenceTolerance=null,this.frameVertex=new Array(3).fill(null),this.frameEnv=null,this.locator=null,this.seg=new st,this.triEdges=new Array(3).fill(null);var t=arguments[0],e=arguments[1];this.tolerance=e,this.edgeCoincidenceTolerance=e/pn.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(t),this.startingEdge=this.initSubdiv(),this.locator=new qo(this)}function Uo(){}function Vo(){this.triList=new F}function Zo(){this.triList=new F}function Ho(){this.coordList=new V,this.triCoords=new F}function Hr(){if(this.ls=null,this.data=null,arguments.length===2){var t=arguments[0],e=arguments[1];this.ls=new st(t,e)}else if(arguments.length===3){var n=arguments[0],s=arguments[1],a=arguments[2];this.ls=new st(n,s),this.data=a}else if(arguments.length===6){var g=arguments[0],v=arguments[1],x=arguments[2],S=arguments[3],O=arguments[4],B=arguments[5];Hr.call(this,new P(g,v,x),new P(S,O,B))}else if(arguments.length===7){var H=arguments[0],J=arguments[1],ut=arguments[2],pt=arguments[3],Lt=arguments[4],Yt=arguments[5],me=arguments[6];Hr.call(this,new P(H,J,ut),new P(pt,Lt,Yt),me)}}function co(){}function Wo(){if(this.p=null,this.data=null,this.left=null,this.right=null,this.count=null,arguments.length===2){var t=arguments[0],e=arguments[1];this.p=new P(t),this.left=null,this.right=null,this.count=1,this.data=e}else if(arguments.length===3){var n=arguments[0],s=arguments[1],a=arguments[2];this.p=new P(n,s),this.left=null,this.right=null,this.count=1,this.data=a}}function Wr(){if(this.root=null,this.numberOfNodes=null,this.tolerance=null,arguments.length===0)Wr.call(this,0);else if(arguments.length===1){var t=arguments[0];this.tolerance=t}}function Xo(){this.tolerance=null,this.matchNode=null,this.matchDist=0,this.p=null;var t=arguments[0],e=arguments[1];this.p=t,this.tolerance=e}function xr(){this.initialVertices=null,this.segVertices=null,this.segments=new F,this.subdiv=null,this.incDel=null,this.convexHull=null,this.splitFinder=new lo,this.kdt=null,this.vertexFactory=null,this.computeAreaEnv=null,this.splitPt=null,this.tolerance=null;var t=arguments[0],e=arguments[1];this.initialVertices=new F(t),this.tolerance=e,this.kdt=new Wr(e)}function Ge(){this.siteCoords=null,this.tolerance=0,this.subdiv=null}function Ms(){this.siteCoords=null,this.constraintLines=null,this.tolerance=0,this.subdiv=null,this.constraintVertexMap=new de}function fo(){this.siteCoords=null,this.tolerance=0,this.subdiv=null,this.clipEnv=null,this.diagramEnv=null}function Yo(){}Array.prototype.fill||(Array.prototype.fill=function(t){for(var e=Object(this),n=parseInt(e.length,10),s=arguments[1],a=parseInt(s,10)||0,g=0>a?Math.max(n+a,0):Math.min(a,n),v=arguments[2],x=v===void 0?n:parseInt(v,10)||0,S=0>x?Math.max(n+x,0):Math.min(x,n);S>g;g++)e[g]=t;return e}),Number.isFinite=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!==t},Math.trunc=Math.trunc||function(t){return 0>t?Math.ceil(t):Math.floor(t)},f(l.prototype,{interfaces_:function(){return[]},getClass:function(){return l}}),l.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n},m.isNaN=function(t){return Number.isNaN(t)},m.doubleToLongBits=function(t){return t},m.longBitsToDouble=function(t){return t},m.isInfinite=function(t){return!Number.isFinite(t)},m.MAX_VALUE=Number.MAX_VALUE,T(q,M),f(q.prototype,{interfaces_:function(){return[]},getClass:function(){return q}}),f(k.prototype,{interfaces_:function(){return[]},getClass:function(){return k}}),k.shouldNeverReachHere=function(){if(arguments.length===0)k.shouldNeverReachHere(null);else if(arguments.length===1){var t=arguments[0];throw new q("Should never reach here"+(t!==null?": "+t:""))}},k.isTrue=function(){if(arguments.length===1){var t=arguments[0];k.isTrue(t,null)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(!e)throw n===null?new q:new q(n)}},k.equals=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];k.equals(t,e,null)}else if(arguments.length===3){var n=arguments[0],s=arguments[1],a=arguments[2];if(!s.equals(n))throw new q("Expected "+n+" but encountered "+s+(a!==null?": "+a:""))}},f(P.prototype,{setOrdinate:function(t,e){switch(t){case P.X:this.x=e;break;case P.Y:this.y=e;break;case P.Z:this.z=e;break;default:throw new d}},equals2D:function(){if(arguments.length===1){var t=arguments[0];return this.x!==t.x?!1:this.y===t.y}if(arguments.length===2){var e=arguments[0],n=arguments[1];return l.equalsWithTolerance(this.x,e.x,n)?!!l.equalsWithTolerance(this.y,e.y,n):!1}},getOrdinate:function(t){switch(t){case P.X:return this.x;case P.Y:return this.y;case P.Z:return this.z}throw new d},equals3D:function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||m.isNaN(this.z)&&m.isNaN(t.z))},equals:function(t){return t instanceof P?this.equals2D(t):!1},equalInZ:function(t,e){return l.equalsWithTolerance(this.z,t.z,e)},compareTo:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},clone:function(){try{var t=null;return t}catch(e){if(e instanceof CloneNotSupportedException)return k.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw e}finally{}},copy:function(){return new P(this)},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"},distance3D:function(t){var e=this.x-t.x,n=this.y-t.y,s=this.z-t.z;return Math.sqrt(e*e+n*n+s*s)},distance:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return t=37*t+P.hashCode(this.x),t=37*t+P.hashCode(this.y)},setCoordinate:function(t){this.x=t.x,this.y=t.y,this.z=t.z},interfaces_:function(){return[_,w,b]},getClass:function(){return P}}),P.hashCode=function(){if(arguments.length===1){var t=arguments[0],e=m.doubleToLongBits(t);return Math.trunc(e^e>>>32)}},f(rt.prototype,{compare:function(t,e){var n=t,s=e,a=rt.compare(n.x,s.x);if(a!==0)return a;var g=rt.compare(n.y,s.y);if(g!==0)return g;if(this.dimensionsToTest<=2)return 0;var v=rt.compare(n.z,s.z);return v},interfaces_:function(){return[I]},getClass:function(){return rt}}),rt.compare=function(t,e){return e>t?-1:t>e?1:m.isNaN(t)?m.isNaN(e)?0:-1:m.isNaN(e)?1:0},P.DimensionalComparator=rt,P.serialVersionUID=6683108902428367e3,P.NULL_ORDINATE=m.NaN,P.X=0,P.Y=1,P.Z=2,ot.prototype.hasNext=function(){},ot.prototype.next=function(){},ot.prototype.remove=function(){},it.prototype.add=function(){},it.prototype.addAll=function(){},it.prototype.isEmpty=function(){},it.prototype.iterator=function(){},it.prototype.size=function(){},it.prototype.toArray=function(){},it.prototype.remove=function(){},A.prototype=new Error,A.prototype.name="IndexOutOfBoundsException",R.prototype=Object.create(it.prototype),R.prototype.constructor=R,R.prototype.get=function(){},R.prototype.set=function(){},R.prototype.isEmpty=function(){},Z.prototype=new Error,Z.prototype.name="NoSuchElementException",lt.prototype=new Error,lt.prototype.name="OperationNotSupported",F.prototype=Object.create(R.prototype),F.prototype.constructor=F,F.prototype.ensureCapacity=function(){},F.prototype.interfaces_=function(){return[R,it]},F.prototype.add=function(t){return this.array_.push(t),!0},F.prototype.clear=function(){this.array_=[]},F.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},F.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},F.prototype.iterator=function(){return new go(this)},F.prototype.get=function(t){if(0>t||t>=this.size())throw new A;return this.array_[t]},F.prototype.isEmpty=function(){return this.array_.length===0},F.prototype.size=function(){return this.array_.length},F.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},F.prototype.remove=function(t){for(var e=!1,n=0,s=this.array_.length;s>n;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e};var go=function(t){this.arrayList_=t,this.position_=0};go.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Z;return this.arrayList_.get(this.position_++)},go.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},go.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},go.prototype.remove=function(){throw new lt},T(V,F),f(V.prototype,{getCoordinate:function(t){return this.get(t)},addAll:function(){if(arguments.length===2){for(var t=arguments[0],e=arguments[1],n=!1,s=t.iterator();s.hasNext();)this.add(s.next(),e),n=!0;return n}return F.prototype.addAll.apply(this,arguments)},clone:function(){for(var e=F.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},toCoordinateArray:function(){return this.toArray(V.coordArrayType)},add:function(){if(arguments.length===1){var t=arguments[0];F.prototype.add.call(this,t)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof P&&typeof arguments[1]=="boolean"){var s=arguments[0],a=arguments[1];if(!a&&this.size()>=1){var g=this.get(this.size()-1);if(g.equals2D(s))return null}F.prototype.add.call(this,s)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var v=arguments[0],x=arguments[1];return this.add(v,x),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var S=arguments[0],O=arguments[1],B=arguments[2];if(B)for(var H=0;H<S.length;H++)this.add(S[H],O);else for(var H=S.length-1;H>=0;H--)this.add(S[H],O);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof P){var J=arguments[0],ut=arguments[1],pt=arguments[2];if(!pt){var Lt=this.size();if(Lt>0){if(J>0){var Yt=this.get(J-1);if(Yt.equals2D(ut))return null}if(Lt>J){var me=this.get(J);if(me.equals2D(ut))return null}}}F.prototype.add.call(this,J,ut)}}else if(arguments.length===4){var Bn=arguments[0],Xr=arguments[1],jo=arguments[2],Qo=arguments[3],$o=1;jo>Qo&&($o=-1);for(var H=jo;H!==Qo;H+=$o)this.add(Bn[H],Xr);return!0}},closeRing:function(){this.size()>0&&this.add(new P(this.get(0)),!1)},interfaces_:function(){return[]},getClass:function(){return V}}),V.coordArrayType=new Array(0).fill(null),f(G.prototype,{getArea:function(){return this.getWidth()*this.getHeight()},equals:function(t){if(!(t instanceof G))return!1;var e=t;return this.isNull()?e.isNull():this.maxx===e.getMaxX()&&this.maxy===e.getMaxY()&&this.minx===e.getMinX()&&this.miny===e.getMinY()},intersection:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new G;var e=this.minx>t.minx?this.minx:t.minx,n=this.miny>t.miny?this.miny:t.miny,s=this.maxx<t.maxx?this.maxx:t.maxx,a=this.maxy<t.maxy?this.maxy:t.maxy;return new G(e,s,n,a)},isNull:function(){return this.maxx<this.minx},getMaxX:function(){return this.maxx},covers:function(){if(arguments.length===1){if(arguments[0]instanceof P){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof G){var e=arguments[0];return this.isNull()||e.isNull()?!1:e.getMinX()>=this.minx&&e.getMaxX()<=this.maxx&&e.getMinY()>=this.miny&&e.getMaxY()<=this.maxy}}else if(arguments.length===2){var n=arguments[0],s=arguments[1];return this.isNull()?!1:n>=this.minx&&n<=this.maxx&&s>=this.miny&&s<=this.maxy}},intersects:function(){if(arguments.length===1){if(arguments[0]instanceof G){var t=arguments[0];return this.isNull()||t.isNull()?!1:!(t.minx>this.maxx||t.maxx<this.minx||t.miny>this.maxy||t.maxy<this.miny)}if(arguments[0]instanceof P){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(arguments.length===2){var n=arguments[0],s=arguments[1];return this.isNull()?!1:!(n>this.maxx||n<this.minx||s>this.maxy||s<this.miny)}},getMinY:function(){return this.miny},getMinX:function(){return this.minx},expandToInclude:function(){if(arguments.length===1){if(arguments[0]instanceof P){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof G){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this.minx=e.getMinX(),this.maxx=e.getMaxX(),this.miny=e.getMinY(),this.maxy=e.getMaxY()):(e.minx<this.minx&&(this.minx=e.minx),e.maxx>this.maxx&&(this.maxx=e.maxx),e.miny<this.miny&&(this.miny=e.miny),e.maxy>this.maxy&&(this.maxy=e.maxy))}}else if(arguments.length===2){var n=arguments[0],s=arguments[1];this.isNull()?(this.minx=n,this.maxx=n,this.miny=s,this.maxy=s):(n<this.minx&&(this.minx=n),n>this.maxx&&(this.maxx=n),s<this.miny&&(this.miny=s),s>this.maxy&&(this.maxy=s))}},minExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return e>t?t:e},getWidth:function(){return this.isNull()?0:this.maxx-this.minx},compareTo:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this.minx<e.minx?-1:this.minx>e.minx?1:this.miny<e.miny?-1:this.miny>e.miny?1:this.maxx<e.maxx?-1:this.maxx>e.maxx?1:this.maxy<e.maxy?-1:this.maxy>e.maxy?1:0},translate:function(t,e){return this.isNull()?null:void this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},toString:function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"},setToNull:function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1},getHeight:function(){return this.isNull()?0:this.maxy-this.miny},maxExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},expandBy:function(){if(arguments.length===1){var t=arguments[0];this.expandBy(t,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this.minx-=e,this.maxx+=e,this.miny-=n,this.maxy+=n,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull()}},contains:function(){if(arguments.length===1){if(arguments[0]instanceof G){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof P){var e=arguments[0];return this.covers(e)}}else if(arguments.length===2){var n=arguments[0],s=arguments[1];return this.covers(n,s)}},centre:function(){return this.isNull()?null:new P((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},init:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof P){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof G){var e=arguments[0];this.minx=e.minx,this.maxx=e.maxx,this.miny=e.miny,this.maxy=e.maxy}}else if(arguments.length===2){var n=arguments[0],s=arguments[1];this.init(n.x,s.x,n.y,s.y)}else if(arguments.length===4){var a=arguments[0],g=arguments[1],v=arguments[2],x=arguments[3];g>a?(this.minx=a,this.maxx=g):(this.minx=g,this.maxx=a),x>v?(this.miny=v,this.maxy=x):(this.miny=x,this.maxy=v)}},getMaxY:function(){return this.maxy},distance:function(t){if(this.intersects(t))return 0;var e=0;this.maxx<t.minx?e=t.minx-this.maxx:this.minx>t.maxx&&(e=this.minx-t.maxx);var n=0;return this.maxy<t.miny?n=t.miny-this.maxy:this.miny>t.maxy&&(n=this.miny-t.maxy),e===0?n:n===0?e:Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return t=37*t+P.hashCode(this.minx),t=37*t+P.hashCode(this.maxx),t=37*t+P.hashCode(this.miny),t=37*t+P.hashCode(this.maxy)},interfaces_:function(){return[_,b]},getClass:function(){return G}}),G.intersects=function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(arguments.length===4){var s=arguments[0],a=arguments[1],g=arguments[2],v=arguments[3],x=Math.min(g.x,v.x),S=Math.max(g.x,v.x),O=Math.min(s.x,a.x),B=Math.max(s.x,a.x);return O>S||x>B?!1:(x=Math.min(g.y,v.y),S=Math.max(g.y,v.y),O=Math.min(s.y,a.y),B=Math.max(s.y,a.y),O>S?!1:!(x>B))}},G.serialVersionUID=5873921885273102e3,T(X,j),f(X.prototype,{interfaces_:function(){return[]},getClass:function(){return X}}),f(C.prototype,{interfaces_:function(){return[]},getClass:function(){return C}}),C.toLocationSymbol=function(t){switch(t){case C.EXTERIOR:return"e";case C.BOUNDARY:return"b";case C.INTERIOR:return"i";case C.NONE:return"-"}throw new d},C.INTERIOR=0,C.BOUNDARY=1,C.EXTERIOR=2,C.NONE=-1,f(_t.prototype,{interfaces_:function(){return[]},getClass:function(){return _t}}),_t.log10=function(t){var e=Math.log(t);return m.isInfinite(e)||m.isNaN(e)?e:e/_t.LOG_10},_t.min=function(t,e,n,s){var a=t;return a>e&&(a=e),a>n&&(a=n),a>s&&(a=s),a},_t.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1],n=arguments[2];return e>t?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1],g=arguments[2];return a>s?a:s>g?g:s}},_t.wrap=function(t,e){return 0>t?e- -t%e:t%e},_t.max=function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2],s=t;return e>s&&(s=e),n>s&&(s=n),s}if(arguments.length===4){var a=arguments[0],g=arguments[1],v=arguments[2],x=arguments[3],s=a;return g>s&&(s=g),v>s&&(s=v),x>s&&(s=x),s}},_t.average=function(t,e){return(t+e)/2},_t.LOG_10=Math.log(10),Jt.prototype.append=function(t){this.str+=t},Jt.prototype.setCharAt=function(t,e){return this.str.substr(0,t)+e+this.str.substr(t+1)},Jt.prototype.toString=function(t){return this.str},Rt.prototype.intValue=function(){return this.value},Rt.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},Rt.isNaN=function(t){return Number.isNaN(t)},ne.isWhitespace=function(t){return 32>=t&&t>=0||t==127},ne.toUpperCase=function(t){return t.toUpperCase()},f(z.prototype,{le:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<=t.lo},extractSignificantDigits:function(t,e){var n=this.abs(),s=z.magnitude(n.hi),a=z.TEN.pow(s);n=n.divide(a),n.gt(z.TEN)?(n=n.divide(z.TEN),s+=1):n.lt(z.ONE)&&(n=n.multiply(z.TEN),s-=1);for(var g=s+1,v=new Jt,x=z.MAX_PRINT_DIGITS-1,S=0;x>=S;S++){t&&S===g&&v.append(".");var O=Math.trunc(n.hi);if(0>O)break;var B=!1,H=0;O>9?(B=!0,H="9"):H="0"+O,v.append(H),n=n.subtract(z.valueOf(O)).multiply(z.TEN),B&&n.selfAdd(z.TEN);var J=!0,ut=z.magnitude(n.hi);if(0>ut&&Math.abs(ut)>=x-S&&(J=!1),!J)break}return e[0]=s,v.toString()},sqr:function(){return this.multiply(this)},doubleValue:function(){return this.hi+this.lo},subtract:function(){if(arguments[0]instanceof z){var t=arguments[0];return this.add(t.negate())}if(typeof arguments[0]=="number"){var e=arguments[0];return this.add(-e)}},equals:function(){if(arguments.length===1){var t=arguments[0];return this.hi===t.hi&&this.lo===t.lo}},isZero:function(){return this.hi===0&&this.lo===0},selfSubtract:function(){if(arguments[0]instanceof z){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t.hi,-t.lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},getSpecialNumberString:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},min:function(t){return this.le(t)?this:t},selfDivide:function(){if(arguments.length===1){if(arguments[0]instanceof z){var t=arguments[0];return this.selfDivide(t.hi,t.lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfDivide(e,0)}}else if(arguments.length===2){var n=arguments[0],s=arguments[1],a=null,g=null,v=null,x=null,S=null,O=null,B=null,H=null;return S=this.hi/n,O=z.SPLIT*S,a=O-S,H=z.SPLIT*n,a=O-a,g=S-a,v=H-n,B=S*n,v=H-v,x=n-v,H=a*v-B+a*x+g*v+g*x,O=(this.hi-B-H+this.lo-S*s)/n,H=S+O,this.hi=H,this.lo=S-H+O,this}},dump:function(){return"DD<"+this.hi+", "+this.lo+">"},divide:function(){if(arguments[0]instanceof z){var t=arguments[0],e=null,n=null,s=null,a=null,g=null,v=null,x=null,S=null;g=this.hi/t.hi,v=z.SPLIT*g,e=v-g,S=z.SPLIT*t.hi,e=v-e,n=g-e,s=S-t.hi,x=g*t.hi,s=S-s,a=t.hi-s,S=e*s-x+e*a+n*s+n*a,v=(this.hi-x-S+this.lo-g*t.lo)/t.hi,S=g+v;var O=S,B=g-S+v;return new z(O,B)}if(typeof arguments[0]=="number"){var H=arguments[0];return m.isNaN(H)?z.createNaN():z.copy(this).selfDivide(H,0)}},ge:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>=t.lo},pow:function(t){if(t===0)return z.valueOf(1);var e=new z(this),n=z.valueOf(1),s=Math.abs(t);if(s>1)for(;s>0;)s%2===1&&n.selfMultiply(e),s/=2,s>0&&(e=e.sqr());else n=e;return 0>t?n.reciprocal():n},ceil:function(){if(this.isNaN())return z.NaN;var t=Math.ceil(this.hi),e=0;return t===this.hi&&(e=Math.ceil(this.lo)),new z(t,e)},compareTo:function(t){var e=t;return this.hi<e.hi?-1:this.hi>e.hi?1:this.lo<e.lo?-1:this.lo>e.lo?1:0},rint:function(){if(this.isNaN())return this;var t=this.add(.5);return t.floor()},setValue:function(){if(arguments[0]instanceof z){var t=arguments[0];return this.init(t),this}if(typeof arguments[0]=="number"){var e=arguments[0];return this.init(e),this}},max:function(t){return this.ge(t)?this:t},sqrt:function(){if(this.isZero())return z.valueOf(0);if(this.isNegative())return z.NaN;var t=1/Math.sqrt(this.hi),e=this.hi*t,n=z.valueOf(e),s=this.subtract(n.sqr()),a=s.hi*(.5*t);return n.add(a)},selfAdd:function(){if(arguments.length===1){if(arguments[0]instanceof z){var t=arguments[0];return this.selfAdd(t.hi,t.lo)}if(typeof arguments[0]=="number"){var e=arguments[0],n=null,s=null,a=null,g=null,v=null,x=null;return a=this.hi+e,v=a-this.hi,g=a-v,g=e-v+(this.hi-g),x=g+this.lo,n=a+x,s=x+(a-n),this.hi=n+s,this.lo=s+(n-this.hi),this}}else if(arguments.length===2){var S=arguments[0],O=arguments[1],n=null,s=null,B=null,H=null,a=null,g=null,v=null,x=null;a=this.hi+S,B=this.lo+O,v=a-this.hi,x=B-this.lo,g=a-v,H=B-x,g=S-v+(this.hi-g),H=O-x+(this.lo-H),v=g+B,n=a+v,s=v+(a-n),v=H+s;var J=n+v,ut=v+(n-J);return this.hi=J,this.lo=ut,this}},selfMultiply:function(){if(arguments.length===1){if(arguments[0]instanceof z){var t=arguments[0];return this.selfMultiply(t.hi,t.lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfMultiply(e,0)}}else if(arguments.length===2){var n=arguments[0],s=arguments[1],a=null,g=null,v=null,x=null,S=null,O=null;S=z.SPLIT*this.hi,a=S-this.hi,O=z.SPLIT*n,a=S-a,g=this.hi-a,v=O-n,S=this.hi*n,v=O-v,x=n-v,O=a*v-S+a*x+g*v+g*x+(this.hi*s+this.lo*n);var B=S+O;a=S-B;var H=O+a;return this.hi=B,this.lo=H,this}},selfSqr:function(){return this.selfMultiply(this)},floor:function(){if(this.isNaN())return z.NaN;var t=Math.floor(this.hi),e=0;return t===this.hi&&(e=Math.floor(this.lo)),new z(t,e)},negate:function(){return this.isNaN()?this:new z(-this.hi,-this.lo)},clone:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}finally{}},multiply:function(){if(arguments[0]instanceof z){var t=arguments[0];return t.isNaN()?z.createNaN():z.copy(this).selfMultiply(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return m.isNaN(e)?z.createNaN():z.copy(this).selfMultiply(e,0)}},isNaN:function(){return m.isNaN(this.hi)},intValue:function(){return Math.trunc(this.hi)},toString:function(){var t=z.magnitude(this.hi);return t>=-3&&20>=t?this.toStandardNotation():this.toSciNotation()},toStandardNotation:function(){var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),s=e[0]+1,a=n;if(n.charAt(0)===".")a="0"+n;else if(0>s)a="0."+z.stringOfChar("0",-s)+n;else if(n.indexOf(".")===-1){var g=s-n.length,v=z.stringOfChar("0",g);a=n+v+".0"}return this.isNegative()?"-"+a:a},reciprocal:function(){var t=null,e=null,n=null,s=null,a=null,g=null,v=null,x=null;a=1/this.hi,g=z.SPLIT*a,t=g-a,x=z.SPLIT*this.hi,t=g-t,e=a-t,n=x-this.hi,v=a*this.hi,n=x-n,s=this.hi-n,x=t*n-v+t*s+e*n+e*s,g=(1-v-x-a*this.lo)/this.hi;var S=a+g,O=a-S+g;return new z(S,O)},toSciNotation:function(){if(this.isZero())return z.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),s=z.SCI_NOT_EXPONENT_CHAR+e[0];if(n.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+n);var a="";n.length>1&&(a=n.substring(1));var g=n.charAt(0)+"."+a;return this.isNegative()?"-"+g+s:g+s},abs:function(){return this.isNaN()?z.NaN:this.isNegative()?this.negate():new z(this)},isPositive:function(){return this.hi>0||this.hi===0&&this.lo>0},lt:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<t.lo},add:function(){if(arguments[0]instanceof z){var t=arguments[0];return z.copy(this).selfAdd(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return z.copy(this).selfAdd(e)}},init:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.hi=t,this.lo=0}else if(arguments[0]instanceof z){var e=arguments[0];this.hi=e.hi,this.lo=e.lo}}else if(arguments.length===2){var n=arguments[0],s=arguments[1];this.hi=n,this.lo=s}},gt:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>t.lo},isNegative:function(){return this.hi<0||this.hi===0&&this.lo<0},trunc:function(){return this.isNaN()?z.NaN:this.isPositive()?this.floor():this.ceil()},signum:function(){return this.hi>0?1:this.hi<0?-1:this.lo>0?1:this.lo<0?-1:0},interfaces_:function(){return[b,_,w]},getClass:function(){return z}}),z.sqr=function(t){return z.valueOf(t).selfMultiply(t)},z.valueOf=function(){if(typeof arguments[0]=="string"){var t=arguments[0];return z.parse(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return new z(e)}},z.sqrt=function(t){return z.valueOf(t).sqrt()},z.parse=function(t){for(var e=0,n=t.length;ne.isWhitespace(t.charAt(e));)e++;var s=!1;if(n>e){var a=t.charAt(e);a!=="-"&&a!=="+"||(e++,a==="-"&&(s=!0))}for(var g=new z,v=0,x=0,S=0;!(e>=n);){var O=t.charAt(e);if(e++,ne.isDigit(O)){var B=O-"0";g.selfMultiply(z.TEN),g.selfAdd(B),v++}else{if(O!=="."){if(O==="e"||O==="E"){var H=t.substring(e);try{S=Rt.parseInt(H)}catch(Lt){throw Lt instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+H+" in string "+t):Lt}finally{}break}throw new NumberFormatException("Unexpected character '"+O+"' at position "+e+" in string "+t)}x=v}}var J=g,ut=v-x-S;if(ut===0)J=g;else if(ut>0){var pt=z.TEN.pow(ut);J=g.divide(pt)}else if(0>ut){var pt=z.TEN.pow(-ut);J=g.multiply(pt)}return s?J.negate():J},z.createNaN=function(){return new z(m.NaN,m.NaN)},z.copy=function(t){return new z(t)},z.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),s=Math.trunc(Math.floor(n)),a=Math.pow(10,s);return e>=10*a&&(s+=1),s},z.stringOfChar=function(t,e){for(var n=new Jt,s=0;e>s;s++)n.append(t);return n.toString()},z.PI=new z(3.141592653589793,12246467991473532e-32),z.TWO_PI=new z(6.283185307179586,24492935982947064e-32),z.PI_2=new z(1.5707963267948966,6123233995736766e-32),z.E=new z(2.718281828459045,14456468917292502e-32),z.NaN=new z(m.NaN,m.NaN),z.EPS=123259516440783e-46,z.SPLIT=134217729,z.MAX_PRINT_DIGITS=32,z.TEN=z.valueOf(10),z.ONE=z.valueOf(1),z.SCI_NOT_EXPONENT_CHAR="E",z.SCI_NOT_ZERO="0.0E0",f(Kt.prototype,{interfaces_:function(){return[]},getClass:function(){return Kt}}),Kt.orientationIndex=function(t,e,n){var s=Kt.orientationIndexFilter(t,e,n);if(1>=s)return s;var a=z.valueOf(e.x).selfAdd(-t.x),g=z.valueOf(e.y).selfAdd(-t.y),v=z.valueOf(n.x).selfAdd(-e.x),x=z.valueOf(n.y).selfAdd(-e.y);return a.selfMultiply(x).selfSubtract(g.selfMultiply(v)).signum()},Kt.signOfDet2x2=function(t,e,n,s){var a=t.multiply(s).selfSubtract(e.multiply(n));return a.signum()},Kt.intersection=function(t,e,n,s){var a=z.valueOf(s.y).selfSubtract(n.y).selfMultiply(z.valueOf(e.x).selfSubtract(t.x)),g=z.valueOf(s.x).selfSubtract(n.x).selfMultiply(z.valueOf(e.y).selfSubtract(t.y)),v=a.subtract(g),x=z.valueOf(s.x).selfSubtract(n.x).selfMultiply(z.valueOf(t.y).selfSubtract(n.y)),S=z.valueOf(s.y).selfSubtract(n.y).selfMultiply(z.valueOf(t.x).selfSubtract(n.x)),O=x.subtract(S),B=O.selfDivide(v).doubleValue(),H=z.valueOf(t.x).selfAdd(z.valueOf(e.x).selfSubtract(t.x).selfMultiply(B)).doubleValue(),J=z.valueOf(e.x).selfSubtract(t.x).selfMultiply(z.valueOf(t.y).selfSubtract(n.y)),ut=z.valueOf(e.y).selfSubtract(t.y).selfMultiply(z.valueOf(t.x).selfSubtract(n.x)),pt=J.subtract(ut),Lt=pt.selfDivide(v).doubleValue(),Yt=z.valueOf(n.y).selfAdd(z.valueOf(s.y).selfSubtract(n.y).selfMultiply(Lt)).doubleValue();return new P(H,Yt)},Kt.orientationIndexFilter=function(t,e,n){var s=null,a=(t.x-n.x)*(e.y-n.y),g=(t.y-n.y)*(e.x-n.x),v=a-g;if(a>0){if(0>=g)return Kt.signum(v);s=a+g}else{if(!(0>a)||g>=0)return Kt.signum(v);s=-a-g}var x=Kt.DP_SAFE_EPSILON*s;return v>=x||-v>=x?Kt.signum(v):2},Kt.signum=function(t){return t>0?1:0>t?-1:0},Kt.DP_SAFE_EPSILON=1e-15,f(at.prototype,{setOrdinate:function(t,e,n){},size:function(){},getOrdinate:function(t,e){},getCoordinate:function(){},getCoordinateCopy:function(t){},getDimension:function(){},getX:function(t){},clone:function(){},expandEnvelope:function(t){},copy:function(){},getY:function(t){},toCoordinateArray:function(){},interfaces_:function(){return[w]},getClass:function(){return at}}),at.X=0,at.Y=1,at.Z=2,at.M=3,mt.arraycopy=function(t,e,n,s,a){for(var g=0,v=e;e+a>v;v++)n[s+g]=t[v],g++},mt.getProperty=function(t){return{"line.separator":`
`}[t]},f(jt.prototype,{getY:function(){var t=this.y/this.w;if(m.isNaN(t)||m.isInfinite(t))throw new X;return t},getX:function(){var t=this.x/this.w;if(m.isNaN(t)||m.isInfinite(t))throw new X;return t},getCoordinate:function(){var t=new P;return t.x=this.getX(),t.y=this.getY(),t},interfaces_:function(){return[]},getClass:function(){return jt}}),jt.intersection=function(t,e,n,s){var a=t.y-e.y,g=e.x-t.x,v=t.x*e.y-e.x*t.y,x=n.y-s.y,S=s.x-n.x,O=n.x*s.y-s.x*n.y,B=g*O-S*v,H=x*v-a*O,J=a*S-x*g,ut=B/J,pt=H/J;if(m.isNaN(ut)||m.isInfinite(ut)||m.isNaN(pt)||m.isInfinite(pt))throw new X;return new P(ut,pt)},f(ve.prototype,{create:function(){arguments.length===1&&(arguments[0]instanceof Array||nt(arguments[0],at))},interfaces_:function(){return[]},getClass:function(){return ve}}),f(Bt.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return Bt}}),f(Q.prototype,{isGeometryCollection:function(){return this.getSortIndex()===Q.SORTINDEX_GEOMETRYCOLLECTION},getFactory:function(){return this.factory},getGeometryN:function(t){return this},getArea:function(){return 0},isRectangle:function(){return!1},equals:function(){if(arguments.length===1){if(arguments[0]instanceof Q){var t=arguments[0];return t===null?!1:this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof Q))return!1;var n=e;return this.equalsExact(n)}}},equalsExact:function(t){return this===t||this.equalsExact(t,0)},geometryChanged:function(){this.apply(Q.geometryChangedFilter)},geometryChangedAction:function(){this.envelope=null},equalsNorm:function(t){return t===null?!1:this.norm().equalsExact(t.norm())},getLength:function(){return 0},getNumGeometries:function(){return 1},compareTo:function(){if(arguments.length===1){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(arguments.length===2){var n=arguments[0],s=arguments[1],e=n;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(n,s)}},getUserData:function(){return this.userData},getSRID:function(){return this.SRID},getEnvelope:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},checkNotGeometryCollection:function(t){if(t.getSortIndex()===Q.SORTINDEX_GEOMETRYCOLLECTION)throw new d},equal:function(t,e,n){return n===0?t.equals(e):t.distance(e)<=n},norm:function(){var t=this.copy();return t.normalize(),t},getPrecisionModel:function(){return this.factory.getPrecisionModel()},getEnvelopeInternal:function(){return this.envelope===null&&(this.envelope=this.computeEnvelopeInternal()),new G(this.envelope)},setSRID:function(t){this.SRID=t},setUserData:function(t){this.userData=t},compare:function(t,e){for(var n=t.iterator(),s=e.iterator();n.hasNext()&&s.hasNext();){var a=n.next(),g=s.next(),v=a.compareTo(g);if(v!==0)return v}return n.hasNext()?1:s.hasNext()?-1:0},hashCode:function(){return this.getEnvelopeInternal().hashCode()},isGeometryCollectionOrDerived:function(){return this.getSortIndex()===Q.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Q.SORTINDEX_MULTIPOINT||this.getSortIndex()===Q.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Q.SORTINDEX_MULTIPOLYGON},interfaces_:function(){return[w,_,b]},getClass:function(){return Q}}),Q.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},Q.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(t[e]===null)return!0;return!1},Q.serialVersionUID=8763622679187377e3,Q.SORTINDEX_POINT=0,Q.SORTINDEX_MULTIPOINT=1,Q.SORTINDEX_LINESTRING=2,Q.SORTINDEX_LINEARRING=3,Q.SORTINDEX_MULTILINESTRING=4,Q.SORTINDEX_POLYGON=5,Q.SORTINDEX_MULTIPOLYGON=6,Q.SORTINDEX_GEOMETRYCOLLECTION=7,Q.geometryChangedFilter={interfaces_:function(){return[Bt]},filter:function(t){t.geometryChangedAction()}},f(Vt.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return Vt}}),f(Ht.prototype,{isInBoundary:function(t){},interfaces_:function(){return[]},getClass:function(){return Ht}}),f(vn.prototype,{isInBoundary:function(t){return t%2===1},interfaces_:function(){return[Ht]},getClass:function(){return vn}}),f(Nr.prototype,{isInBoundary:function(t){return t>0},interfaces_:function(){return[Ht]},getClass:function(){return Nr}}),f(Vi.prototype,{isInBoundary:function(t){return t>1},interfaces_:function(){return[Ht]},getClass:function(){return Vi}}),f(Zi.prototype,{isInBoundary:function(t){return t===1},interfaces_:function(){return[Ht]},getClass:function(){return Zi}}),Ht.Mod2BoundaryNodeRule=vn,Ht.EndPointBoundaryNodeRule=Nr,Ht.MultiValentEndPointBoundaryNodeRule=Vi,Ht.MonoValentEndPointBoundaryNodeRule=Zi,Ht.MOD2_BOUNDARY_RULE=new vn,Ht.ENDPOINT_BOUNDARY_RULE=new Nr,Ht.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new Vi,Ht.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new Zi,Ht.OGC_SFS_BOUNDARY_RULE=Ht.MOD2_BOUNDARY_RULE,f(dt.prototype,{interfaces_:function(){return[]},getClass:function(){return dt}}),dt.isRing=function(t){return t.length<4?!1:!!t[0].equals2D(t[t.length-1])},dt.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var s=t[n];if(dt.indexOf(s,e)<0)return s}return null},dt.scroll=function(t,e){var n=dt.indexOf(e,t);if(0>n)return null;var s=new Array(t.length).fill(null);mt.arraycopy(t,n,s,0,t.length-n),mt.arraycopy(t,0,s,t.length-n,n),mt.arraycopy(s,0,t,0,t.length)},dt.equals=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(t===null||e===null||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(arguments.length===3){var s=arguments[0],a=arguments[1],g=arguments[2];if(s===a)return!0;if(s===null||a===null||s.length!==a.length)return!1;for(var n=0;n<s.length;n++)if(g.compare(s[n],a[n])!==0)return!1;return!0}},dt.intersection=function(t,e){for(var n=new V,s=0;s<t.length;s++)e.intersects(t[s])&&n.add(t[s],!0);return n.toCoordinateArray()},dt.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},dt.removeRepeatedPoints=function(t){if(!dt.hasRepeatedPoints(t))return t;var e=new V(t,!1);return e.toCoordinateArray()},dt.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),s=0;n>=s;s++){var a=t[s];t[s]=t[e-s],t[e-s]=a}},dt.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)t[n]!==null&&e++;var s=new Array(e).fill(null);if(e===0)return s;for(var a=0,n=0;n<t.length;n++)t[n]!==null&&(s[a++]=t[n]);return s},dt.copyDeep=function(){if(arguments.length===1){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new P(t[n]);return e}if(arguments.length===5)for(var s=arguments[0],a=arguments[1],g=arguments[2],v=arguments[3],x=arguments[4],n=0;x>n;n++)g[v+n]=new P(s[a+n])},dt.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var s=t[n],a=e[t.length-n-1];if(s.compareTo(a)!==0)return!1}return!0},dt.envelope=function(t){for(var e=new G,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},dt.toCoordinateArray=function(t){return t.toArray(dt.coordArrayType)},dt.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},dt.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},dt.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,s=t[e].compareTo(t[n]);if(s!==0)return s}return 1},dt.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var s=t[n].compareTo(e[n]);if(s!==0)return s;n++}return n<e.length?-1:n<t.length?1:0},dt.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(e===null||e.compareTo(t[n])>0)&&(e=t[n]);return e},dt.extract=function(t,e,n){e=_t.clamp(e,0,t.length),n=_t.clamp(n,-1,t.length);var s=n-e+1;0>n&&(s=0),e>=t.length&&(s=0),e>n&&(s=0);var a=new Array(s).fill(null);if(s===0)return a;for(var g=0,v=e;n>=v;v++)a[g++]=t[v];return a},f(Tr.prototype,{compare:function(t,e){var n=t,s=e;return dt.compare(n,s)},interfaces_:function(){return[I]},getClass:function(){return Tr}}),f(Bs.prototype,{compare:function(t,e){var n=t,s=e;if(n.length<s.length)return-1;if(n.length>s.length)return 1;if(n.length===0)return 0;var a=dt.compare(n,s),g=dt.isEqualReversed(n,s);return g?0:a},OLDcompare:function(t,e){var n=t,s=e;if(n.length<s.length)return-1;if(n.length>s.length)return 1;if(n.length===0)return 0;for(var a=dt.increasingDirection(n),g=dt.increasingDirection(s),v=a>0?0:n.length-1,x=g>0?0:n.length-1,S=0;S<n.length;S++){var O=n[v].compareTo(s[x]);if(O!==0)return O;v+=a,x+=g}return 0},interfaces_:function(){return[I]},getClass:function(){return Bs}}),dt.ForwardComparator=Tr,dt.BidirectionalComparator=Bs,dt.coordArrayType=new Array(0).fill(null),ei.prototype.get=function(){},ei.prototype.put=function(){},ei.prototype.size=function(){},ei.prototype.values=function(){},ei.prototype.entrySet=function(){},qs.prototype=new ei,Hi.prototype=new it,Hi.prototype.contains=function(){},he.prototype=new Hi,he.prototype.contains=function(t){for(var e=0,n=this.array_.length;n>e;e++){var s=this.array_[e];if(s===t)return!0}return!1},he.prototype.add=function(t){return this.contains(t)?!1:(this.array_.push(t),!0)},he.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},he.prototype.remove=function(t){throw new javascript.util.OperationNotSupported},he.prototype.size=function(){return this.array_.length},he.prototype.isEmpty=function(){return this.array_.length===0},he.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},he.prototype.iterator=function(){return new Jo(this)};var Jo=function(t){this.hashSet_=t,this.position_=0};Jo.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Z;return this.hashSet_.array_[this.position_++]},Jo.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},Jo.prototype.remove=function(){throw new lt};var xi=0,Lr=1;de.prototype=new qs,de.prototype.get=function(t){for(var e=this.root_;e!==null;){var n=t.compareTo(e.key);if(0>n)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},de.prototype.put=function(t,e){if(this.root_===null)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:xi,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,s,a=this.root_;do if(n=a,s=t.compareTo(a.key),0>s)a=a.left;else{if(!(s>0)){var g=a.value;return a.value=e,g}a=a.right}while(a!==null);var v={key:t,left:null,right:null,value:e,parent:n,color:xi,getValue:function(){return this.value},getKey:function(){return this.key}};return 0>s?n.left=v:n.right=v,this.fixAfterInsertion(v),this.size_++,null},de.prototype.fixAfterInsertion=function(t){for(t.color=Lr;t!=null&&t!=this.root_&&t.parent.color==Lr;)if(zt(t)==jr(zt(zt(t)))){var e=Us(zt(zt(t)));Io(e)==Lr?(en(zt(t),xi),en(e,xi),en(zt(zt(t)),Lr),t=zt(zt(t))):(t==Us(zt(t))&&(t=zt(t),this.rotateLeft(t)),en(zt(t),xi),en(zt(zt(t)),Lr),this.rotateRight(zt(zt(t))))}else{var e=jr(zt(zt(t)));Io(e)==Lr?(en(zt(t),xi),en(e,xi),en(zt(zt(t)),Lr),t=zt(zt(t))):(t==jr(zt(t))&&(t=zt(t),this.rotateRight(t)),en(zt(t),xi),en(zt(zt(t)),Lr),this.rotateLeft(zt(zt(t))))}this.root_.color=xi},de.prototype.values=function(){var t=new F,e=this.getFirstEntry();if(e!==null)for(t.add(e.value);(e=de.successor(e))!==null;)t.add(e.value);return t},de.prototype.entrySet=function(){var t=new he,e=this.getFirstEntry();if(e!==null)for(t.add(e);(e=de.successor(e))!==null;)t.add(e);return t},de.prototype.rotateLeft=function(t){if(t!=null){var e=t.right;t.right=e.left,e.left!=null&&(e.left.parent=t),e.parent=t.parent,t.parent==null?this.root_=e:t.parent.left==t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},de.prototype.rotateRight=function(t){if(t!=null){var e=t.left;t.left=e.right,e.right!=null&&(e.right.parent=t),e.parent=t.parent,t.parent==null?this.root_=e:t.parent.right==t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},de.prototype.getFirstEntry=function(){var t=this.root_;if(t!=null)for(;t.left!=null;)t=t.left;return t},de.successor=function(t){if(t===null)return null;if(t.right!==null){for(var e=t.right;e.left!==null;)e=e.left;return e}for(var e=t.parent,n=t;e!==null&&n===e.right;)n=e,e=e.parent;return e},de.prototype.size=function(){return this.size_},f(Qr.prototype,{interfaces_:function(){return[]},getClass:function(){return Qr}}),$r.prototype=new Hi,Ie.prototype=new $r,Ie.prototype.contains=function(t){for(var e=0,n=this.array_.length;n>e;e++){var s=this.array_[e];if(s.compareTo(t)===0)return!0}return!1},Ie.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;n>e;e++){var s=this.array_[e];if(s.compareTo(t)===1)return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},Ie.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Ie.prototype.remove=function(t){throw new lt},Ie.prototype.size=function(){return this.array_.length},Ie.prototype.isEmpty=function(){return this.array_.length===0},Ie.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},Ie.prototype.iterator=function(){return new Ko(this)};var Ko=function(t){this.treeSet_=t,this.position_=0};Ko.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Z;return this.treeSet_.array_[this.position_++]},Ko.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Ko.prototype.remove=function(){throw new lt},yn.sort=function(){var t,e,n,s,a=arguments[0];if(arguments.length===1)return s=function(v,x){return v.compareTo(x)},void a.sort(s);if(arguments.length===2)n=arguments[1],s=function(v,x){return n.compare(v,x)},a.sort(s);else{if(arguments.length===3){e=a.slice(arguments[1],arguments[2]),e.sort();var g=a.slice(0,arguments[1]).concat(e,a.slice(arguments[2],a.length));for(a.splice(0,a.length),t=0;t<g.length;t++)a.push(g[t]);return}if(arguments.length===4){for(e=a.slice(arguments[1],arguments[2]),n=arguments[3],s=function(v,x){return n.compare(v,x)},e.sort(s),g=a.slice(0,arguments[1]).concat(e,a.slice(arguments[2],a.length)),a.splice(0,a.length),t=0;t<g.length;t++)a.push(g[t]);return}}},yn.asList=function(t){for(var e=new F,n=0,s=t.length;s>n;n++)e.add(t[n]);return e},f(K.prototype,{interfaces_:function(){return[]},getClass:function(){return K}}),K.toDimensionSymbol=function(t){switch(t){case K.FALSE:return K.SYM_FALSE;case K.TRUE:return K.SYM_TRUE;case K.DONTCARE:return K.SYM_DONTCARE;case K.P:return K.SYM_P;case K.L:return K.SYM_L;case K.A:return K.SYM_A}throw new d},K.toDimensionValue=function(t){switch(ne.toUpperCase(t)){case K.SYM_FALSE:return K.FALSE;case K.SYM_TRUE:return K.TRUE;case K.SYM_DONTCARE:return K.DONTCARE;case K.SYM_P:return K.P;case K.SYM_L:return K.L;case K.SYM_A:return K.A}throw new d},K.P=0,K.L=1,K.A=2,K.FALSE=-1,K.TRUE=-2,K.DONTCARE=-3,K.SYM_FALSE="F",K.SYM_TRUE="T",K.SYM_DONTCARE="*",K.SYM_P="0",K.SYM_L="1",K.SYM_A="2",f(_n.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return _n}}),f(ni.prototype,{filter:function(t,e){},isDone:function(){},isGeometryChanged:function(){},interfaces_:function(){return[]},getClass:function(){return ni}}),T(Nt,Q),f(Nt.prototype,{computeEnvelopeInternal:function(){for(var t=new G,e=0;e<this.geometries.length;e++)t.expandToInclude(this.geometries[e].getEnvelopeInternal());return t},getGeometryN:function(t){return this.geometries[t]},getSortIndex:function(){return Q.SORTINDEX_GEOMETRYCOLLECTION},getCoordinates:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this.geometries.length;n++)for(var s=this.geometries[n].getCoordinates(),a=0;a<s.length;a++)e++,t[e]=s[a];return t},getArea:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getArea();return t},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.geometries.length!==n.geometries.length)return!1;for(var s=0;s<this.geometries.length;s++)if(!this.geometries[s].equalsExact(n.geometries[s],e))return!1;return!0}return Q.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<this.geometries.length;t++)this.geometries[t].normalize();yn.sort(this.geometries)},getCoordinate:function(){return this.isEmpty()?null:this.geometries[0].getCoordinate()},getBoundaryDimension:function(){for(var t=K.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getBoundaryDimension());return t},getDimension:function(){for(var t=K.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getDimension());return t},getLength:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getLength();return t},getNumPoints:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getNumPoints();return t},getNumGeometries:function(){return this.geometries.length},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},compareToSameClass:function(){if(arguments.length===1){var t=arguments[0],e=new Ie(yn.asList(this.geometries)),n=new Ie(yn.asList(t.geometries));return this.compare(e,n)}if(arguments.length===2){for(var s=arguments[0],a=arguments[1],g=s,v=this.getNumGeometries(),x=g.getNumGeometries(),S=0;v>S&&x>S;){var O=this.getGeometryN(S),B=g.getGeometryN(S),H=O.compareToSameClass(B,a);if(H!==0)return H;S++}return v>S?1:x>S?-1:0}},apply:function(){if(nt(arguments[0],Vt))for(var t=arguments[0],e=0;e<this.geometries.length;e++)this.geometries[e].apply(t);else if(nt(arguments[0],ni)){var n=arguments[0];if(this.geometries.length===0)return null;for(var e=0;e<this.geometries.length&&(this.geometries[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(nt(arguments[0],_n)){var s=arguments[0];s.filter(this);for(var e=0;e<this.geometries.length;e++)this.geometries[e].apply(s)}else if(nt(arguments[0],Bt)){var a=arguments[0];a.filter(this);for(var e=0;e<this.geometries.length;e++)this.geometries[e].apply(a)}},getBoundary:function(){return this.checkNotGeometryCollection(this),k.shouldNeverReachHere(),null},clone:function(){var t=Q.prototype.clone.call(this);t.geometries=new Array(this.geometries.length).fill(null);for(var e=0;e<this.geometries.length;e++)t.geometries[e]=this.geometries[e].clone();return t},getGeometryType:function(){return"GeometryCollection"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new Nt(t,this.factory)},isEmpty:function(){for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isEmpty())return!1;return!0},interfaces_:function(){return[]},getClass:function(){return Nt}}),Nt.serialVersionUID=-5694727726395021e3,T(De,Nt),f(De.prototype,{getSortIndex:function(){return Q.SORTINDEX_MULTILINESTRING},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.isEquivalentClass(t)?Nt.prototype.equalsExact.call(this,t,e):!1}return Nt.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return this.isClosed()?K.FALSE:0},isClosed:function(){if(this.isEmpty())return!1;for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isClosed())return!1;return!0},getDimension:function(){return 1},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[t-1-n]=this.geometries[n].reverse();return this.getFactory().createMultiLineString(e)},getBoundary:function(){return new xn(this).getBoundary()},getGeometryType:function(){return"MultiLineString"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new De(t,this.factory)},interfaces_:function(){return[Qr]},getClass:function(){return De}}),De.serialVersionUID=8166665132445434e3,f(xn.prototype,{boundaryMultiLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return e.length===1?this.geomFact.createPoint(e[0]):this.geomFact.createMultiPointFromCoords(e)},getBoundary:function(){return this.geom instanceof It?this.boundaryLineString(this.geom):this.geom instanceof De?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()},boundaryLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();if(t.isClosed()){var e=this.bnRule.isInBoundary(2);return e?t.getStartPoint():this.geomFact.createMultiPoint()}return this.geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},getEmptyMultiPoint:function(){return this.geomFact.createMultiPoint()},computeBoundaryCoordinates:function(t){var e=new F;this.endpointMap=new de;for(var n=0;n<t.getNumGeometries();n++){var s=t.getGeometryN(n);s.getNumPoints()!==0&&(this.addEndpoint(s.getCoordinateN(0)),this.addEndpoint(s.getCoordinateN(s.getNumPoints()-1)))}for(var a=this.endpointMap.entrySet().iterator();a.hasNext();){var g=a.next(),v=g.getValue(),x=v.count;this.bnRule.isInBoundary(x)&&e.add(g.getKey())}return dt.toCoordinateArray(e)},addEndpoint:function(t){var e=this.endpointMap.get(t);e===null&&(e=new ts,this.endpointMap.put(t,e)),e.count++},interfaces_:function(){return[]},getClass:function(){return xn}}),xn.getBoundary=function(){if(arguments.length===1){var t=arguments[0],e=new xn(t);return e.getBoundary()}if(arguments.length===2){var n=arguments[0],s=arguments[1],e=new xn(n,s);return e.getBoundary()}},f(ts.prototype,{interfaces_:function(){return[]},getClass:function(){return ts}}),f(Be.prototype,{interfaces_:function(){return[]},getClass:function(){return Be}}),Be.chars=function(t,e){for(var n=new Array(e).fill(null),s=0;e>s;s++)n[s]=t;return new String(n)},Be.getStackTrace=function(){if(arguments.length===1){var t=arguments[0],e=new Ra,n=new Pa;return t.printStackTrace(n),e.toString()}if(arguments.length===2){for(var s=arguments[0],a=arguments[1],g="",v=new Pr(Be.getStackTrace(s)),x=new So,S=0;a>S;S++)try{g+=x.readLine()+Be.NEWLINE}catch(O){if(!(O instanceof Co))throw O;k.shouldNeverReachHere()}finally{}return g}},Be.split=function(t,e){for(var n=e.length,s=new F,a=""+t,g=a.indexOf(e);g>=0;){var v=a.substring(0,g);s.add(v),a=a.substring(g+n),g=a.indexOf(e)}a.length>0&&s.add(a);for(var x=new Array(s.size()).fill(null),S=0;S<x.length;S++)x[S]=s.get(S);return x},Be.toString=function(){if(arguments.length===1){var t=arguments[0];return Be.SIMPLE_ORDINATE_FORMAT.format(t)}},Be.spaces=function(t){return Be.chars(" ",t)},Be.NEWLINE=mt.getProperty("line.separator"),Be.SIMPLE_ORDINATE_FORMAT=new Ma,f(ae.prototype,{interfaces_:function(){return[]},getClass:function(){return ae}}),ae.copyCoord=function(t,e,n,s){for(var a=Math.min(t.getDimension(),n.getDimension()),g=0;a>g;g++)n.setOrdinate(s,g,t.getOrdinate(e,g))},ae.isRing=function(t){var e=t.size();return e===0?!0:3>=e?!1:t.getOrdinate(0,at.X)===t.getOrdinate(e-1,at.X)&&t.getOrdinate(0,at.Y)===t.getOrdinate(e-1,at.Y)},ae.isEqual=function(t,e){var n=t.size(),s=e.size();if(n!==s)return!1;for(var a=Math.min(t.getDimension(),e.getDimension()),g=0;n>g;g++)for(var v=0;a>v;v++){var x=t.getOrdinate(g,v),S=e.getOrdinate(g,v);if(!(t.getOrdinate(g,v)===e.getOrdinate(g,v)||m.isNaN(x)&&m.isNaN(S)))return!1}return!0},ae.extend=function(t,e,n){var s=t.create(n,e.getDimension()),a=e.size();if(ae.copy(e,0,s,0,a),a>0)for(var g=a;n>g;g++)ae.copy(e,a-1,s,g,1);return s},ae.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),s=0;n>=s;s++)ae.swap(t,s,e-s)},ae.swap=function(t,e,n){if(e===n)return null;for(var s=0;s<t.getDimension();s++){var a=t.getOrdinate(e,s);t.setOrdinate(e,s,t.getOrdinate(n,s)),t.setOrdinate(n,s,a)}},ae.copy=function(t,e,n,s,a){for(var g=0;a>g;g++)ae.copyCoord(t,e+g,n,s+g)},ae.toString=function(){if(arguments.length===1){var t=arguments[0],e=t.size();if(e===0)return"()";var n=t.getDimension(),s=new Jt;s.append("(");for(var a=0;e>a;a++){a>0&&s.append(" ");for(var g=0;n>g;g++)g>0&&s.append(","),s.append(Be.toString(t.getOrdinate(a,g)))}return s.append(")"),s.toString()}},ae.ensureValidRing=function(t,e){var n=e.size();if(n===0)return e;if(3>=n)return ae.createClosedRing(t,e,4);var s=e.getOrdinate(0,at.X)===e.getOrdinate(n-1,at.X)&&e.getOrdinate(0,at.Y)===e.getOrdinate(n-1,at.Y);return s?e:ae.createClosedRing(t,e,n+1)},ae.createClosedRing=function(t,e,n){var s=t.create(n,e.getDimension()),a=e.size();ae.copy(e,0,s,0,a);for(var g=a;n>g;g++)ae.copy(e,0,s,g,1);return s},T(It,Q),f(It.prototype,{computeEnvelopeInternal:function(){return this.isEmpty()?new G:this.points.expandEnvelope(new G)},isRing:function(){return this.isClosed()&&this.isSimple()},getSortIndex:function(){return Q.SORTINDEX_LINESTRING},getCoordinates:function(){return this.points.toCoordinateArray()},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.points.size()!==n.points.size())return!1;for(var s=0;s<this.points.size();s++)if(!this.equal(this.points.getCoordinate(s),n.points.getCoordinate(s),e))return!1;return!0}return Q.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<Math.trunc(this.points.size()/2);t++){var e=this.points.size()-1-t;if(!this.points.getCoordinate(t).equals(this.points.getCoordinate(e)))return this.points.getCoordinate(t).compareTo(this.points.getCoordinate(e))>0&&ae.reverse(this.points),null}},getCoordinate:function(){return this.isEmpty()?null:this.points.getCoordinate(0)},getBoundaryDimension:function(){return this.isClosed()?K.FALSE:0},isClosed:function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},getEndPoint:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},getDimension:function(){return 1},getLength:function(){return et.computeLength(this.points)},getNumPoints:function(){return this.points.size()},reverse:function(){var t=this.points.copy();ae.reverse(t);var e=this.getFactory().createLineString(t);return e},compareToSameClass:function(){if(arguments.length===1){for(var t=arguments[0],e=t,n=0,s=0;n<this.points.size()&&s<e.points.size();){var a=this.points.getCoordinate(n).compareTo(e.points.getCoordinate(s));if(a!==0)return a;n++,s++}return n<this.points.size()?1:s<e.points.size()?-1:0}if(arguments.length===2){var g=arguments[0],v=arguments[1],e=g;return v.compare(this.points,e.points)}},apply:function(){if(nt(arguments[0],Vt))for(var t=arguments[0],e=0;e<this.points.size();e++)t.filter(this.points.getCoordinate(e));else if(nt(arguments[0],ni)){var n=arguments[0];if(this.points.size()===0)return null;for(var e=0;e<this.points.size()&&(n.filter(this.points,e),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(nt(arguments[0],_n)){var s=arguments[0];s.filter(this)}else if(nt(arguments[0],Bt)){var a=arguments[0];a.filter(this)}},getBoundary:function(){return new xn(this).getBoundary()},isEquivalentClass:function(t){return t instanceof It},clone:function(){var t=Q.prototype.clone.call(this);return t.points=this.points.clone(),t},getCoordinateN:function(t){return this.points.getCoordinate(t)},getGeometryType:function(){return"LineString"},copy:function(){return new It(this.points.copy(),this.factory)},getCoordinateSequence:function(){return this.points},isEmpty:function(){return this.points.size()===0},init:function(t){if(t===null&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),t.size()===1)throw new d("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this.points=t},isCoordinate:function(t){for(var e=0;e<this.points.size();e++)if(this.points.getCoordinate(e).equals(t))return!0;return!1},getStartPoint:function(){return this.isEmpty()?null:this.getPointN(0)},getPointN:function(t){return this.getFactory().createPoint(this.points.getCoordinate(t))},interfaces_:function(){return[Qr]},getClass:function(){return It}}),It.serialVersionUID=0x2b2b51ba435c8e00,f(es.prototype,{interfaces_:function(){return[]},getClass:function(){return es}}),T(Qt,Q),f(Qt.prototype,{computeEnvelopeInternal:function(){if(this.isEmpty())return new G;var t=new G;return t.expandToInclude(this.coordinates.getX(0),this.coordinates.getY(0)),t},getSortIndex:function(){return Q.SORTINDEX_POINT},getCoordinates:function(){return this.isEmpty()?[]:[this.getCoordinate()]},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.isEquivalentClass(t)?this.isEmpty()&&t.isEmpty()?!0:this.isEmpty()!==t.isEmpty()?!1:this.equal(t.getCoordinate(),this.getCoordinate(),e):!1}return Q.prototype.equalsExact.apply(this,arguments)},normalize:function(){},getCoordinate:function(){return this.coordinates.size()!==0?this.coordinates.getCoordinate(0):null},getBoundaryDimension:function(){return K.FALSE},getDimension:function(){return 0},getNumPoints:function(){return this.isEmpty()?0:1},reverse:function(){return this.copy()},getX:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x},compareToSameClass:function(){if(arguments.length===1){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(arguments.length===2){var n=arguments[0],s=arguments[1],e=n;return s.compare(this.coordinates,e.coordinates)}},apply:function(){if(nt(arguments[0],Vt)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(nt(arguments[0],ni)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(nt(arguments[0],_n)){var n=arguments[0];n.filter(this)}else if(nt(arguments[0],Bt)){var s=arguments[0];s.filter(this)}},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},clone:function(){var t=Q.prototype.clone.call(this);return t.coordinates=this.coordinates.clone(),t},getGeometryType:function(){return"Point"},copy:function(){return new Qt(this.coordinates.copy(),this.factory)},getCoordinateSequence:function(){return this.coordinates},getY:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y},isEmpty:function(){return this.coordinates.size()===0},init:function(t){t===null&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),k.isTrue(t.size()<=1),this.coordinates=t},isSimple:function(){return!0},interfaces_:function(){return[es]},getClass:function(){return Qt}}),Qt.serialVersionUID=4902022702746615e3,f(Nn.prototype,{interfaces_:function(){return[]},getClass:function(){return Nn}}),T(Ft,Q),f(Ft.prototype,{computeEnvelopeInternal:function(){return this.shell.getEnvelopeInternal()},getSortIndex:function(){return Q.SORTINDEX_POLYGON},getCoordinates:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this.shell.getCoordinates(),s=0;s<n.length;s++)e++,t[e]=n[s];for(var a=0;a<this.holes.length;a++)for(var g=this.holes[a].getCoordinates(),v=0;v<g.length;v++)e++,t[e]=g[v];return t},getArea:function(){var t=0;t+=Math.abs(et.signedArea(this.shell.getCoordinateSequence()));for(var e=0;e<this.holes.length;e++)t-=Math.abs(et.signedArea(this.holes[e].getCoordinateSequence()));return t},isRectangle:function(){if(this.getNumInteriorRing()!==0||this.shell===null||this.shell.getNumPoints()!==5)return!1;for(var t=this.shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;5>n;n++){var s=t.getX(n);if(s!==e.getMinX()&&s!==e.getMaxX())return!1;var a=t.getY(n);if(a!==e.getMinY()&&a!==e.getMaxY())return!1}for(var g=t.getX(0),v=t.getY(0),n=1;4>=n;n++){var s=t.getX(n),a=t.getY(n),x=s!==g,S=a!==v;if(x===S)return!1;g=s,v=a}return!0},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,s=this.shell,a=n.shell;if(!s.equalsExact(a,e)||this.holes.length!==n.holes.length)return!1;for(var g=0;g<this.holes.length;g++)if(!this.holes[g].equalsExact(n.holes[g],e))return!1;return!0}return Q.prototype.equalsExact.apply(this,arguments)},normalize:function(){if(arguments.length===0){this.normalize(this.shell,!0);for(var t=0;t<this.holes.length;t++)this.normalize(this.holes[t],!1);yn.sort(this.holes)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var s=new Array(e.getCoordinates().length-1).fill(null);mt.arraycopy(e.getCoordinates(),0,s,0,s.length);var a=dt.minCoordinate(e.getCoordinates());dt.scroll(s,a),mt.arraycopy(s,0,e.getCoordinates(),0,s.length),e.getCoordinates()[s.length]=s[0],et.isCCW(e.getCoordinates())===n&&dt.reverse(e.getCoordinates())}},getCoordinate:function(){return this.shell.getCoordinate()},getNumInteriorRing:function(){return this.holes.length},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},getLength:function(){var t=0;t+=this.shell.getLength();for(var e=0;e<this.holes.length;e++)t+=this.holes[e].getLength();return t},getNumPoints:function(){for(var t=this.shell.getNumPoints(),e=0;e<this.holes.length;e++)t+=this.holes[e].getNumPoints();return t},reverse:function(){var t=this.copy();t.shell=this.shell.copy().reverse(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].copy().reverse();return t},convexHull:function(){return this.getExteriorRing().convexHull()},compareToSameClass:function(){if(arguments.length===1){var t=arguments[0],e=this.shell,n=t.shell;return e.compareToSameClass(n)}if(arguments.length===2){var s=arguments[0],a=arguments[1],g=s,e=this.shell,n=g.shell,v=e.compareToSameClass(n,a);if(v!==0)return v;for(var x=this.getNumInteriorRing(),S=g.getNumInteriorRing(),O=0;x>O&&S>O;){var B=this.getInteriorRingN(O),H=g.getInteriorRingN(O),J=B.compareToSameClass(H,a);if(J!==0)return J;O++}return x>O?1:S>O?-1:0}},apply:function(){if(nt(arguments[0],Vt)){var t=arguments[0];this.shell.apply(t);for(var e=0;e<this.holes.length;e++)this.holes[e].apply(t)}else if(nt(arguments[0],ni)){var n=arguments[0];if(this.shell.apply(n),!n.isDone())for(var e=0;e<this.holes.length&&(this.holes[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(nt(arguments[0],_n)){var s=arguments[0];s.filter(this)}else if(nt(arguments[0],Bt)){var a=arguments[0];a.filter(this),this.shell.apply(a);for(var e=0;e<this.holes.length;e++)this.holes[e].apply(a)}},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this.holes.length+1).fill(null);t[0]=this.shell;for(var e=0;e<this.holes.length;e++)t[e+1]=this.holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},clone:function(){var t=Q.prototype.clone.call(this);t.shell=this.shell.clone(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].clone();return t},getGeometryType:function(){return"Polygon"},copy:function(){for(var t=this.shell.copy(),e=new Array(this.holes.length).fill(null),n=0;n<e.length;n++)e[n]=this.holes[n].copy();return new Ft(t,e,this.factory)},getExteriorRing:function(){return this.shell},isEmpty:function(){return this.shell.isEmpty()},getInteriorRingN:function(t){return this.holes[t]},interfaces_:function(){return[Nn]},getClass:function(){return Ft}}),Ft.serialVersionUID=-0x307ffefd8dc97200,T(Te,Nt),f(Te.prototype,{getSortIndex:function(){return Q.SORTINDEX_MULTIPOINT},isValid:function(){return!0},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.isEquivalentClass(t)?Nt.prototype.equalsExact.call(this,t,e):!1}return Nt.prototype.equalsExact.apply(this,arguments)},getCoordinate:function(){if(arguments.length===1){var t=arguments[0];return this.geometries[t].getCoordinate()}return Nt.prototype.getCoordinate.apply(this,arguments)},getBoundaryDimension:function(){return K.FALSE},getDimension:function(){return 0},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},getGeometryType:function(){return"MultiPoint"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new Te(t,this.factory)},interfaces_:function(){return[es]},getClass:function(){return Te}}),Te.serialVersionUID=-8048474874175356e3,T(ie,It),f(ie.prototype,{getSortIndex:function(){return Q.SORTINDEX_LINEARRING},getBoundaryDimension:function(){return K.FALSE},isClosed:function(){return this.isEmpty()?!0:It.prototype.isClosed.call(this)},reverse:function(){var t=this.points.copy();ae.reverse(t);var e=this.getFactory().createLinearRing(t);return e},validateConstruction:function(){if(!this.isEmpty()&&!It.prototype.isClosed.call(this))throw new d;if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<ie.MINIMUM_VALID_SIZE)throw new d("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},getGeometryType:function(){return"LinearRing"},copy:function(){return new ie(this.points.copy(),this.factory)},interfaces_:function(){return[]},getClass:function(){return ie}}),ie.MINIMUM_VALID_SIZE=4,ie.serialVersionUID=-0x3b229e262367a600,T(Le,Nt),f(Le.prototype,{getSortIndex:function(){return Q.SORTINDEX_MULTIPOLYGON},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.isEquivalentClass(t)?Nt.prototype.equalsExact.call(this,t,e):!1}return Nt.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new F,e=0;e<this.geometries.length;e++)for(var n=this.geometries[e],s=n.getBoundary(),a=0;a<s.getNumGeometries();a++)t.add(s.getGeometryN(a));var g=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(g))},getGeometryType:function(){return"MultiPolygon"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new Le(t,this.factory)},interfaces_:function(){return[Nn]},getClass:function(){return Le}}),Le.serialVersionUID=-0x7a5aa1369171980,f(ce.prototype,{setCopyUserData:function(t){this.isUserDataCopied=t},edit:function(t,e){if(t===null)return null;var n=this.editInternal(t,e);return this.isUserDataCopied&&n.setUserData(t.getUserData()),n},editInternal:function(t,e){return this.factory===null&&(this.factory=t.getFactory()),t instanceof Nt?this.editGeometryCollection(t,e):t instanceof Ft?this.editPolygon(t,e):t instanceof Qt?e.edit(t,this.factory):t instanceof It?e.edit(t,this.factory):(k.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},editGeometryCollection:function(t,e){for(var n=e.edit(t,this.factory),s=new F,a=0;a<n.getNumGeometries();a++){var g=this.edit(n.getGeometryN(a),e);g===null||g.isEmpty()||s.add(g)}return n.getClass()===Te?this.factory.createMultiPoint(s.toArray([])):n.getClass()===De?this.factory.createMultiLineString(s.toArray([])):n.getClass()===Le?this.factory.createMultiPolygon(s.toArray([])):this.factory.createGeometryCollection(s.toArray([]))},editPolygon:function(t,e){var n=e.edit(t,this.factory);if(n===null&&(n=this.factory.createPolygon(null)),n.isEmpty())return n;var s=this.edit(n.getExteriorRing(),e);if(s===null||s.isEmpty())return this.factory.createPolygon();for(var a=new F,g=0;g<n.getNumInteriorRing();g++){var v=this.edit(n.getInteriorRingN(g),e);v===null||v.isEmpty()||a.add(v)}return this.factory.createPolygon(s,a.toArray([]))},interfaces_:function(){return[]},getClass:function(){return ce}}),ce.GeometryEditorOperation=gt,f(ns.prototype,{edit:function(t,e){return t},interfaces_:function(){return[gt]},getClass:function(){return ns}}),f(is.prototype,{edit:function(t,e){if(t instanceof ie)return e.createLinearRing(this.editCoordinates(t.getCoordinates(),t));if(t instanceof It)return e.createLineString(this.editCoordinates(t.getCoordinates(),t));if(t instanceof Qt){var n=this.editCoordinates(t.getCoordinates(),t);return n.length>0?e.createPoint(n[0]):e.createPoint()}return t},interfaces_:function(){return[gt]},getClass:function(){return is}}),f(rs.prototype,{edit:function(t,e){return t instanceof ie?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof It?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Qt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},interfaces_:function(){return[gt]},getClass:function(){return rs}}),ce.NoOpGeometryOperation=ns,ce.CoordinateOperation=is,ce.CoordinateSequenceOperation=rs,f(qe.prototype,{setOrdinate:function(t,e,n){switch(e){case at.X:this.coordinates[t].x=n;break;case at.Y:this.coordinates[t].y=n;break;case at.Z:this.coordinates[t].z=n;break;default:throw new d}},size:function(){return this.coordinates.length},getOrdinate:function(t,e){switch(e){case at.X:return this.coordinates[t].x;case at.Y:return this.coordinates[t].y;case at.Z:return this.coordinates[t].z}return m.NaN},getCoordinate:function(){if(arguments.length===1){var t=arguments[0];return this.coordinates[t]}if(arguments.length===2){var e=arguments[0],n=arguments[1];n.x=this.coordinates[e].x,n.y=this.coordinates[e].y,n.z=this.coordinates[e].z}},getCoordinateCopy:function(t){return new P(this.coordinates[t])},getDimension:function(){return this.dimension},getX:function(t){return this.coordinates[t].x},clone:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].clone();return new qe(t,this.dimension)},expandEnvelope:function(t){for(var e=0;e<this.coordinates.length;e++)t.expandToInclude(this.coordinates[e]);return t},copy:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].copy();return new qe(t,this.dimension)},toString:function(){if(this.coordinates.length>0){var t=new Jt(17*this.coordinates.length);t.append("("),t.append(this.coordinates[0]);for(var e=1;e<this.coordinates.length;e++)t.append(", "),t.append(this.coordinates[e]);return t.append(")"),t.toString()}return"()"},getY:function(t){return this.coordinates[t].y},toCoordinateArray:function(){return this.coordinates},interfaces_:function(){return[at,b]},getClass:function(){return qe}}),qe.serialVersionUID=-0xcb44a778db18e00,f(Ln.prototype,{readResolve:function(){return Ln.instance()},create:function(){if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new qe(t)}if(nt(arguments[0],at)){var e=arguments[0];return new qe(e)}}else if(arguments.length===2){var n=arguments[0],s=arguments[1];return s>3&&(s=3),2>s?new qe(n):new qe(n,s)}},interfaces_:function(){return[ve,b]},getClass:function(){return Ln}}),Ln.instance=function(){return Ln.instanceObject},Ln.serialVersionUID=-0x38e49fa6cf6f2e00,Ln.instanceObject=new Ln;var $n,Lh=Object.defineProperty,Eh=Wi({delete:Oa,has:ka,get:Aa,set:To,keys:ss,values:za,entries:Ga,forEach:qa,clear:Fa}),wh=typeof Map<"u"&&Map.prototype.values?Map:Eh;nn.prototype=new ei,nn.prototype.get=function(t){return this.map_.get(t)||null},nn.prototype.put=function(t,e){return this.map_.set(t,e),e},nn.prototype.values=function(){for(var t=new F,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},nn.prototype.entrySet=function(){var t=new he;return this.map_.entries().forEach(function(e){return t.add(e)}),t},nn.prototype.size=function(){return this.map_.size()},f(Mt.prototype,{equals:function(t){if(!(t instanceof Mt))return!1;var e=t;return this.modelType===e.modelType&&this.scale===e.scale},compareTo:function(t){var e=t,n=this.getMaximumSignificantDigits(),s=e.getMaximumSignificantDigits();return new Rt(n).compareTo(new Rt(s))},getScale:function(){return this.scale},isFloating:function(){return this.modelType===Mt.FLOATING||this.modelType===Mt.FLOATING_SINGLE},getType:function(){return this.modelType},toString:function(){var t="UNKNOWN";return this.modelType===Mt.FLOATING?t="Floating":this.modelType===Mt.FLOATING_SINGLE?t="Floating-Single":this.modelType===Mt.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},makePrecise:function(){if(typeof arguments[0]=="number"){var t=arguments[0];if(m.isNaN(t))return t;if(this.modelType===Mt.FLOATING_SINGLE){var e=t;return e}return this.modelType===Mt.FIXED?Math.round(t*this.scale)/this.scale:t}if(arguments[0]instanceof P){var n=arguments[0];if(this.modelType===Mt.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}},getMaximumSignificantDigits:function(){var t=16;return this.modelType===Mt.FLOATING?t=16:this.modelType===Mt.FLOATING_SINGLE?t=6:this.modelType===Mt.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},setScale:function(t){this.scale=Math.abs(t)},interfaces_:function(){return[b,_]},getClass:function(){return Mt}}),Mt.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},f(rn.prototype,{readResolve:function(){return rn.nameToTypeMap.get(this.name)},toString:function(){return this.name},interfaces_:function(){return[b]},getClass:function(){return rn}}),rn.serialVersionUID=-552860263173159e4,rn.nameToTypeMap=new nn,Mt.Type=rn,Mt.serialVersionUID=7777263578777804e3,Mt.FIXED=new rn("FIXED"),Mt.FLOATING=new rn("FLOATING"),Mt.FLOATING_SINGLE=new rn("FLOATING SINGLE"),Mt.maximumPreciseValue=9007199254740992,f(St.prototype,{toGeometry:function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new P(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new P(t.getMinX(),t.getMinY()),new P(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new P(t.getMinX(),t.getMinY()),new P(t.getMinX(),t.getMaxY()),new P(t.getMaxX(),t.getMaxY()),new P(t.getMaxX(),t.getMinY()),new P(t.getMinX(),t.getMinY())]),null)},createLineString:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(nt(arguments[0],at)){var e=arguments[0];return new It(e,this)}}},createMultiLineString:function(){if(arguments.length===0)return new De(null,this);if(arguments.length===1){var t=arguments[0];return new De(t,this)}},buildGeometry:function(t){for(var e=null,n=!1,s=!1,a=t.iterator();a.hasNext();){var g=a.next(),v=g.getClass();e===null&&(e=v),v!==e&&(n=!0),g.isGeometryCollectionOrDerived()&&(s=!0)}if(e===null)return this.createGeometryCollection();if(n||s)return this.createGeometryCollection(St.toGeometryArray(t));var x=t.iterator().next(),S=t.size()>1;if(S){if(x instanceof Ft)return this.createMultiPolygon(St.toPolygonArray(t));if(x instanceof It)return this.createMultiLineString(St.toLineStringArray(t));if(x instanceof Qt)return this.createMultiPoint(St.toPointArray(t));k.shouldNeverReachHere("Unhandled class: "+x.getClass().getName())}return x},createMultiPointFromCoords:function(t){return this.createMultiPoint(t!==null?this.getCoordinateSequenceFactory().create(t):null)},createPoint:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof P){var t=arguments[0];return this.createPoint(t!==null?this.getCoordinateSequenceFactory().create([t]):null)}if(nt(arguments[0],at)){var e=arguments[0];return new Qt(e,this)}}},getCoordinateSequenceFactory:function(){return this.coordinateSequenceFactory},createPolygon:function(){if(arguments.length===0)return new Ft(null,null,this);if(arguments.length===1){if(nt(arguments[0],at)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ie){var n=arguments[0];return this.createPolygon(n,null)}}else if(arguments.length===2){var s=arguments[0],a=arguments[1];return new Ft(s,a,this)}},getSRID:function(){return this.SRID},createGeometryCollection:function(){if(arguments.length===0)return new Nt(null,this);if(arguments.length===1){var t=arguments[0];return new Nt(t,this)}},createGeometry:function(t){var e=new ce(this);return e.edit(t,{edit:function(){if(arguments.length===2){var n=arguments[0];return this.coordinateSequenceFactory.create(n)}}})},getPrecisionModel:function(){return this.precisionModel},createLinearRing:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(nt(arguments[0],at)){var e=arguments[0];return new ie(e,this)}}},createMultiPolygon:function(){if(arguments.length===0)return new Le(null,this);if(arguments.length===1){var t=arguments[0];return new Le(t,this)}},createMultiPoint:function(){if(arguments.length===0)return new Te(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new Te(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(e!==null?this.getCoordinateSequenceFactory().create(e):null)}if(nt(arguments[0],at)){var n=arguments[0];if(n===null)return this.createMultiPoint(new Array(0).fill(null));for(var s=new Array(n.size()).fill(null),a=0;a<n.size();a++){var g=this.getCoordinateSequenceFactory().create(1,n.getDimension());ae.copy(n,a,g,0,1),s[a]=this.createPoint(g)}return this.createMultiPoint(s)}}},interfaces_:function(){return[b]},getClass:function(){return St}}),St.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},St.toGeometryArray=function(t){if(t===null)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},St.getDefaultCoordinateSequenceFactory=function(){return Ln.instance()},St.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},St.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},St.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},St.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},St.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},St.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},St.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},St.serialVersionUID=-6820524753094096e3;var zn={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};f(Ii.prototype,{read:function(t){var e,n,s;t=t.replace(/[\n\r]/g," ");var a=zn.typeStr.exec(t);if(t.search("EMPTY")!==-1&&(a=zn.emptyTypeStr.exec(t),a[2]=void 0),a&&(n=a[1].toLowerCase(),s=a[2],Rs[n]&&(e=Rs[n].apply(this,[s]))),e===void 0)throw new Error("Could not parse WKT "+t);return e},write:function(t){return this.extractGeometry(t)},extractGeometry:function(t){var e=t.getGeometryType().toLowerCase();if(!Li[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Li[e].apply(this,[t])+")"}});var Li={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Li.coordinate.call(this,t.coordinates.coordinates[0])},multipoint:function(t){for(var e=[],n=0,s=t.geometries.length;s>n;++n)e.push("("+Li.point.apply(this,[t.geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,s=t.points.coordinates.length;s>n;++n)e.push(Li.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,s=t.points.coordinates.length;s>n;++n)e.push(Li.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,s=t.geometries.length;s>n;++n)e.push("("+Li.linestring.apply(this,[t.geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Li.linestring.apply(this,[t.shell])+")");for(var n=0,s=t.holes.length;s>n;++n)e.push("("+Li.linestring.apply(this,[t.holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,s=t.geometries.length;s>n;++n)e.push("("+Li.polygon.apply(this,[t.geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,s=t.geometries.length;s>n;++n)e.push(this.extractGeometry(t.geometries[n]));return e.join(",")}},Rs={point:function(t){if(t===void 0)return this.geometryFactory.createPoint();var e=t.trim().split(zn.spaces);return this.geometryFactory.createPoint(new P(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(t===void 0)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),s=[],a=0,g=n.length;g>a;++a)e=n[a].replace(zn.trimParens,"$1"),s.push(Rs.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(s)},linestring:function(t){if(t===void 0)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),s=[],a=0,g=n.length;g>a;++a)e=n[a].trim().split(zn.spaces),s.push(new P(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(s)},linearring:function(t){if(t===void 0)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),s=[],a=0,g=n.length;g>a;++a)e=n[a].trim().split(zn.spaces),s.push(new P(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(s)},multilinestring:function(t){if(t===void 0)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(zn.parenComma),s=[],a=0,g=n.length;g>a;++a)e=n[a].replace(zn.trimParens,"$1"),s.push(Rs.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(s)},polygon:function(t){if(t===void 0)return this.geometryFactory.createPolygon();for(var e,n,s,a,g=t.trim().split(zn.parenComma),v=[],x=0,S=g.length;S>x;++x)e=g[x].replace(zn.trimParens,"$1"),n=Rs.linestring.apply(this,[e]),s=this.geometryFactory.createLinearRing(n.points),x===0?a=s:v.push(s);return this.geometryFactory.createPolygon(a,v)},multipolygon:function(t){if(t===void 0)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(zn.doubleParenComma),s=[],a=0,g=n.length;g>a;++a)e=n[a].replace(zn.trimParens,"$1"),s.push(Rs.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(s)},geometrycollection:function(t){if(t===void 0)return this.geometryFactory.createGeometryCollection();t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var e=t.trim().split("|"),n=[],s=0,a=e.length;a>s;++s)n.push(this.read(e[s]));return this.geometryFactory.createGeometryCollection(n)}};f(wt.prototype,{write:function(t){return this.parser.write(t)}}),f(wt,{toLineString:function(t,e){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}),f(vt.prototype,{getIndexAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intLineIndex[t][e]},getTopologySummary:function(){var t=new Jt;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},computeIntersection:function(t,e,n,s){this.inputLines[0][0]=t,this.inputLines[0][1]=e,this.inputLines[1][0]=n,this.inputLines[1][1]=s,this.result=this.computeIntersect(t,e,n,s)},getIntersectionNum:function(){return this.result},computeIntLineIndex:function(){if(arguments.length===0)this.intLineIndex===null&&(this.intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var t=arguments[0],e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);e>n?(this.intLineIndex[t][0]=0,this.intLineIndex[t][1]=1):(this.intLineIndex[t][0]=1,this.intLineIndex[t][1]=0)}},isProper:function(){return this.hasIntersection()&&this._isProper},setPrecisionModel:function(t){this.precisionModel=t},isInteriorIntersection:function(){if(arguments.length===0)return this.isInteriorIntersection(0)?!0:!!this.isInteriorIntersection(1);if(arguments.length===1){for(var t=arguments[0],e=0;e<this.result;e++)if(!this.intPt[e].equals2D(this.inputLines[t][0])&&!this.intPt[e].equals2D(this.inputLines[t][1]))return!0;return!1}},getIntersection:function(t){return this.intPt[t]},isEndPoint:function(){return this.hasIntersection()&&!this._isProper},hasIntersection:function(){return this.result!==vt.NO_INTERSECTION},getEdgeDistance:function(t,e){var n=vt.computeEdgeDistance(this.intPt[e],this.inputLines[t][0],this.inputLines[t][1]);return n},isCollinear:function(){return this.result===vt.COLLINEAR_INTERSECTION},toString:function(){return wt.toLineString(this.inputLines[0][0],this.inputLines[0][1])+" - "+wt.toLineString(this.inputLines[1][0],this.inputLines[1][1])+this.getTopologySummary()},getEndpoint:function(t,e){return this.inputLines[t][e]},isIntersection:function(t){for(var e=0;e<this.result;e++)if(this.intPt[e].equals2D(t))return!0;return!1},getIntersectionAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intPt[this.intLineIndex[t][e]]},interfaces_:function(){return[]},getClass:function(){return vt}}),vt.computeEdgeDistance=function(t,e,n){var s=Math.abs(n.x-e.x),a=Math.abs(n.y-e.y),g=-1;if(t.equals(e))g=0;else if(t.equals(n))g=s>a?s:a;else{var v=Math.abs(t.x-e.x),x=Math.abs(t.y-e.y);g=s>a?v:x,g!==0||t.equals(e)||(g=Math.max(v,x))}return k.isTrue(!(g===0&&!t.equals(e)),"Bad distance calculation"),g},vt.nonRobustComputeEdgeDistance=function(t,e,n){var s=t.x-e.x,a=t.y-e.y,g=Math.sqrt(s*s+a*a);return k.isTrue(!(g===0&&!t.equals(e)),"Invalid distance calculation"),g},vt.DONT_INTERSECT=0,vt.DO_INTERSECT=1,vt.COLLINEAR=2,vt.NO_INTERSECTION=0,vt.POINT_INTERSECTION=1,vt.COLLINEAR_INTERSECTION=2,T(ue,vt),f(ue.prototype,{isInSegmentEnvelopes:function(t){var e=new G(this.inputLines[0][0],this.inputLines[0][1]),n=new G(this.inputLines[1][0],this.inputLines[1][1]);return e.contains(t)&&n.contains(t)},computeIntersection:function(){if(arguments.length!==3)return vt.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];return this._isProper=!1,G.intersects(e,n,t)&&et.orientationIndex(e,n,t)===0&&et.orientationIndex(n,e,t)===0?(this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this.result=vt.POINT_INTERSECTION,null):void(this.result=vt.NO_INTERSECTION)},normalizeToMinimum:function(t,e,n,s,a){a.x=this.smallestInAbsValue(t.x,e.x,n.x,s.x),a.y=this.smallestInAbsValue(t.y,e.y,n.y,s.y),t.x-=a.x,t.y-=a.y,e.x-=a.x,e.y-=a.y,n.x-=a.x,n.y-=a.y,s.x-=a.x,s.y-=a.y},safeHCoordinateIntersection:function(t,e,n,s){var a=null;try{a=jt.intersection(t,e,n,s)}catch(g){if(!(g instanceof X))throw g;a=ue.nearestEndpoint(t,e,n,s)}finally{}return a},intersection:function(t,e,n,s){var a=this.intersectionWithNormalization(t,e,n,s);return this.isInSegmentEnvelopes(a)||(a=new P(ue.nearestEndpoint(t,e,n,s))),this.precisionModel!==null&&this.precisionModel.makePrecise(a),a},smallestInAbsValue:function(t,e,n,s){var a=t,g=Math.abs(a);return Math.abs(e)<g&&(a=e,g=Math.abs(e)),Math.abs(n)<g&&(a=n,g=Math.abs(n)),Math.abs(s)<g&&(a=s),a},checkDD:function(t,e,n,s,a){var g=Kt.intersection(t,e,n,s),v=this.isInSegmentEnvelopes(g);mt.out.println("DD in env = "+v+"  --------------------- "+g),a.distance(g)>1e-4&&mt.out.println("Distance = "+a.distance(g))},intersectionWithNormalization:function(t,e,n,s){var a=new P(t),g=new P(e),v=new P(n),x=new P(s),S=new P;this.normalizeToEnvCentre(a,g,v,x,S);var O=this.safeHCoordinateIntersection(a,g,v,x);return O.x+=S.x,O.y+=S.y,O},computeCollinearIntersection:function(t,e,n,s){var a=G.intersects(t,e,n),g=G.intersects(t,e,s),v=G.intersects(n,s,t),x=G.intersects(n,s,e);return a&&g?(this.intPt[0]=n,this.intPt[1]=s,vt.COLLINEAR_INTERSECTION):v&&x?(this.intPt[0]=t,this.intPt[1]=e,vt.COLLINEAR_INTERSECTION):a&&v?(this.intPt[0]=n,this.intPt[1]=t,!n.equals(t)||g||x?vt.COLLINEAR_INTERSECTION:vt.POINT_INTERSECTION):a&&x?(this.intPt[0]=n,this.intPt[1]=e,!n.equals(e)||g||v?vt.COLLINEAR_INTERSECTION:vt.POINT_INTERSECTION):g&&v?(this.intPt[0]=s,this.intPt[1]=t,!s.equals(t)||a||x?vt.COLLINEAR_INTERSECTION:vt.POINT_INTERSECTION):g&&x?(this.intPt[0]=s,this.intPt[1]=e,!s.equals(e)||a||v?vt.COLLINEAR_INTERSECTION:vt.POINT_INTERSECTION):vt.NO_INTERSECTION},normalizeToEnvCentre:function(t,e,n,s,a){var g=t.x<e.x?t.x:e.x,v=t.y<e.y?t.y:e.y,x=t.x>e.x?t.x:e.x,S=t.y>e.y?t.y:e.y,O=n.x<s.x?n.x:s.x,B=n.y<s.y?n.y:s.y,H=n.x>s.x?n.x:s.x,J=n.y>s.y?n.y:s.y,ut=g>O?g:O,pt=H>x?x:H,Lt=v>B?v:B,Yt=J>S?S:J,me=(ut+pt)/2,Bn=(Lt+Yt)/2;a.x=me,a.y=Bn,t.x-=a.x,t.y-=a.y,e.x-=a.x,e.y-=a.y,n.x-=a.x,n.y-=a.y,s.x-=a.x,s.y-=a.y},computeIntersect:function(t,e,n,s){if(this._isProper=!1,!G.intersects(t,e,n,s))return vt.NO_INTERSECTION;var a=et.orientationIndex(t,e,n),g=et.orientationIndex(t,e,s);if(a>0&&g>0||0>a&&0>g)return vt.NO_INTERSECTION;var v=et.orientationIndex(n,s,t),x=et.orientationIndex(n,s,e);if(v>0&&x>0||0>v&&0>x)return vt.NO_INTERSECTION;var S=a===0&&g===0&&v===0&&x===0;return S?this.computeCollinearIntersection(t,e,n,s):(a===0||g===0||v===0||x===0?(this._isProper=!1,t.equals2D(n)||t.equals2D(s)?this.intPt[0]=t:e.equals2D(n)||e.equals2D(s)?this.intPt[0]=e:a===0?this.intPt[0]=new P(n):g===0?this.intPt[0]=new P(s):v===0?this.intPt[0]=new P(t):x===0&&(this.intPt[0]=new P(e))):(this._isProper=!0,this.intPt[0]=this.intersection(t,e,n,s)),vt.POINT_INTERSECTION)},interfaces_:function(){return[]},getClass:function(){return ue}}),ue.nearestEndpoint=function(t,e,n,s){var a=t,g=et.distancePointLine(t,n,s),v=et.distancePointLine(e,n,s);return g>v&&(g=v,a=e),v=et.distancePointLine(n,t,e),g>v&&(g=v,a=n),v=et.distancePointLine(s,t,e),g>v&&(g=v,a=s),a},f(sn.prototype,{interfaces_:function(){return[]},getClass:function(){return sn}}),sn.orientationIndex=function(t,e,n){var s=e.x-t.x,a=e.y-t.y,g=n.x-e.x,v=n.y-e.y;return sn.signOfDet2x2(s,a,g,v)},sn.signOfDet2x2=function(t,e,n,s){var a=null,g=null,v=null;if(a=1,t===0||s===0)return e===0||n===0?0:e>0?n>0?-a:a:n>0?a:-a;if(e===0||n===0)return s>0?t>0?a:-a:t>0?-a:a;if(e>0?s>0?s>=e||(a=-a,g=t,t=n,n=g,g=e,e=s,s=g):-s>=e?(a=-a,n=-n,s=-s):(g=t,t=-n,n=g,g=e,e=-s,s=g):s>0?s>=-e?(a=-a,t=-t,e=-e):(g=-t,t=n,n=g,g=-e,e=s,s=g):e>=s?(t=-t,e=-e,n=-n,s=-s):(a=-a,g=-t,t=-n,n=g,g=-e,e=-s,s=g),t>0){if(!(n>0)||!(n>=t))return a}else{if(n>0||!(t>=n))return-a;a=-a,t=-t,n=-n}for(;;){if(v=Math.floor(n/t),n-=v*t,s-=v*e,0>s)return-a;if(s>e)return a;if(t>n+n){if(s+s>e)return a}else{if(e>s+s)return-a;n=t-n,s=e-s,a=-a}if(s===0)return n===0?0:-a;if(n===0||(v=Math.floor(t/n),t-=v*n,e-=v*s,0>e))return a;if(e>s)return-a;if(n>t+t){if(e+e>s)return-a}else{if(s>e+e)return a;t=n-t,e=s-e,a=-a}if(e===0)return t===0?0:a;if(t===0)return-a}},f(on.prototype,{countSegment:function(t,e){if(t.x<this.p.x&&e.x<this.p.x)return null;if(this.p.x===e.x&&this.p.y===e.y)return this.isPointOnSegment=!0,null;if(t.y===this.p.y&&e.y===this.p.y){var n=t.x,s=e.x;return n>s&&(n=e.x,s=t.x),this.p.x>=n&&this.p.x<=s&&(this.isPointOnSegment=!0),null}if(t.y>this.p.y&&e.y<=this.p.y||e.y>this.p.y&&t.y<=this.p.y){var a=t.x-this.p.x,g=t.y-this.p.y,v=e.x-this.p.x,x=e.y-this.p.y,S=sn.signOfDet2x2(a,g,v,x);if(S===0)return this.isPointOnSegment=!0,null;g>x&&(S=-S),S>0&&this.crossingCount++}},isPointInPolygon:function(){return this.getLocation()!==C.EXTERIOR},getLocation:function(){return this.isPointOnSegment?C.BOUNDARY:this.crossingCount%2===1?C.INTERIOR:C.EXTERIOR},isOnSegment:function(){return this.isPointOnSegment},interfaces_:function(){return[]},getClass:function(){return on}}),on.locatePointInRing=function(){if(arguments[0]instanceof P&&nt(arguments[1],at)){for(var t=arguments[0],e=arguments[1],n=new on(t),s=new P,a=new P,g=1;g<e.size();g++)if(e.getCoordinate(g,s),e.getCoordinate(g-1,a),n.countSegment(s,a),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof P&&arguments[1]instanceof Array){for(var v=arguments[0],x=arguments[1],n=new on(v),g=1;g<x.length;g++){var s=x[g],a=x[g-1];if(n.countSegment(s,a),n.isOnSegment())return n.getLocation()}return n.getLocation()}},f(et.prototype,{interfaces_:function(){return[]},getClass:function(){return et}}),et.orientationIndex=function(t,e,n){return Kt.orientationIndex(t,e,n)},et.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,s=1;s<t.length-1;s++){var a=t[s].x-n,g=t[s+1].y,v=t[s-1].y;e+=a*(v-g)}return e/2}if(nt(arguments[0],at)){var x=arguments[0],S=x.size();if(3>S)return 0;var O=new P,B=new P,H=new P;x.getCoordinate(0,B),x.getCoordinate(1,H);var n=B.x;H.x-=n;for(var e=0,s=1;S-1>s;s++)O.y=B.y,B.x=H.x,B.y=H.y,x.getCoordinate(s+1,H),H.x-=n,e+=B.x*(O.y-H.y);return e/2}},et.distanceLineLine=function(t,e,n,s){if(t.equals(e))return et.distancePointLine(t,n,s);if(n.equals(s))return et.distancePointLine(s,t,e);var a=!1;if(G.intersects(t,e,n,s)){var g=(e.x-t.x)*(s.y-n.y)-(e.y-t.y)*(s.x-n.x);if(g===0)a=!0;else{var v=(t.y-n.y)*(s.x-n.x)-(t.x-n.x)*(s.y-n.y),x=(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y),S=x/g,O=v/g;(0>O||O>1||0>S||S>1)&&(a=!0)}}else a=!0;return a?_t.min(et.distancePointLine(t,n,s),et.distancePointLine(e,n,s),et.distancePointLine(n,t,e),et.distancePointLine(s,t,e)):0},et.isPointInRing=function(t,e){return et.locatePointInRing(t,e)!==C.EXTERIOR},et.computeLength=function(t){var e=t.size();if(1>=e)return 0;var n=0,s=new P;t.getCoordinate(0,s);for(var a=s.x,g=s.y,v=1;e>v;v++){t.getCoordinate(v,s);var x=s.x,S=s.y,O=x-a,B=S-g;n+=Math.sqrt(O*O+B*B),a=x,g=S}return n},et.isCCW=function(t){var e=t.length-1;if(3>e)throw new d;for(var n=t[0],s=0,a=1;e>=a;a++){var g=t[a];g.y>n.y&&(n=g,s=a)}var v=s;do v-=1,0>v&&(v=e);while(t[v].equals2D(n)&&v!==s);var x=s;do x=(x+1)%e;while(t[x].equals2D(n)&&x!==s);var S=t[v],O=t[x];if(S.equals2D(n)||O.equals2D(n)||S.equals2D(O))return!1;var B=et.computeOrientation(S,n,O);return B===0?S.x>O.x:B>0},et.locatePointInRing=function(t,e){return on.locatePointInRing(t,e)},et.distancePointLinePerpendicular=function(t,e,n){var s=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),a=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/s;return Math.abs(a)*Math.sqrt(s)},et.computeOrientation=function(t,e,n){return et.orientationIndex(t,e,n)},et.distancePointLine=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(e.length===0)throw new d;for(var n=t.distance(e[0]),s=0;s<e.length-1;s++){var a=et.distancePointLine(t,e[s],e[s+1]);n>a&&(n=a)}return n}if(arguments.length===3){var g=arguments[0],v=arguments[1],x=arguments[2];if(v.x===x.x&&v.y===x.y)return g.distance(v);var S=(x.x-v.x)*(x.x-v.x)+(x.y-v.y)*(x.y-v.y),O=((g.x-v.x)*(x.x-v.x)+(g.y-v.y)*(x.y-v.y))/S;if(0>=O)return g.distance(v);if(O>=1)return g.distance(x);var B=((v.y-g.y)*(x.x-v.x)-(v.x-g.x)*(x.y-v.y))/S;return Math.abs(B)*Math.sqrt(S)}},et.isOnLine=function(t,e){for(var n=new ue,s=1;s<e.length;s++){var a=e[s-1],g=e[s];if(n.computeIntersection(t,a,g),n.hasIntersection())return!0}return!1},et.CLOCKWISE=-1,et.RIGHT=et.CLOCKWISE,et.COUNTERCLOCKWISE=1,et.LEFT=et.COUNTERCLOCKWISE,et.COLLINEAR=0,et.STRAIGHT=et.COLLINEAR,f(st.prototype,{minX:function(){return Math.min(this.p0.x,this.p1.x)},orientationIndex:function(){if(arguments[0]instanceof st){var t=arguments[0],e=et.orientationIndex(this.p0,this.p1,t.p0),n=et.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||0>=e&&0>=n?Math.max(e,n):0}if(arguments[0]instanceof P){var s=arguments[0];return et.orientationIndex(this.p0,this.p1,s)}},toGeometry:function(t){return t.createLineString([this.p0,this.p1])},isVertical:function(){return this.p0.x===this.p1.x},equals:function(t){if(!(t instanceof st))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},intersection:function(t){var e=new ue;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},project:function(){if(arguments[0]instanceof P){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new P(t);var e=this.projectionFactor(t),n=new P;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof st){var s=arguments[0],a=this.projectionFactor(s.p0),g=this.projectionFactor(s.p1);if(a>=1&&g>=1||0>=a&&0>=g)return null;var v=this.project(s.p0);0>a&&(v=this.p0),a>1&&(v=this.p1);var x=this.project(s.p1);return 0>g&&(x=this.p0),g>1&&(x=this.p1),new st(v,x)}},normalize:function(){this.p1.compareTo(this.p0)<0&&this.reverse()},angle:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},getCoordinate:function(t){return t===0?this.p0:this.p1},distancePerpendicular:function(t){return et.distancePointLinePerpendicular(t,this.p0,this.p1)},minY:function(){return Math.min(this.p0.y,this.p1.y)},midPoint:function(){return st.midPoint(this.p0,this.p1)},projectionFactor:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,s=e*e+n*n;if(0>=s)return m.NaN;var a=((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/s;return a},closestPoints:function(t){var e=this.intersection(t);if(e!==null)return[e,e];var n=new Array(2).fill(null),s=m.MAX_VALUE,a=null,g=this.closestPoint(t.p0);s=g.distance(t.p0),n[0]=g,n[1]=t.p0;var v=this.closestPoint(t.p1);a=v.distance(t.p1),s>a&&(s=a,n[0]=v,n[1]=t.p1);var x=t.closestPoint(this.p0);a=x.distance(this.p0),s>a&&(s=a,n[0]=this.p0,n[1]=x);var S=t.closestPoint(this.p1);return a=S.distance(this.p1),s>a&&(s=a,n[0]=this.p1,n[1]=S),n},closestPoint:function(t){var e=this.projectionFactor(t);if(e>0&&1>e)return this.project(t);var n=this.p0.distance(t),s=this.p1.distance(t);return s>n?this.p0:this.p1},maxX:function(){return Math.max(this.p0.x,this.p1.x)},getLength:function(){return this.p0.distance(this.p1)},compareTo:function(t){var e=t,n=this.p0.compareTo(e.p0);return n!==0?n:this.p1.compareTo(e.p1)},reverse:function(){var t=this.p0;this.p0=this.p1,this.p1=t},equalsTopo:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)},lineIntersection:function(t){try{var e=jt.intersection(this.p0,this.p1,t.p0,t.p1);return e}catch(n){if(!(n instanceof X))throw n}finally{}return null},maxY:function(){return Math.max(this.p0.y,this.p1.y)},pointAlongOffset:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),s=this.p0.y+t*(this.p1.y-this.p0.y),a=this.p1.x-this.p0.x,g=this.p1.y-this.p0.y,v=Math.sqrt(a*a+g*g),x=0,S=0;if(e!==0){if(0>=v)throw new IllegalStateException("Cannot compute offset from zero-length line segment");x=e*a/v,S=e*g/v}var O=n-S,B=s+x,H=new P(O,B);return H},setCoordinates:function(){if(arguments.length===1){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},segmentFraction:function(t){var e=this.projectionFactor(t);return 0>e?e=0:(e>1||m.isNaN(e))&&(e=1),e},toString:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},isHorizontal:function(){return this.p0.y===this.p1.y},distance:function(){if(arguments[0]instanceof st){var t=arguments[0];return et.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof P){var e=arguments[0];return et.distancePointLine(e,this.p0,this.p1)}},pointAlong:function(t){var e=new P;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},hashCode:function(){var t=java.lang.Double.doubleToLongBits(this.p0.x);t^=31*java.lang.Double.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=java.lang.Double.doubleToLongBits(this.p1.x);n^=31*java.lang.Double.doubleToLongBits(this.p1.y);var s=Math.trunc(n)^Math.trunc(n>>32);return e^s},interfaces_:function(){return[_,b]},getClass:function(){return st}}),st.midPoint=function(t,e){return new P((t.x+e.x)/2,(t.y+e.y)/2)},st.serialVersionUID=0x2d2172135f411c00,f(yt.prototype,{isIntersects:function(){return!this.isDisjoint()},isCovers:function(){var t=yt.isTrue(this.matrix[C.INTERIOR][C.INTERIOR])||yt.isTrue(this.matrix[C.INTERIOR][C.BOUNDARY])||yt.isTrue(this.matrix[C.BOUNDARY][C.INTERIOR])||yt.isTrue(this.matrix[C.BOUNDARY][C.BOUNDARY]);return t&&this.matrix[C.EXTERIOR][C.INTERIOR]===K.FALSE&&this.matrix[C.EXTERIOR][C.BOUNDARY]===K.FALSE},isCoveredBy:function(){var t=yt.isTrue(this.matrix[C.INTERIOR][C.INTERIOR])||yt.isTrue(this.matrix[C.INTERIOR][C.BOUNDARY])||yt.isTrue(this.matrix[C.BOUNDARY][C.INTERIOR])||yt.isTrue(this.matrix[C.BOUNDARY][C.BOUNDARY]);return t&&this.matrix[C.INTERIOR][C.EXTERIOR]===K.FALSE&&this.matrix[C.BOUNDARY][C.EXTERIOR]===K.FALSE},set:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),s=e%3;this.matrix[n][s]=K.toDimensionValue(t.charAt(e))}else if(arguments.length===3){var a=arguments[0],g=arguments[1],v=arguments[2];this.matrix[a][g]=v}},isContains:function(){return yt.isTrue(this.matrix[C.INTERIOR][C.INTERIOR])&&this.matrix[C.EXTERIOR][C.INTERIOR]===K.FALSE&&this.matrix[C.EXTERIOR][C.BOUNDARY]===K.FALSE},setAtLeast:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),s=e%3;this.setAtLeast(n,s,K.toDimensionValue(t.charAt(e)))}else if(arguments.length===3){var a=arguments[0],g=arguments[1],v=arguments[2];this.matrix[a][g]<v&&(this.matrix[a][g]=v)}},setAtLeastIfValid:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)},isWithin:function(){return yt.isTrue(this.matrix[C.INTERIOR][C.INTERIOR])&&this.matrix[C.INTERIOR][C.EXTERIOR]===K.FALSE&&this.matrix[C.BOUNDARY][C.EXTERIOR]===K.FALSE},isTouches:function(t,e){return t>e?this.isTouches(e,t):t===K.A&&e===K.A||t===K.L&&e===K.L||t===K.L&&e===K.A||t===K.P&&e===K.A||t===K.P&&e===K.L?this.matrix[C.INTERIOR][C.INTERIOR]===K.FALSE&&(yt.isTrue(this.matrix[C.INTERIOR][C.BOUNDARY])||yt.isTrue(this.matrix[C.BOUNDARY][C.INTERIOR])||yt.isTrue(this.matrix[C.BOUNDARY][C.BOUNDARY])):!1},isOverlaps:function(t,e){return t===K.P&&e===K.P||t===K.A&&e===K.A?yt.isTrue(this.matrix[C.INTERIOR][C.INTERIOR])&&yt.isTrue(this.matrix[C.INTERIOR][C.EXTERIOR])&&yt.isTrue(this.matrix[C.EXTERIOR][C.INTERIOR]):t===K.L&&e===K.L?this.matrix[C.INTERIOR][C.INTERIOR]===1&&yt.isTrue(this.matrix[C.INTERIOR][C.EXTERIOR])&&yt.isTrue(this.matrix[C.EXTERIOR][C.INTERIOR]):!1},isEquals:function(t,e){return t!==e?!1:yt.isTrue(this.matrix[C.INTERIOR][C.INTERIOR])&&this.matrix[C.INTERIOR][C.EXTERIOR]===K.FALSE&&this.matrix[C.BOUNDARY][C.EXTERIOR]===K.FALSE&&this.matrix[C.EXTERIOR][C.INTERIOR]===K.FALSE&&this.matrix[C.EXTERIOR][C.BOUNDARY]===K.FALSE},toString:function(){for(var t=new Jt("123456789"),e=0;3>e;e++)for(var n=0;3>n;n++)t.setCharAt(3*e+n,K.toDimensionSymbol(this.matrix[e][n]));return t.toString()},setAll:function(t){for(var e=0;3>e;e++)for(var n=0;3>n;n++)this.matrix[e][n]=t},get:function(t,e){return this.matrix[t][e]},transpose:function(){var t=this.matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=t,t=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=t,t=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=t,this},matches:function(t){if(t.length!==9)throw new d;for(var e=0;3>e;e++)for(var n=0;3>n;n++)if(!yt.matches(this.matrix[e][n],t.charAt(3*e+n)))return!1;return!0},add:function(t){for(var e=0;3>e;e++)for(var n=0;3>n;n++)this.setAtLeast(e,n,t.get(e,n))},isDisjoint:function(){return this.matrix[C.INTERIOR][C.INTERIOR]===K.FALSE&&this.matrix[C.INTERIOR][C.BOUNDARY]===K.FALSE&&this.matrix[C.BOUNDARY][C.INTERIOR]===K.FALSE&&this.matrix[C.BOUNDARY][C.BOUNDARY]===K.FALSE},isCrosses:function(t,e){return t===K.P&&e===K.L||t===K.P&&e===K.A||t===K.L&&e===K.A?yt.isTrue(this.matrix[C.INTERIOR][C.INTERIOR])&&yt.isTrue(this.matrix[C.INTERIOR][C.EXTERIOR]):t===K.L&&e===K.P||t===K.A&&e===K.P||t===K.A&&e===K.L?yt.isTrue(this.matrix[C.INTERIOR][C.INTERIOR])&&yt.isTrue(this.matrix[C.EXTERIOR][C.INTERIOR]):t===K.L&&e===K.L?this.matrix[C.INTERIOR][C.INTERIOR]===0:!1},interfaces_:function(){return[w]},getClass:function(){return yt}}),yt.matches=function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var t=arguments[0],e=arguments[1];return e===K.SYM_DONTCARE||e===K.SYM_TRUE&&(t>=0||t===K.TRUE)||e===K.SYM_FALSE&&t===K.FALSE||e===K.SYM_P&&t===K.P||e===K.SYM_L&&t===K.L?!0:e===K.SYM_A&&t===K.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var n=arguments[0],s=arguments[1],a=new yt(n);return a.matches(s)}},yt.isTrue=function(t){return t>=0||t===K.TRUE};var Ih=Object.freeze({Coordinate:P,CoordinateList:V,Envelope:G,LineSegment:st,GeometryFactory:St,Geometry:Q,Point:Qt,LineString:It,LinearRing:ie,Polygon:Ft,GeometryCollection:Nt,MultiPoint:Te,MultiLineString:De,MultiPolygon:Le,Dimension:K,IntersectionMatrix:yt});f(an.prototype,{addPoint:function(t){this.ptCount+=1,this.ptCentSum.x+=t.x,this.ptCentSum.y+=t.y},setBasePoint:function(t){this.areaBasePt===null&&(this.areaBasePt=t)},addLineSegments:function(t){for(var e=0,n=0;n<t.length-1;n++){var s=t[n].distance(t[n+1]);if(s!==0){e+=s;var a=(t[n].x+t[n+1].x)/2;this.lineCentSum.x+=s*a;var g=(t[n].y+t[n+1].y)/2;this.lineCentSum.y+=s*g}}this.totalLength+=e,e===0&&t.length>0&&this.addPoint(t[0])},addHole:function(t){for(var e=et.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},getCentroid:function(){var t=new P;if(Math.abs(this.areasum2)>0)t.x=this.cg3.x/3/this.areasum2,t.y=this.cg3.y/3/this.areasum2;else if(this.totalLength>0)t.x=this.lineCentSum.x/this.totalLength,t.y=this.lineCentSum.y/this.totalLength;else{if(!(this.ptCount>0))return null;t.x=this.ptCentSum.x/this.ptCount,t.y=this.ptCentSum.y/this.ptCount}return t},addShell:function(t){t.length>0&&this.setBasePoint(t[0]);for(var e=!et.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},addTriangle:function(t,e,n,s){var a=s?1:-1;an.centroid3(t,e,n,this.triangleCent3);var g=an.area2(t,e,n);this.cg3.x+=a*g*this.triangleCent3.x,this.cg3.y+=a*g*this.triangleCent3.y,this.areasum2+=a*g},add:function(){if(arguments[0]instanceof Ft){var t=arguments[0];this.addShell(t.getExteriorRing().getCoordinates());for(var e=0;e<t.getNumInteriorRing();e++)this.addHole(t.getInteriorRingN(e).getCoordinates())}else if(arguments[0]instanceof Q){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof Qt)this.addPoint(n.getCoordinate());else if(n instanceof It)this.addLineSegments(n.getCoordinates());else if(n instanceof Ft){var s=n;this.add(s)}else if(n instanceof Nt)for(var a=n,e=0;e<a.getNumGeometries();e++)this.add(a.getGeometryN(e))}},interfaces_:function(){return[]},getClass:function(){return an}}),an.area2=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)},an.centroid3=function(t,e,n,s){return s.x=t.x+e.x+n.x,s.y=t.y+e.y+n.y,null},an.getCentroid=function(t){var e=new an(t);return e.getCentroid()},Ci.prototype=new Error,Ci.prototype.name="EmptyStackException",$t.prototype=new R,$t.prototype.add=function(t){return this.array_.push(t),!0},$t.prototype.get=function(t){if(0>t||t>=this.size())throw new IndexOutOfBoundsException;return this.array_[t]},$t.prototype.push=function(t){return this.array_.push(t),t},$t.prototype.pop=function(t){if(this.array_.length===0)throw new Ci;return this.array_.pop()},$t.prototype.peek=function(){if(this.array_.length===0)throw new Ci;return this.array_[this.array_.length-1]},$t.prototype.empty=function(){return this.array_.length===0},$t.prototype.isEmpty=function(){return this.empty()},$t.prototype.search=function(t){return this.array_.indexOf(t)},$t.prototype.size=function(){return this.array_.length},$t.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},f(Xi.prototype,{filter:function(t){this.treeSet.contains(t)||(this.list.add(t),this.treeSet.add(t))},getCoordinates:function(){var t=new Array(this.list.size()).fill(null);return this.list.toArray(t)},interfaces_:function(){return[Vt]},getClass:function(){return Xi}}),Xi.filterCoordinates=function(t){for(var e=new Xi,n=0;n<t.length;n++)e.filter(t[n]);return e.getCoordinates()},f(Ye.prototype,{preSort:function(t){for(var e=null,n=1;n<t.length;n++)(t[n].y<t[0].y||t[n].y===t[0].y&&t[n].x<t[0].x)&&(e=t[0],t[0]=t[n],t[n]=e);return yn.sort(t,1,t.length,new un(t[0])),t},computeOctRing:function(t){var e=this.computeOctPts(t),n=new V;return n.add(e,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray())},lineOrPolygon:function(t){if(t=this.cleanRing(t),t.length===3)return this.geomFactory.createLineString([t[0],t[1]]);var e=this.geomFactory.createLinearRing(t);return this.geomFactory.createPolygon(e,null)},cleanRing:function(t){k.equals(t[0],t[t.length-1]);for(var e=new F,n=null,s=0;s<=t.length-2;s++){var a=t[s],g=t[s+1];a.equals(g)||n!==null&&this.isBetween(n,a,g)||(e.add(a),n=a)}e.add(t[t.length-1]);var v=new Array(e.size()).fill(null);return e.toArray(v)},isBetween:function(t,e,n){return et.computeOrientation(t,e,n)!==0?!1:t.x!==n.x&&(t.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=t.x)||t.y!==n.y&&(t.y<=e.y&&e.y<=n.y||n.y<=e.y&&e.y<=t.y)},reduce:function(t){var e=this.computeOctRing(t);if(e===null)return t;for(var n=new Ie,s=0;s<e.length;s++)n.add(e[s]);for(var s=0;s<t.length;s++)et.isPointInRing(t[s],e)||n.add(t[s]);var a=dt.toCoordinateArray(n);return a.length<3?this.padArray3(a):a},getConvexHull:function(){if(this.inputPts.length===0)return this.geomFactory.createGeometryCollection(null);if(this.inputPts.length===1)return this.geomFactory.createPoint(this.inputPts[0]);if(this.inputPts.length===2)return this.geomFactory.createLineString(this.inputPts);var t=this.inputPts;this.inputPts.length>50&&(t=this.reduce(this.inputPts));var e=this.preSort(t),n=this.grahamScan(e),s=this.toCoordinateArray(n);return this.lineOrPolygon(s)},padArray3:function(t){for(var e=new Array(3).fill(null),n=0;n<e.length;n++)n<t.length?e[n]=t[n]:e[n]=t[0];return e},computeOctPts:function(t){for(var e=new Array(8).fill(null),n=0;n<e.length;n++)e[n]=t[0];for(var s=1;s<t.length;s++)t[s].x<e[0].x&&(e[0]=t[s]),t[s].x-t[s].y<e[1].x-e[1].y&&(e[1]=t[s]),t[s].y>e[2].y&&(e[2]=t[s]),t[s].x+t[s].y>e[3].x+e[3].y&&(e[3]=t[s]),t[s].x>e[4].x&&(e[4]=t[s]),t[s].x-t[s].y>e[5].x-e[5].y&&(e[5]=t[s]),t[s].y<e[6].y&&(e[6]=t[s]),t[s].x+t[s].y<e[7].x+e[7].y&&(e[7]=t[s]);return e},toCoordinateArray:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var s=t.get(n);e[n]=s}return e},grahamScan:function(t){var e=null,n=new $t;e=n.push(t[0]),e=n.push(t[1]),e=n.push(t[2]);for(var s=3;s<t.length;s++){for(e=n.pop();!n.empty()&&et.computeOrientation(n.peek(),e,t[s])>0;)e=n.pop();e=n.push(e),e=n.push(t[s])}return e=n.push(t[0]),n},interfaces_:function(){return[]},getClass:function(){return Ye}}),Ye.extractCoordinates=function(t){var e=new Xi;return t.apply(e),e.getCoordinates()},f(un.prototype,{compare:function(t,e){var n=t,s=e;return un.polarCompare(this.origin,n,s)},interfaces_:function(){return[I]},getClass:function(){return un}}),un.polarCompare=function(t,e,n){var s=e.x-t.x,a=e.y-t.y,g=n.x-t.x,v=n.y-t.y,x=et.computeOrientation(t,e,n);if(x===et.COUNTERCLOCKWISE)return 1;if(x===et.CLOCKWISE)return-1;var S=s*s+a*a,O=g*g+v*v;return O>S?-1:S>O?1:0},Ye.RadialComparator=un,f(Dt.prototype,{transformPoint:function(t,e){return this.factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},transformPolygon:function(t,e){var n=!0,s=this.transformLinearRing(t.getExteriorRing(),t);s!==null&&s instanceof ie&&!s.isEmpty()||(n=!1);for(var a=new F,g=0;g<t.getNumInteriorRing();g++){var v=this.transformLinearRing(t.getInteriorRingN(g),t);v===null||v.isEmpty()||(v instanceof ie||(n=!1),a.add(v))}if(n)return this.factory.createPolygon(s,a.toArray([]));var x=new F;return s!==null&&x.add(s),x.addAll(a),this.factory.buildGeometry(x)},createCoordinateSequence:function(t){return this.factory.getCoordinateSequenceFactory().create(t)},getInputGeometry:function(){return this.inputGeom},transformMultiLineString:function(t,e){for(var n=new F,s=0;s<t.getNumGeometries();s++){var a=this.transformLineString(t.getGeometryN(s),t);a!==null&&(a.isEmpty()||n.add(a))}return this.factory.buildGeometry(n)},transformCoordinates:function(t,e){return this.copy(t)},transformLineString:function(t,e){return this.factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},transformMultiPoint:function(t,e){for(var n=new F,s=0;s<t.getNumGeometries();s++){var a=this.transformPoint(t.getGeometryN(s),t);a!==null&&(a.isEmpty()||n.add(a))}return this.factory.buildGeometry(n)},transformMultiPolygon:function(t,e){for(var n=new F,s=0;s<t.getNumGeometries();s++){var a=this.transformPolygon(t.getGeometryN(s),t);a!==null&&(a.isEmpty()||n.add(a))}return this.factory.buildGeometry(n)},copy:function(t){return t.copy()},transformGeometryCollection:function(t,e){for(var n=new F,s=0;s<t.getNumGeometries();s++){var a=this.transform(t.getGeometryN(s));a!==null&&(this.pruneEmptyGeometry&&a.isEmpty()||n.add(a))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(St.toGeometryArray(n)):this.factory.buildGeometry(n)},transform:function(t){if(this.inputGeom=t,this.factory=t.getFactory(),t instanceof Qt)return this.transformPoint(t,null);if(t instanceof Te)return this.transformMultiPoint(t,null);if(t instanceof ie)return this.transformLinearRing(t,null);if(t instanceof It)return this.transformLineString(t,null);if(t instanceof De)return this.transformMultiLineString(t,null);if(t instanceof Ft)return this.transformPolygon(t,null);if(t instanceof Le)return this.transformMultiPolygon(t,null);if(t instanceof Nt)return this.transformGeometryCollection(t,null);throw new d("Unknown Geometry subtype: "+t.getClass().getName())},transformLinearRing:function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(n===null)return this.factory.createLinearRing(null);var s=n.size();return s>0&&4>s&&!this.preserveType?this.factory.createLineString(n):this.factory.createLinearRing(n)},interfaces_:function(){return[]},getClass:function(){return Dt}}),f(ln.prototype,{snapVertices:function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),s=0;n>s;s++){var a=t.get(s),g=this.findSnapForVertex(a,e);g!==null&&(t.set(s,new P(g)),s===0&&this._isClosed&&t.set(t.size()-1,new P(g)))}},findSnapForVertex:function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this.snapTolerance)return e[n]}return null},snapTo:function(t){var e=new V(this.srcPts);this.snapVertices(e,t),this.snapSegments(e,t);var n=e.toCoordinateArray();return n},snapSegments:function(t,e){if(e.length===0)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var s=0;n>s;s++){var a=e[s],g=this.findSegmentIndexToSnap(a,t);g>=0&&t.add(g+1,new P(a),!1)}},findSegmentIndexToSnap:function(t,e){for(var n=m.MAX_VALUE,s=-1,a=0;a<e.size()-1;a++){if(this.seg.p0=e.get(a),this.seg.p1=e.get(a+1),this.seg.p0.equals2D(t)||this.seg.p1.equals2D(t)){if(this.allowSnappingToSourceVertices)continue;return-1}var g=this.seg.distance(t);g<this.snapTolerance&&n>g&&(n=g,s=a)}return s},setAllowSnappingToSourceVertices:function(t){this.allowSnappingToSourceVertices=t},interfaces_:function(){return[]},getClass:function(){return ln}}),ln.isClosed=function(t){return t.length<=1?!1:t[0].equals2D(t[t.length-1])},f(ye.prototype,{snapTo:function(t,e){var n=this.extractTargetCoordinates(t),s=new Vn(e,n);return s.transform(this.srcGeom)},snapToSelf:function(t,e){var n=this.extractTargetCoordinates(this.srcGeom),s=new Vn(t,n,!0),a=s.transform(this.srcGeom),g=a;return e&&nt(g,Nn)&&(g=a.buffer(0)),g},computeSnapTolerance:function(t){var e=this.computeMinimumSegmentLength(t),n=e/10;return n},extractTargetCoordinates:function(t){for(var e=new Ie,n=t.getCoordinates(),s=0;s<n.length;s++)e.add(n[s]);return e.toArray(new Array(0).fill(null))},computeMinimumSegmentLength:function(t){for(var e=m.MAX_VALUE,n=0;n<t.length-1;n++){var s=t[n].distance(t[n+1]);e>s&&(e=s)}return e},interfaces_:function(){return[]},getClass:function(){return ye}}),ye.snap=function(t,e,n){var s=new Array(2).fill(null),a=new ye(t);s[0]=a.snapTo(e,n);var g=new ye(e);return s[1]=g.snapTo(s[0],n),s},ye.computeOverlaySnapTolerance=function(){if(arguments.length===1){var t=arguments[0],e=ye.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===Mt.FIXED){var s=1/n.getScale()*2/1.415;s>e&&(e=s)}return e}if(arguments.length===2){var a=arguments[0],g=arguments[1];return Math.min(ye.computeOverlaySnapTolerance(a),ye.computeOverlaySnapTolerance(g))}},ye.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal(),n=Math.min(e.getHeight(),e.getWidth()),s=n*ye.SNAP_PRECISION_FACTOR;return s},ye.snapToSelf=function(t,e,n){var s=new ye(t);return s.snapToSelf(e,n)},ye.SNAP_PRECISION_FACTOR=1e-9,T(Vn,Dt),f(Vn.prototype,{snapLine:function(t,e){var n=new ln(t,this.snapTolerance);return n.setAllowSnappingToSourceVertices(this.isSelfSnap),n.snapTo(e)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),s=this.snapLine(n,this.snapPts);return this.factory.getCoordinateSequenceFactory().create(s)},interfaces_:function(){return[]},getClass:function(){return Vn}}),f(ke.prototype,{getCommon:function(){return m.longBitsToDouble(this.commonBits)},add:function(t){var e=m.doubleToLongBits(t);if(this.isFirst)return this.commonBits=e,this.commonSignExp=ke.signExpBits(this.commonBits),this.isFirst=!1,null;var n=ke.signExpBits(e);return n!==this.commonSignExp?(this.commonBits=0,null):(this.commonMantissaBitsCount=ke.numCommonMostSigMantissaBits(this.commonBits,e),void(this.commonBits=ke.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))))},toString:function(){if(arguments.length===1){var t=arguments[0],e=m.longBitsToDouble(t),n=Long.toBinaryString(t),s="0000000000000000000000000000000000000000000000000000000000000000"+n,a=s.substring(s.length-64),g=a.substring(0,1)+"  "+a.substring(1,12)+"(exp) "+a.substring(12)+" [ "+e+" ]";return g}},interfaces_:function(){return[]},getClass:function(){return ke}}),ke.getBit=function(t,e){var n=1<<e;return(t&n)!==0?1:0},ke.signExpBits=function(t){return t>>52},ke.zeroLowerBits=function(t,e){var n=(1<<e)-1,s=~n,a=t&s;return a},ke.numCommonMostSigMantissaBits=function(t,e){for(var n=0,s=52;s>=0;s--){if(ke.getBit(t,s)!==ke.getBit(e,s))return n;n++}return 52},f(Zn.prototype,{addCommonBits:function(t){var e=new Si(this.commonCoord);t.apply(e),t.geometryChanged()},removeCommonBits:function(t){if(this.commonCoord.x===0&&this.commonCoord.y===0)return t;var e=new P(this.commonCoord);e.x=-e.x,e.y=-e.y;var n=new Si(e);return t.apply(n),t.geometryChanged(),t},getCommonCoordinate:function(){return this.commonCoord},add:function(t){t.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate()},interfaces_:function(){return[]},getClass:function(){return Zn}}),f(Yi.prototype,{filter:function(t){this.commonBitsX.add(t.x),this.commonBitsY.add(t.y)},getCommonCoordinate:function(){return new P(this.commonBitsX.getCommon(),this.commonBitsY.getCommon())},interfaces_:function(){return[Vt]},getClass:function(){return Yi}}),f(Si.prototype,{filter:function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,s=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,s)},isDone:function(){return!1},isGeometryChanged:function(){return!0},interfaces_:function(){return[ni]},getClass:function(){return Si}}),Zn.CommonCoordinateFilter=Yi,Zn.Translater=Si,f(Tn.prototype,{next:function(){if(this.atStart)return this.atStart=!1,Tn.isAtomic(this.parent)&&this.index++,this.parent;if(this.subcollectionIterator!==null){if(this.subcollectionIterator.hasNext())return this.subcollectionIterator.next();this.subcollectionIterator=null}if(this.index>=this.max)throw new Z;var t=this.parent.getGeometryN(this.index++);return t instanceof Nt?(this.subcollectionIterator=new Tn(t),this.subcollectionIterator.next()):t},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){if(this.atStart)return!0;if(this.subcollectionIterator!==null){if(this.subcollectionIterator.hasNext())return!0;this.subcollectionIterator=null}return!(this.index>=this.max)},interfaces_:function(){return[ot]},getClass:function(){return Tn}}),Tn.isAtomic=function(t){return!(t instanceof Nt)},f(Hn.prototype,{locateInternal:function(){if(arguments[0]instanceof P&&arguments[1]instanceof Ft){var t=arguments[0],e=arguments[1];if(e.isEmpty())return C.EXTERIOR;var n=e.getExteriorRing(),s=this.locateInPolygonRing(t,n);if(s===C.EXTERIOR)return C.EXTERIOR;if(s===C.BOUNDARY)return C.BOUNDARY;for(var a=0;a<e.getNumInteriorRing();a++){var g=e.getInteriorRingN(a),v=this.locateInPolygonRing(t,g);if(v===C.INTERIOR)return C.EXTERIOR;if(v===C.BOUNDARY)return C.BOUNDARY}return C.INTERIOR}if(arguments[0]instanceof P&&arguments[1]instanceof It){var x=arguments[0],S=arguments[1];if(!S.getEnvelopeInternal().intersects(x))return C.EXTERIOR;var O=S.getCoordinates();return S.isClosed()||!x.equals(O[0])&&!x.equals(O[O.length-1])?et.isOnLine(x,O)?C.INTERIOR:C.EXTERIOR:C.BOUNDARY}if(arguments[0]instanceof P&&arguments[1]instanceof Qt){var B=arguments[0],H=arguments[1],J=H.getCoordinate();return J.equals2D(B)?C.INTERIOR:C.EXTERIOR}},locateInPolygonRing:function(t,e){return e.getEnvelopeInternal().intersects(t)?et.locatePointInRing(t,e.getCoordinates()):C.EXTERIOR},intersects:function(t,e){return this.locate(t,e)!==C.EXTERIOR},updateLocationInfo:function(t){t===C.INTERIOR&&(this.isIn=!0),t===C.BOUNDARY&&this.numBoundaries++},computeLocation:function(t,e){if(e instanceof Qt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof It)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Ft)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof De)for(var n=e,s=0;s<n.getNumGeometries();s++){var a=n.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof Le)for(var g=e,s=0;s<g.getNumGeometries();s++){var v=g.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,v))}else if(e instanceof Nt)for(var x=new Tn(e);x.hasNext();){var S=x.next();S!==e&&this.computeLocation(t,S)}},locate:function(t,e){return e.isEmpty()?C.EXTERIOR:e instanceof It?this.locateInternal(t,e):e instanceof Ft?this.locateInternal(t,e):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(t,e),this.boundaryRule.isInBoundary(this.numBoundaries)?C.BOUNDARY:this.numBoundaries>0||this.isIn?C.INTERIOR:C.EXTERIOR)},interfaces_:function(){return[]},getClass:function(){return Hn}}),f(ii.prototype,{interfaces_:function(){return[]},getClass:function(){return ii}}),ii.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new d;var n=Math.abs(t),s=Math.abs(e);return t>=0?e>=0?n>=s?0:1:n>=s?7:6:e>=0?n>=s?3:2:n>=s?4:5}if(arguments[0]instanceof P&&arguments[1]instanceof P){var a=arguments[0],g=arguments[1],v=g.x-a.x,x=g.y-a.y;if(v===0&&x===0)throw new d;return ii.octant(v,x)}},f(ri.prototype,{getCoordinates:function(){},size:function(){},getCoordinate:function(t){},isClosed:function(){},setData:function(t){},getData:function(){},interfaces_:function(){return[]},getClass:function(){return ri}}),f(os.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:ii.octant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},getData:function(){return this.data},toString:function(){return wt.toLineString(new qe(this.pts))},interfaces_:function(){return[ri]},getClass:function(){return os}}),f(Ji.prototype,{getBounds:function(){},interfaces_:function(){return[]},getClass:function(){return Ji}}),f(Pn.prototype,{getItem:function(){return this.item},getBounds:function(){return this.bounds},interfaces_:function(){return[Ji,b]},getClass:function(){return Pn}}),f(Tt.prototype,{poll:function(){if(this.isEmpty())return null;var t=this.items.get(1);return this.items.set(1,this.items.get(this._size)),this._size-=1,this.reorder(1),t},size:function(){return this._size},reorder:function(t){for(var e=null,n=this.items.get(t);2*t<=this._size&&(e=2*t,e!==this._size&&this.items.get(e+1).compareTo(this.items.get(e))<0&&e++,this.items.get(e).compareTo(n)<0);t=e)this.items.set(t,this.items.get(e));this.items.set(t,n)},clear:function(){this._size=0,this.items.clear()},isEmpty:function(){return this._size===0},add:function(t){this.items.add(null),this._size+=1;var e=this._size;for(this.items.set(0,t);t.compareTo(this.items.get(Math.trunc(e/2)))<0;e/=2)this.items.set(e,this.items.get(Math.trunc(e/2)));this.items.set(e,t)},interfaces_:function(){return[]},getClass:function(){return Tt}}),f(Pe.prototype,{visitItem:function(t){},interfaces_:function(){return[]},getClass:function(){return Pe}}),f(Wt.prototype,{insert:function(t,e){},remove:function(t,e){},query:function(){},interfaces_:function(){return[]},getClass:function(){return Wt}}),f(Ce.prototype,{getLevel:function(){return this.level},size:function(){return this.childBoundables.size()},getChildBoundables:function(){return this.childBoundables},addChildBoundable:function(t){k.isTrue(this.bounds===null),this.childBoundables.add(t)},isEmpty:function(){return this.childBoundables.isEmpty()},getBounds:function(){return this.bounds===null&&(this.bounds=this.computeBounds()),this.bounds},interfaces_:function(){return[Ji,b]},getClass:function(){return Ce}}),Ce.serialVersionUID=6493722185909574e3;var ti={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return ti.sort(t),t.get(0)},sort:function(t,e){var n=t.toArray();e?yn.sort(n,e):yn.sort(n);for(var s=t.iterator(),a=0,g=n.length;g>a;a++)s.next(),s.set(n[a])},singletonList:function(t){var e=new F;return e.add(t),e}};f(Se.prototype,{expandToQueue:function(t,e){var n=Se.isComposite(this.boundable1),s=Se.isComposite(this.boundable2);if(n&&s)return Se.area(this.boundable1)>Se.area(this.boundable2)?(this.expand(this.boundable1,this.boundable2,t,e),null):(this.expand(this.boundable2,this.boundable1,t,e),null);if(n)return this.expand(this.boundable1,this.boundable2,t,e),null;if(s)return this.expand(this.boundable2,this.boundable1,t,e),null;throw new d},isLeaves:function(){return!(Se.isComposite(this.boundable1)||Se.isComposite(this.boundable2))},compareTo:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},expand:function(t,e,n,s){for(var a=t.getChildBoundables(),g=a.iterator();g.hasNext();){var v=g.next(),x=new Se(v,e,this.itemDistance);x.getDistance()<s&&n.add(x)}},getBoundable:function(t){return t===0?this.boundable1:this.boundable2},getDistance:function(){return this._distance},distance:function(){return this.isLeaves()?this.itemDistance.distance(this.boundable1,this.boundable2):this.boundable1.getBounds().distance(this.boundable2.getBounds())},interfaces_:function(){return[_]},getClass:function(){return Se}}),Se.area=function(t){return t.getBounds().getArea()},Se.isComposite=function(t){return t instanceof Ce},f(ee.prototype,{getNodeCapacity:function(){return this.nodeCapacity},lastNode:function(t){return t.get(t.size()-1)},size:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this.root));if(arguments.length===1){for(var e=arguments[0],n=0,s=e.getChildBoundables().iterator();s.hasNext();){var a=s.next();a instanceof Ce?n+=this.size(a):a instanceof Pn&&(n+=1)}return n}},removeItem:function(t,e){for(var n=null,s=t.getChildBoundables().iterator();s.hasNext();){var a=s.next();a instanceof Pn&&a.getItem()===e&&(n=a)}return n!==null?(t.getChildBoundables().remove(n),!0):!1},itemsTree:function(){if(arguments.length===0){this.build();var t=this.itemsTree(this.root);return t===null?new F:t}if(arguments.length===1){for(var e=arguments[0],n=new F,s=e.getChildBoundables().iterator();s.hasNext();){var a=s.next();if(a instanceof Ce){var g=this.itemsTree(a);g!==null&&n.add(g)}else a instanceof Pn?n.add(a.getItem()):k.shouldNeverReachHere()}return n.size()<=0?null:n}},insert:function(t,e){k.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.add(new Pn(t,e))},boundablesAtLevel:function(){if(arguments.length===1){var t=arguments[0],e=new F;return this.boundablesAtLevel(t,this.root,e),e}if(arguments.length===3){var n=arguments[0],s=arguments[1],a=arguments[2];if(k.isTrue(n>-2),s.getLevel()===n)return a.add(s),null;for(var g=s.getChildBoundables().iterator();g.hasNext();){var v=g.next();v instanceof Ce?this.boundablesAtLevel(n,v,a):(k.isTrue(v instanceof Pn),n===-1&&a.add(v))}return null}},query:function(){if(arguments.length===1){var t=arguments[0];this.build();var e=new F;return this.isEmpty()||this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.query(t,this.root,e),e}if(arguments.length===2){var n=arguments[0],s=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this.root.getBounds(),n)&&this.query(n,this.root,s)}else if(arguments.length===3){if(nt(arguments[2],Pe)&&arguments[0]instanceof Object&&arguments[1]instanceof Ce)for(var a=arguments[0],g=arguments[1],v=arguments[2],x=g.getChildBoundables(),S=0;S<x.size();S++){var O=x.get(S);this.getIntersectsOp().intersects(O.getBounds(),a)&&(O instanceof Ce?this.query(a,O,v):O instanceof Pn?v.visitItem(O.getItem()):k.shouldNeverReachHere())}else if(nt(arguments[2],R)&&arguments[0]instanceof Object&&arguments[1]instanceof Ce)for(var B=arguments[0],H=arguments[1],J=arguments[2],x=H.getChildBoundables(),S=0;S<x.size();S++){var O=x.get(S);this.getIntersectsOp().intersects(O.getBounds(),B)&&(O instanceof Ce?this.query(B,O,J):O instanceof Pn?J.add(O.getItem()):k.shouldNeverReachHere())}}},build:function(){return this.built?null:(this.root=this.itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.itemBoundables=null,void(this.built=!0))},getRoot:function(){return this.build(),this.root},remove:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.build(),this.getIntersectsOp().intersects(this.root.getBounds(),t)?this.remove(t,this.root,e):!1}if(arguments.length===3){var n=arguments[0],s=arguments[1],a=arguments[2],g=this.removeItem(s,a);if(g)return!0;for(var v=null,x=s.getChildBoundables().iterator();x.hasNext();){var S=x.next();if(this.getIntersectsOp().intersects(S.getBounds(),n)&&S instanceof Ce&&(g=this.remove(n,S,a))){v=S;break}}return v!==null&&v.getChildBoundables().isEmpty()&&s.getChildBoundables().remove(v),g}},createHigherLevels:function(t,e){k.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return n.size()===1?n.get(0):this.createHigherLevels(n,e+1)},depth:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this.root));if(arguments.length===1){for(var t=arguments[0],e=0,n=t.getChildBoundables().iterator();n.hasNext();){var s=n.next();if(s instanceof Ce){var a=this.depth(s);a>e&&(e=a)}}return e+1}},createParentBoundables:function(t,e){k.isTrue(!t.isEmpty());var n=new F;n.add(this.createNode(e));var s=new F(t);ti.sort(s,this.getComparator());for(var a=s.iterator();a.hasNext();){var g=a.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(g)}return n},isEmpty:function(){return this.built?this.root.isEmpty():this.itemBoundables.isEmpty()},interfaces_:function(){return[b]},getClass:function(){return ee}}),ee.compareDoubles=function(t,e){return t>e?1:e>t?-1:0},ee.IntersectsOp=Zs,ee.serialVersionUID=-3886435814360241e3,ee.DEFAULT_NODE_CAPACITY=10,f(Mn.prototype,{distance:function(t,e){},interfaces_:function(){return[]},getClass:function(){return Mn}}),T(Zt,ee),f(Zt.prototype,{createParentBoundablesFromVerticalSlices:function(t,e){k.isTrue(t.length>0);for(var n=new F,s=0;s<t.length;s++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[s],e));return n},createNode:function(t){return new Wn(t)},size:function(){return arguments.length===0?ee.prototype.size.call(this):ee.prototype.size.apply(this,arguments)},insert:function(){if(arguments.length!==2)return ee.prototype.insert.apply(this,arguments);var t=arguments[0],e=arguments[1];return t.isNull()?null:void ee.prototype.insert.call(this,t,e)},getIntersectsOp:function(){return Zt.intersectsOp},verticalSlices:function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),s=new Array(e).fill(null),a=t.iterator(),g=0;e>g;g++){s[g]=new F;for(var v=0;a.hasNext()&&n>v;){var x=a.next();s[g].add(x),v++}}return s},query:function(){if(arguments.length===1){var t=arguments[0];return ee.prototype.query.call(this,t)}if(arguments.length===2){var e=arguments[0],n=arguments[1];ee.prototype.query.call(this,e,n)}else if(arguments.length===3){if(nt(arguments[2],Pe)&&arguments[0]instanceof Object&&arguments[1]instanceof Ce){var s=arguments[0],a=arguments[1],g=arguments[2];ee.prototype.query.call(this,s,a,g)}else if(nt(arguments[2],R)&&arguments[0]instanceof Object&&arguments[1]instanceof Ce){var v=arguments[0],x=arguments[1],S=arguments[2];ee.prototype.query.call(this,v,x,S)}}},getComparator:function(){return Zt.yComparator},createParentBoundablesFromVerticalSlice:function(t,e){return ee.prototype.createParentBoundables.call(this,t,e)},remove:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return ee.prototype.remove.call(this,t,e)}return ee.prototype.remove.apply(this,arguments)},depth:function(){return arguments.length===0?ee.prototype.depth.call(this):ee.prototype.depth.apply(this,arguments)},createParentBoundables:function(t,e){k.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),s=new F(t);ti.sort(s,Zt.xComparator);var a=this.verticalSlices(s,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(a,e)},nearestNeighbour:function(){if(arguments.length===1){if(nt(arguments[0],Mn)){var t=arguments[0],e=new Se(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof Se){var n=arguments[0];return this.nearestNeighbour(n,m.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof Zt&&nt(arguments[1],Mn)){var s=arguments[0],a=arguments[1],e=new Se(this.getRoot(),s.getRoot(),a);return this.nearestNeighbour(e)}if(arguments[0]instanceof Se&&typeof arguments[1]=="number"){var g=arguments[0],v=arguments[1],x=v,S=null,O=new Tt;for(O.add(g);!O.isEmpty()&&x>0;){var B=O.poll(),H=B.getDistance();if(H>=x)break;B.isLeaves()?(x=H,S=B):B.expandToQueue(O,x)}return[S.getBoundable(0).getItem(),S.getBoundable(1).getItem()]}}else if(arguments.length===3){var J=arguments[0],ut=arguments[1],pt=arguments[2],Lt=new Pn(J,ut),e=new Se(this.getRoot(),Lt,pt);return this.nearestNeighbour(e)[0]}},interfaces_:function(){return[Wt,b]},getClass:function(){return Zt}}),Zt.centreX=function(t){return Zt.avg(t.getMinX(),t.getMaxX())},Zt.avg=function(t,e){return(t+e)/2},Zt.centreY=function(t){return Zt.avg(t.getMinY(),t.getMaxY())},T(Wn,Ce),f(Wn.prototype,{computeBounds:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();t===null?t=new G(n.getBounds()):t.expandToInclude(n.getBounds())}return t},interfaces_:function(){return[]},getClass:function(){return Wn}}),Zt.STRtreeNode=Wn,Zt.serialVersionUID=0x39920f7d5f261e0,Zt.xComparator={interfaces_:function(){return[I]},compare:function(t,e){return ee.compareDoubles(Zt.centreX(t.getBounds()),Zt.centreX(e.getBounds()))}},Zt.yComparator={interfaces_:function(){return[I]},compare:function(t,e){return ee.compareDoubles(Zt.centreY(t.getBounds()),Zt.centreY(e.getBounds()))}},Zt.intersectsOp={interfaces_:function(){return[IntersectsOp]},intersects:function(t,e){return t.intersects(e)}},Zt.DEFAULT_NODE_CAPACITY=10,f(qt.prototype,{interfaces_:function(){return[]},getClass:function(){return qt}}),qt.relativeSign=function(t,e){return e>t?-1:t>e?1:0},qt.compare=function(t,e,n){if(e.equals2D(n))return 0;var s=qt.relativeSign(e.x,n.x),a=qt.relativeSign(e.y,n.y);switch(t){case 0:return qt.compareValue(s,a);case 1:return qt.compareValue(a,s);case 2:return qt.compareValue(a,-s);case 3:return qt.compareValue(-s,a);case 4:return qt.compareValue(-s,-a);case 5:return qt.compareValue(-a,-s);case 6:return qt.compareValue(-a,s);case 7:return qt.compareValue(s,-a)}return k.shouldNeverReachHere("invalid octant value"),0},qt.compareValue=function(t,e){return 0>t?-1:t>0?1:0>e?-1:e>0?1:0},f(Xn.prototype,{getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},compareTo:function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:qt.compare(this.segmentOctant,this.coord,e.coord)},isEndPoint:function(t){return this.segmentIndex!==0||this._isInterior?this.segmentIndex===t:!0},isInterior:function(){return this._isInterior},interfaces_:function(){return[_]},getClass:function(){return Xn}}),f(as.prototype,{getSplitCoordinates:function(){var t=new V;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var s=e.next();this.addEdgeCoordinates(n,s,t),n=s}return t.toCoordinateArray()},addCollapsedNodes:function(){var t=new F;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this.edge.getCoordinate(n),n)}},print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},findCollapsesFromExistingVertices:function(t){for(var e=0;e<this.edge.size()-2;e++){var n=this.edge.getCoordinate(e),s=(this.edge.getCoordinate(e+1),this.edge.getCoordinate(e+2));n.equals2D(s)&&t.add(new Rt(e+1))}},addEdgeCoordinates:function(t,e,n){e.segmentIndex-t.segmentIndex+2;var s=this.edge.getCoordinate(e.segmentIndex),a=e.isInterior()||!e.coord.equals2D(s);n.add(new P(t.coord),!1);for(var g=t.segmentIndex+1;g<=e.segmentIndex;g++)n.add(this.edge.getCoordinate(g));a&&n.add(new P(e.coord))},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var s=e.next(),a=this.createSplitEdge(n,s);t.add(a),n=s}},findCollapseIndex:function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var s=e.segmentIndex-t.segmentIndex;return e.isInterior()||s--,s===1?(n[0]=t.segmentIndex+1,!0):!1},findCollapsesFromInsertedNodes:function(t){for(var e=new Array(1).fill(null),n=this.iterator(),s=n.next();n.hasNext();){var a=n.next(),g=this.findCollapseIndex(s,a,e);g&&t.add(new Rt(e[0])),s=a}},getEdge:function(){return this.edge},addEndpoints:function(){var t=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(t),t)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,s=this.edge.getCoordinate(e.segmentIndex),a=e.isInterior()||!e.coord.equals2D(s);a||n--;var g=new Array(n).fill(null),v=0;g[v++]=new P(t.coord);for(var x=t.segmentIndex+1;x<=e.segmentIndex;x++)g[v++]=this.edge.getCoordinate(x);return a&&(g[v]=new P(e.coord)),new Je(g,this.edge.getData())},add:function(t,e){var n=new Xn(this.edge,t,e,this.edge.getSegmentOctant(e)),s=this.nodeMap.get(n);return s!==null?(k.isTrue(s.coord.equals2D(t),"Found equal nodes with different coordinates"),s):(this.nodeMap.put(n,n),n)},checkSplitEdgesCorrectness:function(t){var e=this.edge.getCoordinates(),n=t.get(0),s=n.getCoordinate(0);if(!s.equals2D(e[0]))throw new M("bad split edge start point at "+s);var a=t.get(t.size()-1),g=a.getCoordinates(),v=g[g.length-1];if(!v.equals2D(e[e.length-1]))throw new M("bad split edge end point at "+v)},interfaces_:function(){return[]},getClass:function(){return as}}),f(Po.prototype,{next:function(){return this.currNode===null?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):this.nextNode===null?null:this.nextNode.segmentIndex===this.currNode.segmentIndex?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):(this.nextNode.segmentIndex>this.currNode.segmentIndex,null)},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){return this.nextNode!==null},readNextNode:function(){this.nodeIt.hasNext()?this.nextNode=this.nodeIt.next():this.nextNode=null},interfaces_:function(){return[ot]},getClass:function(){return Po}}),f(us.prototype,{addIntersection:function(t,e){},interfaces_:function(){return[ri]},getClass:function(){return us}}),f(Je.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},safeOctant:function(t,e){return t.equals2D(e)?0:ii.octant(t,e)},getData:function(){return this.data},addIntersection:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(arguments.length===4){var n=arguments[0],s=arguments[1],a=arguments[3],g=new P(n.getIntersection(a));this.addIntersection(g,s)}},toString:function(){return wt.toLineString(new qe(this.pts))},getNodeList:function(){return this.nodeList},addIntersectionNode:function(t,e){var n=e,s=n+1;if(s<this.pts.length){var a=this.pts[s];t.equals2D(a)&&(n=s)}var g=this.nodeList.add(t,n);return g},addIntersections:function(t,e,n){for(var s=0;s<t.getIntersectionNum();s++)this.addIntersection(t,e,n,s)},interfaces_:function(){return[us]},getClass:function(){return Je}}),Je.getNodedSubstrings=function(){if(arguments.length===1){var t=arguments[0],e=new F;return Je.getNodedSubstrings(t,e),e}if(arguments.length===2)for(var n=arguments[0],s=arguments[1],a=n.iterator();a.hasNext();){var g=a.next();g.getNodeList().addSplitEdges(s)}},f(Mr.prototype,{overlap:function(){if(arguments.length!==2){if(arguments.length===4){var t=arguments[0],e=arguments[1],n=arguments[2],s=arguments[3];t.getLineSegment(e,this.overlapSeg1),n.getLineSegment(s,this.overlapSeg2),this.overlap(this.overlapSeg1,this.overlapSeg2)}}},interfaces_:function(){return[]},getClass:function(){return Mr}}),f(ls.prototype,{getLineSegment:function(t,e){e.p0=this.pts[t],e.p1=this.pts[t+1]},computeSelect:function(t,e,n,s){var a=this.pts[e],g=this.pts[n];if(s.tempEnv1.init(a,g),n-e===1)return s.select(this,e),null;if(!t.intersects(s.tempEnv1))return null;var v=Math.trunc((e+n)/2);v>e&&this.computeSelect(t,e,v,s),n>v&&this.computeSelect(t,v,n,s)},getCoordinates:function(){for(var t=new Array(this.end-this.start+1).fill(null),e=0,n=this.start;n<=this.end;n++)t[e++]=this.pts[n];return t},computeOverlaps:function(t,e){this.computeOverlapsInternal(this.start,this.end,t,t.start,t.end,e)},setId:function(t){this.id=t},select:function(t,e){this.computeSelect(t,this.start,this.end,e)},getEnvelope:function(){if(this.env===null){var t=this.pts[this.start],e=this.pts[this.end];this.env=new G(t,e)}return this.env},getEndIndex:function(){return this.end},getStartIndex:function(){return this.start},getContext:function(){return this.context},getId:function(){return this.id},computeOverlapsInternal:function(t,e,n,s,a,g){var v=this.pts[t],x=this.pts[e],S=n.pts[s],O=n.pts[a];if(e-t===1&&a-s===1)return g.overlap(this,t,n,s),null;if(g.tempEnv1.init(v,x),g.tempEnv2.init(S,O),!g.tempEnv1.intersects(g.tempEnv2))return null;var B=Math.trunc((t+e)/2),H=Math.trunc((s+a)/2);B>t&&(H>s&&this.computeOverlapsInternal(t,B,n,s,H,g),a>H&&this.computeOverlapsInternal(t,B,n,H,a,g)),e>B&&(H>s&&this.computeOverlapsInternal(B,e,n,s,H,g),a>H&&this.computeOverlapsInternal(B,e,n,H,a,g))},interfaces_:function(){return[]},getClass:function(){return ls}}),f(ht.prototype,{interfaces_:function(){return[]},getClass:function(){return ht}}),ht.isNorthern=function(t){return t===ht.NE||t===ht.NW},ht.isOpposite=function(t,e){if(t===e)return!1;var n=(t-e+4)%4;return n===2},ht.commonHalfPlane=function(t,e){if(t===e)return t;var n=(t-e+4)%4;if(n===2)return-1;var s=e>t?t:e,a=t>e?t:e;return s===0&&a===3?3:s},ht.isInHalfPlane=function(t,e){return e===ht.SE?t===ht.SE||t===ht.SW:t===e||t===e+1},ht.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new d;return t>=0?e>=0?ht.NE:ht.SE:e>=0?ht.NW:ht.SW}if(arguments[0]instanceof P&&arguments[1]instanceof P){var n=arguments[0],s=arguments[1];if(s.x===n.x&&s.y===n.y)throw new d;return s.x>=n.x?s.y>=n.y?ht.NE:ht.SE:s.y>=n.y?ht.NW:ht.SW}},ht.NE=0,ht.NW=1,ht.SW=2,ht.SE=3,f(hn.prototype,{interfaces_:function(){return[]},getClass:function(){return hn}}),hn.getChainStartIndices=function(t){var e=0,n=new F;n.add(new Rt(e));do{var s=hn.findChainEnd(t,e);n.add(new Rt(s)),e=s}while(e<t.length-1);var a=hn.toIntArray(n);return a},hn.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var s=ht.quadrant(t[n],t[n+1]),a=e+1;a<t.length;){if(!t[a-1].equals2D(t[a])){var g=ht.quadrant(t[a-1],t[a]);if(g!==s)break}a++}return a-1},hn.getChains=function(){if(arguments.length===1){var t=arguments[0];return hn.getChains(t,null)}if(arguments.length===2){for(var e=arguments[0],n=arguments[1],s=new F,a=hn.getChainStartIndices(e),g=0;g<a.length-1;g++){var v=new ls(e,a[g],a[g+1],n);s.add(v)}return s}},hn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},f(Ue.prototype,{computeNodes:function(t){},getNodedSubstrings:function(){},interfaces_:function(){return[]},getClass:function(){return Ue}}),f(si.prototype,{setSegmentIntersector:function(t){this.segInt=t},interfaces_:function(){return[Ue]},getClass:function(){return si}}),T(Yn,si),f(Yn.prototype,{getMonotoneChains:function(){return this.monoChains},getNodedSubstrings:function(){return Je.getNodedSubstrings(this.nodedSegStrings)},getIndex:function(){return this.index},add:function(t){for(var e=hn.getChains(t.getCoordinates(),t),n=e.iterator();n.hasNext();){var s=n.next();s.setId(this.idCounter++),this.index.insert(s.getEnvelope(),s),this.monoChains.add(s)}},computeNodes:function(t){this.nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},intersectChains:function(){for(var t=new Rr(this.segInt),e=this.monoChains.iterator();e.hasNext();)for(var n=e.next(),s=this.index.query(n.getEnvelope()),a=s.iterator();a.hasNext();){var g=a.next();if(g.getId()>n.getId()&&(n.computeOverlaps(g,t),this.nOverlaps++),this.segInt.isDone())return null}},interfaces_:function(){return[]},getClass:function(){return Yn}}),T(Rr,Mr),f(Rr.prototype,{overlap:function(){if(arguments.length!==4)return Mr.prototype.overlap.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2],s=arguments[3],a=t.getContext(),g=n.getContext();this.si.processIntersections(a,e,g,s)},interfaces_:function(){return[]},getClass:function(){return Rr}}),Yn.SegmentOverlapAction=Rr,T(Me,M),f(Me.prototype,{getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Me}}),Me.msgWithCoord=function(t,e){return e!==null?t+" [ "+e+" ]":t},f(Or.prototype,{processIntersections:function(t,e,n,s){},isDone:function(){},interfaces_:function(){return[]},getClass:function(){return Or}}),f(Rn.prototype,{getInteriorIntersection:function(){return this.interiorIntersection},setCheckEndSegmentsOnly:function(t){this.isCheckEndSegmentsOnly=t},getIntersectionSegments:function(){return this.intSegments},count:function(){return this.intersectionCount},getIntersections:function(){return this.intersections},setFindAllIntersections:function(t){this.findAllIntersections=t},setKeepIntersections:function(t){this.keepIntersections=t},processIntersections:function(t,e,n,s){if(!this.findAllIntersections&&this.hasIntersection()||t===n&&e===s)return null;if(this.isCheckEndSegmentsOnly){var a=this.isEndSegment(t,e)||this.isEndSegment(n,s);if(!a)return null}var g=t.getCoordinates()[e],v=t.getCoordinates()[e+1],x=n.getCoordinates()[s],S=n.getCoordinates()[s+1];this.li.computeIntersection(g,v,x,S),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=new Array(4).fill(null),this.intSegments[0]=g,this.intSegments[1]=v,this.intSegments[2]=x,this.intSegments[3]=S,this.interiorIntersection=this.li.getIntersection(0),this.keepIntersections&&this.intersections.add(this.interiorIntersection),this.intersectionCount++)},isEndSegment:function(t,e){return e===0?!0:e>=t.size()-2},hasIntersection:function(){return this.interiorIntersection!==null},isDone:function(){return this.findAllIntersections?!1:this.interiorIntersection!==null},interfaces_:function(){return[Or]},getClass:function(){return Rn}}),Rn.createAllIntersectionsFinder=function(t){var e=new Rn(t);return e.setFindAllIntersections(!0),e},Rn.createAnyIntersectionFinder=function(t){return new Rn(t)},Rn.createIntersectionCounter=function(t){var e=new Rn(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e},f(Ar.prototype,{execute:function(){return this.segInt!==null?null:void this.checkInteriorIntersections()},getIntersections:function(){return this.segInt.getIntersections()},isValid:function(){return this.execute(),this._isValid},setFindAllIntersections:function(t){this.findAllIntersections=t},checkInteriorIntersections:function(){this._isValid=!0,this.segInt=new Rn(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var t=new Yn;return t.setSegmentIntersector(this.segInt),t.computeNodes(this.segStrings),this.segInt.hasIntersection()?(this._isValid=!1,null):void 0},checkValid:function(){if(this.execute(),!this._isValid)throw new Me(this.getErrorMessage(),this.segInt.getInteriorIntersection())},getErrorMessage:function(){if(this._isValid)return"no intersections found";var t=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+wt.toLineString(t[0],t[1])+" and "+wt.toLineString(t[2],t[3])},interfaces_:function(){return[]},getClass:function(){return Ar}}),Ar.computeIntersections=function(t){var e=new Ar(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()},f(bi.prototype,{checkValid:function(){this.nv.checkValid()},interfaces_:function(){return[]},getClass:function(){return bi}}),bi.toSegmentStrings=function(t){for(var e=new F,n=t.iterator();n.hasNext();){var s=n.next();e.add(new os(s.getCoordinates(),s))}return e},bi.checkValid=function(t){var e=new bi(t);e.checkValid()},f(oi.prototype,{map:function(t){for(var e=new F,n=0;n<t.getNumGeometries();n++){var s=this.mapOp.map(t.getGeometryN(n));s.isEmpty()||e.add(s)}return t.getFactory().createGeometryCollection(St.toGeometryArray(e))},interfaces_:function(){return[]},getClass:function(){return oi}}),oi.map=function(t,e){var n=new oi(e);return n.map(t)},f($.prototype,{interfaces_:function(){return[]},getClass:function(){return $}}),$.opposite=function(t){return t===$.LEFT?$.RIGHT:t===$.RIGHT?$.LEFT:t},$.ON=0,$.LEFT=1,$.RIGHT=2,f(le.prototype,{setAllLocations:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},isNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==C.NONE)return!1;return!0},setAllLocationsIfNull:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===C.NONE&&(this.location[e]=t)},isLine:function(){return this.location.length===1},merge:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[$.ON]=this.location[$.ON],e[$.LEFT]=C.NONE,e[$.RIGHT]=C.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===C.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},getLocations:function(){return this.location},flip:function(){if(this.location.length<=1)return null;var t=this.location[$.LEFT];this.location[$.LEFT]=this.location[$.RIGHT],this.location[$.RIGHT]=t},toString:function(){var t=new Jt;return this.location.length>1&&t.append(C.toLocationSymbol(this.location[$.LEFT])),t.append(C.toLocationSymbol(this.location[$.ON])),this.location.length>1&&t.append(C.toLocationSymbol(this.location[$.RIGHT])),t.toString()},setLocations:function(t,e,n){this.location[$.ON]=t,this.location[$.LEFT]=e,this.location[$.RIGHT]=n},get:function(t){return t<this.location.length?this.location[t]:C.NONE},isArea:function(){return this.location.length>1},isAnyNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===C.NONE)return!0;return!1},setLocation:function(){if(arguments.length===1){var t=arguments[0];this.setLocation($.ON,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.location[e]=n}},init:function(t){this.location=new Array(t).fill(null),this.setAllLocations(C.NONE)},isEqualOnSide:function(t,e){return this.location[e]===t.location[e]},allPositionsEqual:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},interfaces_:function(){return[]},getClass:function(){return le}}),f(re.prototype,{getGeometryCount:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},setAllLocations:function(t,e){this.elt[t].setAllLocations(e)},isNull:function(t){return this.elt[t].isNull()},setAllLocationsIfNull:function(){if(arguments.length===1){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},isLine:function(t){return this.elt[t].isLine()},merge:function(t){for(var e=0;2>e;e++)this.elt[e]===null&&t.elt[e]!==null?this.elt[e]=new le(t.elt[e]):this.elt[e].merge(t.elt[e])},flip:function(){this.elt[0].flip(),this.elt[1].flip()},getLocation:function(){if(arguments.length===1){var t=arguments[0];return this.elt[t].get($.ON)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},toString:function(){var t=new Jt;return this.elt[0]!==null&&(t.append("A:"),t.append(this.elt[0].toString())),this.elt[1]!==null&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},isArea:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var t=arguments[0];return this.elt[t].isArea()}},isAnyNull:function(t){return this.elt[t].isAnyNull()},setLocation:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.elt[t].setLocation($.ON,e)}else if(arguments.length===3){var n=arguments[0],s=arguments[1],a=arguments[2];this.elt[n].setLocation(s,a)}},isEqualOnSide:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},allPositionsEqual:function(t,e){return this.elt[t].allPositionsEqual(e)},toLine:function(t){this.elt[t].isArea()&&(this.elt[t]=new le(this.elt[t].location[0]))},interfaces_:function(){return[]},getClass:function(){return re}}),re.toLineLabel=function(t){for(var e=new re(C.NONE),n=0;2>n;n++)e.setLocation(n,t.getLocation(n));return e},f(Ni.prototype,{computeRing:function(){if(this.ring!==null)return null;for(var t=new Array(this.pts.size()).fill(null),e=0;e<this.pts.size();e++)t[e]=this.pts.get(e);this.ring=this.geometryFactory.createLinearRing(t),this._isHole=et.isCCW(this.ring.getCoordinates())},isIsolated:function(){return this.label.getGeometryCount()===1},computePoints:function(t){this.startDe=t;var e=t,n=!0;do{if(e===null)throw new Me("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Me("Directed Edge visited twice during ring-building at "+e.getCoordinate());this.edges.add(e);var s=e.getLabel();k.isTrue(s.isArea()),this.mergeLabel(s),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this.startDe)},getLinearRing:function(){return this.ring},getCoordinate:function(t){return this.pts.get(t)},computeMaxNodeDegree:function(){this.maxNodeDegree=0;var t=this.startDe;do{var e=t.getNode(),n=e.getEdges().getOutgoingDegree(this);n>this.maxNodeDegree&&(this.maxNodeDegree=n),t=this.getNext(t)}while(t!==this.startDe);this.maxNodeDegree*=2},addPoints:function(t,e,n){var s=t.getCoordinates();if(e){var a=1;n&&(a=0);for(var g=a;g<s.length;g++)this.pts.add(s[g])}else{var a=s.length-2;n&&(a=s.length-1);for(var g=a;g>=0;g--)this.pts.add(s[g])}},isHole:function(){return this._isHole},setInResult:function(){var t=this.startDe;do t.getEdge().setInResult(!0),t=t.getNext();while(t!==this.startDe)},containsPoint:function(t){var e=this.getLinearRing(),n=e.getEnvelopeInternal();if(!n.contains(t)||!et.isPointInRing(t,e.getCoordinates()))return!1;for(var s=this.holes.iterator();s.hasNext();){var a=s.next();if(a.containsPoint(t))return!1}return!0},addHole:function(t){this.holes.add(t)},isShell:function(){return this.shell===null},getLabel:function(){return this.label},getEdges:function(){return this.edges},getMaxNodeDegree:function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree},getShell:function(){return this.shell},mergeLabel:function(){if(arguments.length===1){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1],s=e.getLocation(n,$.RIGHT);if(s===C.NONE)return null;if(this.label.getLocation(n)===C.NONE)return this.label.setLocation(n,s),null}},setShell:function(t){this.shell=t,t!==null&&t.addHole(this)},toPolygon:function(t){for(var e=new Array(this.holes.size()).fill(null),n=0;n<this.holes.size();n++)e[n]=this.holes.get(n).getLinearRing();var s=t.createPolygon(this.getLinearRing(),e);return s},interfaces_:function(){return[]},getClass:function(){return Ni}}),T(En,Ni),f(En.prototype,{setEdgeRing:function(t,e){t.setMinEdgeRing(e)},getNext:function(t){return t.getNextMin()},interfaces_:function(){return[]},getClass:function(){return En}}),T(Ki,Ni),f(Ki.prototype,{buildMinimalRings:function(){var t=new F,e=this.startDe;do{if(e.getMinEdgeRing()===null){var n=new En(e,this.geometryFactory);t.add(n)}e=e.getNext()}while(e!==this.startDe);return t},setEdgeRing:function(t,e){t.setEdgeRing(e)},linkDirectedEdgesForMinimalEdgeRings:function(){var t=this.startDe;do{var e=t.getNode();e.getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this.startDe)},getNext:function(t){return t.getNext()},interfaces_:function(){return[]},getClass:function(){return Ki}}),f(Jn.prototype,{setVisited:function(t){this._isVisited=t},setInResult:function(t){this._isInResult=t},isCovered:function(){return this._isCovered},isCoveredSet:function(){return this._isCoveredSet},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setCovered:function(t){this._isCovered=t,this._isCoveredSet=!0},updateIM:function(t){k.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},isInResult:function(){return this._isInResult},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return Jn}}),T(On,Jn),f(On.prototype,{isIncidentEdgeInResult:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){var e=t.next();if(e.getEdge().isInResult())return!0}return!1},isIsolated:function(){return this.label.getGeometryCount()===1},getCoordinate:function(){return this.coord},print:function(t){t.println("node "+this.coord+" lbl: "+this.label)},computeIM:function(t){},computeMergedLocation:function(t,e){var n=C.NONE;if(n=this.label.getLocation(e),!t.isNull(e)){var s=t.getLocation(e);n!==C.BOUNDARY&&(n=s)}return n},setLabel:function(){if(arguments.length!==2)return Jn.prototype.setLabel.apply(this,arguments);var t=arguments[0],e=arguments[1];this.label===null?this.label=new re(t,e):this.label.setLocation(t,e)},getEdges:function(){return this.edges},mergeLabel:function(){if(arguments[0]instanceof On){var t=arguments[0];this.mergeLabel(t.label)}else if(arguments[0]instanceof re)for(var e=arguments[0],n=0;2>n;n++){var s=this.computeMergedLocation(e,n),a=this.label.getLocation(n);a===C.NONE&&this.label.setLocation(n,s)}},add:function(t){this.edges.insert(t),t.setNode(this)},setLabelBoundary:function(t){if(this.label===null)return null;var e=C.NONE;this.label!==null&&(e=this.label.getLocation(t));var n=null;switch(e){case C.BOUNDARY:n=C.INTERIOR;break;case C.INTERIOR:n=C.BOUNDARY;break;default:n=C.BOUNDARY}this.label.setLocation(t,n)},interfaces_:function(){return[]},getClass:function(){return On}}),f(ji.prototype,{find:function(t){return this.nodeMap.get(t)},addNode:function(){if(arguments[0]instanceof P){var t=arguments[0],e=this.nodeMap.get(t);return e===null&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof On){var n=arguments[0],e=this.nodeMap.get(n.getCoordinate());return e===null?(this.nodeMap.put(n.getCoordinate(),n),n):(e.mergeLabel(n),e)}},print:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},iterator:function(){return this.nodeMap.values().iterator()},values:function(){return this.nodeMap.values()},getBoundaryNodes:function(t){for(var e=new F,n=this.iterator();n.hasNext();){var s=n.next();s.getLabel().getLocation(t)===C.BOUNDARY&&e.add(s)}return e},add:function(t){var e=t.getCoordinate(),n=this.addNode(e);n.add(t)},interfaces_:function(){return[]},getClass:function(){return ji}}),f(Ke.prototype,{compareDirection:function(t){return this.dx===t.dx&&this.dy===t.dy?0:this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:et.computeOrientation(t.p0,t.p1,this.p1)},getDy:function(){return this.dy},getCoordinate:function(){return this.p0},setNode:function(t){this.node=t},print:function(t){var e=Math.atan2(this.dy,this.dx),n=this.getClass().getName(),s=n.lastIndexOf("."),a=n.substring(s+1);t.print("  "+a+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+e+"   "+this.label)},compareTo:function(t){var e=t;return this.compareDirection(e)},getDirectedCoordinate:function(){return this.p1},getDx:function(){return this.dx},getLabel:function(){return this.label},getEdge:function(){return this.edge},getQuadrant:function(){return this.quadrant},getNode:function(){return this.node},toString:function(){var t=Math.atan2(this.dy,this.dx),e=this.getClass().getName(),n=e.lastIndexOf("."),s=e.substring(n+1);return"  "+s+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+t+"   "+this.label},computeLabel:function(t){},init:function(t,e){this.p0=t,this.p1=e,this.dx=e.x-t.x,this.dy=e.y-t.y,this.quadrant=ht.quadrant(this.dx,this.dy),k.isTrue(!(this.dx===0&&this.dy===0),"EdgeEnd with identical endpoints found")},interfaces_:function(){return[_]},getClass:function(){return Ke}}),T(Ti,Ke),f(Ti.prototype,{getNextMin:function(){return this.nextMin},getDepth:function(t){return this.depth[t]},setVisited:function(t){this._isVisited=t},computeDirectedLabel:function(){this.label=new re(this.edge.getLabel()),this._isForward||this.label.flip()},getNext:function(){return this.next},setDepth:function(t,e){if(this.depth[t]!==-999&&this.depth[t]!==e)throw new Me("assigned depths do not match",this.getCoordinate());this.depth[t]=e},isInteriorAreaEdge:function(){for(var e=!0,n=0;2>n;n++)this.label.isArea(n)&&this.label.getLocation(n,$.LEFT)===C.INTERIOR&&this.label.getLocation(n,$.RIGHT)===C.INTERIOR||(e=!1);return e},setNextMin:function(t){this.nextMin=t},print:function(t){Ke.prototype.print.call(this,t),t.print(" "+this.depth[$.LEFT]+"/"+this.depth[$.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},setMinEdgeRing:function(t){this.minEdgeRing=t},isLineEdge:function(){var t=this.label.isLine(0)||this.label.isLine(1),e=!this.label.isArea(0)||this.label.allPositionsEqual(0,C.EXTERIOR),n=!this.label.isArea(1)||this.label.allPositionsEqual(1,C.EXTERIOR);return t&&e&&n},setEdgeRing:function(t){this.edgeRing=t},getMinEdgeRing:function(){return this.minEdgeRing},getDepthDelta:function(){var t=this.edge.getDepthDelta();return this._isForward||(t=-t),t},setInResult:function(t){this._isInResult=t},getSym:function(){return this.sym},isForward:function(){return this._isForward},getEdge:function(){return this.edge},printEdge:function(t){this.print(t),t.print(" "),this._isForward?this.edge.print(t):this.edge.printReverse(t)},setSym:function(t){this.sym=t},setVisitedEdge:function(t){this.setVisited(t),this.sym.setVisited(t)},setEdgeDepths:function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var s=1;t===$.LEFT&&(s=-1);var a=$.opposite(t),g=n*s,v=e+g;this.setDepth(t,e),this.setDepth(a,v)},getEdgeRing:function(){return this.edgeRing},isInResult:function(){return this._isInResult},setNext:function(t){this.next=t},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return Ti}}),Ti.depthFactor=function(t,e){return t===C.EXTERIOR&&e===C.INTERIOR?1:t===C.INTERIOR&&e===C.EXTERIOR?-1:0},f(ai.prototype,{createNode:function(t){return new On(t,null)},interfaces_:function(){return[]},getClass:function(){return ai}}),f(cn.prototype,{printEdges:function(t){t.println("Edges:");for(var e=0;e<this.edges.size();e++){t.println("edge "+e+":");var n=this.edges.get(e);n.print(t),n.eiList.print(t)}},find:function(t){return this.nodes.find(t)},addNode:function(){if(arguments[0]instanceof On){var t=arguments[0];return this.nodes.addNode(t)}if(arguments[0]instanceof P){var e=arguments[0];return this.nodes.addNode(e)}},getNodeIterator:function(){return this.nodes.iterator()},linkResultDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkResultDirectedEdges()}},debugPrintln:function(t){mt.out.println(t)},isBoundaryNode:function(t,e){var n=this.nodes.find(e);if(n===null)return!1;var s=n.getLabel();return s!==null&&s.getLocation(t)===C.BOUNDARY},linkAllDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkAllDirectedEdges()}},matchInSameDirection:function(t,e,n,s){return t.equals(n)?et.computeOrientation(t,e,s)===et.COLLINEAR&&ht.quadrant(t,e)===ht.quadrant(n,s):!1},getEdgeEnds:function(){return this.edgeEndList},debugPrint:function(t){mt.out.print(t)},getEdgeIterator:function(){return this.edges.iterator()},findEdgeInSameDirection:function(t,e){for(var n=0;n<this.edges.size();n++){var s=this.edges.get(n),a=s.getCoordinates();if(this.matchInSameDirection(t,e,a[0],a[1])||this.matchInSameDirection(t,e,a[a.length-1],a[a.length-2]))return s}return null},insertEdge:function(t){this.edges.add(t)},findEdgeEnd:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},addEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.edges.add(n);var s=new Ti(n,!0),a=new Ti(n,!1);s.setSym(a),a.setSym(s),this.add(s),this.add(a)}},add:function(t){this.nodes.add(t),this.edgeEndList.add(t)},getNodes:function(){return this.nodes.values()},findEdge:function(t,e){for(var n=0;n<this.edges.size();n++){var s=this.edges.get(n),a=s.getCoordinates();if(t.equals(a[0])&&e.equals(a[1]))return s}return null},interfaces_:function(){return[]},getClass:function(){return cn}}),cn.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.getEdges().linkResultDirectedEdges()}},f(Pi.prototype,{sortShellsAndHoles:function(t,e,n){for(var s=t.iterator();s.hasNext();){var a=s.next();a.isHole()?n.add(a):e.add(a)}},computePolygons:function(t){for(var e=new F,n=t.iterator();n.hasNext();){var s=n.next(),a=s.toPolygon(this.geometryFactory);e.add(a)}return e},placeFreeHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var s=n.next();if(s.getShell()===null){var a=this.findEdgeRingContaining(s,t);if(a===null)throw new Me("unable to assign hole to a shell",s.getCoordinate(0));s.setShell(a)}}},buildMinimalEdgeRings:function(t,e,n){for(var s=new F,a=t.iterator();a.hasNext();){var g=a.next();if(g.getMaxNodeDegree()>2){g.linkDirectedEdgesForMinimalEdgeRings();var v=g.buildMinimalRings(),x=this.findShell(v);x!==null?(this.placePolygonHoles(x,v),e.add(x)):n.addAll(v)}else s.add(g)}return s},containsPoint:function(t){for(var e=this.shellList.iterator();e.hasNext();){var n=e.next();if(n.containsPoint(t))return!0}return!1},buildMaximalEdgeRings:function(t){for(var e=new F,n=t.iterator();n.hasNext();){var s=n.next();if(s.isInResult()&&s.getLabel().isArea()&&s.getEdgeRing()===null){var a=new Ki(s,this.geometryFactory);e.add(a),a.setInResult()}}return e},placePolygonHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var s=n.next();s.isHole()&&s.setShell(t)}},getPolygons:function(){var t=this.computePolygons(this.shellList);return t},findEdgeRingContaining:function(t,e){for(var n=t.getLinearRing(),s=n.getEnvelopeInternal(),a=n.getCoordinateN(0),g=null,v=null,x=e.iterator();x.hasNext();){var S=x.next(),O=S.getLinearRing(),B=O.getEnvelopeInternal();g!==null&&(v=g.getLinearRing().getEnvelopeInternal());var H=!1;B.contains(s)&&et.isPointInRing(a,O.getCoordinates())&&(H=!0),H&&(g===null||v.contains(B))&&(g=S)}return g},findShell:function(t){for(var e=0,n=null,s=t.iterator();s.hasNext();){var a=s.next();a.isHole()||(n=a,e++)}return k.isTrue(1>=e,"found two shells in MinimalEdgeRing list"),n},add:function(){if(arguments.length===1){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(arguments.length===2){var e=arguments[0],n=arguments[1];cn.linkResultDirectedEdges(n);var s=this.buildMaximalEdgeRings(e),a=new F,g=this.buildMinimalEdgeRings(s,this.shellList,a);this.sortShellsAndHoles(g,this.shellList,a),this.placeFreeHoles(this.shellList,a)}},interfaces_:function(){return[]},getClass:function(){return Pi}}),f(Kn.prototype,{collectLines:function(t){for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this.lineEdgesList),this.collectBoundaryTouchEdge(n,t,this.lineEdgesList)}},labelIsolatedLine:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.op.getArgGeometry(e));t.getLabel().setLocation(e,n)},build:function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this.resultLineList},collectLineEdge:function(t,e,n){var s=t.getLabel(),a=t.getEdge();t.isLineEdge()&&(t.isVisited()||!ct.isResultOfOp(s,e)||a.isCovered()||(n.add(a),t.setVisitedEdge(!0)))},findCoveredLineEdges:function(){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().findCoveredLineEdges()}for(var n=this.op.getGraph().getEdgeEnds().iterator();n.hasNext();){var s=n.next(),a=s.getEdge();if(s.isLineEdge()&&!a.isCoveredSet()){var g=this.op.isCoveredByA(s.getCoordinate());a.setCovered(g)}}},labelIsolatedLines:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),s=n.getLabel();n.isIsolated()&&(s.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},buildLines:function(t){for(var e=this.lineEdgesList.iterator();e.hasNext();){var n=e.next(),s=(n.getLabel(),this.geometryFactory.createLineString(n.getCoordinates()));this.resultLineList.add(s),n.setInResult(!0)}},collectBoundaryTouchEdge:function(t,e,n){var s=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(k.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(ct.isResultOfOp(s,e)&&e===ct.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},interfaces_:function(){return[]},getClass:function(){return Kn}}),f(Hs.prototype,{filterCoveredNodeToPoint:function(t){var e=t.getCoordinate();if(!this.op.isCoveredByLA(e)){var n=this.geometryFactory.createPoint(e);this.resultPointList.add(n)}},extractNonCoveredResultNodes:function(t){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||n.getEdges().getDegree()!==0&&t!==ct.INTERSECTION)){var s=n.getLabel();ct.isResultOfOp(s,t)&&this.filterCoveredNodeToPoint(n)}}},build:function(t){return this.extractNonCoveredResultNodes(t),this.resultPointList},interfaces_:function(){return[]},getClass:function(){return Hs}}),f(ui.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return ui}}),f(ge.prototype,{locate:function(t){return ge.locate(t,this.geom)},interfaces_:function(){return[ui]},getClass:function(){return ge}}),ge.isPointInRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?et.isPointInRing(t,e.getCoordinates()):!1},ge.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!ge.isPointInRing(t,n))return!1;for(var s=0;s<e.getNumInteriorRing();s++){var a=e.getInteriorRingN(s);if(ge.isPointInRing(t,a))return!1}return!0},ge.containsPoint=function(t,e){if(e instanceof Ft)return ge.containsPointInPolygon(t,e);if(e instanceof Nt)for(var n=new Tn(e);n.hasNext();){var s=n.next();if(s!==e&&ge.containsPoint(t,s))return!0}return!1},ge.locate=function(t,e){return e.isEmpty()?C.EXTERIOR:ge.containsPoint(t,e)?C.INTERIOR:C.EXTERIOR},f(li.prototype,{getNextCW:function(t){this.getEdges();var e=this.edgeList.indexOf(t),n=e-1;return e===0&&(n=this.edgeList.size()-1),this.edgeList.get(n)},propagateSideLabels:function(t){for(var e=C.NONE,n=this.iterator();n.hasNext();){var s=n.next(),a=s.getLabel();a.isArea(t)&&a.getLocation(t,$.LEFT)!==C.NONE&&(e=a.getLocation(t,$.LEFT))}if(e===C.NONE)return null;for(var g=e,n=this.iterator();n.hasNext();){var s=n.next(),a=s.getLabel();if(a.getLocation(t,$.ON)===C.NONE&&a.setLocation(t,$.ON,g),a.isArea(t)){var v=a.getLocation(t,$.LEFT),x=a.getLocation(t,$.RIGHT);if(x!==C.NONE){if(x!==g)throw new Me("side location conflict",s.getCoordinate());v===C.NONE&&k.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),g=v}else k.isTrue(a.getLocation(t,$.LEFT)===C.NONE,"found single null side"),a.setLocation(t,$.RIGHT,g),a.setLocation(t,$.LEFT,g)}}},getCoordinate:function(){var t=this.iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},print:function(t){mt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},isAreaLabelsConsistent:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},checkAreaLabelsConsistent:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,s=e.get(n).getLabel(),a=s.getLocation(t,$.LEFT);k.isTrue(a!==C.NONE,"Found unlabelled area edge");for(var g=a,v=this.iterator();v.hasNext();){var x=v.next(),S=x.getLabel();k.isTrue(S.isArea(t),"Found non-area edge");var O=S.getLocation(t,$.LEFT),B=S.getLocation(t,$.RIGHT);if(O===B||B!==g)return!1;g=O}return!0},findIndex:function(t){this.iterator();for(var e=0;e<this.edgeList.size();e++){var n=this.edgeList.get(e);if(n===t)return e}return-1},iterator:function(){return this.getEdges().iterator()},getEdges:function(){return this.edgeList===null&&(this.edgeList=new F(this.edgeMap.values())),this.edgeList},getLocation:function(t,e,n){return this.ptInAreaLocation[t]===C.NONE&&(this.ptInAreaLocation[t]=ge.locate(e,n[t].getGeometry())),this.ptInAreaLocation[t]},toString:function(){var t=new Jt;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append(`
`);for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append(`
`)}return t.toString()},computeEdgeEndLabels:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.computeLabel(t)}},computeLabelling:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var s=n.next(),a=s.getLabel(),g=0;2>g;g++)a.isLine(g)&&a.getLocation(g)===C.BOUNDARY&&(e[g]=!0);for(var n=this.iterator();n.hasNext();)for(var s=n.next(),a=s.getLabel(),g=0;2>g;g++)if(a.isAnyNull(g)){var v=C.NONE;if(e[g])v=C.EXTERIOR;else{var x=s.getCoordinate();v=this.getLocation(g,x,t)}a.setAllLocationsIfNull(g,v)}},getDegree:function(){return this.edgeMap.size()},insertEdgeEnd:function(t,e){this.edgeMap.put(t,e),this.edgeList=null},interfaces_:function(){return[]},getClass:function(){return li}}),T(hs,li),f(hs.prototype,{linkResultDirectedEdges:function(){this.getResultAreaEdges();for(var t=null,e=null,n=this.SCANNING_FOR_INCOMING,s=0;s<this.resultAreaEdgeList.size();s++){var a=this.resultAreaEdgeList.get(s),g=a.getSym();if(a.getLabel().isArea())switch(t===null&&a.isInResult()&&(t=a),n){case this.SCANNING_FOR_INCOMING:if(!g.isInResult())continue;e=g,n=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!a.isInResult())continue;e.setNext(a),n=this.SCANNING_FOR_INCOMING}}if(n===this.LINKING_TO_OUTGOING){if(t===null)throw new Me("no outgoing dirEdge found",this.getCoordinate());k.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},insert:function(t){var e=t;this.insertEdgeEnd(e,e)},getRightmostEdge:function(){var t=this.getEdges(),e=t.size();if(1>e)return null;var n=t.get(0);if(e===1)return n;var s=t.get(e-1),a=n.getQuadrant(),g=s.getQuadrant();return ht.isNorthern(a)&&ht.isNorthern(g)?n:!ht.isNorthern(a)&&!ht.isNorthern(g)?s:n.getDy()!==0?n:s.getDy()!==0?s:(k.shouldNeverReachHere("found two horizontal edges incident on node"),null)},print:function(t){mt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},getResultAreaEdges:function(){if(this.resultAreaEdgeList!==null)return this.resultAreaEdgeList;this.resultAreaEdgeList=new F;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this.resultAreaEdgeList.add(e)}return this.resultAreaEdgeList},updateLabelling:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next(),s=n.getLabel();s.setAllLocationsIfNull(0,t.getLocation(0)),s.setAllLocationsIfNull(1,t.getLocation(1))}},linkAllDirectedEdges:function(){this.getEdges();for(var t=null,e=null,n=this.edgeList.size()-1;n>=0;n--){var s=this.edgeList.get(n),a=s.getSym();e===null&&(e=a),t!==null&&a.setNext(t),t=s}e.setNext(t)},computeDepths:function(){if(arguments.length===1){var t=arguments[0],e=this.findIndex(t),n=(t.getLabel(),t.getDepth($.LEFT)),s=t.getDepth($.RIGHT),a=this.computeDepths(e+1,this.edgeList.size(),n),g=this.computeDepths(0,e,a);if(g!==s)throw new Me("depth mismatch at "+t.getCoordinate())}else if(arguments.length===3){for(var v=arguments[0],x=arguments[1],S=arguments[2],O=S,B=v;x>B;B++){var H=this.edgeList.get(B);H.getLabel(),H.setEdgeDepths($.RIGHT,O),O=H.getDepth($.LEFT)}return O}},mergeSymLabels:function(){for(var t=this.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();n.merge(e.getSym().getLabel())}},linkMinimalDirectedEdges:function(t){for(var e=null,n=null,s=this.SCANNING_FOR_INCOMING,a=this.resultAreaEdgeList.size()-1;a>=0;a--){var g=this.resultAreaEdgeList.get(a),v=g.getSym();switch(e===null&&g.getEdgeRing()===t&&(e=g),s){case this.SCANNING_FOR_INCOMING:if(v.getEdgeRing()!==t)continue;n=v,s=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(g.getEdgeRing()!==t)continue;n.setNextMin(g),s=this.SCANNING_FOR_INCOMING}}s===this.LINKING_TO_OUTGOING&&(k.isTrue(e!==null,"found null for first outgoing dirEdge"),k.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},getOutgoingDegree:function(){if(arguments.length===0){for(var t=0,e=this.iterator();e.hasNext();){var n=e.next();n.isInResult()&&t++}return t}if(arguments.length===1){for(var s=arguments[0],t=0,e=this.iterator();e.hasNext();){var n=e.next();n.getEdgeRing()===s&&t++}return t}},getLabel:function(){return this.label},findCoveredLineEdges:function(){for(var t=C.NONE,e=this.iterator();e.hasNext();){var n=e.next(),s=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=C.INTERIOR;break}if(s.isInResult()){t=C.EXTERIOR;break}}}if(t===C.NONE)return null;for(var a=t,e=this.iterator();e.hasNext();){var n=e.next(),s=n.getSym();n.isLineEdge()?n.getEdge().setCovered(a===C.INTERIOR):(n.isInResult()&&(a=C.EXTERIOR),s.isInResult()&&(a=C.INTERIOR))}},computeLabelling:function(t){li.prototype.computeLabelling.call(this,t),this.label=new re(C.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next(),s=n.getEdge(),a=s.getLabel(),g=0;2>g;g++){var v=a.getLocation(g);v!==C.INTERIOR&&v!==C.BOUNDARY||this.label.setLocation(g,C.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return hs}}),T(Mi,ai),f(Mi.prototype,{createNode:function(t){return new On(t,new hs)},interfaces_:function(){return[]},getClass:function(){return Mi}}),f(Ws.prototype,{computeIntersections:function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},interfaces_:function(){return[]},getClass:function(){return Ws}}),f(fn.prototype,{isDelete:function(){return this.eventType===fn.DELETE},setDeleteEventIndex:function(t){this.deleteEventIndex=t},getObject:function(){return this.obj},compareTo:function(t){var e=t;return this.xValue<e.xValue?-1:this.xValue>e.xValue?1:this.eventType<e.eventType?-1:this.eventType>e.eventType?1:0},getInsertEvent:function(){return this.insertEvent},isInsert:function(){return this.eventType===fn.INSERT},isSameLabel:function(t){return this.label===null?!1:this.label===t.label},getDeleteEventIndex:function(){return this.deleteEventIndex},interfaces_:function(){return[_]},getClass:function(){return fn}}),fn.INSERT=1,fn.DELETE=2,f(Qi.prototype,{interfaces_:function(){return[]},getClass:function(){return Qi}}),f(hi.prototype,{isTrivialIntersection:function(t,e,n,s){if(t===n&&this.li.getIntersectionNum()===1){if(hi.isAdjacentSegments(e,s))return!0;if(t.isClosed()){var a=t.getNumPoints()-1;if(e===0&&s===a||s===0&&e===a)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},setIsDoneIfProperInt:function(t){this.isDoneWhenProperInt=t},hasProperInteriorIntersection:function(){return this.hasProperInterior},isBoundaryPointInternal:function(t,e){for(var n=e.iterator();n.hasNext();){var s=n.next(),a=s.getCoordinate();if(t.isIntersection(a))return!0}return!1},hasProperIntersection:function(){return this.hasProper},hasIntersection:function(){return this._hasIntersection},isDone:function(){return this._isDone},isBoundaryPoint:function(t,e){return e===null?!1:this.isBoundaryPointInternal(t,e[0])?!0:!!this.isBoundaryPointInternal(t,e[1])},setBoundaryNodes:function(t,e){this.bdyNodes=new Array(2).fill(null),this.bdyNodes[0]=t,this.bdyNodes[1]=e},addIntersections:function(t,e,n,s){if(t===n&&e===s)return null;this.numTests++;var a=t.getCoordinates()[e],g=t.getCoordinates()[e+1],v=n.getCoordinates()[s],x=n.getCoordinates()[s+1];this.li.computeIntersection(a,g,v,x),this.li.hasIntersection()&&(this.recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(t,e,n,s)||(this._hasIntersection=!0,!this.includeProper&&this.li.isProper()||(t.addIntersections(this.li,e,0),n.addIntersections(this.li,s,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).copy(),this.hasProper=!0,this.isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))},interfaces_:function(){return[]},getClass:function(){return hi}}),hi.isAdjacentSegments=function(t,e){return Math.abs(t-e)===1},T(cs,Qi),f(cs.prototype,{prepareEvents:function(){ti.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},computeIntersections:function(){if(arguments.length===1){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof hi&&nt(arguments[0],R)&&nt(arguments[1],R)){var s=arguments[0],a=arguments[1],g=arguments[2];this.addEdges(s,s),this.addEdges(a,a),this.computeIntersections(g)}else if(typeof arguments[2]=="boolean"&&nt(arguments[0],R)&&arguments[1]instanceof hi){var v=arguments[0],x=arguments[1],S=arguments[2];S?this.addEdges(v,null):this.addEdges(v),this.computeIntersections(x)}}},addEdge:function(t,e){for(var n=t.getMonotoneChainEdge(),s=n.getStartIndexes(),a=0;a<s.length-1;a++){var g=new Ws(n,a),v=new fn(e,n.getMinX(a),g);this.events.add(v),this.events.add(new fn(n.getMaxX(a),v))}},processOverlaps:function(t,e,n,s){for(var a=n.getObject(),g=t;e>g;g++){var v=this.events.get(g);if(v.isInsert()){var x=v.getObject();n.isSameLabel(v)||(a.computeIntersections(x,s),this.nOverlaps++)}}},addEdges:function(){if(arguments.length===1)for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.addEdge(n,n)}else if(arguments.length===2)for(var s=arguments[0],a=arguments[1],e=s.iterator();e.hasNext();){var n=e.next();this.addEdge(n,a)}},interfaces_:function(){return[]},getClass:function(){return cs}}),f(ci.prototype,{getMin:function(){return this.min},intersects:function(t,e){return!(this.min>e||this.max<t)},getMax:function(){return this.max},toString:function(){return wt.toLineString(new P(this.min,0),new P(this.max,0))},interfaces_:function(){return[]},getClass:function(){return ci}}),f(Xs.prototype,{compare:function(t,e){var n=t,s=e,a=(n.min+n.max)/2,g=(s.min+s.max)/2;return g>a?-1:a>g?1:0},interfaces_:function(){return[I]},getClass:function(){return Xs}}),ci.NodeComparator=Xs,T(He,ci),f(He.prototype,{query:function(t,e,n){return this.intersects(t,e)?void n.visitItem(this.item):null},interfaces_:function(){return[]},getClass:function(){return He}}),T(jn,ci),f(jn.prototype,{buildExtent:function(t,e){this.min=Math.min(t.min,e.min),this.max=Math.max(t.max,e.max)},query:function(t,e,n){return this.intersects(t,e)?(this.node1!==null&&this.node1.query(t,e,n),void(this.node2!==null&&this.node2.query(t,e,n))):null},interfaces_:function(){return[]},getClass:function(){return jn}}),f(Ys.prototype,{buildTree:function(){ti.sort(this.leaves,new IntervalRTreeNode.NodeComparator);for(var t=this.leaves,e=null,n=new F;;){if(this.buildLevel(t,n),n.size()===1)return n.get(0);e=t,t=n,n=e}},insert:function(t,e,n){if(this.root!==null)throw new IllegalStateException("Index cannot be added to once it has been queried");this.leaves.add(new He(t,e,n))},query:function(t,e,n){this.init(),this.root.query(t,e,n)},buildRoot:function(){return this.root!==null?null:void(this.root=this.buildTree())},printNode:function(t){mt.out.println(wt.toLineString(new P(t.min,this.level),new P(t.max,this.level)))},init:function(){return this.root!==null?null:void this.buildRoot()},buildLevel:function(t,e){this.level++,e.clear();for(var n=0;n<t.size();n+=2){var s=t.get(n),a=n+1<t.size()?t.get(n):null;if(a===null)e.add(s);else{var g=new jn(t.get(n),t.get(n+1));e.add(g)}}},interfaces_:function(){return[]},getClass:function(){return Ys}}),f(fe.prototype,{filter:function(t){if(this.isForcedToLineString&&t instanceof ie){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this.lines.add(e),null}t instanceof It&&this.lines.add(t)},setForceToLineString:function(t){this.isForcedToLineString=t},interfaces_:function(){return[Bt]},getClass:function(){return fe}}),fe.getGeometry=function(){if(arguments.length===1){var t=arguments[0];return t.getFactory().buildGeometry(fe.getLines(t))}if(arguments.length===2){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(fe.getLines(e,n))}},fe.getLines=function(){if(arguments.length===1){var t=arguments[0];return fe.getLines(t,!1)}if(arguments.length===2){if(nt(arguments[0],it)&&nt(arguments[1],it)){for(var e=arguments[0],n=arguments[1],s=e.iterator();s.hasNext();){var a=s.next();fe.getLines(a,n)}return n}if(arguments[0]instanceof Q&&typeof arguments[1]=="boolean"){var g=arguments[0],v=arguments[1],x=new F;return g.apply(new fe(x,v)),x}if(arguments[0]instanceof Q&&nt(arguments[1],it)){var S=arguments[0],O=arguments[1];return S instanceof It?O.add(S):S.apply(new fe(O)),O}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&nt(arguments[0],it)&&nt(arguments[1],it)){for(var B=arguments[0],H=arguments[1],J=arguments[2],s=B.iterator();s.hasNext();){var a=s.next();fe.getLines(a,H,J)}return H}if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Q&&nt(arguments[1],it)){var ut=arguments[0],pt=arguments[1],Lt=arguments[2];return ut.apply(new fe(pt,Lt)),pt}}},f(fs.prototype,{visitItem:function(t){this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[Pe]},getClass:function(){return fs}}),f(An.prototype,{locate:function(t){var e=new on(t),n=new ds(e);return this.index.query(t.y,t.y,n),e.getLocation()},interfaces_:function(){return[ui]},getClass:function(){return An}}),f(ds.prototype,{visitItem:function(t){var e=t;this.counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},interfaces_:function(){return[Pe]},getClass:function(){return ds}}),f(fi.prototype,{init:function(t){for(var e=fe.getLines(t),n=e.iterator();n.hasNext();){var s=n.next(),a=s.getCoordinates();this.addLine(a)}},addLine:function(t){for(var e=1;e<t.length;e++){var n=new st(t[e-1],t[e]),s=Math.min(n.p0.y,n.p1.y),a=Math.max(n.p0.y,n.p1.y);this.index.insert(s,a,n)}},query:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=new fs;return this.index.query(t,e,n),n.getItems()}if(arguments.length===3){var s=arguments[0],a=arguments[1],g=arguments[2];this.index.query(s,a,g)}},interfaces_:function(){return[]},getClass:function(){return fi}}),An.SegmentVisitor=ds,An.IntervalIndexedGeometry=fi,f(gs.prototype,{getSegmentIndex:function(){return this.segmentIndex},getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},compareTo:function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},isEndPoint:function(t){return this.segmentIndex===0&&this.dist===0?!0:this.segmentIndex===t},toString:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},getDistance:function(){return this.dist},compare:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},interfaces_:function(){return[_]},getClass:function(){return gs}}),f($i.prototype,{print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var s=e.next(),a=this.createSplitEdge(n,s);t.add(a),n=s}},addEndpoints:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,s=this.edge.pts[e.segmentIndex],a=e.dist>0||!e.coord.equals2D(s);a||n--;var g=new Array(n).fill(null),v=0;g[v++]=new P(t.coord);for(var x=t.segmentIndex+1;x<=e.segmentIndex;x++)g[v++]=this.edge.pts[x];return a&&(g[v]=e.coord),new je(g,new re(this.edge.label))},add:function(t,e,n){var s=new gs(t,e,n),a=this.nodeMap.get(s);return a!==null?a:(this.nodeMap.put(s,s),s)},isIntersection:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();if(n.coord.equals(t))return!0}return!1},interfaces_:function(){return[]},getClass:function(){return $i}}),f(Dr.prototype,{getChainStartIndices:function(t){var e=0,n=new F;n.add(new Rt(e));do{var s=this.findChainEnd(t,e);n.add(new Rt(s)),e=s}while(e<t.length-1);var a=Dr.toIntArray(n);return a},findChainEnd:function(t,e){for(var n=ht.quadrant(t[e],t[e+1]),s=e+1;s<t.length;){var a=ht.quadrant(t[s-1],t[s]);if(a!==n)break;s++}return s-1},interfaces_:function(){return[]},getClass:function(){return Dr}}),Dr.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},f(Dn.prototype,{getCoordinates:function(){return this.pts},getMaxX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},getMinX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return n>e?e:n},computeIntersectsForChain:function(){if(arguments.length===4){var t=arguments[0],e=arguments[1],n=arguments[2],s=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],s)}else if(arguments.length===6){var a=arguments[0],g=arguments[1],v=arguments[2],x=arguments[3],S=arguments[4],O=arguments[5],B=this.pts[a],H=this.pts[g],J=v.pts[x],ut=v.pts[S];if(g-a===1&&S-x===1)return O.addIntersections(this.e,a,v.e,x),null;if(this.env1.init(B,H),this.env2.init(J,ut),!this.env1.intersects(this.env2))return null;var pt=Math.trunc((a+g)/2),Lt=Math.trunc((x+S)/2);pt>a&&(Lt>x&&this.computeIntersectsForChain(a,pt,v,x,Lt,O),S>Lt&&this.computeIntersectsForChain(a,pt,v,Lt,S,O)),g>pt&&(Lt>x&&this.computeIntersectsForChain(pt,g,v,x,Lt,O),S>Lt&&this.computeIntersectsForChain(pt,g,v,Lt,S,O))}},getStartIndexes:function(){return this.startIndex},computeIntersects:function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var s=0;s<t.startIndex.length-1;s++)this.computeIntersectsForChain(n,t,s,e)},interfaces_:function(){return[]},getClass:function(){return Dn}}),f(Ve.prototype,{getDepth:function(t,e){return this.depth[t][e]},setDepth:function(t,e,n){this.depth[t][e]=n},isNull:function(){if(arguments.length===0){for(var t=0;2>t;t++)for(var e=0;3>e;e++)if(this.depth[t][e]!==Ve.NULL_VALUE)return!1;return!0}if(arguments.length===1){var n=arguments[0];return this.depth[n][1]===Ve.NULL_VALUE}if(arguments.length===2){var s=arguments[0],a=arguments[1];return this.depth[s][a]===Ve.NULL_VALUE}},normalize:function(){for(var t=0;2>t;t++)if(!this.isNull(t)){var e=this.depth[t][1];this.depth[t][2]<e&&(e=this.depth[t][2]),0>e&&(e=0);for(var n=1;3>n;n++){var s=0;this.depth[t][n]>e&&(s=1),this.depth[t][n]=s}}},getDelta:function(t){return this.depth[t][$.RIGHT]-this.depth[t][$.LEFT]},getLocation:function(t,e){return this.depth[t][e]<=0?C.EXTERIOR:C.INTERIOR},toString:function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]},add:function(){if(arguments.length===1)for(var t=arguments[0],e=0;2>e;e++)for(var n=1;3>n;n++){var s=t.getLocation(e,n);s!==C.EXTERIOR&&s!==C.INTERIOR||(this.isNull(e,n)?this.depth[e][n]=Ve.depthAtLocation(s):this.depth[e][n]+=Ve.depthAtLocation(s))}else if(arguments.length===3){var a=arguments[0],g=arguments[1],v=arguments[2];v===C.INTERIOR&&this.depth[a][g]++}},interfaces_:function(){return[]},getClass:function(){return Ve}}),Ve.depthAtLocation=function(t){return t===C.EXTERIOR?0:t===C.INTERIOR?1:Ve.NULL_VALUE},Ve.NULL_VALUE=-1,T(je,Jn),f(je.prototype,{getDepth:function(){return this.depth},getCollapsedEdge:function(){var t=new Array(2).fill(null);t[0]=this.pts[0],t[1]=this.pts[1];var e=new je(t,re.toLineLabel(this.label));return e},isIsolated:function(){return this._isIsolated},getCoordinates:function(){return this.pts},setIsolated:function(t){this._isIsolated=t},setName:function(t){this.name=t},equals:function(t){if(!(t instanceof je))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,s=!0,a=this.pts.length,g=0;g<this.pts.length;g++)if(this.pts[g].equals2D(e.pts[g])||(n=!1),this.pts[g].equals2D(e.pts[--a])||(s=!1),!n&&!s)return!1;return!0},getCoordinate:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var t=arguments[0];return this.pts[t]}},print:function(t){t.print("edge "+this.name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this.label+" "+this.depthDelta)},computeIM:function(t){je.updateIM(this.label,t)},isCollapsed:function(){return this.label.isArea()?this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2]):!1},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getMaximumSegmentIndex:function(){return this.pts.length-1},getDepthDelta:function(){return this.depthDelta},getNumPoints:function(){return this.pts.length},printReverse:function(t){t.print("edge "+this.name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},getMonotoneChainEdge:function(){return this.mce===null&&(this.mce=new Dn(this)),this.mce},getEnvelope:function(){if(this.env===null){this.env=new G;for(var t=0;t<this.pts.length;t++)this.env.expandToInclude(this.pts[t])}return this.env},addIntersection:function(t,e,n,s){var a=new P(t.getIntersection(s)),g=e,v=t.getEdgeDistance(n,s),x=g+1;if(x<this.pts.length){var S=this.pts[x];a.equals2D(S)&&(g=x,v=0)}this.eiList.add(a,g,v)},toString:function(){var t=new Jt;t.append("edge "+this.name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this.label+" "+this.depthDelta),t.toString()},isPointwiseEqual:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},setDepthDelta:function(t){this.depthDelta=t},getEdgeIntersectionList:function(){return this.eiList},addIntersections:function(t,e,n){for(var s=0;s<t.getIntersectionNum();s++)this.addIntersection(t,e,n,s)},interfaces_:function(){return[]},getClass:function(){return je}}),je.updateIM=function(){if(arguments.length!==2)return Jn.prototype.updateIM.apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,$.ON),t.getLocation(1,$.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,$.LEFT),t.getLocation(1,$.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,$.RIGHT),t.getLocation(1,$.RIGHT),2))},T(Re,cn),f(Re.prototype,{insertBoundaryPoint:function(t,e){var n=this.nodes.addNode(e),s=n.getLabel(),a=1,g=C.NONE;g=s.getLocation(t,$.ON),g===C.BOUNDARY&&a++;var v=Re.determineBoundary(this.boundaryNodeRule,a);s.setLocation(t,v)},computeSelfNodes:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(arguments.length===3){var n=arguments[0],s=arguments[1],a=arguments[2],g=new hi(n,!0,!1);g.setIsDoneIfProperInt(a);var v=this.createEdgeSetIntersector(),x=this.parentGeom instanceof ie||this.parentGeom instanceof Ft||this.parentGeom instanceof Le,S=s||!x;return v.computeIntersections(this.edges,g,S),this.addSelfIntersectionNodes(this.argIndex),g}},computeSplitEdges:function(t){for(var e=this.edges.iterator();e.hasNext();){var n=e.next();n.eiList.addSplitEdges(t)}},computeEdgeIntersections:function(t,e,n){var s=new hi(e,n,!0);s.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes());var a=this.createEdgeSetIntersector();return a.computeIntersections(this.edges,t.edges,s),s},getGeometry:function(){return this.parentGeom},getBoundaryNodeRule:function(){return this.boundaryNodeRule},hasTooFewPoints:function(){return this._hasTooFewPoints},addPoint:function(){if(arguments[0]instanceof Qt){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this.argIndex,e,C.INTERIOR)}else if(arguments[0]instanceof P){var n=arguments[0];this.insertPoint(this.argIndex,n,C.INTERIOR)}},addPolygon:function(t){this.addPolygonRing(t.getExteriorRing(),C.EXTERIOR,C.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,C.INTERIOR,C.EXTERIOR)}},addEdge:function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this.argIndex,e[0],C.BOUNDARY),this.insertPoint(this.argIndex,e[e.length-1],C.BOUNDARY)},addLineString:function(t){var e=dt.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this.invalidPoint=e[0],null;var n=new je(e,new re(this.argIndex,C.INTERIOR));this.lineEdgeMap.put(t,n),this.insertEdge(n),k.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,e[0]),this.insertBoundaryPoint(this.argIndex,e[e.length-1])},getInvalidPoint:function(){return this.invalidPoint},getBoundaryPoints:function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,s=t.iterator();s.hasNext();){var a=s.next();e[n++]=a.getCoordinate().copy()}return e},getBoundaryNodes:function(){return this.boundaryNodes===null&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes},addSelfIntersectionNode:function(t,e,n){return this.isBoundaryNode(t,e)?null:void(n===C.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n))},addPolygonRing:function(t,e,n){if(t.isEmpty())return null;var s=dt.removeRepeatedPoints(t.getCoordinates());if(s.length<4)return this._hasTooFewPoints=!0,this.invalidPoint=s[0],null;var a=e,g=n;et.isCCW(s)&&(a=n,g=e);var v=new je(s,new re(this.argIndex,C.BOUNDARY,a,g));this.lineEdgeMap.put(t,v),this.insertEdge(v),this.insertPoint(this.argIndex,s[0],C.BOUNDARY)},insertPoint:function(t,e,n){var s=this.nodes.addNode(e),a=s.getLabel();a===null?s.label=new re(t,n):a.setLocation(t,n)},createEdgeSetIntersector:function(){return new cs},addSelfIntersectionNodes:function(t){for(var e=this.edges.iterator();e.hasNext();)for(var n=e.next(),s=n.getLabel().getLocation(t),a=n.eiList.iterator();a.hasNext();){var g=a.next();this.addSelfIntersectionNode(t,g.coord,s)}},add:function(){if(arguments.length!==1)return cn.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof Le&&(this.useBoundaryDeterminationRule=!1),t instanceof Ft)this.addPolygon(t);else if(t instanceof It)this.addLineString(t);else if(t instanceof Qt)this.addPoint(t);else if(t instanceof Te)this.addCollection(t);else if(t instanceof De)this.addCollection(t);else if(t instanceof Le)this.addCollection(t);else{if(!(t instanceof Nt))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},locate:function(t){return nt(this.parentGeom,Nn)&&this.parentGeom.getNumGeometries()>50?(this.areaPtLocator===null&&(this.areaPtLocator=new An(this.parentGeom)),this.areaPtLocator.locate(t)):this.ptLocator.locate(t,this.parentGeom)},findEdge:function(){if(arguments.length===1){var t=arguments[0];return this.lineEdgeMap.get(t)}return cn.prototype.findEdge.apply(this,arguments)},interfaces_:function(){return[]},getClass:function(){return Re}}),Re.determineBoundary=function(t,e){return t.isInBoundary(e)?C.BOUNDARY:C.INTERIOR},f(di.prototype,{getArgGeometry:function(t){return this.arg[t].getGeometry()},setComputationPrecision:function(t){this.resultPrecisionModel=t,this.li.setPrecisionModel(this.resultPrecisionModel)},interfaces_:function(){return[]},getClass:function(){return di}}),f(Fe.prototype,{compareTo:function(t){var e=t,n=Fe.compareOriented(this.pts,this._orientation,e.pts,e._orientation);return n},interfaces_:function(){return[_]},getClass:function(){return Fe}}),Fe.orientation=function(t){return dt.increasingDirection(t)===1},Fe.compareOriented=function(t,e,n,s){for(var a=e?1:-1,g=s?1:-1,v=e?t.length:-1,x=s?n.length:-1,S=e?0:t.length-1,O=s?0:n.length-1;;){var B=t[S].compareTo(n[O]);if(B!==0)return B;S+=a,O+=g;var H=S===v,J=O===x;if(H&&!J)return-1;if(!H&&J)return 1;if(H&&J)return 0}},f(ps.prototype,{print:function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this.edges.size();e++){var n=this.edges.get(e);e>0&&t.print(","),t.print("(");for(var s=n.getCoordinates(),a=0;a<s.length;a++)a>0&&t.print(","),t.print(s[a].x+" "+s[a].y);t.println(")")}t.print(")  ")},addAll:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},findEdgeIndex:function(t){for(var e=0;e<this.edges.size();e++)if(this.edges.get(e).equals(t))return e;return-1},iterator:function(){return this.edges.iterator()},getEdges:function(){return this.edges},get:function(t){return this.edges.get(t)},findEqualEdge:function(t){var e=new Fe(t.getCoordinates()),n=this.ocaMap.get(e);return n},add:function(t){this.edges.add(t);var e=new Fe(t.getCoordinates());this.ocaMap.put(e,t)},interfaces_:function(){return[]},getClass:function(){return ps}}),T(ct,di),f(ct.prototype,{insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(e!==null){var n=e.getLabel(),s=t.getLabel();e.isPointwiseEqual(t)||(s=new re(t.getLabel()),s.flip());var a=e.getDepth();a.isNull()&&a.add(n),a.add(s),n.merge(s)}else this.edgeList.add(t)},getGraph:function(){return this.graph},cancelDuplicateResultEdges:function(){for(var t=this.graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},isCoveredByLA:function(t){return this.isCovered(t,this.resultLineList)?!0:!!this.isCovered(t,this.resultPolyList)},computeGeometry:function(t,e,n,s){var a=new F;return a.addAll(t),a.addAll(e),a.addAll(n),a.isEmpty()?ct.createEmptyResult(s,this.arg[0].getGeometry(),this.arg[1].getGeometry(),this.geomFact):this.geomFact.buildGeometry(a)},mergeSymLabels:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().mergeSymLabels()}},isCovered:function(t,e){for(var n=e.iterator();n.hasNext();){var s=n.next(),a=this.ptLocator.locate(t,s);if(a!==C.EXTERIOR)return!0}return!1},replaceCollapsedEdges:function(){for(var t=new F,e=this.edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this.edgeList.addAll(t)},updateNodeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},getResultGeometry:function(t){return this.computeOverlay(t),this.resultGeom},insertUniqueEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},computeOverlay:function(t){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var e=new F;this.arg[0].computeSplitEdges(e),this.arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),bi.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Pi(this.geomFact);n.add(this.graph),this.resultPolyList=n.getPolygons();var s=new Kn(this,this.geomFact,this.ptLocator);this.resultLineList=s.build(t);var a=new Hs(this,this.geomFact,this.ptLocator);this.resultPointList=a.build(t),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,t)},labelIncompleteNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setLocation(e,n)},copyPoints:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next(),s=this.graph.addNode(n.getCoordinate());s.setLabel(t,n.getLabel().getLocation(t))}},findResultAreaEdges:function(t){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next(),s=n.getLabel();s.isArea()&&!n.isInteriorAreaEdge()&&ct.isResultOfOp(s.getLocation(0,$.RIGHT),s.getLocation(1,$.RIGHT),t)&&n.setInResult(!0)}},computeLabelsFromDepths:function(){for(var t=this.edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),s=e.getDepth();if(!s.isNull()){s.normalize();for(var a=0;2>a;a++)n.isNull(a)||!n.isArea()||s.isNull(a)||(s.getDelta(a)===0?n.toLine(a):(k.isTrue(!s.isNull(a,$.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(a,$.LEFT,s.getLocation(a,$.LEFT)),k.isTrue(!s.isNull(a,$.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(a,$.RIGHT,s.getLocation(a,$.RIGHT))))}}},computeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()},labelIncompleteNodes:function(){for(var t=0,e=this.graph.getNodes().iterator();e.hasNext();){var n=e.next(),s=n.getLabel();n.isIsolated()&&(t++,s.isNull(0)?this.labelIncompleteNode(n,0):this.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(s)}},isCoveredByA:function(t){return!!this.isCovered(t,this.resultPolyList)},interfaces_:function(){return[]},getClass:function(){return ct}}),ct.overlayOp=function(t,e,n){var s=new ct(t,e),a=s.getResultGeometry(n);return a},ct.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return ct.createEmptyResult(ct.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return oi.map(t,{interfaces_:function(){return[MapOp]},map:function(s){return s.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Xt.overlayOp(t,e,ct.INTERSECTION)},ct.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ct.createEmptyResult(ct.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Xt.overlayOp(t,e,ct.SYMDIFFERENCE)},ct.resultDimension=function(t,e,n){var s=e.getDimension(),a=n.getDimension(),g=-1;switch(t){case ct.INTERSECTION:g=Math.min(s,a);break;case ct.UNION:g=Math.max(s,a);break;case ct.DIFFERENCE:g=s;break;case ct.SYMDIFFERENCE:g=Math.max(s,a)}return g},ct.createEmptyResult=function(t,e,n,s){var a=null;switch(ct.resultDimension(t,e,n)){case-1:a=s.createGeometryCollection(new Array(0).fill(null));break;case 0:a=s.createPoint();break;case 1:a=s.createLineString();break;case 2:a=s.createPolygon()}return a},ct.difference=function(t,e){return t.isEmpty()?ct.createEmptyResult(ct.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Xt.overlayOp(t,e,ct.DIFFERENCE))},ct.isResultOfOp=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=t.getLocation(0),s=t.getLocation(1);return ct.isResultOfOp(n,s,e)}if(arguments.length===3){var a=arguments[0],g=arguments[1],v=arguments[2];switch(a===C.BOUNDARY&&(a=C.INTERIOR),g===C.BOUNDARY&&(g=C.INTERIOR),v){case ct.INTERSECTION:return a===C.INTERIOR&&g===C.INTERIOR;case ct.UNION:return a===C.INTERIOR||g===C.INTERIOR;case ct.DIFFERENCE:return a===C.INTERIOR&&g!==C.INTERIOR;case ct.SYMDIFFERENCE:return a===C.INTERIOR&&g!==C.INTERIOR||a!==C.INTERIOR&&g===C.INTERIOR}return!1}},ct.INTERSECTION=1,ct.UNION=2,ct.DIFFERENCE=3,ct.SYMDIFFERENCE=4,f(Qe.prototype,{selfSnap:function(t){var e=new ye(t),n=e.snapTo(t,this.snapTolerance);return n},removeCommonBits:function(t){this.cbr=new Zn,this.cbr.add(t[0]),this.cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this.cbr.removeCommonBits(t[0].copy()),e[1]=this.cbr.removeCommonBits(t[1].copy()),e},prepareResult:function(t){return this.cbr.addCommonBits(t),t},getResultGeometry:function(t){var e=this.snap(this.geom),n=ct.overlayOp(e[0],e[1],t);return this.prepareResult(n)},checkValid:function(t){t.isValid()||mt.out.println("Snapped geometry is invalid")},computeSnapTolerance:function(){this.snapTolerance=ye.computeOverlaySnapTolerance(this.geom[0],this.geom[1])},snap:function(t){var e=this.removeCommonBits(t),n=ye.snap(e[0],e[1],this.snapTolerance);return n},interfaces_:function(){return[]},getClass:function(){return Qe}}),Qe.overlayOp=function(t,e,n){var s=new Qe(t,e);return s.getResultGeometry(n)},Qe.union=function(t,e){return Qe.overlayOp(t,e,ct.UNION)},Qe.intersection=function(t,e){return Qe.overlayOp(t,e,ct.INTERSECTION)},Qe.symDifference=function(t,e){return Qe.overlayOp(t,e,ct.SYMDIFFERENCE)},Qe.difference=function(t,e){return Qe.overlayOp(t,e,ct.DIFFERENCE)},f(Xt.prototype,{getResultGeometry:function(t){var e=null,n=!1,s=null;try{e=ct.overlayOp(this.geom[0],this.geom[1],t);var a=!0;a&&(n=!0)}catch(g){if(!(g instanceof M))throw g;s=g}finally{}if(!n)try{e=Qe.overlayOp(this.geom[0],this.geom[1],t)}catch(g){throw g instanceof M?s:g}finally{}return e},interfaces_:function(){return[]},getClass:function(){return Xt}}),Xt.overlayOp=function(t,e,n){var s=new Xt(t,e);return s.getResultGeometry(n)},Xt.union=function(t,e){return Xt.overlayOp(t,e,ct.UNION)},Xt.intersection=function(t,e){return Xt.overlayOp(t,e,ct.INTERSECTION)},Xt.symDifference=function(t,e){return Xt.overlayOp(t,e,ct.SYMDIFFERENCE)},Xt.difference=function(t,e){return Xt.overlayOp(t,e,ct.DIFFERENCE)},f(We.prototype,{addPolygon:function(t){if(t.isEmpty())return null;var e=null,n=0,s=this.horizontalBisector(t);if(s.getLength()===0)n=0,e=s.getCoordinate();else{var a=Xt.overlayOp(s,t,ct.INTERSECTION),g=this.widestGeometry(a);n=g.getEnvelopeInternal().getWidth(),e=We.centre(g.getEnvelopeInternal())}(this.interiorPoint===null||n>this.maxWidth)&&(this.interiorPoint=e,this.maxWidth=n)},getInteriorPoint:function(){return this.interiorPoint},widestGeometry:function(){if(arguments[0]instanceof Nt){var e=arguments[0];if(e.isEmpty())return e;for(var n=e.getGeometryN(0),s=1;s<e.getNumGeometries();s++)e.getGeometryN(s).getEnvelopeInternal().getWidth()>n.getEnvelopeInternal().getWidth()&&(n=e.getGeometryN(s));return n}if(arguments[0]instanceof Q){var a=arguments[0];return a instanceof Nt?this.widestGeometry(a):a}},horizontalBisector:function(t){var e=t.getEnvelopeInternal(),n=Ri.getBisectorY(t);return this.factory.createLineString([new P(e.getMinX(),n),new P(e.getMaxX(),n)])},add:function(t){if(t instanceof Ft)this.addPolygon(t);else if(t instanceof Nt)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))},interfaces_:function(){return[]},getClass:function(){return We}}),We.centre=function(t){return new P(We.avg(t.getMinX(),t.getMaxX()),We.avg(t.getMinY(),t.getMaxY()))},We.avg=function(t,e){return(t+e)/2},f(Ri.prototype,{updateInterval:function(t){t<=this.centreY?t>this.loY&&(this.loY=t):t>this.centreY&&t<this.hiY&&(this.hiY=t)},getBisectorY:function(){this.process(this.poly.getExteriorRing());for(var t=0;t<this.poly.getNumInteriorRing();t++)this.process(this.poly.getInteriorRingN(t));var e=We.avg(this.hiY,this.loY);return e},process:function(t){for(var e=t.getCoordinateSequence(),n=0;n<e.size();n++){var s=e.getY(n);this.updateInterval(s)}},interfaces_:function(){return[]},getClass:function(){return Ri}}),Ri.getBisectorY=function(t){var e=new Ri(t);return e.getBisectorY()},We.SafeBisectorFinder=Ri,f(tr.prototype,{addEndpoints:function(){if(arguments[0]instanceof Q){var t=arguments[0];if(t instanceof It)this.addEndpoints(t.getCoordinates());else if(t instanceof Nt)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addEndpoints(e.getGeometryN(n))}else if(arguments[0]instanceof Array){var s=arguments[0];this.add(s[0]),this.add(s[s.length-1])}},getInteriorPoint:function(){return this.interiorPoint},addInterior:function(){if(arguments[0]instanceof Q){var t=arguments[0];if(t instanceof It)this.addInterior(t.getCoordinates());else if(t instanceof Nt)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addInterior(e.getGeometryN(n))}else if(arguments[0]instanceof Array)for(var s=arguments[0],n=1;n<s.length-1;n++)this.add(s[n])},add:function(t){var e=t.distance(this.centroid);e<this.minDistance&&(this.interiorPoint=new P(t),this.minDistance=e)},interfaces_:function(){return[]},getClass:function(){return tr}}),f(Oi.prototype,{getInteriorPoint:function(){return this.interiorPoint},add:function(){if(arguments[0]instanceof Q){var t=arguments[0];if(t instanceof Qt)this.add(t.getCoordinate());else if(t instanceof Nt)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))}else if(arguments[0]instanceof P){var s=arguments[0],a=s.distance(this.centroid);a<this.minDistance&&(this.interiorPoint=new P(s),this.minDistance=a)}},interfaces_:function(){return[]},getClass:function(){return Oi}}),f(xt.prototype,{interfaces_:function(){return[]},getClass:function(){return xt}}),xt.toDegrees=function(t){return 180*t/Math.PI},xt.normalize=function(t){for(;t>Math.PI;)t-=xt.PI_TIMES_2;for(;t<=-Math.PI;)t+=xt.PI_TIMES_2;return t},xt.angle=function(){if(arguments.length===1){var t=arguments[0];return Math.atan2(t.y,t.x)}if(arguments.length===2){var e=arguments[0],n=arguments[1],s=n.x-e.x,a=n.y-e.y;return Math.atan2(a,s)}},xt.isAcute=function(t,e,n){var s=t.x-e.x,a=t.y-e.y,g=n.x-e.x,v=n.y-e.y,x=s*g+a*v;return x>0},xt.isObtuse=function(t,e,n){var s=t.x-e.x,a=t.y-e.y,g=n.x-e.x,v=n.y-e.y,x=s*g+a*v;return 0>x},xt.interiorAngle=function(t,e,n){var s=xt.angle(e,t),a=xt.angle(e,n);return Math.abs(a-s)},xt.normalizePositive=function(t){if(0>t){for(;0>t;)t+=xt.PI_TIMES_2;t>=xt.PI_TIMES_2&&(t=0)}else{for(;t>=xt.PI_TIMES_2;)t-=xt.PI_TIMES_2;0>t&&(t=0)}return t},xt.angleBetween=function(t,e,n){var s=xt.angle(e,t),a=xt.angle(e,n);return xt.diff(s,a)},xt.diff=function(t,e){var n=null;return n=e>t?e-t:t-e,n>Math.PI&&(n=2*Math.PI-n),n},xt.toRadians=function(t){return t*Math.PI/180},xt.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?xt.COUNTERCLOCKWISE:0>n?xt.CLOCKWISE:xt.NONE},xt.angleBetweenOriented=function(t,e,n){var s=xt.angle(e,t),a=xt.angle(e,n),g=a-s;return g<=-Math.PI?g+xt.PI_TIMES_2:g>Math.PI?g-xt.PI_TIMES_2:g},xt.PI_TIMES_2=2*Math.PI,xt.PI_OVER_2=Math.PI/2,xt.PI_OVER_4=Math.PI/4,xt.COUNTERCLOCKWISE=et.COUNTERCLOCKWISE,xt.CLOCKWISE=et.CLOCKWISE,xt.NONE=et.COLLINEAR,f(kt.prototype,{area:function(){return kt.area(this.p0,this.p1,this.p2)},signedArea:function(){return kt.signedArea(this.p0,this.p1,this.p2)},interpolateZ:function(t){if(t===null)throw new d;return kt.interpolateZ(t,this.p0,this.p1,this.p2)},longestSideLength:function(){return kt.longestSideLength(this.p0,this.p1,this.p2)},isAcute:function(){return kt.isAcute(this.p0,this.p1,this.p2)},circumcentre:function(){return kt.circumcentre(this.p0,this.p1,this.p2)},area3D:function(){return kt.area3D(this.p0,this.p1,this.p2)},centroid:function(){return kt.centroid(this.p0,this.p1,this.p2)},inCentre:function(){return kt.inCentre(this.p0,this.p1,this.p2)},interfaces_:function(){return[]},getClass:function(){return kt}}),kt.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},kt.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},kt.det=function(t,e,n,s){return t*s-e*n},kt.interpolateZ=function(t,e,n,s){var a=e.x,g=e.y,v=n.x-a,x=s.x-a,S=n.y-g,O=s.y-g,B=v*O-x*S,H=t.x-a,J=t.y-g,ut=(O*H-x*J)/B,pt=(-S*H+v*J)/B,Lt=e.z+ut*(n.z-e.z)+pt*(s.z-e.z);return Lt},kt.longestSideLength=function(t,e,n){var s=t.distance(e),a=e.distance(n),g=n.distance(t),v=s;return a>v&&(v=a),g>v&&(v=g),v},kt.isAcute=function(t,e,n){return xt.isAcute(t,e,n)&&xt.isAcute(e,n,t)?!!xt.isAcute(n,t,e):!1},kt.circumcentre=function(t,e,n){var s=n.x,a=n.y,g=t.x-s,v=t.y-a,x=e.x-s,S=e.y-a,O=2*kt.det(g,v,x,S),B=kt.det(v,g*g+v*v,S,x*x+S*S),H=kt.det(g,g*g+v*v,x,x*x+S*S),J=s-B/O,ut=a+H/O;return new P(J,ut)},kt.perpendicularBisector=function(t,e){var n=e.x-t.x,s=e.y-t.y,a=new jt(t.x+n/2,t.y+s/2,1),g=new jt(t.x-s+n/2,t.y+n+s/2,1);return new jt(a,g)},kt.angleBisector=function(t,e,n){var s=e.distance(t),a=e.distance(n),g=s/(s+a),v=n.x-t.x,x=n.y-t.y,S=new P(t.x+g*v,t.y+g*x);return S},kt.area3D=function(t,e,n){var s=e.x-t.x,a=e.y-t.y,g=e.z-t.z,v=n.x-t.x,x=n.y-t.y,S=n.z-t.z,O=a*S-g*x,B=g*v-s*S,H=s*x-a*v,J=O*O+B*B+H*H,ut=Math.sqrt(J)/2;return ut},kt.centroid=function(t,e,n){var s=(t.x+e.x+n.x)/3,a=(t.y+e.y+n.y)/3;return new P(s,a)},kt.inCentre=function(t,e,n){var s=e.distance(n),a=t.distance(n),g=t.distance(e),v=s+a+g,x=(s*t.x+a*e.x+g*n.x)/v,S=(s*t.y+a*e.y+g*n.y)/v;return new P(x,S)},f(Xe.prototype,{getRadius:function(){return this.compute(),this.radius},getDiameter:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[1];return this.input.getFactory().createLineString([t,e])},getExtremalPoints:function(){return this.compute(),this.extremalPts},computeCirclePoints:function(){if(this.input.isEmpty())return this.extremalPts=new Array(0).fill(null),null;if(this.input.getNumPoints()===1){var n=this.input.getCoordinates();return this.extremalPts=[new P(n[0])],null}var t=this.input.convexHull(),e=t.getCoordinates(),n=e;if(e[0].equals2D(e[e.length-1])&&(n=new Array(e.length-1).fill(null),dt.copyDeep(e,0,n,0,e.length-1)),n.length<=2)return this.extremalPts=dt.copyDeep(n),null;for(var s=Xe.lowestPoint(n),a=Xe.pointWitMinAngleWithX(n,s),g=0;g<n.length;g++){var v=Xe.pointWithMinAngleWithSegment(n,s,a);if(xt.isObtuse(s,v,a))return this.extremalPts=[new P(s),new P(a)],null;if(xt.isObtuse(v,s,a))s=v;else{if(!xt.isObtuse(v,a,s))return this.extremalPts=[new P(s),new P(a),new P(v)],null;a=v}}k.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")},compute:function(){return this.extremalPts!==null?null:(this.computeCirclePoints(),this.computeCentre(),void(this.centre!==null&&(this.radius=this.centre.distance(this.extremalPts[0]))))},getFarthestPoints:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[this.extremalPts.length-1];return this.input.getFactory().createLineString([t,e])},getCircle:function(){if(this.compute(),this.centre===null)return this.input.getFactory().createPolygon();var t=this.input.getFactory().createPoint(this.centre);return this.radius===0?t:t.buffer(this.radius)},getCentre:function(){return this.compute(),this.centre},computeCentre:function(){switch(this.extremalPts.length){case 0:this.centre=null;break;case 1:this.centre=this.extremalPts[0];break;case 2:this.centre=new P((this.extremalPts[0].x+this.extremalPts[1].x)/2,(this.extremalPts[0].y+this.extremalPts[1].y)/2);break;case 3:this.centre=kt.circumcentre(this.extremalPts[0],this.extremalPts[1],this.extremalPts[2])}},interfaces_:function(){return[]},getClass:function(){return Xe}}),Xe.pointWitMinAngleWithX=function(t,e){for(var n=m.MAX_VALUE,s=null,a=0;a<t.length;a++){var g=t[a];if(g!==e){var v=g.x-e.x,x=g.y-e.y;0>x&&(x=-x);var S=Math.sqrt(v*v+x*x),O=x/S;n>O&&(n=O,s=g)}}return s},Xe.lowestPoint=function(t){for(var e=t[0],n=1;n<t.length;n++)t[n].y<e.y&&(e=t[n]);return e},Xe.pointWithMinAngleWithSegment=function(t,e,n){for(var s=m.MAX_VALUE,a=null,g=0;g<t.length;g++){var v=t[g];if(v!==e&&v!==n){var x=xt.angleBetween(e,v,n);s>x&&(s=x,a=v)}}return a},f(_e.prototype,{getWidthCoordinate:function(){return this.computeMinimumDiameter(),this.minWidthPt},getSupportingSegment:function(){return this.computeMinimumDiameter(),this.inputGeom.getFactory().createLineString([this.minBaseSeg.p0,this.minBaseSeg.p1])},getDiameter:function(){if(this.computeMinimumDiameter(),this.minWidthPt===null)return this.inputGeom.getFactory().createLineString(null);var t=this.minBaseSeg.project(this.minWidthPt);return this.inputGeom.getFactory().createLineString([t,this.minWidthPt])},computeWidthConvex:function(t){t instanceof Ft?this.convexHullPts=t.getExteriorRing().getCoordinates():this.convexHullPts=t.getCoordinates(),this.convexHullPts.length===0?(this.minWidth=0,this.minWidthPt=null,this.minBaseSeg=null):this.convexHullPts.length===1?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[0]):this.convexHullPts.length===2||this.convexHullPts.length===3?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[1]):this.computeConvexRingMinDiameter(this.convexHullPts)},computeConvexRingMinDiameter:function(t){this.minWidth=m.MAX_VALUE;for(var e=1,n=new st,s=0;s<t.length-1;s++)n.p0=t[s],n.p1=t[s+1],e=this.findMaxPerpDistance(t,n,e)},computeMinimumDiameter:function(){if(this.minWidthPt!==null)return null;if(this.isConvex)this.computeWidthConvex(this.inputGeom);else{var t=new Ye(this.inputGeom).getConvexHull();this.computeWidthConvex(t)}},getLength:function(){return this.computeMinimumDiameter(),this.minWidth},findMaxPerpDistance:function(t,e,n){for(var s=e.distancePerpendicular(t[n]),a=s,g=n,v=g;a>=s;)s=a,g=v,v=_e.nextIndex(t,g),a=e.distancePerpendicular(t[v]);return s<this.minWidth&&(this.minPtIndex=g,this.minWidth=s,this.minWidthPt=t[this.minPtIndex],this.minBaseSeg=new st(e)),g},getMinimumRectangle:function(){if(this.computeMinimumDiameter(),this.minWidth===0)return this.minBaseSeg.p0.equals2D(this.minBaseSeg.p1)?this.inputGeom.getFactory().createPoint(this.minBaseSeg.p0):this.minBaseSeg.toGeometry(this.inputGeom.getFactory());for(var t=this.minBaseSeg.p1.x-this.minBaseSeg.p0.x,e=this.minBaseSeg.p1.y-this.minBaseSeg.p0.y,n=m.MAX_VALUE,s=-m.MAX_VALUE,a=m.MAX_VALUE,g=-m.MAX_VALUE,v=0;v<this.convexHullPts.length;v++){var x=_e.computeC(t,e,this.convexHullPts[v]);x>s&&(s=x),n>x&&(n=x);var S=_e.computeC(-e,t,this.convexHullPts[v]);S>g&&(g=S),a>S&&(a=S)}var O=_e.computeSegmentForLine(-t,-e,g),B=_e.computeSegmentForLine(-t,-e,a),H=_e.computeSegmentForLine(-e,t,s),J=_e.computeSegmentForLine(-e,t,n),ut=H.lineIntersection(O),pt=J.lineIntersection(O),Lt=J.lineIntersection(B),Yt=H.lineIntersection(B),me=this.inputGeom.getFactory().createLinearRing([ut,pt,Lt,Yt,ut]);return this.inputGeom.getFactory().createPolygon(me,null)},interfaces_:function(){return[]},getClass:function(){return _e}}),_e.nextIndex=function(t,e){return e++,e>=t.length&&(e=0),e},_e.computeC=function(t,e,n){return t*n.y-e*n.x},_e.getMinimumDiameter=function(t){return new _e(t).getDiameter()},_e.getMinimumRectangle=function(t){return new _e(t).getMinimumRectangle()},_e.computeSegmentForLine=function(t,e,n){var s=null,a=null;return Math.abs(e)>Math.abs(t)?(s=new P(0,n/e),a=new P(1,n/e-t/e)):(s=new P(n/t,0),a=new P(n/t-e/t,1)),new st(s,a)};var Ch=Object.freeze({Centroid:an,CGAlgorithms:et,ConvexHull:Ye,InteriorPointArea:We,InteriorPointLine:tr,InteriorPointPoint:Oi,RobustLineIntersector:ue,MinimumBoundingCircle:Xe,MinimumDiameter:_e});f(kn.prototype,{getResultGeometry:function(){return new er(this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(0>=t)throw new d;this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return kn}}),kn.densifyPoints=function(t,e,n){for(var s=new st,a=new V,g=0;g<t.length-1;g++){s.p0=t[g],s.p1=t[g+1],a.add(s.p0,!1);var v=s.getLength(),x=Math.trunc(v/e)+1;if(x>1)for(var S=v/x,O=1;x>O;O++){var B=O*S/v,H=s.pointAlong(B);n.makePrecise(H),a.add(H,!1)}}return a.add(t[t.length-1],!1),a.toCoordinateArray()},kn.densify=function(t,e){var n=new kn(t);return n.setDistanceTolerance(e),n.getResultGeometry()},T(er,Dt),f(er.prototype,{transformMultiPolygon:function(t,e){var n=Dt.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformPolygon:function(t,e){var n=Dt.prototype.transformPolygon.call(this,t,e);return e instanceof Le?n:this.createValidArea(n)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),s=kn.densifyPoints(n,this.distanceTolerance,e.getPrecisionModel());return e instanceof It&&s.length===1&&(s=new Array(0).fill(null)),this.factory.getCoordinateSequenceFactory().create(s)},createValidArea:function(t){return t.buffer(0)},interfaces_:function(){return[]},getClass:function(){return er}}),kn.DensifyTransformer=er;var Sh=Object.freeze({Densifier:kn});f(Fn.prototype,{find:function(t){var e=this;do{if(e===null)return null;if(e.dest().equals2D(t))return e;e=e.oNext()}while(e!==this);return null},dest:function(){return this._sym._orig},oNext:function(){return this._sym._next},insert:function(t){if(this.oNext()===this)return this.insertAfter(t),null;var e=this.compareTo(t),n=this;do{var s=n.oNext(),a=s.compareTo(t);if(a!==e||s===this)return n.insertAfter(t),null;n=s}while(n!==this);k.shouldNeverReachHere()},insertAfter:function(t){k.equals(this._orig,t.orig());var e=this.oNext();this._sym.setNext(t),t.sym().setNext(e)},degree:function(){var e=0,n=this;do e++,n=n.oNext();while(n!==this);return e},equals:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this._orig.equals2D(t)&&this._sym._orig.equals(e)}},deltaY:function(){return this._sym._orig.y-this._orig.y},sym:function(){return this._sym},prev:function(){return this._sym.next()._sym},compareAngularDirection:function(t){var e=this.deltaX(),n=this.deltaY(),s=t.deltaX(),a=t.deltaY();if(e===s&&n===a)return 0;var g=ht.quadrant(e,n),v=ht.quadrant(s,a);return g>v?1:v>g?-1:et.computeOrientation(t._orig,t.dest(),this.dest())},prevNode:function(){for(var t=this;t.degree()===2;)if(t=t.prev(),t===this)return null;return t},compareTo:function(t){var e=t,n=this.compareAngularDirection(e);return n},next:function(){return this._next},setSym:function(t){this._sym=t},orig:function(){return this._orig},toString:function(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"},setNext:function(t){this._next=t},init:function(t){this.setSym(t),t.setSym(this),this.setNext(t),t.setNext(this)},deltaX:function(){return this._sym._orig.x-this._orig.x},interfaces_:function(){return[]},getClass:function(){return Fn}}),Fn.init=function(t,e){if(t._sym!==null||e._sym!==null||t._next!==null||e._next!==null)throw new IllegalStateException("Edges are already initialized");return t.init(e),t},Fn.create=function(t,e){var n=new Fn(t),s=new Fn(e);return n.init(s),n},T(be,Fn),f(be.prototype,{mark:function(){this._isMarked=!0},setMark:function(t){this._isMarked=t},isMarked:function(){return this._isMarked},interfaces_:function(){return[]},getClass:function(){return be}}),be.setMarkBoth=function(t,e){t.setMark(e),t.sym().setMark(e)},be.isMarked=function(t){return t.isMarked()},be.setMark=function(t,e){t.setMark(e)},be.markBoth=function(t){t.mark(),t.sym().mark()},be.mark=function(t){t.mark()},f(nr.prototype,{insert:function(t,e,n){var s=this.create(t,e);n!==null?n.insert(s):this.vertexMap.put(t,s);var a=this.vertexMap.get(e);return a!==null?a.insert(s.sym()):this.vertexMap.put(e,s.sym()),s},create:function(t,e){var n=this.createEdge(t),s=this.createEdge(e);return Fn.init(n,s),n},createEdge:function(t){return new Fn(t)},addEdge:function(t,e){if(!nr.isValidEdge(t,e))return null;var n=this.vertexMap.get(t),s=null;if(n!==null&&(s=n.find(e)),s!==null)return s;var a=this.insert(t,e,n);return a},getVertexEdges:function(){return this.vertexMap.values()},findEdge:function(t,e){var n=this.vertexMap.get(t);return n===null?null:n.find(e)},interfaces_:function(){return[]},getClass:function(){return nr}}),nr.isValidEdge=function(t,e){var n=e.compareTo(t);return n!==0},T(kr,be),f(kr.prototype,{setStart:function(){this._isStart=!0},isStart:function(){return this._isStart},interfaces_:function(){return[]},getClass:function(){return kr}}),T(ms,nr),f(ms.prototype,{createEdge:function(t){return new kr(t)},interfaces_:function(){return[]},getClass:function(){return ms}}),f(ir.prototype,{addLine:function(t){this.lines.add(this.factory.createLineString(t.toCoordinateArray()))},updateRingStartEdge:function(t){return t.isStart()||(t=t.sym(),t.isStart())?this.ringStartEdge===null?(this.ringStartEdge=t,null):void(t.orig().compareTo(this.ringStartEdge.orig())<0&&(this.ringStartEdge=t)):null},getResult:function(){return this.result===null&&this.computeResult(),this.result},process:function(t){var e=t.prevNode();e===null&&(e=t),this.stackEdges(e),this.buildLines()},buildRing:function(t){var e=new V,n=t;for(e.add(n.orig().copy(),!1);n.sym().degree()===2;){var s=n.next();if(s===t)break;e.add(s.orig().copy(),!1),n=s}e.add(n.dest().copy(),!1),this.addLine(e)},buildLine:function(t){var e=new V,n=t;for(this.ringStartEdge=null,be.markBoth(n),e.add(n.orig().copy(),!1);n.sym().degree()===2;){this.updateRingStartEdge(n);var s=n.next();if(s===t)return this.buildRing(this.ringStartEdge),null;e.add(s.orig().copy(),!1),n=s,be.markBoth(n)}e.add(n.dest().copy(),!1),this.stackEdges(n.sym()),this.addLine(e)},stackEdges:function(t){var e=t;do be.isMarked(e)||this.nodeEdgeStack.add(e),e=e.oNext();while(e!==t)},computeResult:function(){for(var t=this.graph.getVertexEdges(),e=t.iterator();e.hasNext();){var n=e.next();be.isMarked(n)||this.process(n)}this.result=this.factory.buildGeometry(this.lines)},buildLines:function(){for(;!this.nodeEdgeStack.empty();){var t=this.nodeEdgeStack.pop();be.isMarked(t)||this.buildLine(t)}},add:function(){if(arguments[0]instanceof Q){var t=arguments[0];t.apply({interfaces_:function(){return[Bt]},filter:function(S){S instanceof It&&this.add(S)}})}else if(nt(arguments[0],it))for(var e=arguments[0],n=e.iterator();n.hasNext();){var s=n.next();this.add(s)}else if(arguments[0]instanceof It){var a=arguments[0];this.factory===null&&(this.factory=a.getFactory());for(var g=a.getCoordinateSequence(),v=!1,n=1;n<g.size();n++){var x=this.graph.addEdge(g.getCoordinate(n-1),g.getCoordinate(n));x!==null&&(v||(x.setStart(),v=!0))}}},interfaces_:function(){return[]},getClass:function(){return ir}}),ir.dissolve=function(t){var e=new ir;return e.add(t),e.getResult()};var bh=Object.freeze({LineDissolver:ir});f(wn.prototype,{hasChildren:function(){for(var t=0;4>t;t++)if(this.subnode[t]!==null)return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;4>e;e++)this.subnode[e]!==null&&this.subnode[e].addAllItems(t);return t},getNodeCount:function(){for(var t=0,e=0;4>e;e++)this.subnode[e]!==null&&(t+=this.subnode[e].size());return t+1},size:function(){for(var t=0,e=0;4>e;e++)this.subnode[e]!==null&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){if(!this.isSearchMatch(t))return null;e.addAll(this.items);for(var n=0;4>n;n++)this.subnode[n]!==null&&this.subnode[n].addAllItemsFromOverlapping(t,e)},visitItems:function(t,e){for(var n=this.items.iterator();n.hasNext();)e.visitItem(n.next())},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,s=0;4>s;s++)if(this.subnode[s]!==null&&(n=this.subnode[s].remove(t,e))){this.subnode[s].isPrunable()&&(this.subnode[s]=null);break}return n||(n=this.items.remove(e))},visit:function(t,e){if(!this.isSearchMatch(t))return null;this.visitItems(t,e);for(var n=0;4>n;n++)this.subnode[n]!==null&&this.subnode[n].visit(t,e)},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;4>e;e++)if(this.subnode[e]!==null){var n=this.subnode[e].depth();n>t&&(t=n)}return t+1},isEmpty:function(){var e=!0;this.items.isEmpty()||(e=!1);for(var n=0;4>n;n++)this.subnode[n]!==null&&(this.subnode[n].isEmpty()||(e=!1));return e},add:function(t){this.items.add(t)},interfaces_:function(){return[b]},getClass:function(){return wn}}),wn.getSubnodeIndex=function(t,e,n){var s=-1;return t.getMinX()>=e&&(t.getMinY()>=n&&(s=3),t.getMaxY()<=n&&(s=1)),t.getMaxX()<=e&&(t.getMinY()>=n&&(s=2),t.getMaxY()<=n&&(s=0)),s},ze.exponent=function(t){return vs(64,t)-1023},ze.powerOf2=function(t){return Math.pow(2,t)},f(Fr.prototype,{getLevel:function(){return this.level},computeKey:function(){if(arguments.length===1){var t=arguments[0];for(this.level=Fr.computeQuadLevel(t),this.env=new G,this.computeKey(this.level,t);!this.env.contains(t);)this.level+=1,this.computeKey(this.level,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1],s=ze.powerOf2(e);this.pt.x=Math.floor(n.getMinX()/s)*s,this.pt.y=Math.floor(n.getMinY()/s)*s,this.env.init(this.pt.x,this.pt.x+s,this.pt.y,this.pt.y+s)}},getEnvelope:function(){return this.env},getCentre:function(){return new P((this.env.getMinX()+this.env.getMaxX())/2,(this.env.getMinY()+this.env.getMaxY())/2)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Fr}}),Fr.computeQuadLevel=function(t){var e=t.getWidth(),n=t.getHeight(),s=e>n?e:n,a=ze.exponent(s)+1;return a},T(dn,wn),f(dn.prototype,{find:function(t){var e=wn.getSubnodeIndex(t,this.centrex,this.centrey);if(e===-1)return this;if(this.subnode[e]!==null){var n=this.subnode[e];return n.find(t)}return this},isSearchMatch:function(t){return this.env.intersects(t)},getSubnode:function(t){return this.subnode[t]===null&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getEnvelope:function(){return this.env},getNode:function(t){var e=wn.getSubnodeIndex(t,this.centrex,this.centrey);if(e!==-1){var n=this.getSubnode(e);return n.getNode(t)}return this},createSubnode:function(t){var e=0,n=0,s=0,a=0;switch(t){case 0:e=this.env.getMinX(),n=this.centrex,s=this.env.getMinY(),a=this.centrey;break;case 1:e=this.centrex,n=this.env.getMaxX(),s=this.env.getMinY(),a=this.centrey;break;case 2:e=this.env.getMinX(),n=this.centrex,s=this.centrey,a=this.env.getMaxY();break;case 3:e=this.centrex,n=this.env.getMaxX(),s=this.centrey,a=this.env.getMaxY()}var g=new G(e,n,s,a),v=new dn(g,this.level-1);return v},insertNode:function(t){k.isTrue(this.env===null||this.env.contains(t.env));var e=wn.getSubnodeIndex(t.env,this.centrex,this.centrey);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insertNode(t),this.subnode[e]=n}},interfaces_:function(){return[]},getClass:function(){return dn}}),dn.createNode=function(t){var e=new Fr(t),n=new dn(e.getEnvelope(),e.getLevel());return n},dn.createExpanded=function(t,e){var n=new G(e);t!==null&&n.expandToInclude(t.env);var s=dn.createNode(n);return t!==null&&s.insertNode(t),s},f(gi.prototype,{interfaces_:function(){return[]},getClass:function(){return gi}}),gi.isZeroWidth=function(t,e){var n=e-t;if(n===0)return!0;var s=Math.max(Math.abs(t),Math.abs(e)),a=n/s,g=ze.exponent(a);return g<=gi.MIN_BINARY_EXPONENT},gi.MIN_BINARY_EXPONENT=-50,T(pi,wn),f(pi.prototype,{insert:function(t,e){var n=wn.getSubnodeIndex(t,pi.origin.x,pi.origin.y);if(n===-1)return this.add(e),null;var s=this.subnode[n];if(s===null||!s.getEnvelope().contains(t)){var a=dn.createExpanded(s,t);this.subnode[n]=a}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){k.isTrue(t.getEnvelope().contains(e));var s=gi.isZeroWidth(e.getMinX(),e.getMaxX()),a=gi.isZeroWidth(e.getMinY(),e.getMaxY()),g=null;g=s||a?t.find(e):t.getNode(e),g.add(n)},interfaces_:function(){return[]},getClass:function(){return pi}}),pi.origin=new P(0,0),f(mi.prototype,{size:function(){return this.root!==null?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=mi.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(arguments.length===1){var t=arguments[0],e=new fs;return this.query(t,e),e.getItems()}if(arguments.length===2){var n=arguments[0],s=arguments[1];this.root.visit(n,s)}},queryAll:function(){var t=new F;return this.root.addAllItems(t),t},remove:function(t,e){var n=mi.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e);var n=t.getHeight();n<this.minExtent&&n>0&&(this.minExtent=n)},depth:function(){return this.root!==null?this.root.depth():0},isEmpty:function(){return this.root===null},interfaces_:function(){return[Wt,b]},getClass:function(){return mi}}),mi.ensureExtent=function(t,e){var n=t.getMinX(),s=t.getMaxX(),a=t.getMinY(),g=t.getMaxY();return n!==s&&a!==g?t:(n===s&&(n-=e/2,s=n+e/2),a===g&&(a-=e/2,g=a+e/2),new G(n,s,a,g))},mi.serialVersionUID=-7461163625812743e3;var Nh=Object.freeze({Quadtree:mi}),Th=Object.freeze({STRtree:Zt}),Ph=Object.freeze({quadtree:Nh,strtree:Th}),Mh=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];f(Ai.prototype,{read:function(t){var e=void 0;e=typeof t=="string"?JSON.parse(t):t;var n=e.type;if(!Gn[n])throw new Error("Unknown GeoJSON type: "+e.type);return Mh.indexOf(n)!==-1?Gn[n].apply(this,[e.coordinates]):n==="GeometryCollection"?Gn[n].apply(this,[e.geometries]):Gn[n].apply(this,[e])},write:function(t){var e=t.getGeometryType();if(!Ei[e])throw new Error("Geometry is not supported");return Ei[e].apply(this,[t])}});var Gn={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var s=t.geometry.type;if(!Gn[s])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Gn.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(e){for(var n=[],s=0;s<e.length;++s){var a=e[s];n.push(new P(a[0],a[1]))}return n},bbox:function(t){return this.geometryFactory.createLinearRing([new P(t[0],t[1]),new P(t[2],t[1]),new P(t[2],t[3]),new P(t[0],t[3]),new P(t[0],t[1])])},Point:function(t){var e=new P(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Gn.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Gn.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Gn.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Gn.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),s=[],a=1;a<t.length;++a){var g=t[a],v=Gn.coordinates.apply(this,[g]),x=this.geometryFactory.createLinearRing(v);s.push(x)}return this.geometryFactory.createPolygon(n,s)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var s=t[n];e.push(Gn.Polygon.apply(this,[s]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var s=t[n];e.push(this.read(s))}return this.geometryFactory.createGeometryCollection(e)}},Ei={coordinate:function(t){return[t.x,t.y]},Point:function(t){var e=Ei.coordinate.apply(this,[t.getCoordinate()]);return{type:"Point",coordinates:e}},MultiPoint:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var s=t.geometries[n],a=Ei.Point.apply(this,[s]);e.push(a.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),s=0;s<n.length;++s){var a=n[s];e.push(Ei.coordinate.apply(this,[a]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var s=t.geometries[n],a=Ei.LineString.apply(this,[s]);e.push(a.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Ei.LineString.apply(this,[t.shell]);e.push(n.coordinates);for(var s=0;s<t.holes.length;++s){var a=t.holes[s],g=Ei.LineString.apply(this,[a]);e.push(g.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var s=t.geometries[n],a=Ei.Polygon.apply(this,[s]);e.push(a.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var s=t.geometries[n],a=s.getGeometryType();e.push(Ei[a].apply(this,[s]))}return{type:"GeometryCollection",geometries:e}}};f(Mo.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Mt.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;n>e;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;n>e;e++)this.reducePrecision(t.geometries[e])}}),f(Di.prototype,{write:function(t){return this.parser.write(t)}}),f(Js.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Mt.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(var e=0,n=t.points.coordinates.length;n>e;e++)this.precisionModel.makePrecise(t.points.coordinates[e]);else if(t.geometries)for(var s=0,a=t.geometries.length;a>s;s++)this.reducePrecision(t.geometries[s])}}),f(Ro.prototype,{read:function(t){return t instanceof ol.geom.Point?this.convertFromPoint(t):t instanceof ol.geom.LineString?this.convertFromLineString(t):t instanceof ol.geom.LinearRing?this.convertFromLinearRing(t):t instanceof ol.geom.Polygon?this.convertFromPolygon(t):t instanceof ol.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof ol.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof ol.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof ol.geom.GeometryCollection?this.convertFromCollection(t):void 0},convertFromPoint:function(t){var e=t.getCoordinates();return this.geometryFactory.createPoint(new P(e[0],e[1]))},convertFromLineString:function(t){return this.geometryFactory.createLineString(t.getCoordinates().map(function(e){return new P(e[0],e[1])}))},convertFromLinearRing:function(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map(function(e){return new P(e[0],e[1])}))},convertFromPolygon:function(t){for(var e=t.getLinearRings(),n=null,s=[],a=0;a<e.length;a++){var g=this.convertFromLinearRing(e[a]);a===0?n=g:s.push(g)}return this.geometryFactory.createPolygon(n,s)},convertFromMultiPoint:function(t){var e=t.getPoints().map(function(n){return this.convertFromPoint(n)},this);return this.geometryFactory.createMultiPoint(e)},convertFromMultiLineString:function(t){var e=t.getLineStrings().map(function(n){return this.convertFromLineString(n)},this);return this.geometryFactory.createMultiLineString(e)},convertFromMultiPolygon:function(t){var e=t.getPolygons().map(function(n){return this.convertFromPolygon(n)},this);return this.geometryFactory.createMultiPolygon(e)},convertFromCollection:function(t){var e=t.getGeometries().map(function(n){return this.read(n)},this);return this.geometryFactory.createGeometryCollection(e)},write:function(t){return t.getGeometryType()==="Point"?this.convertToPoint(t.getCoordinate()):t.getGeometryType()==="LineString"?this.convertToLineString(t):t.getGeometryType()==="LinearRing"?this.convertToLinearRing(t):t.getGeometryType()==="Polygon"?this.convertToPolygon(t):t.getGeometryType()==="MultiPoint"?this.convertToMultiPoint(t):t.getGeometryType()==="MultiLineString"?this.convertToMultiLineString(t):t.getGeometryType()==="MultiPolygon"?this.convertToMultiPolygon(t):t.getGeometryType()==="GeometryCollection"?this.convertToCollection(t):void 0},convertToPoint:function(t){return new ol.geom.Point([t.x,t.y])},convertToLineString:function(t){var e=t.points.coordinates.map(rr);return new ol.geom.LineString(e)},convertToLinearRing:function(t){var e=t.points.coordinates.map(rr);return new ol.geom.LinearRing(e)},convertToPolygon:function(t){for(var e=[t.shell.points.coordinates.map(rr)],n=0;n<t.holes.length;n++)e.push(t.holes[n].points.coordinates.map(rr));return new ol.geom.Polygon(e)},convertToMultiPoint:function(t){return new ol.geom.MultiPoint(t.getCoordinates().map(rr))},convertToMultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToLineString(t.geometries[n]).getCoordinates());return new ol.geom.MultiLineString(e)},convertToMultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToPolygon(t.geometries[n]).getCoordinates());return new ol.geom.MultiPolygon(e)},convertToCollection:function(t){for(var e=[],n=0;n<t.geometries.length;n++){var s=t.geometries[n];e.push(this.write(s))}return new ol.geom.GeometryCollection(e)}});var Rh=Object.freeze({GeoJSONReader:Mo,GeoJSONWriter:Di,OL3Parser:Ro,WKTReader:Js,WKTWriter:wt});f($e.prototype,{rescale:function(){if(nt(arguments[0],it))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){var s=arguments[0];s.length===2&&(new P(s[0]),new P(s[1]));for(var e=0;e<s.length;e++)s[e].x=s[e].x/this.scaleFactor+this.offsetX,s[e].y=s[e].y/this.scaleFactor+this.offsetY;s.length===2&&s[0].equals2D(s[1])&&mt.out.println(s)}},scale:function(){if(nt(arguments[0],it)){for(var t=arguments[0],e=new F,n=t.iterator();n.hasNext();){var s=n.next();e.add(new Je(this.scale(s.getCoordinates()),s.getData()))}return e}if(arguments[0]instanceof Array){for(var a=arguments[0],g=new Array(a.length).fill(null),n=0;n<a.length;n++)g[n]=new P(Math.round((a[n].x-this.offsetX)*this.scaleFactor),Math.round((a[n].y-this.offsetY)*this.scaleFactor),a[n].z);var v=dt.removeRepeatedPoints(g);return v}},isIntegerPrecision:function(){return this.scaleFactor===1},getNodedSubstrings:function(){var t=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(t),t},computeNodes:function(t){var e=t;this.isScaled&&(e=this.scale(t)),this.noder.computeNodes(e)},interfaces_:function(){return[Ue]},getClass:function(){return $e}});var Oh=Object.freeze({MCIndexNoder:Yn,ScaledNoder:$e,SegmentString:ri});f(sr.prototype,{isSimpleMultiPoint:function(t){if(t.isEmpty())return!0;for(var e=new Ie,n=0;n<t.getNumGeometries();n++){var s=t.getGeometryN(n),a=s.getCoordinate();if(e.contains(a))return this.nonSimpleLocation=a,!1;e.add(a)}return!0},isSimplePolygonal:function(t){for(var e=fe.getLines(t),n=e.iterator();n.hasNext();){var s=n.next();if(!this.isSimpleLinearGeometry(s))return!1}return!0},hasClosedEndpointIntersection:function(t){for(var e=new de,n=t.getEdgeIterator();n.hasNext();){var s=n.next(),a=(s.getMaximumSegmentIndex(),s.isClosed()),g=s.getCoordinate(0);this.addEndpoint(e,g,a);var v=s.getCoordinate(s.getNumPoints()-1);this.addEndpoint(e,v,a)}for(var n=e.values().iterator();n.hasNext();){var x=n.next();if(x.isClosed&&x.degree!==2)return this.nonSimpleLocation=x.getCoordinate(),!0}return!1},getNonSimpleLocation:function(){return this.nonSimpleLocation},isSimpleLinearGeometry:function(t){if(t.isEmpty())return!0;var e=new Re(0,t),n=new ue,s=e.computeSelfNodes(n,!0);return s.hasIntersection()?s.hasProperIntersection()?(this.nonSimpleLocation=s.getProperIntersectionPoint(),!1):this.hasNonEndpointIntersection(e)?!1:!this.isClosedEndpointsInInterior||!this.hasClosedEndpointIntersection(e):!0},hasNonEndpointIntersection:function(t){for(var e=t.getEdgeIterator();e.hasNext();)for(var n=e.next(),s=n.getMaximumSegmentIndex(),a=n.getEdgeIntersectionList().iterator();a.hasNext();){var g=a.next();if(!g.isEndPoint(s))return this.nonSimpleLocation=g.getCoordinate(),!0}return!1},addEndpoint:function(t,e,n){var s=t.get(e);s===null&&(s=new zr(e),t.put(e,s)),s.addEndpoint(n)},computeSimple:function(t){return this.nonSimpleLocation=null,t.isEmpty()?!0:t instanceof It?this.isSimpleLinearGeometry(t):t instanceof De?this.isSimpleLinearGeometry(t):t instanceof Te?this.isSimpleMultiPoint(t):nt(t,Nn)?this.isSimplePolygonal(t):t instanceof Nt?this.isSimpleGeometryCollection(t):!0},isSimple:function(){return this.nonSimpleLocation=null,this.computeSimple(this.inputGeom)},isSimpleGeometryCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.computeSimple(n))return!1}return!0},interfaces_:function(){return[]},getClass:function(){return sr}}),f(zr.prototype,{addEndpoint:function(t){this.degree++,this.isClosed|=t},getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return zr}}),sr.EndpointInfo=zr,f(Pt.prototype,{getEndCapStyle:function(){return this.endCapStyle},isSingleSided:function(){return this._isSingleSided},setQuadrantSegments:function(t){this.quadrantSegments=t,this.quadrantSegments===0&&(this.joinStyle=Pt.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=Pt.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),0>=t&&(this.quadrantSegments=1),this.joinStyle!==Pt.JOIN_ROUND&&(this.quadrantSegments=Pt.DEFAULT_QUADRANT_SEGMENTS)},getJoinStyle:function(){return this.joinStyle},setJoinStyle:function(t){this.joinStyle=t},setSimplifyFactor:function(t){this.simplifyFactor=0>t?0:t},getSimplifyFactor:function(){return this.simplifyFactor},getQuadrantSegments:function(){return this.quadrantSegments},setEndCapStyle:function(t){this.endCapStyle=t},getMitreLimit:function(){return this.mitreLimit},setMitreLimit:function(t){this.mitreLimit=t},setSingleSided:function(t){this._isSingleSided=t},interfaces_:function(){return[]},getClass:function(){return Pt}}),Pt.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Pt.CAP_ROUND=1,Pt.CAP_FLAT=2,Pt.CAP_SQUARE=3,Pt.JOIN_ROUND=1,Pt.JOIN_MITRE=2,Pt.JOIN_BEVEL=3,Pt.DEFAULT_QUADRANT_SEGMENTS=8,Pt.DEFAULT_MITRE_LIMIT=5,Pt.DEFAULT_SIMPLIFY_FACTOR=.01,f(Ks.prototype,{getCoordinate:function(){return this.minCoord},getRightmostSide:function(t,e){var n=this.getRightmostSideOfSegment(t,e);return 0>n&&(n=this.getRightmostSideOfSegment(t,e-1)),0>n&&(this.minCoord=null,this.checkForRightmostCoordinate(t)),n},findRightmostEdgeAtVertex:function(){var t=this.minDe.getEdge().getCoordinates();k.isTrue(this.minIndex>0&&this.minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this.minIndex-1],n=t[this.minIndex+1],s=et.computeOrientation(this.minCoord,n,e),a=!1;(e.y<this.minCoord.y&&n.y<this.minCoord.y&&s===et.COUNTERCLOCKWISE||e.y>this.minCoord.y&&n.y>this.minCoord.y&&s===et.CLOCKWISE)&&(a=!0),a&&(this.minIndex=this.minIndex-1)},getRightmostSideOfSegment:function(t,e){var n=t.getEdge(),s=n.getCoordinates();if(0>e||e+1>=s.length||s[e].y===s[e+1].y)return-1;var a=$.LEFT;return s[e].y<s[e+1].y&&(a=$.RIGHT),a},getEdge:function(){return this.orientedDe},checkForRightmostCoordinate:function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(this.minCoord===null||e[n].x>this.minCoord.x)&&(this.minDe=t,this.minIndex=n,this.minCoord=e[n])},findRightmostEdgeAtNode:function(){var t=this.minDe.getNode(),e=t.getEdges();this.minDe=e.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)},findEdge:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}k.isTrue(this.minIndex!==0||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),this.minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe;var s=this.getRightmostSide(this.minDe,this.minIndex);s===$.LEFT&&(this.orientedDe=this.minDe.getSym())},interfaces_:function(){return[]},getClass:function(){return Ks}}),ki.prototype.addLast=function(t){this.array_.push(t)},ki.prototype.removeFirst=function(){return this.array_.shift()},ki.prototype.isEmpty=function(){return this.array_.length===0},f(Fi.prototype,{clearVisitedEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.setVisited(!1)}},getRightmostCoordinate:function(){return this.rightMostCoord},computeNodeDepth:function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var s=n.next();if(s.isVisited()||s.getSym().isVisited()){e=s;break}}if(e===null)throw new Me("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var n=t.getEdges().iterator();n.hasNext();){var s=n.next();s.setVisited(!0),this.copySymDepths(s)}},computeDepth:function(t){this.clearVisitedEdges();var e=this.finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths($.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},create:function(t){this.addReachable(t),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()},findResultEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth($.RIGHT)>=1&&e.getDepth($.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},computeDepths:function(t){var e=new he,n=new ki,s=t.getNode();for(n.addLast(s),e.add(s),t.setVisited(!0);!n.isEmpty();){var a=n.removeFirst();e.add(a),this.computeNodeDepth(a);for(var g=a.getEdges().iterator();g.hasNext();){var v=g.next(),x=v.getSym();if(!x.isVisited()){var S=x.getNode();e.contains(S)||(n.addLast(S),e.add(S))}}}},compareTo:function(t){var e=t;return this.rightMostCoord.x<e.rightMostCoord.x?-1:this.rightMostCoord.x>e.rightMostCoord.x?1:0},getEnvelope:function(){if(this.env===null){for(var t=new G,e=this.dirEdgeList.iterator();e.hasNext();)for(var n=e.next(),s=n.getEdge().getCoordinates(),a=0;a<s.length-1;a++)t.expandToInclude(s[a]);this.env=t}return this.env},addReachable:function(t){var e=new $t;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},copySymDepths:function(t){var e=t.getSym();e.setDepth($.LEFT,t.getDepth($.RIGHT)),e.setDepth($.RIGHT,t.getDepth($.LEFT))},add:function(t,e){t.setVisited(!0),this.nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var s=n.next();this.dirEdgeList.add(s);var a=s.getSym(),g=a.getNode();g.isVisited()||e.push(g)}},getNodes:function(){return this.nodes},getDirectedEdges:function(){return this.dirEdgeList},interfaces_:function(){return[_]},getClass:function(){return Fi}}),f(Ee.prototype,{isDeletable:function(t,e,n,s){var a=this.inputLine[t],g=this.inputLine[e],v=this.inputLine[n];return this.isConcave(a,g,v)&&this.isShallow(a,g,v,s)?this.isShallowSampled(a,g,t,n,s):!1},deleteShallowConcavities:function(){for(var t=1,e=(this.inputLine.length-1,this.findNextNonDeletedIndex(t)),n=this.findNextNonDeletedIndex(e),s=!1;n<this.inputLine.length;){var a=!1;this.isDeletable(t,e,n,this.distanceTol)&&(this.isDeleted[e]=Ee.DELETE,a=!0,s=!0),t=a?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return s},isShallowConcavity:function(t,e,n,s){var a=et.computeOrientation(t,e,n),g=a===this.angleOrientation;if(!g)return!1;var v=et.distancePointLine(e,t,n);return s>v},isShallowSampled:function(t,e,n,s,a){var g=Math.trunc((s-n)/Ee.NUM_PTS_TO_CHECK);0>=g&&(g=1);for(var v=n;s>v;v+=g)if(!this.isShallow(t,e,this.inputLine[v],a))return!1;return!0},isConcave:function(e,n,s){var a=et.computeOrientation(e,n,s),g=a===this.angleOrientation;return g},simplify:function(t){this.distanceTol=Math.abs(t),0>t&&(this.angleOrientation=et.CLOCKWISE),this.isDeleted=new Array(this.inputLine.length).fill(null);var e=!1;do e=this.deleteShallowConcavities();while(e);return this.collapseLine()},findNextNonDeletedIndex:function(t){for(var e=t+1;e<this.inputLine.length&&this.isDeleted[e]===Ee.DELETE;)e++;return e},isShallow:function(t,e,n,s){var a=et.distancePointLine(e,t,n);return s>a},collapseLine:function(){for(var t=new V,e=0;e<this.inputLine.length;e++)this.isDeleted[e]!==Ee.DELETE&&t.add(this.inputLine[e]);return t.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return Ee}}),Ee.simplify=function(t,e){var n=new Ee(t);return n.simplify(e)},Ee.INIT=0,Ee.DELETE=1,Ee.KEEP=1,Ee.NUM_PTS_TO_CHECK=10,f(or.prototype,{getCoordinates:function(){var t=this.ptList.toArray(or.COORDINATE_ARRAY_TYPE);return t},setPrecisionModel:function(t){this.precisionModel=t},addPt:function(t){var e=new P(t);return this.precisionModel.makePrecise(e),this.isRedundant(e)?null:void this.ptList.add(e)},reverse:function(){},addPts:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var n=t.length-1;n>=0;n--)this.addPt(t[n])},isRedundant:function(t){if(this.ptList.size()<1)return!1;var e=this.ptList.get(this.ptList.size()-1),n=t.distance(e);return n<this.minimimVertexDistance},toString:function(){var t=new St,e=t.createLineString(this.getCoordinates());return e.toString()},closeRing:function(){if(this.ptList.size()<1)return null;var t=new P(this.ptList.get(0)),e=this.ptList.get(this.ptList.size()-1);return this.ptList.size()>=2&&this.ptList.get(this.ptList.size()-2),t.equals(e)?null:void this.ptList.add(t)},setMinimumVertexDistance:function(t){this.minimimVertexDistance=t},interfaces_:function(){return[]},getClass:function(){return or}}),or.COORDINATE_ARRAY_TYPE=new Array(0).fill(null),f(In.prototype,{addNextSegment:function(t,e){if(this.s0=this.s1,this.s1=this.s2,this.s2=t,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),this.s1.equals(this.s2))return null;var n=et.computeOrientation(this.s0,this.s1,this.s2),s=n===et.CLOCKWISE&&this.side===$.LEFT||n===et.COUNTERCLOCKWISE&&this.side===$.RIGHT;n===0?this.addCollinear(e):s?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},addLineEndCap:function(t,e){var n=new st(t,e),s=new st;this.computeOffsetSegment(n,$.LEFT,this.distance,s);var a=new st;this.computeOffsetSegment(n,$.RIGHT,this.distance,a);var g=e.x-t.x,v=e.y-t.y,x=Math.atan2(v,g);switch(this.bufParams.getEndCapStyle()){case Pt.CAP_ROUND:this.segList.addPt(s.p1),this.addFilletArc(e,x+Math.PI/2,x-Math.PI/2,et.CLOCKWISE,this.distance),this.segList.addPt(a.p1);break;case Pt.CAP_FLAT:this.segList.addPt(s.p1),this.segList.addPt(a.p1);break;case Pt.CAP_SQUARE:var S=new P;S.x=Math.abs(this.distance)*Math.cos(x),S.y=Math.abs(this.distance)*Math.sin(x);var O=new P(s.p1.x+S.x,s.p1.y+S.y),B=new P(a.p1.x+S.x,a.p1.y+S.y);this.segList.addPt(O),this.segList.addPt(B)}},getCoordinates:function(){var t=this.segList.getCoordinates();return t},addMitreJoin:function(t,e,n,s){var a=!0,g=null;try{g=jt.intersection(e.p0,e.p1,n.p0,n.p1);var v=0>=s?1:g.distance(t)/Math.abs(s);v>this.bufParams.getMitreLimit()&&(a=!1)}catch(x){if(!(x instanceof X))throw x;g=new P(0,0),a=!1}finally{}a?this.segList.addPt(g):this.addLimitedMitreJoin(e,n,s,this.bufParams.getMitreLimit())},addFilletCorner:function(t,e,n,s,a){var g=e.x-t.x,v=e.y-t.y,x=Math.atan2(v,g),S=n.x-t.x,O=n.y-t.y,B=Math.atan2(O,S);s===et.CLOCKWISE?B>=x&&(x+=2*Math.PI):x>=B&&(x-=2*Math.PI),this.segList.addPt(e),this.addFilletArc(t,x,B,s,a),this.segList.addPt(n)},addOutsideTurn:function(t,e){return this.offset0.p1.distance(this.offset1.p0)<this.distance*In.OFFSET_SEGMENT_SEPARATION_FACTOR?(this.segList.addPt(this.offset0.p1),null):void(this.bufParams.getJoinStyle()===Pt.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===Pt.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(e&&this.segList.addPt(this.offset0.p1),this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,t,this.distance),this.segList.addPt(this.offset1.p0)))},createSquare:function(t){this.segList.addPt(new P(t.x+this.distance,t.y+this.distance)),this.segList.addPt(new P(t.x+this.distance,t.y-this.distance)),this.segList.addPt(new P(t.x-this.distance,t.y-this.distance)),this.segList.addPt(new P(t.x-this.distance,t.y+this.distance)),this.segList.closeRing()},addSegments:function(t,e){this.segList.addPts(t,e)},addFirstSegment:function(){this.segList.addPt(this.offset1.p0)},addLastSegment:function(){this.segList.addPt(this.offset1.p1)},initSideSegments:function(t,e,n){this.s1=t,this.s2=e,this.side=n,this.seg1.setCoordinates(t,e),this.computeOffsetSegment(this.seg1,n,this.distance,this.offset1)},addLimitedMitreJoin:function(t,e,n,s){var a=this.seg0.p1,g=xt.angle(a,this.seg0.p0),v=(xt.angle(a,this.seg1.p1),xt.angleBetweenOriented(this.seg0.p0,a,this.seg1.p1)),x=v/2,S=xt.normalize(g+x),O=xt.normalize(S+Math.PI),B=s*n,H=B*Math.abs(Math.sin(x)),J=n-H,ut=a.x+B*Math.cos(O),pt=a.y+B*Math.sin(O),Lt=new P(ut,pt),Yt=new st(a,Lt),me=Yt.pointAlongOffset(1,J),Bn=Yt.pointAlongOffset(1,-J);this.side===$.LEFT?(this.segList.addPt(me),this.segList.addPt(Bn)):(this.segList.addPt(Bn),this.segList.addPt(me))},computeOffsetSegment:function(t,e,n,s){var a=e===$.LEFT?1:-1,g=t.p1.x-t.p0.x,v=t.p1.y-t.p0.y,x=Math.sqrt(g*g+v*v),S=a*n*g/x,O=a*n*v/x;s.p0.x=t.p0.x-O,s.p0.y=t.p0.y+S,s.p1.x=t.p1.x-O,s.p1.y=t.p1.y+S},addFilletArc:function(t,e,n,s,a){var g=s===et.CLOCKWISE?-1:1,v=Math.abs(e-n),x=Math.trunc(v/this.filletAngleQuantum+.5);if(1>x)return null;var S=null,O=null;S=0,O=v/x;for(var B=S,H=new P;v>B;){var J=e+g*B;H.x=t.x+a*Math.cos(J),H.y=t.y+a*Math.sin(J),this.segList.addPt(H),B+=O}},addInsideTurn:function(t,e){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*In.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var n=new P((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(n);var s=new P((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(s)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}},createCircle:function(t){var e=new P(t.x+this.distance,t.y);this.segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this.distance),this.segList.closeRing()},addBevelJoin:function(t,e){this.segList.addPt(t.p1),this.segList.addPt(e.p0)},init:function(t){this.distance=t,this.maxCurveSegmentError=t*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new or,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(t*In.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},addCollinear:function(t){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2);var e=this.li.getIntersectionNum();e>=2&&(this.bufParams.getJoinStyle()===Pt.JOIN_BEVEL||this.bufParams.getJoinStyle()===Pt.JOIN_MITRE?(t&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,et.CLOCKWISE,this.distance))},closeRing:function(){this.segList.closeRing()},hasNarrowConcaveAngle:function(){return this._hasNarrowConcaveAngle},interfaces_:function(){return[]},getClass:function(){return In}}),In.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,In.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,In.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,In.MAX_CLOSING_SEG_LEN_FACTOR=80,f(ar.prototype,{getOffsetCurve:function(t,e){if(this.distance=e,e===0)return null;var n=0>e,s=Math.abs(e),a=this.getSegGen(s);t.length<=1?this.computePointCurve(t[0],a):this.computeOffsetCurve(t,n,a);var g=a.getCoordinates();return n&&dt.reverse(g),g},computeSingleSidedBufferCurve:function(t,e,n){var s=this.simplifyTolerance(this.distance);if(e){n.addSegments(t,!0);var a=Ee.simplify(t,-s),g=a.length-1;n.initSideSegments(a[g],a[g-1],$.LEFT),n.addFirstSegment();for(var v=g-2;v>=0;v--)n.addNextSegment(a[v],!0)}else{n.addSegments(t,!1);var x=Ee.simplify(t,s),S=x.length-1;n.initSideSegments(x[0],x[1],$.LEFT),n.addFirstSegment();for(var v=2;S>=v;v++)n.addNextSegment(x[v],!0)}n.addLastSegment(),n.closeRing()},computeRingBufferCurve:function(t,e,n){var s=this.simplifyTolerance(this.distance);e===$.RIGHT&&(s=-s);var a=Ee.simplify(t,s),g=a.length-1;n.initSideSegments(a[g-1],a[0],e);for(var v=1;g>=v;v++){var x=v!==1;n.addNextSegment(a[v],x)}n.closeRing()},computeLineBufferCurve:function(t,e){var n=this.simplifyTolerance(this.distance),s=Ee.simplify(t,n),a=s.length-1;e.initSideSegments(s[0],s[1],$.LEFT);for(var g=2;a>=g;g++)e.addNextSegment(s[g],!0);e.addLastSegment(),e.addLineEndCap(s[a-1],s[a]);var v=Ee.simplify(t,-n),x=v.length-1;e.initSideSegments(v[x],v[x-1],$.LEFT);for(var g=x-2;g>=0;g--)e.addNextSegment(v[g],!0);e.addLastSegment(),e.addLineEndCap(v[1],v[0]),e.closeRing()},computePointCurve:function(t,e){switch(this.bufParams.getEndCapStyle()){case Pt.CAP_ROUND:e.createCircle(t);break;case Pt.CAP_SQUARE:e.createSquare(t)}},getLineCurve:function(t,e){if(this.distance=e,0>e&&!this.bufParams.isSingleSided()||e===0)return null;var n=Math.abs(e),s=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],s);else if(this.bufParams.isSingleSided()){var a=0>e;this.computeSingleSidedBufferCurve(t,a,s)}else this.computeLineBufferCurve(t,s);var g=s.getCoordinates();return g},getBufferParameters:function(){return this.bufParams},simplifyTolerance:function(t){return t*this.bufParams.getSimplifyFactor()},getRingCurve:function(t,e,n){if(this.distance=n,t.length<=2)return this.getLineCurve(t,n);if(n===0)return ar.copyCoordinates(t);var s=this.getSegGen(n);return this.computeRingBufferCurve(t,e,s),s.getCoordinates()},computeOffsetCurve:function(t,e,n){var s=this.simplifyTolerance(this.distance);if(e){var a=Ee.simplify(t,-s),g=a.length-1;n.initSideSegments(a[g],a[g-1],$.LEFT),n.addFirstSegment();for(var v=g-2;v>=0;v--)n.addNextSegment(a[v],!0)}else{var x=Ee.simplify(t,s),S=x.length-1;n.initSideSegments(x[0],x[1],$.LEFT),n.addFirstSegment();for(var v=2;S>=v;v++)n.addNextSegment(x[v],!0)}n.addLastSegment()},getSegGen:function(t){return new In(this.precisionModel,this.bufParams,t)},interfaces_:function(){return[]},getClass:function(){return ar}}),ar.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new P(t[n]);return e},f(Gr.prototype,{findStabbedSegments:function(){if(arguments.length===1){for(var t=arguments[0],e=new F,n=this.subgraphs.iterator();n.hasNext();){var s=n.next(),a=s.getEnvelope();t.y<a.getMinY()||t.y>a.getMaxY()||this.findStabbedSegments(t,s.getDirectedEdges(),e)}return e}if(arguments.length===3){if(nt(arguments[2],R)&&arguments[0]instanceof P&&arguments[1]instanceof Ti)for(var g=arguments[0],v=arguments[1],x=arguments[2],S=v.getEdge().getCoordinates(),n=0;n<S.length-1;n++){this.seg.p0=S[n],this.seg.p1=S[n+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse();var O=Math.max(this.seg.p0.x,this.seg.p1.x);if(!(O<g.x||this.seg.isHorizontal()||g.y<this.seg.p0.y||g.y>this.seg.p1.y||et.computeOrientation(this.seg.p0,this.seg.p1,g)===et.RIGHT)){var B=v.getDepth($.LEFT);this.seg.p0.equals(S[n])||(B=v.getDepth($.RIGHT));var H=new Br(this.seg,B);x.add(H)}}else if(nt(arguments[2],R)&&arguments[0]instanceof P&&nt(arguments[1],R))for(var J=arguments[0],ut=arguments[1],pt=arguments[2],n=ut.iterator();n.hasNext();){var Lt=n.next();Lt.isForward()&&this.findStabbedSegments(J,Lt,pt)}}},getDepth:function(t){var e=this.findStabbedSegments(t);if(e.size()===0)return 0;var n=ti.min(e);return n.leftDepth},interfaces_:function(){return[]},getClass:function(){return Gr}}),f(Br.prototype,{compareTo:function(t){var e=t;if(this.upwardSeg.minX()>=e.upwardSeg.maxX())return 1;if(this.upwardSeg.maxX()<=e.upwardSeg.minX())return-1;var n=this.upwardSeg.orientationIndex(e.upwardSeg);return n!==0?n:(n=-1*e.upwardSeg.orientationIndex(this.upwardSeg),n!==0?n:this.upwardSeg.compareTo(e.upwardSeg))},compareX:function(t,e){var n=t.p0.compareTo(e.p0);return n!==0?n:t.p1.compareTo(e.p1)},toString:function(){return this.upwardSeg.toString()},interfaces_:function(){return[_]},getClass:function(){return Br}}),Gr.DepthSegment=Br,f(ys.prototype,{addPoint:function(t){if(this.distance<=0)return null;var e=t.getCoordinates(),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,C.EXTERIOR,C.INTERIOR)},addPolygon:function(t){var e=this.distance,n=$.LEFT;this.distance<0&&(e=-this.distance,n=$.RIGHT);var s=t.getExteriorRing(),a=dt.removeRepeatedPoints(s.getCoordinates());if(this.distance<0&&this.isErodedCompletely(s,this.distance)||this.distance<=0&&a.length<3)return null;this.addPolygonRing(a,e,n,C.EXTERIOR,C.INTERIOR);for(var g=0;g<t.getNumInteriorRing();g++){var v=t.getInteriorRingN(g),x=dt.removeRepeatedPoints(v.getCoordinates());this.distance>0&&this.isErodedCompletely(v,-this.distance)||this.addPolygonRing(x,e,$.opposite(n),C.INTERIOR,C.EXTERIOR)}},isTriangleErodedCompletely:function(t,e){var n=new kt(t[0],t[1],t[2]),s=n.inCentre(),a=et.distancePointLine(s,n.p0,n.p1);return a<Math.abs(e)},addLineString:function(t){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return null;var e=dt.removeRepeatedPoints(t.getCoordinates()),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,C.EXTERIOR,C.INTERIOR)},addCurve:function(t,e,n){if(t===null||t.length<2)return null;var s=new Je(t,new re(0,C.BOUNDARY,e,n));this.curveList.add(s)},getCurves:function(){return this.add(this.inputGeom),this.curveList},addPolygonRing:function(t,e,n,s,a){if(e===0&&t.length<ie.MINIMUM_VALID_SIZE)return null;var g=s,v=a;t.length>=ie.MINIMUM_VALID_SIZE&&et.isCCW(t)&&(g=a,v=s,n=$.opposite(n));var x=this.curveBuilder.getRingCurve(t,n,e);this.addCurve(x,g,v)},add:function(t){if(t.isEmpty())return null;if(t instanceof Ft)this.addPolygon(t);else if(t instanceof It)this.addLineString(t);else if(t instanceof Qt)this.addPoint(t);else if(t instanceof Te)this.addCollection(t);else if(t instanceof De)this.addCollection(t);else if(t instanceof Le)this.addCollection(t);else{if(!(t instanceof Nt))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},isErodedCompletely:function(t,e){var n=t.getCoordinates();if(n.length<4)return 0>e;if(n.length===4)return this.isTriangleErodedCompletely(n,e);var s=t.getEnvelopeInternal(),a=Math.min(s.getHeight(),s.getWidth());return 0>e&&2*Math.abs(e)>a},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},interfaces_:function(){return[]},getClass:function(){return ys}}),f(ur.prototype,{isTrivialIntersection:function(t,e,n,s){if(t===n&&this.li.getIntersectionNum()===1){if(ur.isAdjacentSegments(e,s))return!0;if(t.isClosed()){var a=t.size()-1;if(e===0&&s===a||s===0&&e===a)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},hasProperInteriorIntersection:function(){return this.hasProperInterior},getLineIntersector:function(){return this.li},hasProperIntersection:function(){return this.hasProper},processIntersections:function(t,e,n,s){if(t===n&&e===s)return null;this.numTests++;var a=t.getCoordinates()[e],g=t.getCoordinates()[e+1],v=n.getCoordinates()[s],x=n.getCoordinates()[s+1];this.li.computeIntersection(a,g,v,x),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(t,e,n,s)||(this._hasIntersection=!0,t.addIntersections(this.li,e,0),n.addIntersections(this.li,s,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))},hasIntersection:function(){return this._hasIntersection},isDone:function(){return!1},hasInteriorIntersection:function(){return this.hasInterior},interfaces_:function(){return[Or]},getClass:function(){return ur}}),ur.isAdjacentSegments=function(t,e){return Math.abs(t-e)===1},f(vi.prototype,{setWorkingPrecisionModel:function(t){this.workingPrecisionModel=t},insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(e!==null){var n=e.getLabel(),s=t.getLabel();e.isPointwiseEqual(t)||(s=new re(t.getLabel()),s.flip()),n.merge(s);var a=vi.depthDelta(s),g=e.getDepthDelta(),v=g+a;e.setDepthDelta(v)}else this.edgeList.add(t),t.setDepthDelta(vi.depthDelta(t.getLabel()))},buildSubgraphs:function(t,e){for(var n=new F,s=t.iterator();s.hasNext();){var a=s.next(),g=a.getRightmostCoordinate(),v=new Gr(n),x=v.getDepth(g);a.computeDepth(x),a.findResultEdges(),n.add(a),e.add(a.getDirectedEdges(),a.getNodes())}},createSubgraphs:function(t){for(var e=new F,n=t.getNodes().iterator();n.hasNext();){var s=n.next();if(!s.isVisited()){var a=new Fi;a.create(s),e.add(a)}}return ti.sort(e,ti.reverseOrder()),e},createEmptyResultGeometry:function(){var t=this.geomFact.createPolygon();return t},getNoder:function(t){if(this.workingNoder!==null)return this.workingNoder;var e=new Yn,n=new ue;return n.setPrecisionModel(t),e.setSegmentIntersector(new ur(n)),e},buffer:function(t,e){var n=this.workingPrecisionModel;n===null&&(n=t.getPrecisionModel()),this.geomFact=t.getFactory();var s=new ar(n,this.bufParams),a=new ys(t,e,s),g=a.getCurves();if(g.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(g,n),this.graph=new cn(new Mi),this.graph.addEdges(this.edgeList.getEdges());var v=this.createSubgraphs(this.graph),x=new Pi(this.geomFact);this.buildSubgraphs(v,x);var S=x.getPolygons();if(S.size()<=0)return this.createEmptyResultGeometry();var O=this.geomFact.buildGeometry(S);return O},computeNodedEdges:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var s=n.getNodedSubstrings(),a=s.iterator();a.hasNext();){var g=a.next(),v=g.getCoordinates();if(v.length!==2||!v[0].equals2D(v[1])){var x=g.getData(),S=new je(g.getCoordinates(),new re(x));this.insertUniqueEdge(S)}}},setNoder:function(t){this.workingNoder=t},interfaces_:function(){return[]},getClass:function(){return vi}}),vi.depthDelta=function(t){var e=t.getLocation(0,$.LEFT),n=t.getLocation(0,$.RIGHT);return e===C.INTERIOR&&n===C.EXTERIOR?1:e===C.EXTERIOR&&n===C.INTERIOR?-1:0},vi.convertSegStrings=function(t){for(var e=new St,n=new F;t.hasNext();){var s=t.next(),a=e.createLineString(s.getCoordinates());n.add(a)}return e.buildGeometry(n)},f(lr.prototype,{checkEndPtVertexIntersections:function(){if(arguments.length===0)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next(),n=e.getCoordinates();this.checkEndPtVertexIntersections(n[0],this.segStrings),this.checkEndPtVertexIntersections(n[n.length-1],this.segStrings)}else if(arguments.length===2){for(var s=arguments[0],a=arguments[1],t=a.iterator();t.hasNext();)for(var e=t.next(),n=e.getCoordinates(),g=1;g<n.length-1;g++)if(n[g].equals(s))throw new M("found endpt/interior pt intersection at index "+g+" :pt "+s)}},checkInteriorIntersections:function(){if(arguments.length===0)for(var t=this.segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this.segStrings.iterator();n.hasNext();){var s=n.next();this.checkInteriorIntersections(e,s)}else if(arguments.length===2)for(var a=arguments[0],g=arguments[1],v=a.getCoordinates(),x=g.getCoordinates(),S=0;S<v.length-1;S++)for(var O=0;O<x.length-1;O++)this.checkInteriorIntersections(a,S,g,O);else if(arguments.length===4){var B=arguments[0],H=arguments[1],J=arguments[2],ut=arguments[3];if(B===J&&H===ut)return null;var pt=B.getCoordinates()[H],Lt=B.getCoordinates()[H+1],Yt=J.getCoordinates()[ut],me=J.getCoordinates()[ut+1];if(this.li.computeIntersection(pt,Lt,Yt,me),this.li.hasIntersection()&&(this.li.isProper()||this.hasInteriorIntersection(this.li,pt,Lt)||this.hasInteriorIntersection(this.li,Yt,me)))throw new M("found non-noded intersection at "+pt+"-"+Lt+" and "+Yt+"-"+me)}},checkValid:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},checkCollapses:function(){if(arguments.length===0)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(arguments.length===1)for(var n=arguments[0],s=n.getCoordinates(),t=0;t<s.length-2;t++)this.checkCollapse(s[t],s[t+1],s[t+2])},hasInteriorIntersection:function(t,e,n){for(var s=0;s<t.getIntersectionNum();s++){var a=t.getIntersection(s);if(!a.equals(e)&&!a.equals(n))return!0}return!1},checkCollapse:function(t,e,n){if(t.equals(n))throw new M("found non-noded collapse at "+lr.fact.createLineString([t,e,n]))},interfaces_:function(){return[]},getClass:function(){return lr}}),lr.fact=new St,f(zi.prototype,{intersectsScaled:function(t,e){var n=Math.min(t.x,e.x),s=Math.max(t.x,e.x),a=Math.min(t.y,e.y),g=Math.max(t.y,e.y),v=this.maxx<n||this.minx>s||this.maxy<a||this.miny>g;if(v)return!1;var x=this.intersectsToleranceSquare(t,e);return k.isTrue(!(v&&x),"Found bad envelope test"),x},initCorners:function(t){var e=.5;this.minx=t.x-e,this.maxx=t.x+e,this.miny=t.y-e,this.maxy=t.y+e,this.corner[0]=new P(this.maxx,this.maxy),this.corner[1]=new P(this.minx,this.maxy),this.corner[2]=new P(this.minx,this.miny),this.corner[3]=new P(this.maxx,this.miny)},intersects:function(t,e){return this.scaleFactor===1?this.intersectsScaled(t,e):(this.copyScaled(t,this.p0Scaled),this.copyScaled(e,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))},scale:function(t){return Math.round(t*this.scaleFactor)},getCoordinate:function(){return this.originalPt},copyScaled:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},getSafeEnvelope:function(){if(this.safeEnv===null){var t=zi.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new G(this.originalPt.x-t,this.originalPt.x+t,this.originalPt.y-t,this.originalPt.y+t)}return this.safeEnv},intersectsPixelClosure:function(t,e){return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),this.li.hasIntersection()?!0:(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.hasIntersection()?!0:(this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.hasIntersection()?!0:(this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),!!this.li.hasIntersection())))},intersectsToleranceSquare:function(t,e){var n=!1,s=!1;return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),this.li.isProper()?!0:(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.isProper()?!0:(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.isProper()?!0:(this.li.hasIntersection()&&(s=!0),this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),this.li.isProper()||n&&s||t.equals(this.pt)?!0:!!e.equals(this.pt))))},addSnappedNode:function(t,e){var n=t.getCoordinate(e),s=t.getCoordinate(e+1);return this.intersects(n,s)?(t.addIntersection(this.getCoordinate(),e),!0):!1},interfaces_:function(){return[]},getClass:function(){return zi}}),zi.SAFE_ENV_EXPANSION_FACTOR=.75,f(yi.prototype,{select:function(){if(arguments.length!==1){if(arguments.length===2){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}}},interfaces_:function(){return[]},getClass:function(){return yi}}),f(r.prototype,{snap:function(){if(arguments.length===1){var t=arguments[0];return this.snap(t,null,-1)}if(arguments.length===3){var e=arguments[0],n=arguments[1],s=arguments[2],a=e.getSafeEnvelope(),g=new h(e,n,s);return this.index.query(a,{interfaces_:function(){return[Pe]},visitItem:function(v){var x=v;x.select(a,g)}}),g.isNodeAdded()}},interfaces_:function(){return[]},getClass:function(){return r}}),T(h,yi),f(h.prototype,{isNodeAdded:function(){return this._isNodeAdded},select:function(){if(arguments.length!==2)return yi.prototype.select.apply(this,arguments);var t=arguments[0],e=arguments[1],n=t.getContext();return this.parentEdge!==null&&n===this.parentEdge&&e===this.hotPixelVertexIndex?null:void(this._isNodeAdded=this.hotPixel.addSnappedNode(n,e))},interfaces_:function(){return[]},getClass:function(){return h}}),r.HotPixelSnapAction=h,f(p.prototype,{processIntersections:function(t,e,n,s){if(t===n&&e===s)return null;var a=t.getCoordinates()[e],g=t.getCoordinates()[e+1],v=n.getCoordinates()[s],x=n.getCoordinates()[s+1];if(this.li.computeIntersection(a,g,v,x),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var S=0;S<this.li.getIntersectionNum();S++)this.interiorIntersections.add(this.li.getIntersection(S));t.addIntersections(this.li,e,0),n.addIntersections(this.li,s,1)}},isDone:function(){return!1},getInteriorIntersections:function(){return this.interiorIntersections},interfaces_:function(){return[Or]},getClass:function(){return p}}),f(y.prototype,{checkCorrectness:function(t){var e=Je.getNodedSubstrings(t),n=new lr(e);try{n.checkValid()}catch(s){if(!(s instanceof j))throw s;s.printStackTrace()}finally{}},getNodedSubstrings:function(){return Je.getNodedSubstrings(this.nodedSegStrings)},snapRound:function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},findInteriorIntersections:function(t,e){var n=new p(e);return this.noder.setSegmentIntersector(n),this.noder.computeNodes(t),n.getInteriorIntersections()},computeVertexSnaps:function(){if(nt(arguments[0],it))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.computeVertexSnaps(n)}else if(arguments[0]instanceof Je)for(var s=arguments[0],a=s.getCoordinates(),g=0;g<a.length;g++){var v=new zi(a[g],this.scaleFactor,this.li),x=this.pointSnapper.snap(v,s,g);x&&s.addIntersection(a[g],g)}},computeNodes:function(t){this.nodedSegStrings=t,this.noder=new Yn,this.pointSnapper=new r(this.noder.getIndex()),this.snapRound(t,this.li)},computeIntersectionSnaps:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),s=new zi(n,this.scaleFactor,this.li);this.pointSnapper.snap(s)}},interfaces_:function(){return[Ue]},getClass:function(){return y}}),f(E.prototype,{bufferFixedPrecision:function(t){var e=new $e(new y(new Mt(1)),t.getScale()),n=new vi(this.bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this.resultGeometry=n.buffer(this.argGeom,this.distance)},bufferReducedPrecision:function(){if(arguments.length===0){for(var t=E.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(a){if(!(a instanceof Me))throw a;this.saveException=a}finally{}if(this.resultGeometry!==null)return null}throw this.saveException}if(arguments.length===1){var e=arguments[0],n=E.precisionScaleFactor(this.argGeom,this.distance,e),s=new Mt(n);this.bufferFixedPrecision(s)}},computeGeometry:function(){if(this.bufferOriginalPrecision(),this.resultGeometry!==null)return null;var t=this.argGeom.getFactory().getPrecisionModel();t.getType()===Mt.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},setQuadrantSegments:function(t){this.bufParams.setQuadrantSegments(t)},bufferOriginalPrecision:function(){try{var t=new vi(this.bufParams);this.resultGeometry=t.buffer(this.argGeom,this.distance)}catch(e){if(!(e instanceof M))throw e;this.saveException=e}finally{}},getResultGeometry:function(t){return this.distance=t,this.computeGeometry(),this.resultGeometry},setEndCapStyle:function(t){this.bufParams.setEndCapStyle(t)},interfaces_:function(){return[]},getClass:function(){return E}}),E.bufferOp=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=new E(t),s=n.getResultGeometry(e);return s}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Q&&typeof arguments[1]=="number"){var a=arguments[0],g=arguments[1],v=arguments[2],x=new E(a);x.setQuadrantSegments(v);var s=x.getResultGeometry(g);return s}if(arguments[2]instanceof Pt&&arguments[0]instanceof Q&&typeof arguments[1]=="number"){var S=arguments[0],O=arguments[1],B=arguments[2],x=new E(S,B),s=x.getResultGeometry(O);return s}}else if(arguments.length===4){var H=arguments[0],J=arguments[1],ut=arguments[2],pt=arguments[3],x=new E(H);x.setQuadrantSegments(ut),x.setEndCapStyle(pt);var s=x.getResultGeometry(J);return s}},E.precisionScaleFactor=function(t,e,n){var s=t.getEnvelopeInternal(),a=_t.max(Math.abs(s.getMaxX()),Math.abs(s.getMaxY()),Math.abs(s.getMinX()),Math.abs(s.getMinY())),g=e>0?e:0,v=a+2*g,x=Math.trunc(Math.log(v)/Math.log(10)+1),S=n-x,O=Math.pow(10,S);return O},E.CAP_ROUND=Pt.CAP_ROUND,E.CAP_BUTT=Pt.CAP_FLAT,E.CAP_FLAT=Pt.CAP_FLAT,E.CAP_SQUARE=Pt.CAP_SQUARE,E.MAX_PRECISION_DIGITS=12;var Ah=Object.freeze({BufferOp:E,BufferParameters:Pt});f(N.prototype,{filter:function(t){t instanceof Ft&&this.comps.add(t)},interfaces_:function(){return[_n]},getClass:function(){return N}}),N.getPolygons=function(){if(arguments.length===1){var t=arguments[0];return N.getPolygons(t,new F)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return e instanceof Ft?n.add(e):e instanceof Nt&&e.apply(new N(n)),n}},f(D.prototype,{isInsideArea:function(){return this.segIndex===D.INSIDE_AREA},getCoordinate:function(){return this.pt},getGeometryComponent:function(){return this.component},getSegmentIndex:function(){return this.segIndex},interfaces_:function(){return[]},getClass:function(){return D}}),D.INSIDE_AREA=-1,f(U.prototype,{filter:function(t){t instanceof Qt&&this.pts.add(t)},interfaces_:function(){return[_n]},getClass:function(){return U}}),U.getPoints=function(){if(arguments.length===1){var t=arguments[0];return t instanceof Qt?ti.singletonList(t):U.getPoints(t,new F)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return e instanceof Qt?n.add(e):e instanceof Nt&&e.apply(new U(n)),n}},f(W.prototype,{filter:function(t){(t instanceof Qt||t instanceof It||t instanceof Ft)&&this.locations.add(new D(t,0,t.getCoordinate()))},interfaces_:function(){return[_n]},getClass:function(){return W}}),W.getLocations=function(t){var e=new F;return t.apply(new W(e)),e},f(tt.prototype,{computeContainmentDistance:function(){if(arguments.length===0){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this.minDistance<=this.terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1],s=1-e,a=N.getPolygons(this.geom[e]);if(a.size()>0){var g=W.getLocations(this.geom[s]);if(this.computeContainmentDistance(g,a,n),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[s]=n[0],this.minDistanceLocation[e]=n[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&nt(arguments[0],R)&&nt(arguments[1],R)){for(var v=arguments[0],x=arguments[1],S=arguments[2],O=0;O<v.size();O++)for(var B=v.get(O),H=0;H<x.size();H++)if(this.computeContainmentDistance(B,x.get(H),S),this.minDistance<=this.terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof D&&arguments[1]instanceof Ft){var J=arguments[0],ut=arguments[1],pt=arguments[2],Lt=J.getCoordinate();if(C.EXTERIOR!==this.ptLocator.locate(Lt,ut))return this.minDistance=0,pt[0]=J,pt[1]=new D(ut,Lt),null}}},computeMinDistanceLinesPoints:function(t,e,n){for(var s=0;s<t.size();s++)for(var a=t.get(s),g=0;g<e.size();g++){var v=e.get(g);if(this.computeMinDistance(a,v,n),this.minDistance<=this.terminateDistance)return null}},computeFacetDistance:function(){var t=new Array(2).fill(null),e=fe.getLines(this.geom[0]),n=fe.getLines(this.geom[1]),s=U.getPoints(this.geom[0]),a=U.getPoints(this.geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,a,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,s,t),this.updateMinDistance(t,!0),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(s,a,t),void this.updateMinDistance(t,!1))))},nearestLocations:function(){return this.computeMinDistance(),this.minDistanceLocation},updateMinDistance:function(t,e){return t[0]===null?null:void(e?(this.minDistanceLocation[0]=t[1],this.minDistanceLocation[1]=t[0]):(this.minDistanceLocation[0]=t[0],this.minDistanceLocation[1]=t[1]))},nearestPoints:function(){this.computeMinDistance();var t=[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];return t},computeMinDistance:function(){if(arguments.length===0){if(this.minDistanceLocation!==null||(this.minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this.minDistance<=this.terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof It&&arguments[1]instanceof Qt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this.minDistance)return null;for(var s=t.getCoordinates(),a=e.getCoordinate(),g=0;g<s.length-1;g++){var v=et.distancePointLine(a,s[g],s[g+1]);if(v<this.minDistance){this.minDistance=v;var x=new st(s[g],s[g+1]),S=x.closestPoint(a);n[0]=new D(t,g,S),n[1]=new D(e,0,a)}if(this.minDistance<=this.terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof It&&arguments[1]instanceof It){var O=arguments[0],B=arguments[1],H=arguments[2];if(O.getEnvelopeInternal().distance(B.getEnvelopeInternal())>this.minDistance)return null;for(var s=O.getCoordinates(),J=B.getCoordinates(),g=0;g<s.length-1;g++)for(var ut=0;ut<J.length-1;ut++){var v=et.distanceLineLine(s[g],s[g+1],J[ut],J[ut+1]);if(v<this.minDistance){this.minDistance=v;var pt=new st(s[g],s[g+1]),Lt=new st(J[ut],J[ut+1]),Yt=pt.closestPoints(Lt);H[0]=new D(O,g,Yt[0]),H[1]=new D(B,ut,Yt[1])}if(this.minDistance<=this.terminateDistance)return null}}}},computeMinDistancePoints:function(t,e,n){for(var s=0;s<t.size();s++)for(var a=t.get(s),g=0;g<e.size();g++){var v=e.get(g),x=a.getCoordinate().distance(v.getCoordinate());if(x<this.minDistance&&(this.minDistance=x,n[0]=new D(a,0,a.getCoordinate()),n[1]=new D(v,0,v.getCoordinate())),this.minDistance<=this.terminateDistance)return null}},distance:function(){if(this.geom[0]===null||this.geom[1]===null)throw new d;return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)},computeMinDistanceLines:function(t,e,n){for(var s=0;s<t.size();s++)for(var a=t.get(s),g=0;g<e.size();g++){var v=e.get(g);if(this.computeMinDistance(a,v,n),this.minDistance<=this.terminateDistance)return null}},interfaces_:function(){return[]},getClass:function(){return tt}}),tt.distance=function(t,e){var n=new tt(t,e);return n.distance()},tt.isWithinDistance=function(t,e,n){var s=new tt(t,e,n);return s.distance()<=n},tt.nearestPoints=function(t,e){var n=new tt(t,e);return n.nearestPoints()};var Dh=Object.freeze({DistanceOp:tt});f(ft.prototype,{getCoordinates:function(){if(this.coordinates===null){for(var t=0,e=0,n=new V,s=this.directedEdges.iterator();s.hasNext();){var a=s.next();a.getEdgeDirection()?t++:e++,n.add(a.getEdge().getLine().getCoordinates(),!1,a.getEdgeDirection())}this.coordinates=n.toCoordinateArray(),e>t&&dt.reverse(this.coordinates)}return this.coordinates},toLineString:function(){return this.factory.createLineString(this.getCoordinates())},add:function(t){this.directedEdges.add(t)},interfaces_:function(){return[]},getClass:function(){return ft}}),f(Et.prototype,{setVisited:function(t){this._isVisited=t},isMarked:function(){return this._isMarked},setData:function(t){this.data=t},getData:function(){return this.data},setMarked:function(t){this._isMarked=t},getContext:function(){return this.data},isVisited:function(){return this._isVisited},setContext:function(t){this.data=t},interfaces_:function(){return[]},getClass:function(){return Et}}),Et.getComponentWithVisitedState=function(t,e){for(;t.hasNext();){var n=t.next();if(n.isVisited()===e)return n}return null},Et.setVisited=function(t,e){for(;t.hasNext();){var n=t.next();n.setVisited(e)}},Et.setMarked=function(t,e){for(;t.hasNext();){var n=t.next();n.setMarked(e)}},T(Ct,Et),f(Ct.prototype,{isRemoved:function(){return this.parentEdge===null},compareDirection:function(t){return this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:et.computeOrientation(t.p0,t.p1,this.p1)},getCoordinate:function(){return this.from.getCoordinate()},print:function(t){var e=this.getClass().getName(),n=e.lastIndexOf("."),s=e.substring(n+1);t.print("  "+s+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+this.angle)},getDirectionPt:function(){return this.p1},getAngle:function(){return this.angle},compareTo:function(t){var e=t;return this.compareDirection(e)},getFromNode:function(){return this.from},getSym:function(){return this.sym},setEdge:function(t){this.parentEdge=t},remove:function(){this.sym=null,this.parentEdge=null},getEdge:function(){return this.parentEdge},getQuadrant:function(){return this.quadrant},setSym:function(t){this.sym=t},getToNode:function(){return this.to},getEdgeDirection:function(){return this.edgeDirection},interfaces_:function(){return[_]},getClass:function(){return Ct}}),Ct.toEdges=function(t){for(var e=new F,n=t.iterator();n.hasNext();)e.add(n.next().parentEdge);return e},T(tn,Ct),f(tn.prototype,{getNext:function(){return this.getToNode().getDegree()!==2?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(k.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))},interfaces_:function(){return[]},getClass:function(){return tn}}),T(Oe,Et),f(Oe.prototype,{isRemoved:function(){return this.dirEdge===null},setDirectedEdges:function(t,e){this.dirEdge=[t,e],t.setEdge(this),e.setEdge(this),t.setSym(e),e.setSym(t),t.getFromNode().addOutEdge(t),e.getFromNode().addOutEdge(e)},getDirEdge:function(){if(Number.isInteger(arguments[0])){var t=arguments[0];return this.dirEdge[t]}if(arguments[0]instanceof Ae){var e=arguments[0];return this.dirEdge[0].getFromNode()===e?this.dirEdge[0]:this.dirEdge[1].getFromNode()===e?this.dirEdge[1]:null}},remove:function(){this.dirEdge=null},getOppositeNode:function(t){return this.dirEdge[0].getFromNode()===t?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()===t?this.dirEdge[1].getToNode():null},interfaces_:function(){return[]},getClass:function(){return Oe}}),f(hr.prototype,{getNextEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e+1))},getCoordinate:function(){var t=this.iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},iterator:function(){return this.sortEdges(),this.outEdges.iterator()},sortEdges:function(){this.sorted||(ti.sort(this.outEdges),this.sorted=!0)},remove:function(t){this.outEdges.remove(t)},getEdges:function(){return this.sortEdges(),this.outEdges},getNextCWEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e-1))},getIndex:function(){if(arguments[0]instanceof Oe){var t=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var n=this.outEdges.get(e);if(n.getEdge()===t)return e}return-1}if(arguments[0]instanceof Ct){var s=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var n=this.outEdges.get(e);if(n===s)return e}return-1}if(Number.isInteger(arguments[0])){var a=arguments[0],g=a%this.outEdges.size();return 0>g&&(g+=this.outEdges.size()),g}},add:function(t){this.outEdges.add(t),this.sorted=!1},getDegree:function(){return this.outEdges.size()},interfaces_:function(){return[]},getClass:function(){return hr}}),T(Ae,Et),f(Ae.prototype,{isRemoved:function(){return this.pt===null},addOutEdge:function(t){this.deStar.add(t)},getCoordinate:function(){return this.pt},getOutEdges:function(){return this.deStar},remove:function(){if(arguments.length===0)this.pt=null;else if(arguments.length===1){var t=arguments[0];this.deStar.remove(t)}},getIndex:function(t){return this.deStar.getIndex(t)},getDegree:function(){return this.deStar.getDegree()},interfaces_:function(){return[]},getClass:function(){return Ae}}),Ae.getEdgesBetween=function(t,e){var n=Ct.toEdges(t.getOutEdges().getEdges()),s=new he(n),a=Ct.toEdges(e.getOutEdges().getEdges());return s.retainAll(a),s},T(cr,Oe),f(cr.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return cr}}),f(js.prototype,{find:function(t){return this.nodeMap.get(t)},iterator:function(){return this.nodeMap.values().iterator()},remove:function(t){return this.nodeMap.remove(t)},values:function(){return this.nodeMap.values()},add:function(t){return this.nodeMap.put(t.getCoordinate(),t),t},interfaces_:function(){return[]},getClass:function(){return js}}),f(fr.prototype,{findNodesOfDegree:function(t){for(var e=new F,n=this.nodeIterator();n.hasNext();){var s=n.next();s.getDegree()===t&&e.add(s)}return e},dirEdgeIterator:function(){return this.dirEdges.iterator()},edgeIterator:function(){return this.edges.iterator()},remove:function(){if(arguments[0]instanceof Oe){var t=arguments[0];this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this.edges.remove(t),t.remove()}else if(arguments[0]instanceof Ct){var e=arguments[0],n=e.getSym();n!==null&&n.setSym(null),e.getFromNode().remove(e),e.remove(),this.dirEdges.remove(e)}else if(arguments[0]instanceof Ae){for(var s=arguments[0],a=s.getOutEdges().getEdges(),g=a.iterator();g.hasNext();){var v=g.next(),n=v.getSym();n!==null&&this.remove(n),this.dirEdges.remove(v);var x=v.getEdge();x!==null&&this.edges.remove(x)}this.nodeMap.remove(s.getCoordinate()),s.remove()}},findNode:function(t){return this.nodeMap.find(t)},getEdges:function(){return this.edges},nodeIterator:function(){return this.nodeMap.iterator()},contains:function(){if(arguments[0]instanceof Oe){var t=arguments[0];return this.edges.contains(t)}if(arguments[0]instanceof Ct){var e=arguments[0];return this.dirEdges.contains(e)}},add:function(){if(arguments[0]instanceof Ae){var t=arguments[0];this.nodeMap.add(t)}else if(arguments[0]instanceof Oe){var e=arguments[0];this.edges.add(e),this.add(e.getDirEdge(0)),this.add(e.getDirEdge(1))}else if(arguments[0]instanceof Ct){var n=arguments[0];this.dirEdges.add(n)}},getNodes:function(){return this.nodeMap.values()},interfaces_:function(){return[]},getClass:function(){return fr}}),T(_s,fr),f(_s.prototype,{addEdge:function(t){if(t.isEmpty())return null;var e=dt.removeRepeatedPoints(t.getCoordinates());if(e.length<=1)return null;var n=e[0],s=e[e.length-1],a=this.getNode(n),g=this.getNode(s),v=new tn(a,g,e[1],!0),x=new tn(g,a,e[e.length-2],!1),S=new cr(t);S.setDirectedEdges(v,x),this.add(S)},getNode:function(t){var e=this.findNode(t);return e===null&&(e=new Ae(t),this.add(e)),e},interfaces_:function(){return[]},getClass:function(){return _s}}),f(xs.prototype,{buildEdgeStringsForUnprocessedNodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.isMarked()||(k.isTrue(e.getDegree()===2),this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForNonDegree2Nodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getDegree()!==2&&(this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForObviousStartNodes:function(){this.buildEdgeStringsForNonDegree2Nodes()},getMergedLineStrings:function(){return this.merge(),this.mergedLineStrings},buildEdgeStringsStartingAt:function(t){for(var e=t.getOutEdges().iterator();e.hasNext();){var n=e.next();n.getEdge().isMarked()||this.edgeStrings.add(this.buildEdgeStringStartingWith(n))}},merge:function(){if(this.mergedLineStrings!==null)return null;Et.setMarked(this.graph.nodeIterator(),!1),Et.setMarked(this.graph.edgeIterator(),!1),this.edgeStrings=new F,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this.mergedLineStrings=new F;for(var t=this.edgeStrings.iterator();t.hasNext();){var e=t.next();this.mergedLineStrings.add(e.toLineString())}},buildEdgeStringStartingWith:function(t){var e=new ft(this.factory),n=t;do e.add(n),n.getEdge().setMarked(!0),n=n.getNext();while(n!==null&&n!==t);return e},add:function(){if(arguments[0]instanceof Q){var t=arguments[0];t.apply({interfaces_:function(){return[Bt]},filter:function(g){g instanceof It&&this.add(g)}})}else if(nt(arguments[0],it)){var e=arguments[0];this.mergedLineStrings=null;for(var n=e.iterator();n.hasNext();){var s=n.next();this.add(s)}}else if(arguments[0]instanceof It){var a=arguments[0];this.factory===null&&(this.factory=a.getFactory()),this.graph.addEdge(a)}},buildEdgeStringsForIsolatedLoops:function(){this.buildEdgeStringsForUnprocessedNodes()},interfaces_:function(){return[]},getClass:function(){return xs}});var kh=Object.freeze({LineMerger:xs}),Fh=Object.freeze({OverlayOp:ct});T(qr,Ct),f(qr.prototype,{getNext:function(){return this.next},isInRing:function(){return this.edgeRing!==null},setRing:function(t){this.edgeRing=t},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setNext:function(t){this.next=t},getRing:function(){return this.edgeRing},interfaces_:function(){return[]},getClass:function(){return qr}}),T(Ur,Oe),f(Ur.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return Ur}}),f(Ut.prototype,{isIncluded:function(){return this._isIncluded},getCoordinates:function(){if(this.ringPts===null){for(var t=new V,e=this.deList.iterator();e.hasNext();){var n=e.next(),s=n.getEdge();Ut.addEdge(s.getLine().getCoordinates(),n.getEdgeDirection(),t)}this.ringPts=t.toCoordinateArray()}return this.ringPts},isIncludedSet:function(){return this._isIncludedSet},isValid:function(){return this.getCoordinates(),this.ringPts.length<=3?!1:(this.getRing(),this.ring.isValid())},build:function(t){var e=t;do this.add(e),e.setRing(this),e=e.getNext(),k.isTrue(e!==null,"found null DE in ring"),k.isTrue(e===t||!e.isInRing(),"found DE already in ring");while(e!==t)},isOuterHole:function(){return this._isHole?!this.hasShell():!1},getPolygon:function(){var t=null;if(this.holes!==null){t=new Array(this.holes.size()).fill(null);for(var e=0;e<this.holes.size();e++)t[e]=this.holes.get(e)}var n=this.factory.createPolygon(this.ring,t);return n},isHole:function(){return this._isHole},isProcessed:function(){return this._isProcessed},addHole:function(){if(arguments[0]instanceof ie){var t=arguments[0];this.holes===null&&(this.holes=new F),this.holes.add(t)}else if(arguments[0]instanceof Ut){var e=arguments[0];e.setShell(this);var n=e.getRing();this.holes===null&&(this.holes=new F),this.holes.add(n)}},setIncluded:function(t){this._isIncluded=t,this._isIncludedSet=!0},getOuterHole:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t),n=e.getSym().getRing();if(n.isOuterHole())return n}return null},computeHole:function(){var t=this.getRing();this._isHole=et.isCCW(t.getCoordinates())},hasShell:function(){return this.shell!==null},isOuterShell:function(){return this.getOuterHole()!==null},getLineString:function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)},toString:function(){return wt.toLineString(new qe(this.getCoordinates()))},getShell:function(){return this.isHole()?this.shell:this},add:function(t){this.deList.add(t)},getRing:function(){if(this.ring!==null)return this.ring;this.getCoordinates(),this.ringPts.length<3&&mt.out.println(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(t){if(!(t instanceof j))throw t;mt.out.println(this.ringPts)}finally{}return this.ring},updateIncluded:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t),n=e.getSym().getRing().getShell();if(n!==null&&n.isIncludedSet())return this.setIncluded(!n.isIncluded()),null}},setShell:function(t){this.shell=t},setProcessed:function(t){this._isProcessed=t},interfaces_:function(){return[]},getClass:function(){return Ut}}),Ut.findDirEdgesInRing=function(t){var e=t,n=new F;do n.add(e),e=e.getNext(),k.isTrue(e!==null,"found null DE in ring"),k.isTrue(e===t||!e.isInRing(),"found DE already in ring");while(e!==t);return n},Ut.addEdge=function(t,e,n){if(e)for(var s=0;s<t.length;s++)n.add(t[s],!1);else for(var s=t.length-1;s>=0;s--)n.add(t[s],!1)},Ut.findEdgeRingContaining=function(t,e){for(var n=t.getRing(),s=n.getEnvelopeInternal(),a=n.getCoordinateN(0),g=null,v=null,x=e.iterator();x.hasNext();){var S=x.next(),O=S.getRing(),B=O.getEnvelopeInternal();if(!B.equals(s)&&B.contains(s)){a=dt.ptNotInList(n.getCoordinates(),O.getCoordinates());var H=!1;et.isPointInRing(a,O.getCoordinates())&&(H=!0),H&&(g===null||v.contains(B))&&(g=S,v=g.getRing().getEnvelopeInternal())}}return g},f(dr.prototype,{compare:function(t,e){var n=t,s=e;return n.getRing().getEnvelope().compareTo(s.getRing().getEnvelope())},interfaces_:function(){return[I]},getClass:function(){return dr}}),Ut.EnvelopeComparator=dr,T(pe,fr),f(pe.prototype,{findEdgeRing:function(t){var e=new Ut(this.factory);return e.build(t),e},computeDepthParity:function(){if(arguments.length===0)for(;;){var t=null;if(t===null)return null;this.computeDepthParity(t)}},computeNextCWEdges:function(){for(var t=this.nodeIterator();t.hasNext();){var e=t.next();pe.computeNextCWEdges(e)}},addEdge:function(t){if(t.isEmpty())return null;var e=dt.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return null;var n=e[0],s=e[e.length-1],a=this.getNode(n),g=this.getNode(s),v=new qr(a,g,e[1],!0),x=new qr(g,a,e[e.length-2],!1),S=new Ur(t);S.setDirectedEdges(v,x),this.add(S)},deleteCutEdges:function(){this.computeNextCWEdges(),pe.findLabeledEdgeRings(this.dirEdges);for(var t=new F,e=this.dirEdges.iterator();e.hasNext();){var n=e.next();if(!n.isMarked()){var s=n.getSym();if(n.getLabel()===s.getLabel()){n.setMarked(!0),s.setMarked(!0);var a=n.getEdge();t.add(a.getLine())}}}return t},getEdgeRings:function(){this.computeNextCWEdges(),pe.label(this.dirEdges,-1);var t=pe.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(t);for(var e=new F,n=this.dirEdges.iterator();n.hasNext();){var s=n.next();if(!s.isMarked()&&!s.isInRing()){var a=this.findEdgeRing(s);e.add(a)}}return e},getNode:function(t){var e=this.findNode(t);return e===null&&(e=new Ae(t),this.add(e)),e},convertMaximalToMinimalEdgeRings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),s=n.getLabel(),a=pe.findIntersectionNodes(n,s);if(a!==null)for(var g=a.iterator();g.hasNext();){var v=g.next();pe.computeNextCCWEdges(v,s)}}},deleteDangles:function(){for(var t=this.findNodesOfDegree(1),e=new he,n=new $t,s=t.iterator();s.hasNext();)n.push(s.next());for(;!n.isEmpty();){var a=n.pop();pe.deleteAllEdges(a);for(var g=a.getOutEdges().getEdges(),s=g.iterator();s.hasNext();){var v=s.next();v.setMarked(!0);var x=v.getSym();x!==null&&x.setMarked(!0);var S=v.getEdge();e.add(S.getLine());var O=v.getToNode();pe.getDegreeNonDeleted(O)===1&&n.push(O)}}return e},interfaces_:function(){return[]},getClass:function(){return pe}}),pe.findLabeledEdgeRings=function(t){for(var e=new F,n=1,s=t.iterator();s.hasNext();){var a=s.next();if(!(a.isMarked()||a.getLabel()>=0)){e.add(a);var g=Ut.findDirEdgesInRing(a);pe.label(g,n),n++}}return e},pe.getDegreeNonDeleted=function(t){for(var e=t.getOutEdges().getEdges(),n=0,s=e.iterator();s.hasNext();){var a=s.next();a.isMarked()||n++}return n},pe.deleteAllEdges=function(t){for(var e=t.getOutEdges().getEdges(),n=e.iterator();n.hasNext();){var s=n.next();s.setMarked(!0);var a=s.getSym();a!==null&&a.setMarked(!0)}},pe.label=function(t,e){for(var n=t.iterator();n.hasNext();){var s=n.next();s.setLabel(e)}},pe.computeNextCWEdges=function(t){for(var e=t.getOutEdges(),n=null,s=null,a=e.getEdges().iterator();a.hasNext();){var g=a.next();if(!g.isMarked()){if(n===null&&(n=g),s!==null){var v=s.getSym();v.setNext(g)}s=g}}if(s!==null){var v=s.getSym();v.setNext(n)}},pe.computeNextCCWEdges=function(t,e){for(var n=t.getOutEdges(),s=null,a=null,g=n.getEdges(),v=g.size()-1;v>=0;v--){var x=g.get(v),S=x.getSym(),O=null;x.getLabel()===e&&(O=x);var B=null;S.getLabel()===e&&(B=S),O===null&&B===null||(B!==null&&(a=B),O!==null&&(a!==null&&(a.setNext(O),a=null),s===null&&(s=O)))}a!==null&&(k.isTrue(s!==null),a.setNext(s))},pe.getDegree=function(t,e){for(var n=t.getOutEdges().getEdges(),s=0,a=n.iterator();a.hasNext();){var g=a.next();g.getLabel()===e&&s++}return s},pe.findIntersectionNodes=function(t,e){var n=t,s=null;do{var a=n.getFromNode();pe.getDegree(a,e)>1&&(s===null&&(s=new F),s.add(a)),n=n.getNext(),k.isTrue(n!==null,"found null DE in ring"),k.isTrue(n===t||!n.isInRing(),"found DE already in ring")}while(n!==t);return s},f(Ze.prototype,{getGeometry:function(){return this.geomFactory===null&&(this.geomFactory=new St),this.polygonize(),this.extractOnlyPolygonal?this.geomFactory.buildGeometry(this.polyList):this.geomFactory.createGeometryCollection(St.toGeometryArray(this.polyList))},getInvalidRingLines:function(){return this.polygonize(),this.invalidRingLines},findValidRings:function(t,e,n){for(var s=t.iterator();s.hasNext();){var a=s.next();a.isValid()?e.add(a):n.add(a.getLineString())}},polygonize:function(){if(this.polyList!==null||(this.polyList=new F,this.graph===null))return null;this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var t=this.graph.getEdgeRings(),e=new F;this.invalidRingLines=new F,this.isCheckingRingsValid?this.findValidRings(t,e,this.invalidRingLines):e=t,this.findShellsAndHoles(e),Ze.assignHolesToShells(this.holeList,this.shellList),ti.sort(this.shellList,new Ut.EnvelopeComparator);var n=!0;this.extractOnlyPolygonal&&(Ze.findDisjointShells(this.shellList),n=!1),this.polyList=Ze.extractPolygons(this.shellList,n)},getDangles:function(){return this.polygonize(),this.dangles},getCutEdges:function(){return this.polygonize(),this.cutEdges},getPolygons:function(){return this.polygonize(),this.polyList},add:function(){if(nt(arguments[0],it))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.add(n)}else if(arguments[0]instanceof It){var s=arguments[0];this.geomFactory=s.getFactory(),this.graph===null&&(this.graph=new pe(this.geomFactory)),this.graph.addEdge(s)}else if(arguments[0]instanceof Q){var a=arguments[0];a.apply(this.lineStringAdder)}},setCheckRingsValid:function(t){this.isCheckingRingsValid=t},findShellsAndHoles:function(t){this.holeList=new F,this.shellList=new F;for(var e=t.iterator();e.hasNext();){var n=e.next();n.computeHole(),n.isHole()?this.holeList.add(n):this.shellList.add(n)}},interfaces_:function(){return[]},getClass:function(){return Ze}}),Ze.findOuterShells=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),s=n.getOuterHole();s===null||s.isProcessed()||(n.setIncluded(!0),s.setProcessed(!0))}},Ze.extractPolygons=function(t,e){for(var n=new F,s=t.iterator();s.hasNext();){var a=s.next();(e||a.isIncluded())&&n.add(a.getPolygon())}return n},Ze.assignHolesToShells=function(t,e){for(var n=t.iterator();n.hasNext();){var s=n.next();Ze.assignHoleToShell(s,e)}},Ze.assignHoleToShell=function(t,e){var n=Ut.findEdgeRingContaining(t,e);n!==null&&n.addHole(t)},Ze.findDisjointShells=function(t){Ze.findOuterShells(t);var e=null;do{e=!1;for(var n=t.iterator();n.hasNext();){var s=n.next();s.isIncludedSet()||(s.updateIncluded(),s.isIncludedSet()||(e=!0))}}while(e)},f(Ls.prototype,{filter:function(t){t instanceof It&&this.p.add(t)},interfaces_:function(){return[Bt]},getClass:function(){return Ls}}),Ze.LineStringAdder=Ls;var zh=Object.freeze({Polygonizer:Ze});f(gr.prototype,{createEdgeEndForNext:function(t,e,n,s){var a=n.segmentIndex+1;if(a>=t.getNumPoints()&&s===null)return null;var g=t.getCoordinate(a);s!==null&&s.segmentIndex===n.segmentIndex&&(g=s.coord);var v=new Ke(t,n.coord,g,new re(t.getLabel()));e.add(v)},createEdgeEndForPrev:function(t,e,n,s){var a=n.segmentIndex;if(n.dist===0){if(a===0)return null;a--}var g=t.getCoordinate(a);s!==null&&s.segmentIndex>=a&&(g=s.coord);var v=new re(t.getLabel());v.flip();var x=new Ke(t,n.coord,g,v);e.add(x)},computeEdgeEnds:function(){if(arguments.length===1){for(var t=arguments[0],e=new F,n=t;n.hasNext();){var s=n.next();this.computeEdgeEnds(s,e)}return e}if(arguments.length===2){var a=arguments[0],g=arguments[1],v=a.getEdgeIntersectionList();v.addEndpoints();var x=v.iterator(),S=null,O=null;if(!x.hasNext())return null;var B=x.next();do S=O,O=B,B=null,x.hasNext()&&(B=x.next()),O!==null&&(this.createEdgeEndForPrev(a,g,O,S),this.createEdgeEndForNext(a,g,O,B));while(O!==null)}},interfaces_:function(){return[]},getClass:function(){return gr}}),T(pr,Ke),f(pr.prototype,{insert:function(t){this.edgeEnds.add(t)},print:function(t){t.println("EdgeEndBundle--> Label: "+this.label);for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t),t.println()}},iterator:function(){return this.edgeEnds.iterator()},getEdgeEnds:function(){return this.edgeEnds},computeLabelOn:function(t,e){for(var n=0,s=!1,a=this.iterator();a.hasNext();){var g=a.next(),v=g.getLabel().getLocation(t);v===C.BOUNDARY&&n++,v===C.INTERIOR&&(s=!0)}var v=C.NONE;s&&(v=C.INTERIOR),n>0&&(v=Re.determineBoundary(e,n)),this.label.setLocation(t,v)},computeLabelSide:function(t,e){for(var n=this.iterator();n.hasNext();){var s=n.next();if(s.getLabel().isArea()){var a=s.getLabel().getLocation(t,e);if(a===C.INTERIOR)return this.label.setLocation(t,e,C.INTERIOR),null;a===C.EXTERIOR&&this.label.setLocation(t,e,C.EXTERIOR)}}},getLabel:function(){return this.label},computeLabelSides:function(t){this.computeLabelSide(t,$.LEFT),this.computeLabelSide(t,$.RIGHT)},updateIM:function(t){je.updateIM(this.label,t)},computeLabel:function(t){for(var e=!1,n=this.iterator();n.hasNext();){var s=n.next();s.getLabel().isArea()&&(e=!0)}e?this.label=new re(C.NONE,C.NONE,C.NONE):this.label=new re(C.NONE);for(var a=0;2>a;a++)this.computeLabelOn(a,t),e&&this.computeLabelSides(a)},interfaces_:function(){return[]},getClass:function(){return pr}}),T(Es,li),f(Es.prototype,{updateIM:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.updateIM(t)}},insert:function(t){var e=this.edgeMap.get(t);e===null?(e=new pr(t),this.insertEdgeEnd(t,e)):e.insert(t)},interfaces_:function(){return[]},getClass:function(){return Es}}),T(Oo,On),f(Oo.prototype,{updateIMFromEdges:function(t){this.edges.updateIM(t)},computeIM:function(t){t.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)},interfaces_:function(){return[]},getClass:function(){return Oo}}),T(Qs,ai),f(Qs.prototype,{createNode:function(t){return new Oo(t,new Es)},interfaces_:function(){return[]},getClass:function(){return Qs}}),f(Ao.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},computeProperIntersectionIM:function(t,e){var n=this.arg[0].getGeometry().getDimension(),s=this.arg[1].getGeometry().getDimension(),a=t.hasProperIntersection(),g=t.hasProperInteriorIntersection();n===2&&s===2?a&&e.setAtLeast("212101212"):n===2&&s===1?(a&&e.setAtLeast("FFF0FFFF2"),g&&e.setAtLeast("1FFFFF1FF")):n===1&&s===2?(a&&e.setAtLeast("F0FFFFFF2"),g&&e.setAtLeast("1F1FFFFFF")):n===1&&s===1&&g&&e.setAtLeast("0FFFFFFFF")},labelIsolatedEdges:function(t,e){for(var n=this.arg[t].getEdgeIterator();n.hasNext();){var s=n.next();s.isIsolated()&&(this.labelIsolatedEdge(s,e,this.arg[e].getGeometry()),this.isolatedEdges.add(s))}},labelIsolatedEdge:function(t,e,n){if(n.getDimension()>0){var s=this.ptLocator.locate(t.getCoordinate(),n);t.getLabel().setAllLocations(e,s)}else t.getLabel().setAllLocations(e,C.EXTERIOR)},computeIM:function(){var t=new yt;if(t.set(C.EXTERIOR,C.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var e=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);var n=new gr,s=n.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(s);var a=n.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(a),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t},labelNodeEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().computeLabelling(this.arg)}},copyNodesAndLabels:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next(),s=this.nodes.addNode(n.getCoordinate());s.setLabel(t,n.getLabel().getLocation(t))}},labelIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),s=n.getLabel().getLocation(t),a=n.getEdgeIntersectionList().iterator();a.hasNext();){var g=a.next(),v=this.nodes.find(g.coord);v.getLabel().isNull(t)&&(s===C.BOUNDARY?v.setLabelBoundary(t):v.setLabel(t,C.INTERIOR))}},labelIsolatedNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setAllLocations(e,n)},computeIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),s=n.getLabel().getLocation(t),a=n.getEdgeIntersectionList().iterator();a.hasNext();){var g=a.next(),v=this.nodes.addNode(g.coord);s===C.BOUNDARY?v.setLabelBoundary(t):v.getLabel().isNull(t)&&v.setLabel(t,C.INTERIOR)}},labelIsolatedNodes:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();k.isTrue(n.getGeometryCount()>0,"node with empty label found"),e.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}},updateIM:function(t){for(var e=this.isolatedEdges.iterator();e.hasNext();){var n=e.next();n.updateIM(t)}for(var s=this.nodes.iterator();s.hasNext();){var a=s.next();a.updateIM(t),a.updateIMFromEdges(t)}},computeDisjointIM:function(t){var e=this.arg[0].getGeometry();e.isEmpty()||(t.set(C.INTERIOR,C.EXTERIOR,e.getDimension()),t.set(C.BOUNDARY,C.EXTERIOR,e.getBoundaryDimension()));var n=this.arg[1].getGeometry();n.isEmpty()||(t.set(C.EXTERIOR,C.INTERIOR,n.getDimension()),t.set(C.EXTERIOR,C.BOUNDARY,n.getBoundaryDimension()))},interfaces_:function(){return[]},getClass:function(){return Ao}}),f($s.prototype,{isContainedInBoundary:function(t){if(t instanceof Ft)return!1;if(t instanceof Qt)return this.isPointContainedInBoundary(t);if(t instanceof It)return this.isLineStringContainedInBoundary(t);for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.isContainedInBoundary(n))return!1}return!0},isLineSegmentContainedInBoundary:function(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this.rectEnv.getMinX()||t.x===this.rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this.rectEnv.getMinY()||t.y===this.rectEnv.getMaxY()))return!0;return!1},isLineStringContainedInBoundary:function(t){for(var e=t.getCoordinateSequence(),n=new P,s=new P,a=0;a<e.size()-1;a++)if(e.getCoordinate(a,n),e.getCoordinate(a+1,s),!this.isLineSegmentContainedInBoundary(n,s))return!1;return!0},isPointContainedInBoundary:function(){if(arguments[0]instanceof Qt){var t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof P){var e=arguments[0];return e.x===this.rectEnv.getMinX()||e.x===this.rectEnv.getMaxX()||e.y===this.rectEnv.getMinY()||e.y===this.rectEnv.getMaxY()}},contains:function(t){return this.rectEnv.contains(t.getEnvelopeInternal())?!this.isContainedInBoundary(t):!1},interfaces_:function(){return[]},getClass:function(){return $s}}),$s.contains=function(t,e){var n=new $s(t);return n.contains(e)},f(Ua.prototype,{intersects:function(t,e){var n=new G(t,e);if(!this.rectEnv.intersects(n))return!1;if(this.rectEnv.intersects(t)||this.rectEnv.intersects(e))return!0;if(t.compareTo(e)>0){var s=t;t=e,e=s}var a=!1;return e.y>t.y&&(a=!0),a?this.li.computeIntersection(t,e,this.diagDown0,this.diagDown1):this.li.computeIntersection(t,e,this.diagUp0,this.diagUp1),!!this.li.hasIntersection()},interfaces_:function(){return[]},getClass:function(){return Ua}}),f(mr.prototype,{applyTo:function(t){for(var e=0;e<t.getNumGeometries()&&!this._isDone;e++){var n=t.getGeometryN(e);if(n instanceof Nt)this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null}},interfaces_:function(){return[]},getClass:function(){return mr}}),f(ws.prototype,{intersects:function(t){if(!this.rectEnv.intersects(t.getEnvelopeInternal()))return!1;var e=new Do(this.rectEnv);if(e.applyTo(t),e.intersects())return!0;var n=new ko(this.rectangle);if(n.applyTo(t),n.containsPoint())return!0;var s=new Fo(this.rectangle);return s.applyTo(t),!!s.intersects()},interfaces_:function(){return[]},getClass:function(){return ws}}),ws.intersects=function(t,e){var n=new ws(t);return n.intersects(e)},T(Do,mr),f(Do.prototype,{isDone:function(){return this._intersects===!0},visit:function(t){var e=t.getEnvelopeInternal();return this.rectEnv.intersects(e)?this.rectEnv.contains(e)?(this._intersects=!0,null):e.getMinX()>=this.rectEnv.getMinX()&&e.getMaxX()<=this.rectEnv.getMaxX()?(this._intersects=!0,null):e.getMinY()>=this.rectEnv.getMinY()&&e.getMaxY()<=this.rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null},intersects:function(){return this._intersects},interfaces_:function(){return[]},getClass:function(){return Do}}),T(ko,mr),f(ko.prototype,{isDone:function(){return this._containsPoint===!0},visit:function(t){if(!(t instanceof Ft))return null;var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;for(var n=new P,s=0;4>s;s++)if(this.rectSeq.getCoordinate(s,n),e.contains(n)&&ge.containsPointInPolygon(n,t))return this._containsPoint=!0,null},containsPoint:function(){return this._containsPoint},interfaces_:function(){return[]},getClass:function(){return ko}}),T(Fo,mr),f(Fo.prototype,{intersects:function(){return this.hasIntersection},isDone:function(){return this.hasIntersection===!0},visit:function(t){var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;var n=fe.getLines(t);this.checkIntersectionWithLineStrings(n)},checkIntersectionWithLineStrings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();if(this.checkIntersectionWithSegments(n),this.hasIntersection)return null}},checkIntersectionWithSegments:function(t){for(var e=t.getCoordinateSequence(),n=1;n<e.size();n++)if(e.getCoordinate(n-1,this.p0),e.getCoordinate(n,this.p1),this.rectIntersector.intersects(this.p0,this.p1))return this.hasIntersection=!0,null},interfaces_:function(){return[]},getClass:function(){return Fo}}),T(At,di),f(At.prototype,{getIntersectionMatrix:function(){return this._relate.computeIM()},interfaces_:function(){return[]},getClass:function(){return At}}),At.covers=function(t,e){return t.getEnvelopeInternal().covers(e.getEnvelopeInternal())?t.isRectangle()?!0:At.relate(t,e).isCovers():!1},At.intersects=function(t,e){return t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?t.isRectangle()?ws.intersects(t,e):e.isRectangle()?ws.intersects(e,t):At.relate(t,e).isIntersects():!1},At.touches=function(t,e){return t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?At.relate(t,e).isTouches(t.getDimension(),e.getDimension()):!1},At.within=function(t,e){return e.contains(t)},At.coveredBy=function(t,e){return At.covers(e,t)},At.relate=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=new At(t,e),s=n.getIntersectionMatrix();return s}if(arguments.length===3){if(typeof arguments[2]=="string"&&arguments[0]instanceof Q&&arguments[1]instanceof Q){var a=arguments[0],g=arguments[1],v=arguments[2];return At.relateWithCheck(a,g).matches(v)}if(nt(arguments[2],Ht)&&arguments[0]instanceof Q&&arguments[1]instanceof Q){var x=arguments[0],S=arguments[1],O=arguments[2],n=new At(x,S,O),s=n.getIntersectionMatrix();return s}}},At.overlaps=function(t,e){return t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?At.relate(t,e).isOverlaps(t.getDimension(),e.getDimension()):!1},At.disjoint=function(t,e){return!t.intersects(e)},At.relateWithCheck=function(t,e){return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),At.relate(t,e)},At.crosses=function(t,e){return t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?At.relate(t,e).isCrosses(t.getDimension(),e.getDimension()):!1},At.contains=function(t,e){return t.getEnvelopeInternal().contains(e.getEnvelopeInternal())?t.isRectangle()?$s.contains(t,e):At.relate(t,e).isContains():!1};var Gh=Object.freeze({RelateOp:At});f(gn.prototype,{extractElements:function(t,e){if(t===null)return null;for(var n=0;n<t.getNumGeometries();n++){var s=t.getGeometryN(n);this.skipEmpty&&s.isEmpty()||e.add(s)}},combine:function(){for(var t=new F,e=this.inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return t.size()===0?this.geomFactory!==null?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(t)},interfaces_:function(){return[]},getClass:function(){return gn}}),gn.combine=function(){if(arguments.length===1){var t=arguments[0],e=new gn(t);return e.combine()}if(arguments.length===2){var n=arguments[0],s=arguments[1],e=new gn(gn.createList(n,s));return e.combine()}if(arguments.length===3){var a=arguments[0],g=arguments[1],v=arguments[2],e=new gn(gn.createList(a,g,v));return e.combine()}},gn.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},gn.createList=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=new F;return n.add(t),n.add(e),n}if(arguments.length===3){var s=arguments[0],a=arguments[1],g=arguments[2],n=new F;return n.add(s),n.add(a),n.add(g),n}},f(to.prototype,{union:function(){for(var t=new Hn,e=new Ie,n=0;n<this.pointGeom.getNumGeometries();n++){var s=this.pointGeom.getGeometryN(n),a=s.getCoordinate(),g=t.locate(a,this.otherGeom);g===C.EXTERIOR&&e.add(a)}if(e.size()===0)return this.otherGeom;var v=null,x=dt.toCoordinateArray(e);return v=x.length===1?this.geomFact.createPoint(x[0]):this.geomFact.createMultiPointFromCoords(x),gn.combine(v,this.otherGeom)},interfaces_:function(){return[]},getClass:function(){return to}}),to.union=function(t,e){var n=new to(t,e);return n.union()},f(vr.prototype,{filter:function(t){this.sortIndex!==-1&&t.getSortIndex()!==this.sortIndex||this.comps.add(t)},interfaces_:function(){return[_n]},getClass:function(){return vr}}),vr.extract=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return vr.extract(t,e,new F)}if(arguments.length===3){var n=arguments[0],s=arguments[1],a=arguments[2];return n.getSortIndex()===s?a.add(n):n instanceof Nt&&n.apply(new vr(s,a)),a}},f(Cn.prototype,{reduceToGeometries:function(t){for(var e=new F,n=t.iterator();n.hasNext();){var s=n.next(),a=null;nt(s,R)?a=this.unionTree(s):s instanceof Q&&(a=s),e.add(a)}return e},extractByEnvelope:function(t,e,n){for(var s=new F,a=0;a<e.getNumGeometries();a++){var g=e.getGeometryN(a);g.getEnvelopeInternal().intersects(t)?s.add(g):n.add(g)}return this.geomFactory.buildGeometry(s)},unionOptimized:function(t,e){var n=t.getEnvelopeInternal(),s=e.getEnvelopeInternal();if(!n.intersects(s)){var a=gn.combine(t,e);return a}if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var g=n.intersection(s);return this.unionUsingEnvelopeIntersection(t,e,g)},union:function(){if(this.inputPolys===null)throw new IllegalStateException("union() method cannot be called twice");if(this.inputPolys.isEmpty())return null;this.geomFactory=this.inputPolys.iterator().next().getFactory();for(var t=new Zt(Cn.STRTREE_NODE_CAPACITY),e=this.inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this.inputPolys=null;var s=t.itemsTree(),a=this.unionTree(s);return a},binaryUnion:function(){if(arguments.length===1){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(arguments.length===3){var e=arguments[0],n=arguments[1],s=arguments[2];if(1>=s-n){var g=Cn.getGeometry(e,n);return this.unionSafe(g,null)}if(s-n===2)return this.unionSafe(Cn.getGeometry(e,n),Cn.getGeometry(e,n+1));var a=Math.trunc((s+n)/2),g=this.binaryUnion(e,n,a),v=this.binaryUnion(e,a,s);return this.unionSafe(g,v)}},repeatedUnion:function(t){for(var e=null,n=t.iterator();n.hasNext();){var s=n.next();e=e===null?s.copy():e.union(s)}return e},unionSafe:function(t,e){return t===null&&e===null?null:t===null?e.copy():e===null?t.copy():this.unionOptimized(t,e)},unionActual:function(t,e){return Cn.restrictToPolygons(t.union(e))},unionTree:function(t){var e=this.reduceToGeometries(t),n=this.binaryUnion(e);return n},unionUsingEnvelopeIntersection:function(t,e,n){var s=new F,a=this.extractByEnvelope(n,t,s),g=this.extractByEnvelope(n,e,s),v=this.unionActual(a,g);s.add(v);var x=gn.combine(s);return x},bufferUnion:function(){if(arguments.length===1){var t=arguments[0],e=t.get(0).getFactory(),n=e.buildGeometry(t),s=n.buffer(0);return s}if(arguments.length===2){var a=arguments[0],g=arguments[1],e=a.getFactory(),n=e.createGeometryCollection([a,g]),s=n.buffer(0);return s}},interfaces_:function(){return[]},getClass:function(){return Cn}}),Cn.restrictToPolygons=function(t){if(nt(t,Nn))return t;var e=N.getPolygons(t);return e.size()===1?e.get(0):t.getFactory().createMultiPolygon(St.toPolygonArray(e))},Cn.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Cn.union=function(t){var e=new Cn(t);return e.union()},Cn.STRTREE_NODE_CAPACITY=4,f(yr.prototype,{unionNoOpt:function(t){var e=this.geomFact.createPoint();return Xt.overlayOp(t,e,ct.UNION)},unionWithNull:function(t,e){return t===null&&e===null?null:e===null?t:t===null?e:t.union(e)},extract:function(){if(nt(arguments[0],it))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.extract(n)}else if(arguments[0]instanceof Q){var s=arguments[0];this.geomFact===null&&(this.geomFact=s.getFactory()),vr.extract(s,Q.SORTINDEX_POLYGON,this.polygons),vr.extract(s,Q.SORTINDEX_LINESTRING,this.lines),vr.extract(s,Q.SORTINDEX_POINT,this.points)}},union:function(){if(this.geomFact===null)return null;var e=null;if(this.points.size()>0){var n=this.geomFact.buildGeometry(this.points);e=this.unionNoOpt(n)}var s=null;if(this.lines.size()>0){var a=this.geomFact.buildGeometry(this.lines);s=this.unionNoOpt(a)}var g=null;this.polygons.size()>0&&(g=Cn.union(this.polygons));var v=this.unionWithNull(s,g),x=null;return x=e===null?v:v===null?e:to.union(e,v),x===null?this.geomFact.createGeometryCollection():x},interfaces_:function(){return[]},getClass:function(){return yr}}),yr.union=function(){if(arguments.length===1){if(nt(arguments[0],it)){var t=arguments[0],e=new yr(t);return e.union()}if(arguments[0]instanceof Q){var n=arguments[0],e=new yr(n);return e.union()}}else if(arguments.length===2){var s=arguments[0],a=arguments[1],e=new yr(s,a);return e.union()}};var Bh=Object.freeze({UnaryUnionOp:yr});f(eo.prototype,{visitInteriorRing:function(t,e){var n=t.getCoordinates(),s=n[0],a=eo.findDifferentPoint(n,s),g=e.findEdgeInSameDirection(s,a),v=e.findEdgeEnd(g),x=null;v.getLabel().getLocation(0,$.RIGHT)===C.INTERIOR?x=v:v.getSym().getLabel().getLocation(0,$.RIGHT)===C.INTERIOR&&(x=v.getSym()),k.isTrue(x!==null,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(x)},visitShellInteriors:function(t,e){if(t instanceof Ft){var n=t;this.visitInteriorRing(n.getExteriorRing(),e)}if(t instanceof Le)for(var s=t,a=0;a<s.getNumGeometries();a++){var n=s.getGeometryN(a);this.visitInteriorRing(n.getExteriorRing(),e)}},getCoordinate:function(){return this.disconnectedRingcoord},setInteriorEdgesInResult:function(t){for(var e=t.getEdgeEnds().iterator();e.hasNext();){var n=e.next();n.getLabel().getLocation(0,$.RIGHT)===C.INTERIOR&&n.setInResult(!0)}},visitLinkedDirectedEdges:function(t){var e=t,n=t;do k.isTrue(n!==null,"found null Directed Edge"),n.setVisited(!0),n=n.getNext();while(n!==e)},buildEdgeRings:function(t){for(var e=new F,n=t.iterator();n.hasNext();){var s=n.next();if(s.isInResult()&&s.getEdgeRing()===null){var a=new Ki(s,this.geometryFactory);a.linkDirectedEdgesForMinimalEdgeRings();var g=a.buildMinimalRings();e.addAll(g)}}return e},hasUnvisitedShellEdge:function(t){for(var e=0;e<t.size();e++){var n=t.get(e);if(!n.isHole()){var s=n.getEdges(),a=s.get(0);if(a.getLabel().getLocation(0,$.RIGHT)===C.INTERIOR){for(var g=0;g<s.size();g++)if(a=s.get(g),!a.isVisited())return this.disconnectedRingcoord=a.getCoordinate(),!0}}}return!1},isInteriorsConnected:function(){var t=new F;this.geomGraph.computeSplitEdges(t);var e=new cn(new Mi);e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();var n=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(n)},interfaces_:function(){return[]},getClass:function(){return eo}}),eo.findDifferentPoint=function(t,e){for(var n=0;n<t.length;n++)if(!t[n].equals(e))return t[n];return null},f(Qn.prototype,{hasChildren:function(){for(var t=0;2>t;t++)if(this.subnode[t]!==null)return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;2>e;e++)this.subnode[e]!==null&&this.subnode[e].addAllItems(t);return t},size:function(){for(var t=0,e=0;2>e;e++)this.subnode[e]!==null&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){return t===null||this.isSearchMatch(t)?(e.addAll(this.items),this.subnode[0]!==null&&this.subnode[0].addAllItemsFromOverlapping(t,e),void(this.subnode[1]!==null&&this.subnode[1].addAllItemsFromOverlapping(t,e))):null},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,s=0;2>s;s++)if(this.subnode[s]!==null&&(n=this.subnode[s].remove(t,e))){this.subnode[s].isPrunable()&&(this.subnode[s]=null);break}return n||(n=this.items.remove(e))},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;2>e;e++)if(this.subnode[e]!==null){var n=this.subnode[e].depth();n>t&&(t=n)}return t+1},nodeSize:function(){for(var t=0,e=0;2>e;e++)this.subnode[e]!==null&&(t+=this.subnode[e].nodeSize());return t+1},add:function(t){this.items.add(t)},interfaces_:function(){return[]},getClass:function(){return Qn}}),Qn.getSubnodeIndex=function(t,e){var n=-1;return t.min>=e&&(n=1),t.max<=e&&(n=0),n},f(_i.prototype,{expandToInclude:function(t){t.max>this.max&&(this.max=t.max),t.min<this.min&&(this.min=t.min)},getWidth:function(){return this.max-this.min},overlaps:function(){if(arguments.length===1){var t=arguments[0];return this.overlaps(t.min,t.max)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return!(this.min>n||this.max<e)}},getMin:function(){return this.min},toString:function(){return"["+this.min+", "+this.max+"]"},contains:function(){if(arguments.length===1){if(arguments[0]instanceof _i){var t=arguments[0];return this.contains(t.min,t.max)}if(typeof arguments[0]=="number"){var e=arguments[0];return e>=this.min&&e<=this.max}}else if(arguments.length===2){var n=arguments[0],s=arguments[1];return n>=this.min&&s<=this.max}},init:function(t,e){this.min=t,this.max=e,t>e&&(this.min=e,this.max=t)},getMax:function(){return this.max},interfaces_:function(){return[]},getClass:function(){return _i}}),f(no.prototype,{getInterval:function(){return this.interval},getLevel:function(){return this.level},computeKey:function(t){for(this.level=no.computeLevel(t),this.interval=new _i,this.computeInterval(this.level,t);!this.interval.contains(t);)this.level+=1,this.computeInterval(this.level,t)},computeInterval:function(t,e){var n=ze.powerOf2(t);this.pt=Math.floor(e.getMin()/n)*n,this.interval.init(this.pt,this.pt+n)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return no}}),no.computeLevel=function(t){var e=t.getWidth(),n=ze.exponent(e)+1;return n},T(Gi,Qn),f(Gi.prototype,{getInterval:function(){return this.interval},find:function(t){var e=Qn.getSubnodeIndex(t,this.centre);if(e===-1)return this;if(this.subnode[e]!==null){var n=this.subnode[e];return n.find(t)}return this},insert:function(t){k.isTrue(this.interval===null||this.interval.contains(t.interval));var e=Qn.getSubnodeIndex(t.interval,this.centre);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insert(t),this.subnode[e]=n}},isSearchMatch:function(t){return t.overlaps(this.interval)},getSubnode:function(t){return this.subnode[t]===null&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getNode:function(t){var e=Qn.getSubnodeIndex(t,this.centre);if(e!==-1){var n=this.getSubnode(e);return n.getNode(t)}return this},createSubnode:function(t){var e=0,n=0;switch(t){case 0:e=this.interval.getMin(),n=this.centre;break;case 1:e=this.centre,n=this.interval.getMax()}var s=new _i(e,n),a=new Gi(s,this.level-1);return a},interfaces_:function(){return[]},getClass:function(){return Gi}}),Gi.createNode=function(t){var e=new no(t),n=new Gi(e.getInterval(),e.getLevel());return n},Gi.createExpanded=function(t,e){var n=new _i(e);t!==null&&n.expandToInclude(t.interval);var s=Gi.createNode(n);return t!==null&&s.insert(t),s},T(Is,Qn),f(Is.prototype,{insert:function(t,e){var n=Qn.getSubnodeIndex(t,Is.origin);if(n===-1)return this.add(e),null;var s=this.subnode[n];if(s===null||!s.getInterval().contains(t)){var a=Gi.createExpanded(s,t);this.subnode[n]=a}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){k.isTrue(t.getInterval().contains(e));var s=gi.isZeroWidth(e.getMin(),e.getMax()),a=null;a=s?t.find(e):t.getNode(e),a.add(n)},interfaces_:function(){return[]},getClass:function(){return Is}}),Is.origin=0,f(Cs.prototype,{size:function(){return this.root!==null?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=Cs.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];return this.query(new _i(t,t))}if(arguments[0]instanceof _i){var e=arguments[0],n=new F;return this.query(e,n),n}}else if(arguments.length===2){var s=arguments[0],a=arguments[1];this.root.addAllItemsFromOverlapping(s,a)}},iterator:function(){var t=new F;return this.root.addAllItems(t),t.iterator()},remove:function(t,e){var n=Cs.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e)},depth:function(){return this.root!==null?this.root.depth():0},nodeSize:function(){return this.root!==null?this.root.nodeSize():0},interfaces_:function(){return[]},getClass:function(){return Cs}}),Cs.ensureExtent=function(t,e){var n=t.getMin(),s=t.getMax();return n!==s?t:(n===s&&(n-=e/2,s=n+e/2),new _i(n,s))},f(Va.prototype,{isInside:function(t){},interfaces_:function(){return[]},getClass:function(){return Va}}),f(zo.prototype,{testLineSegment:function(t,e){var n=null,s=null,a=null,g=null,v=null,x=e.p0,S=e.p1;s=x.x-t.x,a=x.y-t.y,g=S.x-t.x,v=S.y-t.y,(a>0&&0>=v||v>0&&0>=a)&&(n=sn.signOfDet2x2(s,a,g,v)/(v-a),n>0&&this.crossings++)},buildIndex:function(){this.tree=new Cs;for(var t=dt.removeRepeatedPoints(this.ring.getCoordinates()),e=hn.getChains(t),n=0;n<e.size();n++){var s=e.get(n),a=s.getEnvelope();this.interval.min=a.getMinY(),this.interval.max=a.getMaxY(),this.tree.insert(this.interval,s)}},testMonotoneChain:function(t,e,n){n.select(t,e)},isInside:function(t){this.crossings=0;var e=new G(m.NEGATIVE_INFINITY,m.POSITIVE_INFINITY,t.y,t.y);this.interval.min=t.y,this.interval.max=t.y;for(var n=this.tree.query(this.interval),s=new io(this,t),a=n.iterator();a.hasNext();){var g=a.next();this.testMonotoneChain(e,s,g)}return this.crossings%2===1},interfaces_:function(){return[Va]},getClass:function(){return zo}}),T(io,yi),f(io.prototype,{select:function(){if(arguments.length!==1)return yi.prototype.select.apply(this,arguments);var t=arguments[0];this.mcp.testLineSegment(this.p,t)},interfaces_:function(){return[]},getClass:function(){return io}}),zo.MCSelecter=io,f(Za.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},getNodeIterator:function(){return this.nodes.iterator()},copyNodesAndLabels:function(t,e){for(var n=t.getNodeIterator();n.hasNext();){var s=n.next(),a=this.nodes.addNode(s.getCoordinate());a.setLabel(e,s.getLabel().getLocation(e))}},build:function(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);var e=new gr,n=e.computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(n)},computeIntersectionNodes:function(t,e){for(var n=t.getEdgeIterator();n.hasNext();)for(var s=n.next(),a=s.getLabel().getLocation(e),g=s.getEdgeIntersectionList().iterator();g.hasNext();){var v=g.next(),x=this.nodes.addNode(v.coord);a===C.BOUNDARY?x.setLabelBoundary(e):x.getLabel().isNull(e)&&x.setLabel(e,C.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return Za}}),f(Ha.prototype,{isNodeEdgeAreaLabelsConsistent:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();){var e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=e.getCoordinate().copy(),!1}return!0},getInvalidPoint:function(){return this.invalidPoint},hasDuplicateRings:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();)for(var e=t.next(),n=e.getEdges().iterator();n.hasNext();){var s=n.next();if(s.getEdgeEnds().size()>1)return this.invalidPoint=s.getEdge().getCoordinate(0),!0}return!1},isNodeConsistentArea:function(){var t=this.geomGraph.computeSelfNodes(this.li,!0,!0);return t.hasProperIntersection()?(this.invalidPoint=t.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())},interfaces_:function(){return[]},getClass:function(){return Ha}}),f(Wa.prototype,{buildIndex:function(){this.index=new Zt;for(var t=0;t<this.rings.size();t++){var e=this.rings.get(t),n=e.getEnvelopeInternal();this.index.insert(n,e)}},getNestedPoint:function(){return this.nestedPt},isNonNested:function(){this.buildIndex();for(var t=0;t<this.rings.size();t++)for(var e=this.rings.get(t),n=e.getCoordinates(),s=this.index.query(e.getEnvelopeInternal()),a=0;a<s.size();a++){var g=s.get(a),v=g.getCoordinates();if(e!==g&&e.getEnvelopeInternal().intersects(g.getEnvelopeInternal())){var x=Sn.findPtNotNode(n,g,this.graph);if(x!==null){var S=et.isPointInRing(x,v);if(S)return this.nestedPt=x,!1}}}return!0},add:function(t){this.rings.add(t),this.totalEnv.expandToInclude(t.getEnvelopeInternal())},interfaces_:function(){return[]},getClass:function(){return Wa}}),f(Ot.prototype,{getErrorType:function(){return this.errorType},getMessage:function(){return Ot.errMsg[this.errorType]},getCoordinate:function(){return this.pt},toString:function(){var t="";return this.pt!==null&&(t=" at or near point "+this.pt),this.getMessage()+t},interfaces_:function(){return[]},getClass:function(){return Ot}}),Ot.ERROR=0,Ot.REPEATED_POINT=1,Ot.HOLE_OUTSIDE_SHELL=2,Ot.NESTED_HOLES=3,Ot.DISCONNECTED_INTERIOR=4,Ot.SELF_INTERSECTION=5,Ot.RING_SELF_INTERSECTION=6,Ot.NESTED_SHELLS=7,Ot.DUPLICATE_RINGS=8,Ot.TOO_FEW_POINTS=9,Ot.INVALID_COORDINATE=10,Ot.RING_NOT_CLOSED=11,Ot.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],f(Sn.prototype,{checkInvalidCoordinates:function(){if(arguments[0]instanceof Array){for(var t=arguments[0],e=0;e<t.length;e++)if(!Sn.isValid(t[e]))return this.validErr=new Ot(Ot.INVALID_COORDINATE,t[e]),null}else if(arguments[0]instanceof Ft){var n=arguments[0];if(this.checkInvalidCoordinates(n.getExteriorRing().getCoordinates()),this.validErr!==null)return null;for(var e=0;e<n.getNumInteriorRing();e++)if(this.checkInvalidCoordinates(n.getInteriorRingN(e).getCoordinates()),this.validErr!==null)return null}},checkHolesNotNested:function(t,e){for(var n=new Wa(e),s=0;s<t.getNumInteriorRing();s++){var a=t.getInteriorRingN(s);n.add(a)}var g=n.isNonNested();g||(this.validErr=new Ot(Ot.NESTED_HOLES,n.getNestedPoint()))},checkConsistentArea:function(t){var e=new Ha(t),n=e.isNodeConsistentArea();return n?void(e.hasDuplicateRings()&&(this.validErr=new Ot(Ot.DUPLICATE_RINGS,e.getInvalidPoint()))):(this.validErr=new Ot(Ot.SELF_INTERSECTION,e.getInvalidPoint()),null)},isValid:function(){return this.checkValid(this.parentGeometry),this.validErr===null},checkShellInsideHole:function(t,e,n){var s=t.getCoordinates(),a=e.getCoordinates(),g=Sn.findPtNotNode(s,e,n);if(g!==null){var v=et.isPointInRing(g,a);if(!v)return g}var x=Sn.findPtNotNode(a,t,n);if(x!==null){var S=et.isPointInRing(x,s);return S?x:null}return k.shouldNeverReachHere("points in shell and hole appear to be equal"),null},checkNoSelfIntersectingRings:function(t){for(var e=t.getEdgeIterator();e.hasNext();){var n=e.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),this.validErr!==null)return null}},checkConnectedInteriors:function(t){var e=new eo(t);e.isInteriorsConnected()||(this.validErr=new Ot(Ot.DISCONNECTED_INTERIOR,e.getCoordinate()))},checkNoSelfIntersectingRing:function(t){for(var e=new Ie,n=!0,s=t.iterator();s.hasNext();){var a=s.next();if(n)n=!1;else{if(e.contains(a.coord))return this.validErr=new Ot(Ot.RING_SELF_INTERSECTION,a.coord),null;e.add(a.coord)}}},checkHolesInShell:function(t,e){for(var n=t.getExteriorRing(),s=new zo(n),a=0;a<t.getNumInteriorRing();a++){var g=t.getInteriorRingN(a),v=Sn.findPtNotNode(g.getCoordinates(),n,e);if(v===null)return null;var x=!s.isInside(v);if(x)return this.validErr=new Ot(Ot.HOLE_OUTSIDE_SHELL,v),null}},checkTooFewPoints:function(t){return t.hasTooFewPoints()?(this.validErr=new Ot(Ot.TOO_FEW_POINTS,t.getInvalidPoint()),null):void 0},getValidationError:function(){return this.checkValid(this.parentGeometry),this.validErr},checkValid:function(){if(arguments[0]instanceof Qt){var t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof Te){var e=arguments[0];this.checkInvalidCoordinates(e.getCoordinates())}else if(arguments[0]instanceof ie){var n=arguments[0];if(this.checkInvalidCoordinates(n.getCoordinates()),this.validErr!==null||(this.checkClosedRing(n),this.validErr!==null))return null;var s=new Re(0,n);if(this.checkTooFewPoints(s),this.validErr!==null)return null;var a=new ue;s.computeSelfNodes(a,!0,!0),this.checkNoSelfIntersectingRings(s)}else if(arguments[0]instanceof It){var g=arguments[0];if(this.checkInvalidCoordinates(g.getCoordinates()),this.validErr!==null)return null;var s=new Re(0,g);this.checkTooFewPoints(s)}else if(arguments[0]instanceof Ft){var v=arguments[0];if(this.checkInvalidCoordinates(v),this.validErr!==null||(this.checkClosedRings(v),this.validErr!==null))return null;var s=new Re(0,v);if(this.checkTooFewPoints(s),this.validErr!==null||(this.checkConsistentArea(s),this.validErr!==null)||!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(s),this.validErr!==null)||(this.checkHolesInShell(v,s),this.validErr!==null)||(this.checkHolesNotNested(v,s),this.validErr!==null))return null;this.checkConnectedInteriors(s)}else if(arguments[0]instanceof Le){for(var x=arguments[0],S=0;S<x.getNumGeometries();S++){var O=x.getGeometryN(S);if(this.checkInvalidCoordinates(O),this.validErr!==null||(this.checkClosedRings(O),this.validErr!==null))return null}var s=new Re(0,x);if(this.checkTooFewPoints(s),this.validErr!==null||(this.checkConsistentArea(s),this.validErr!==null)||!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(s),this.validErr!==null))return null;for(var S=0;S<x.getNumGeometries();S++){var O=x.getGeometryN(S);if(this.checkHolesInShell(O,s),this.validErr!==null)return null}for(var S=0;S<x.getNumGeometries();S++){var O=x.getGeometryN(S);if(this.checkHolesNotNested(O,s),this.validErr!==null)return null}if(this.checkShellsNotNested(x,s),this.validErr!==null)return null;this.checkConnectedInteriors(s)}else if(arguments[0]instanceof Nt)for(var B=arguments[0],S=0;S<B.getNumGeometries();S++){var H=B.getGeometryN(S);if(this.checkValid(H),this.validErr!==null)return null}else if(arguments[0]instanceof Q){var J=arguments[0];if(this.validErr=null,J.isEmpty())return null;if(J instanceof Qt)this.checkValid(J);else if(J instanceof Te)this.checkValid(J);else if(J instanceof ie)this.checkValid(J);else if(J instanceof It)this.checkValid(J);else if(J instanceof Ft)this.checkValid(J);else if(J instanceof Le)this.checkValid(J);else{if(!(J instanceof Nt))throw new UnsupportedOperationException(J.getClass().getName());this.checkValid(J)}}},setSelfTouchingRingFormingHoleValid:function(t){this.isSelfTouchingRingFormingHoleValid=t},checkShellNotNested:function(t,e,n){var s=t.getCoordinates(),a=e.getExteriorRing(),g=a.getCoordinates(),v=Sn.findPtNotNode(s,a,n);if(v===null)return null;var x=et.isPointInRing(v,g);if(!x)return null;if(e.getNumInteriorRing()<=0)return this.validErr=new Ot(Ot.NESTED_SHELLS,v),null;for(var S=null,O=0;O<e.getNumInteriorRing();O++){var B=e.getInteriorRingN(O);if(S=this.checkShellInsideHole(t,B,n),S===null)return null}this.validErr=new Ot(Ot.NESTED_SHELLS,S)},checkClosedRings:function(t){if(this.checkClosedRing(t.getExteriorRing()),this.validErr!==null)return null;for(var e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),this.validErr!==null)return null},checkClosedRing:function(t){if(!t.isClosed()){var e=null;t.getNumPoints()>=1&&(e=t.getCoordinateN(0)),this.validErr=new Ot(Ot.RING_NOT_CLOSED,e)}},checkShellsNotNested:function(t,e){for(var n=0;n<t.getNumGeometries();n++)for(var s=t.getGeometryN(n),a=s.getExteriorRing(),g=0;g<t.getNumGeometries();g++)if(n!==g){var v=t.getGeometryN(g);if(this.checkShellNotNested(a,v,e),this.validErr!==null)return null}},interfaces_:function(){return[]},getClass:function(){return Sn}}),Sn.findPtNotNode=function(t,e,n){for(var s=n.findEdge(e),a=s.getEdgeIntersectionList(),g=0;g<t.length;g++){var v=t[g];if(!a.isIntersection(v))return v}return null},Sn.isValid=function(){if(arguments[0]instanceof Q){var t=arguments[0],e=new Sn(t);return e.isValid()}if(arguments[0]instanceof P){var n=arguments[0];return m.isNaN(n.x)||m.isInfinite(n.x)||m.isNaN(n.y)?!1:!m.isInfinite(n.y)}};var qh=Object.freeze({IsValidOp:Sn}),Uh=Object.freeze({BoundaryOp:xn,IsSimpleOp:sr,buffer:Ah,distance:Dh,linemerge:kh,overlay:Fh,polygonize:zh,relate:Gh,union:Bh,valid:qh});T(Go,ce.CoordinateOperation),f(Go.prototype,{editCoordinates:function(t,e){if(t.length===0)return null;for(var n=new Array(t.length).fill(null),s=0;s<t.length;s++){var a=new P(t[s]);this.targetPM.makePrecise(a),n[s]=a}var g=new V(n,!1),v=g.toCoordinateArray(),x=0;e instanceof It&&(x=2),e instanceof ie&&(x=4);var S=n;return this.removeCollapsed&&(S=null),v.length<x?S:v},interfaces_:function(){return[]},getClass:function(){return Go}}),f(Vr.prototype,{fixPolygonalTopology:function(t){var e=t;this.changePrecisionModel||(e=this.changePM(t,this.targetPM));var n=e.buffer(0),s=n;return this.changePrecisionModel||(s=t.getFactory().createGeometry(n)),s},reducePointwise:function(t){var e=null;if(this.changePrecisionModel){var n=this.createFactory(t.getFactory(),this.targetPM);e=new ce(n)}else e=new ce;var s=this.removeCollapsed;t.getDimension()>=2&&(s=!0);var a=e.edit(t,new Go(this.targetPM,s));return a},changePM:function(t,e){var n=this.createEditor(t.getFactory(),e);return n.edit(t,new ce.NoOpGeometryOperation)},setRemoveCollapsedComponents:function(t){this.removeCollapsed=t},createFactory:function(t,e){var n=new St(e,t.getSRID(),t.getCoordinateSequenceFactory());return n},setChangePrecisionModel:function(t){this.changePrecisionModel=t},reduce:function(t){var e=this.reducePointwise(t);return this.isPointwise?e:nt(e,Nn)?e.isValid()?e:this.fixPolygonalTopology(e):e},setPointwise:function(t){this.isPointwise=t},createEditor:function(t,e){if(t.getPrecisionModel()===e)return new ce;var n=this.createFactory(t,e),s=new ce(n);return s},interfaces_:function(){return[]},getClass:function(){return Vr}}),Vr.reduce=function(t,e){var n=new Vr(e);return n.reduce(t)},Vr.reducePointwise=function(t,e){var n=new Vr(e);return n.setPointwise(!0),n.reduce(t)};var Vh=Object.freeze({GeometryPrecisionReducer:Vr});f(ro.prototype,{simplifySection:function(t,e){if(t+1===e)return null;this.seg.p0=this.pts[t],this.seg.p1=this.pts[e];for(var n=-1,s=t,a=t+1;e>a;a++){var g=this.seg.distance(this.pts[a]);g>n&&(n=g,s=a)}if(n<=this.distanceTolerance)for(var a=t+1;e>a;a++)this.usePt[a]=!1;else this.simplifySection(t,s),this.simplifySection(s,e)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(){this.usePt=new Array(this.pts.length).fill(null);for(var t=0;t<this.pts.length;t++)this.usePt[t]=!0;this.simplifySection(0,this.pts.length-1);for(var e=new V,t=0;t<this.pts.length;t++)this.usePt[t]&&e.add(new P(this.pts[t]));return e.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return ro}}),ro.simplify=function(t,e){var n=new ro(t);return n.setDistanceTolerance(e),n.simplify()},f(Ss.prototype,{setEnsureValid:function(t){this.isEnsureValidTopology=t},getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():new so(this.isEnsureValidTopology,this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(0>t)throw new d;this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return Ss}}),Ss.simplify=function(t,e){var n=new Ss(t);return n.setDistanceTolerance(e),n.getResultGeometry()},T(so,Dt),f(so.prototype,{transformPolygon:function(t,e){if(t.isEmpty())return null;var n=Dt.prototype.transformPolygon.call(this,t,e);return e instanceof Le?n:this.createValidArea(n)},createValidArea:function(t){return this.isEnsureValidTopology?t.buffer(0):t},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),s=null;return s=n.length===0?new Array(0).fill(null):ro.simplify(n,this.distanceTolerance),this.factory.getCoordinateSequenceFactory().create(s)},transformMultiPolygon:function(t,e){var n=Dt.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformLinearRing:function(t,e){var n=e instanceof Ft,s=Dt.prototype.transformLinearRing.call(this,t,e);return!n||s instanceof ie?s:null},interfaces_:function(){return[]},getClass:function(){return so}}),Ss.DPTransformer=so,T(oo,st),f(oo.prototype,{getIndex:function(){return this.index},getParent:function(){return this.parent},interfaces_:function(){return[]},getClass:function(){return oo}}),f(Bi.prototype,{addToResult:function(t){this.resultSegs.add(t)},asLineString:function(){return this.parentLine.getFactory().createLineString(Bi.extractCoordinates(this.resultSegs))},getResultSize:function(){var t=this.resultSegs.size();return t===0?0:t+1},getParent:function(){return this.parentLine},getSegment:function(t){return this.segs[t]},getParentCoordinates:function(){return this.parentLine.getCoordinates()},getMinimumSize:function(){return this.minimumSize},asLinearRing:function(){return this.parentLine.getFactory().createLinearRing(Bi.extractCoordinates(this.resultSegs))},getSegments:function(){return this.segs},init:function(){var t=this.parentLine.getCoordinates();this.segs=new Array(t.length-1).fill(null);for(var e=0;e<t.length-1;e++){var n=new oo(t[e],t[e+1],this.parentLine,e);this.segs[e]=n}},getResultCoordinates:function(){return Bi.extractCoordinates(this.resultSegs)},interfaces_:function(){return[]},getClass:function(){return Bi}}),Bi.extractCoordinates=function(t){for(var e=new Array(t.size()+1).fill(null),n=null,s=0;s<t.size();s++)n=t.get(s),e[s]=n.p0;return e[e.length-1]=n.p1,e},f(bs.prototype,{remove:function(t){this.index.remove(new G(t.p0,t.p1),t)},add:function(){if(arguments[0]instanceof Bi)for(var t=arguments[0],e=t.getSegments(),n=0;n<e.length;n++){var s=e[n];this.add(s)}else if(arguments[0]instanceof st){var a=arguments[0];this.index.insert(new G(a.p0,a.p1),a)}},query:function(t){var e=new G(t.p0,t.p1),n=new Xa(t);this.index.query(e,n);var s=n.getItems();return s},interfaces_:function(){return[]},getClass:function(){return bs}}),f(Xa.prototype,{visitItem:function(t){var e=t;G.intersects(e.p0,e.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[Pe]},getClass:function(){return Xa}}),f(ao.prototype,{flatten:function(t,e){var n=this.linePts[t],s=this.linePts[e],a=new st(n,s);return this.remove(this.line,t,e),this.outputIndex.add(a),a},hasBadIntersection:function(t,e,n){return this.hasBadOutputIntersection(n)?!0:!!this.hasBadInputIntersection(t,e,n)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplifySection:function(t,e,n){n+=1;var s=new Array(2).fill(null);if(t+1===e){var a=this.line.getSegment(t);return this.line.addToResult(a),null}var g=!0;if(this.line.getResultSize()<this.line.getMinimumSize()){var v=n+1;v<this.line.getMinimumSize()&&(g=!1)}var x=new Array(1).fill(null),S=this.findFurthestPoint(this.linePts,t,e,x);x[0]>this.distanceTolerance&&(g=!1);var O=new st;if(O.p0=this.linePts[t],O.p1=this.linePts[e],s[0]=t,s[1]=e,this.hasBadIntersection(this.line,s,O)&&(g=!1),g){var a=this.flatten(t,e);return this.line.addToResult(a),null}this.simplifySection(t,S,n),this.simplifySection(S,e,n)},hasBadOutputIntersection:function(t){for(var e=this.outputIndex.query(t),n=e.iterator();n.hasNext();){var s=n.next();if(this.hasInteriorIntersection(s,t))return!0}return!1},findFurthestPoint:function(t,e,n,s){var a=new st;a.p0=t[e],a.p1=t[n];for(var g=-1,v=e,x=e+1;n>x;x++){var S=t[x],O=a.distance(S);O>g&&(g=O,v=x)}return s[0]=g,v},simplify:function(t){this.line=t,this.linePts=t.getParentCoordinates(),this.simplifySection(0,this.linePts.length-1,0)},remove:function(t,e,n){for(var s=e;n>s;s++){var a=t.getSegment(s);this.inputIndex.remove(a)}},hasInteriorIntersection:function(t,e){return this.li.computeIntersection(t.p0,t.p1,e.p0,e.p1),this.li.isInteriorIntersection()},hasBadInputIntersection:function(t,e,n){for(var s=this.inputIndex.query(n),a=s.iterator();a.hasNext();){var g=a.next();if(this.hasInteriorIntersection(g,n)){if(ao.isInLineSection(t,e,g))continue;return!0}}return!1},interfaces_:function(){return[]},getClass:function(){return ao}}),ao.isInLineSection=function(t,e,n){if(n.getParent()!==t.getParent())return!1;var s=n.getIndex();return s>=e[0]&&s<e[1]},f(Ya.prototype,{setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(t){for(var e=t.iterator();e.hasNext();)this.inputIndex.add(e.next());for(var e=t.iterator();e.hasNext();){var n=new ao(this.inputIndex,this.outputIndex);n.setDistanceTolerance(this.distanceTolerance),n.simplify(e.next())}},interfaces_:function(){return[]},getClass:function(){return Ya}}),f(Zr.prototype,{getResultGeometry:function(){if(this.inputGeom.isEmpty())return this.inputGeom.copy();this.linestringMap=new nn,this.inputGeom.apply(new Bo(this)),this.lineSimplifier.simplify(this.linestringMap.values());var t=new uo(this.linestringMap).transform(this.inputGeom);return t},setDistanceTolerance:function(t){if(0>t)throw new d;this.lineSimplifier.setDistanceTolerance(t)},interfaces_:function(){return[]},getClass:function(){return Zr}}),Zr.simplify=function(t,e){var n=new Zr(t);return n.setDistanceTolerance(e),n.getResultGeometry()},T(uo,Dt),f(uo.prototype,{transformCoordinates:function(t,e){if(t.size()===0)return null;if(e instanceof It){var n=this.linestringMap.get(e);return this.createCoordinateSequence(n.getResultCoordinates())}return Dt.prototype.transformCoordinates.call(this,t,e)},interfaces_:function(){return[]},getClass:function(){return uo}}),f(Bo.prototype,{filter:function(t){if(t instanceof It){var e=t;if(e.isEmpty())return null;var n=e.isClosed()?4:2,s=new Bi(e,n);this.tps.linestringMap.put(e,s)}},interfaces_:function(){return[Bt]},getClass:function(){return Bo}}),Zr.LineStringTransformer=uo,Zr.LineStringMapBuilderFilter=Bo;var Zh=Object.freeze({DouglasPeuckerSimplifier:Ss,TopologyPreservingSimplifier:Zr});f(Ns.prototype,{splitAt:function(){if(arguments.length===1){var t=arguments[0],e=this.minimumLen/this.segLen;if(t.distance(this.seg.p0)<this.minimumLen)return this.splitPt=this.seg.pointAlong(e),null;if(t.distance(this.seg.p1)<this.minimumLen)return this.splitPt=Ns.pointAlongReverse(this.seg,e),null;this.splitPt=t}else if(arguments.length===2){var n=arguments[0],s=arguments[1],a=this.getConstrainedLength(n),g=a/this.segLen;s.equals2D(this.seg.p0)?this.splitPt=this.seg.pointAlong(g):this.splitPt=Ns.pointAlongReverse(this.seg,g)}},setMinimumLength:function(t){this.minimumLen=t},getConstrainedLength:function(t){return t<this.minimumLen?this.minimumLen:t},getSplitPoint:function(){return this.splitPt},interfaces_:function(){return[]},getClass:function(){return Ns}}),Ns.pointAlongReverse=function(t,e){var n=new P;return n.x=t.p1.x-e*(t.p1.x-t.p0.x),n.y=t.p1.y-e*(t.p1.y-t.p0.y),n},f(Ja.prototype,{findSplitPoint:function(t,e){},interfaces_:function(){return[]},getClass:function(){return Ja}}),f(lo.prototype,{findSplitPoint:function(t,e){var n=t.getLineSegment(),s=n.getLength(),a=s/2,g=new Ns(n),v=lo.projectedSplitPoint(t,e),x=2*v.distance(e)*.8,S=x;return S>a&&(S=a),g.setMinimumLength(S),g.splitAt(v),g.getSplitPoint()},interfaces_:function(){return[Ja]},getClass:function(){return lo}}),lo.projectedSplitPoint=function(t,e){var n=t.getLineSegment(),s=n.project(e);return s},f(te.prototype,{interfaces_:function(){return[]},getClass:function(){return te}}),te.triArea=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)},te.isInCircleDDNormalized=function(t,e,n,s){var a=z.valueOf(t.x).selfSubtract(s.x),g=z.valueOf(t.y).selfSubtract(s.y),v=z.valueOf(e.x).selfSubtract(s.x),x=z.valueOf(e.y).selfSubtract(s.y),S=z.valueOf(n.x).selfSubtract(s.x),O=z.valueOf(n.y).selfSubtract(s.y),B=a.multiply(x).selfSubtract(v.multiply(g)),H=v.multiply(O).selfSubtract(S.multiply(x)),J=S.multiply(g).selfSubtract(a.multiply(O)),ut=a.multiply(a).selfAdd(g.multiply(g)),pt=v.multiply(v).selfAdd(x.multiply(x)),Lt=S.multiply(S).selfAdd(O.multiply(O)),Yt=ut.selfMultiply(H).selfAdd(pt.selfMultiply(J)).selfAdd(Lt.selfMultiply(B)),me=Yt.doubleValue()>0;return me},te.checkRobustInCircle=function(t,e,n,s){var a=te.isInCircleNonRobust(t,e,n,s),g=te.isInCircleDDSlow(t,e,n,s),v=te.isInCircleCC(t,e,n,s),x=kt.circumcentre(t,e,n);mt.out.println("p radius diff a = "+Math.abs(s.distance(x)-t.distance(x))/t.distance(x)),a===g&&a===v||(mt.out.println("inCircle robustness failure (double result = "+a+", DD result = "+g+", CC result = "+v+")"),mt.out.println(wt.toLineString(new qe([t,e,n,s]))),mt.out.println("Circumcentre = "+wt.toPoint(x)+" radius = "+t.distance(x)),mt.out.println("p radius diff a = "+Math.abs(s.distance(x)/t.distance(x)-1)),mt.out.println("p radius diff b = "+Math.abs(s.distance(x)/e.distance(x)-1)),mt.out.println("p radius diff c = "+Math.abs(s.distance(x)/n.distance(x)-1)),mt.out.println())},te.isInCircleDDFast=function(t,e,n,s){var a=z.sqr(t.x).selfAdd(z.sqr(t.y)).selfMultiply(te.triAreaDDFast(e,n,s)),g=z.sqr(e.x).selfAdd(z.sqr(e.y)).selfMultiply(te.triAreaDDFast(t,n,s)),v=z.sqr(n.x).selfAdd(z.sqr(n.y)).selfMultiply(te.triAreaDDFast(t,e,s)),x=z.sqr(s.x).selfAdd(z.sqr(s.y)).selfMultiply(te.triAreaDDFast(t,e,n)),S=a.selfSubtract(g).selfAdd(v).selfSubtract(x),O=S.doubleValue()>0;return O},te.isInCircleCC=function(t,e,n,s){var a=kt.circumcentre(t,e,n),g=t.distance(a),v=s.distance(a)-g;return 0>=v},te.isInCircleNormalized=function(t,e,n,s){var a=t.x-s.x,g=t.y-s.y,v=e.x-s.x,x=e.y-s.y,S=n.x-s.x,O=n.y-s.y,B=a*x-v*g,H=v*O-S*x,J=S*g-a*O,ut=a*a+g*g,pt=v*v+x*x,Lt=S*S+O*O,Yt=ut*H+pt*J+Lt*B;return Yt>0},te.isInCircleDDSlow=function(t,e,n,s){var a=z.valueOf(s.x),g=z.valueOf(s.y),v=z.valueOf(t.x),x=z.valueOf(t.y),S=z.valueOf(e.x),O=z.valueOf(e.y),B=z.valueOf(n.x),H=z.valueOf(n.y),J=v.multiply(v).add(x.multiply(x)).multiply(te.triAreaDDSlow(S,O,B,H,a,g)),ut=S.multiply(S).add(O.multiply(O)).multiply(te.triAreaDDSlow(v,x,B,H,a,g)),pt=B.multiply(B).add(H.multiply(H)).multiply(te.triAreaDDSlow(v,x,S,O,a,g)),Lt=a.multiply(a).add(g.multiply(g)).multiply(te.triAreaDDSlow(v,x,S,O,B,H)),Yt=J.subtract(ut).add(pt).subtract(Lt),me=Yt.doubleValue()>0;return me},te.isInCircleNonRobust=function(t,e,n,s){var a=(t.x*t.x+t.y*t.y)*te.triArea(e,n,s)-(e.x*e.x+e.y*e.y)*te.triArea(t,n,s)+(n.x*n.x+n.y*n.y)*te.triArea(t,e,s)-(s.x*s.x+s.y*s.y)*te.triArea(t,e,n)>0;return a},te.isInCircleRobust=function(t,e,n,s){return te.isInCircleNormalized(t,e,n,s)},te.triAreaDDSlow=function(t,e,n,s,a,g){return n.subtract(t).multiply(g.subtract(e)).subtract(s.subtract(e).multiply(a.subtract(t)))},te.triAreaDDFast=function(t,e,n){var s=z.valueOf(e.x).selfSubtract(t.x).selfMultiply(z.valueOf(n.y).selfSubtract(t.y)),a=z.valueOf(e.y).selfSubtract(t.y).selfMultiply(z.valueOf(n.x).selfSubtract(t.x));return s.selfSubtract(a)},f(Gt.prototype,{circleCenter:function(t,e){var n=new Gt(this.getX(),this.getY()),s=this.bisector(n,t),a=this.bisector(t,e),g=new jt(s,a),v=null;try{v=new Gt(g.getX(),g.getY())}catch(x){if(!(x instanceof X))throw x;mt.err.println("a: "+n+"  b: "+t+"  c: "+e),mt.err.println(x)}finally{}return v},dot:function(t){return this.p.x*t.getX()+this.p.y*t.getY()},magn:function(){return Math.sqrt(this.p.x*this.p.x+this.p.y*this.p.y)},getZ:function(){return this.p.z},bisector:function(t,e){var n=e.getX()-t.getX(),s=e.getY()-t.getY(),a=new jt(t.getX()+n/2,t.getY()+s/2,1),g=new jt(t.getX()-s+n/2,t.getY()+n+s/2,1);return new jt(a,g)},equals:function(){if(arguments.length===1){var t=arguments[0];return this.p.x===t.getX()&&this.p.y===t.getY()}if(arguments.length===2){var e=arguments[0],n=arguments[1];return this.p.distance(e.getCoordinate())<n}},getCoordinate:function(){return this.p},isInCircle:function(t,e,n){return te.isInCircleRobust(t.p,e.p,n.p,this.p)},interpolateZValue:function(t,e,n){var s=t.getX(),a=t.getY(),g=e.getX()-s,v=n.getX()-s,x=e.getY()-a,S=n.getY()-a,O=g*S-v*x,B=this.getX()-s,H=this.getY()-a,J=(S*B-v*H)/O,ut=(-x*B+g*H)/O,pt=t.getZ()+J*(e.getZ()-t.getZ())+ut*(n.getZ()-t.getZ());return pt},midPoint:function(t){var e=(this.p.x+t.getX())/2,n=(this.p.y+t.getY())/2,s=(this.p.z+t.getZ())/2;return new Gt(e,n,s)},rightOf:function(t){return this.isCCW(t.dest(),t.orig())},isCCW:function(t,e){return(t.p.x-this.p.x)*(e.p.y-this.p.y)-(t.p.y-this.p.y)*(e.p.x-this.p.x)>0},getX:function(){return this.p.x},crossProduct:function(t){return this.p.x*t.getY()-this.p.y*t.getX()},setZ:function(t){this.p.z=t},times:function(t){return new Gt(t*this.p.x,t*this.p.y)},cross:function(){return new Gt(this.p.y,-this.p.x)},leftOf:function(t){return this.isCCW(t.orig(),t.dest())},toString:function(){return"POINT ("+this.p.x+" "+this.p.y+")"},sub:function(t){return new Gt(this.p.x-t.getX(),this.p.y-t.getY())},getY:function(){return this.p.y},classify:function(t,e){var n=this,s=e.sub(t),a=n.sub(t),g=s.crossProduct(a);return g>0?Gt.LEFT:0>g?Gt.RIGHT:s.getX()*a.getX()<0||s.getY()*a.getY()<0?Gt.BEHIND:s.magn()<a.magn()?Gt.BEYOND:t.equals(n)?Gt.ORIGIN:e.equals(n)?Gt.DESTINATION:Gt.BETWEEN},sum:function(t){return new Gt(this.p.x+t.getX(),this.p.y+t.getY())},distance:function(t,e){return Math.sqrt(Math.pow(e.getX()-t.getX(),2)+Math.pow(e.getY()-t.getY(),2))},circumRadiusRatio:function(t,e){var n=this.circleCenter(t,e),s=this.distance(n,t),a=this.distance(this,t),g=this.distance(t,e);return a>g&&(a=g),g=this.distance(e,this),a>g&&(a=g),s/a},interfaces_:function(){return[]},getClass:function(){return Gt}}),Gt.interpolateZ=function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2],s=e.distance(n),a=t.distance(e),g=n.z-e.z,v=e.z+g*(a/s);return v}if(arguments.length===4){var x=arguments[0],S=arguments[1],O=arguments[2],B=arguments[3],H=S.x,J=S.y,ut=O.x-H,pt=B.x-H,Lt=O.y-J,Yt=B.y-J,me=ut*Yt-pt*Lt,Bn=x.x-H,Xr=x.y-J,jo=(Yt*Bn-pt*Xr)/me,Qo=(-Lt*Bn+ut*Xr)/me,$o=S.z+jo*(O.z-S.z)+Qo*(B.z-S.z);return $o}},Gt.LEFT=0,Gt.RIGHT=1,Gt.BEYOND=2,Gt.BEHIND=3,Gt.BETWEEN=4,Gt.ORIGIN=5,Gt.DESTINATION=6,T(_r,Gt),f(_r.prototype,{getConstraint:function(){return this.constraint},setOnConstraint:function(t){this._isOnConstraint=t},merge:function(t){t._isOnConstraint&&(this._isOnConstraint=!0,this.constraint=t.constraint)},isOnConstraint:function(){return this._isOnConstraint},setConstraint:function(t){this._isOnConstraint=!0,this.constraint=t},interfaces_:function(){return[]},getClass:function(){return _r}}),f(se.prototype,{equalsNonOriented:function(t){return this.equalsOriented(t)?!0:!!this.equalsOriented(t.sym())},toLineSegment:function(){return new st(this.vertex.getCoordinate(),this.dest().getCoordinate())},dest:function(){return this.sym().orig()},oNext:function(){return this.next},equalsOriented:function(t){return!(!this.orig().getCoordinate().equals2D(t.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(t.dest().getCoordinate()))},dNext:function(){return this.sym().oNext().sym()},lPrev:function(){return this.next.sym()},rPrev:function(){return this.sym().oNext()},rot:function(){return this._rot},oPrev:function(){return this._rot.next._rot},sym:function(){return this._rot._rot},setOrig:function(t){this.vertex=t},lNext:function(){return this.invRot().oNext().rot()},getLength:function(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())},invRot:function(){return this._rot.sym()},setDest:function(t){this.sym().setOrig(t)},setData:function(t){this.data=t},getData:function(){return this.data},delete:function(){this._rot=null},orig:function(){return this.vertex},rNext:function(){return this._rot.next.invRot()},toString:function(){var t=this.vertex.getCoordinate(),e=this.dest().getCoordinate();return wt.toLineString(t,e)},isLive:function(){return this._rot!==null},getPrimary:function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},dPrev:function(){return this.invRot().oNext().invRot()},setNext:function(t){this.next=t},interfaces_:function(){return[]},getClass:function(){return se}}),se.makeEdge=function(t,e){var n=new se,s=new se,a=new se,g=new se;n._rot=s,s._rot=a,a._rot=g,g._rot=n,n.setNext(n),s.setNext(g),a.setNext(a),g.setNext(s);var v=n;return v.setOrig(t),v.setDest(e),v},se.swap=function(t){var e=t.oPrev(),n=t.sym().oPrev();se.splice(t,e),se.splice(t.sym(),n),se.splice(t,e.lNext()),se.splice(t.sym(),n.lNext()),t.setOrig(e.dest()),t.setDest(n.dest())},se.splice=function(t,e){var n=t.oNext().rot(),s=e.oNext().rot(),a=e.oNext(),g=t.oNext(),v=s.oNext(),x=n.oNext();t.setNext(a),e.setNext(g),n.setNext(v),s.setNext(x)},se.connect=function(t,e){var n=se.makeEdge(t.dest(),e.orig());return se.splice(n,t.lNext()),se.splice(n.sym(),e),n},f(ho.prototype,{insertSite:function(t){var e=this.subdiv.locate(t);if(this.subdiv.isVertexOfEdge(e,t))return e;this.subdiv.isOnEdge(e,t.getCoordinate())&&(e=e.oPrev(),this.subdiv.delete(e.oNext()));var n=this.subdiv.makeEdge(e.orig(),t);se.splice(n,e);var s=n;do n=this.subdiv.connect(e,n.sym()),e=n.oPrev();while(e.lNext()!==s);for(;;){var a=e.oPrev();if(a.dest().rightOf(e)&&t.isInCircle(e.orig(),a.dest(),e.dest()))se.swap(e),e=e.oPrev();else{if(e.oNext()===s)return n;e=e.oNext().lPrev()}}},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},interfaces_:function(){return[]},getClass:function(){return ho}}),f(Ka.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return Ka}}),f(qo.prototype,{init:function(){this.lastEdge=this.findEdge()},locate:function(t){this.lastEdge.isLive()||this.init();var e=this.subdiv.locateFromEdge(t,this.lastEdge);return this.lastEdge=e,e},findEdge:function(){var t=this.subdiv.getEdges();return t.iterator().next()},interfaces_:function(){return[Ka]},getClass:function(){return qo}}),T(Ts,M),f(Ts.prototype,{getSegment:function(){return this.seg},interfaces_:function(){return[]},getClass:function(){return Ts}}),Ts.msgWithSpatial=function(t,e){return e!==null?t+" [ "+e+" ]":t},f(Ps.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return Ps}}),f(pn.prototype,{getTriangleVertices:function(t){var e=new Zo;return this.visitTriangles(e,t),e.getTriangleVertices()},isFrameVertex:function(t){return t.equals(this.frameVertex[0])||t.equals(this.frameVertex[1])?!0:!!t.equals(this.frameVertex[2])},isVertexOfEdge:function(t,e){return!(!e.equals(t.orig(),this.tolerance)&&!e.equals(t.dest(),this.tolerance))},connect:function(t,e){var n=se.connect(t,e);return this.quadEdges.add(n),n},getVoronoiCellPolygon:function(t,e){var n=new F,s=t;do{var a=t.rot().orig().getCoordinate();n.add(a),t=t.oPrev()}while(t!==s);var g=new V;g.addAll(n,!1),g.closeRing(),g.size()<4&&(mt.out.println(g),g.add(g.get(g.size()-1),!0));var v=g.toCoordinateArray(),x=e.createPolygon(e.createLinearRing(v),null),S=s.orig();return x.setUserData(S.getCoordinate()),x},setLocator:function(t){this.locator=t},initSubdiv:function(){var t=this.makeEdge(this.frameVertex[0],this.frameVertex[1]),e=this.makeEdge(this.frameVertex[1],this.frameVertex[2]);se.splice(t.sym(),e);var n=this.makeEdge(this.frameVertex[2],this.frameVertex[0]);return se.splice(e.sym(),n),se.splice(n.sym(),t),t},isFrameBorderEdge:function(t){var e=new Array(3).fill(null);pn.getTriangleEdges(t,e);var n=new Array(3).fill(null);pn.getTriangleEdges(t.sym(),n);var s=t.lNext().dest();if(this.isFrameVertex(s))return!0;var a=t.sym().lNext().dest();return!!this.isFrameVertex(a)},makeEdge:function(t,e){var n=se.makeEdge(t,e);return this.quadEdges.add(n),n},visitTriangles:function(t,e){this.visitedKey++;var n=new $t;n.push(this.startingEdge);for(var s=new he;!n.empty();){var a=n.pop();if(!s.contains(a)){var g=this.fetchTriangleToVisit(a,n,e,s);g!==null&&t.visit(g)}}},isFrameEdge:function(t){return!(!this.isFrameVertex(t.orig())&&!this.isFrameVertex(t.dest()))},isOnEdge:function(t,e){this.seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate());var n=this.seg.distance(e);return n<this.edgeCoincidenceTolerance},getEnvelope:function(){return new G(this.frameEnv)},createFrame:function(t){var e=t.getWidth(),n=t.getHeight(),s=0;s=e>n?10*e:10*n,this.frameVertex[0]=new Gt((t.getMaxX()+t.getMinX())/2,t.getMaxY()+s),this.frameVertex[1]=new Gt(t.getMinX()-s,t.getMinY()-s),this.frameVertex[2]=new Gt(t.getMaxX()+s,t.getMinY()-s),this.frameEnv=new G(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate()),this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())},getTriangleCoordinates:function(t){var e=new Ho;return this.visitTriangles(e,t),e.getTriangles()},getVertices:function(t){for(var e=new he,n=this.quadEdges.iterator();n.hasNext();){var s=n.next(),a=s.orig();!t&&this.isFrameVertex(a)||e.add(a);var g=s.dest();!t&&this.isFrameVertex(g)||e.add(g)}return e},fetchTriangleToVisit:function(t,e,n,s){var a=t,g=0,v=!1;do{this.triEdges[g]=a,this.isFrameEdge(a)&&(v=!0);var x=a.sym();s.contains(x)||e.push(x),s.add(a),g++,a=a.lNext()}while(a!==t);return v&&!n?null:this.triEdges},getEdges:function(){if(arguments.length===0)return this.quadEdges;if(arguments.length===1){for(var t=arguments[0],e=this.getPrimaryEdges(!1),n=new Array(e.size()).fill(null),s=0,a=e.iterator();a.hasNext();){var g=a.next();n[s++]=t.createLineString([g.orig().getCoordinate(),g.dest().getCoordinate()])}return t.createMultiLineString(n)}},getVertexUniqueEdges:function(t){for(var e=new F,n=new he,s=this.quadEdges.iterator();s.hasNext();){var a=s.next(),g=a.orig();n.contains(g)||(n.add(g),!t&&this.isFrameVertex(g)||e.add(a));var v=a.sym(),x=v.orig();n.contains(x)||(n.add(x),!t&&this.isFrameVertex(x)||e.add(v))}return e},getTriangleEdges:function(t){var e=new Vo;return this.visitTriangles(e,t),e.getTriangleEdges()},getPrimaryEdges:function(t){this.visitedKey++;var e=new F,n=new $t;n.push(this.startingEdge);for(var s=new he;!n.empty();){var a=n.pop();if(!s.contains(a)){var g=a.getPrimary();!t&&this.isFrameEdge(g)||e.add(g),n.push(a.oNext()),n.push(a.sym().oNext()),s.add(a),s.add(a.sym())}}return e},delete:function(t){se.splice(t,t.oPrev()),se.splice(t.sym(),t.sym().oPrev());var e=t.sym(),n=t.rot(),s=t.rot().sym();this.quadEdges.remove(t),this.quadEdges.remove(e),this.quadEdges.remove(n),this.quadEdges.remove(s),t.delete(),e.delete(),n.delete(),s.delete()},locateFromEdge:function(t,e){for(var n=0,s=this.quadEdges.size(),a=e;;){if(n++,n>s)throw new Ts(a.toLineSegment());if(t.equals(a.orig())||t.equals(a.dest()))break;if(t.rightOf(a))a=a.sym();else if(t.rightOf(a.oNext())){if(t.rightOf(a.dPrev()))break;a=a.dPrev()}else a=a.oNext()}return a},getTolerance:function(){return this.tolerance},getVoronoiCellPolygons:function(t){this.visitTriangles(new Uo,!0);for(var e=new F,n=this.getVertexUniqueEdges(!1),s=n.iterator();s.hasNext();){var a=s.next();e.add(this.getVoronoiCellPolygon(a,t))}return e},getVoronoiDiagram:function(t){var e=this.getVoronoiCellPolygons(t);return t.createGeometryCollection(St.toGeometryArray(e))},getTriangles:function(t){for(var e=this.getTriangleCoordinates(!1),n=new Array(e.size()).fill(null),s=0,a=e.iterator();a.hasNext();){var g=a.next();n[s++]=t.createPolygon(t.createLinearRing(g),null)}return t.createGeometryCollection(n)},insertSite:function(t){var e=this.locate(t);if(t.equals(e.orig(),this.tolerance)||t.equals(e.dest(),this.tolerance))return e;var n=this.makeEdge(e.orig(),t);se.splice(n,e);var s=n;do n=this.connect(e,n.sym()),e=n.oPrev();while(e.lNext()!==s);return s},locate:function(){if(arguments.length===1){if(arguments[0]instanceof Gt){var t=arguments[0];return this.locator.locate(t)}if(arguments[0]instanceof P){var e=arguments[0];return this.locator.locate(new Gt(e))}}else if(arguments.length===2){var n=arguments[0],s=arguments[1],a=this.locator.locate(new Gt(n));if(a===null)return null;var g=a;a.dest().getCoordinate().equals2D(n)&&(g=a.sym());var v=g;do{if(v.dest().getCoordinate().equals2D(s))return v;v=v.oNext()}while(v!==g);return null}},interfaces_:function(){return[]},getClass:function(){return pn}}),pn.getTriangleEdges=function(t,e){if(e[0]=t,e[1]=e[0].lNext(),e[2]=e[1].lNext(),e[2].lNext()!==e[0])throw new d},f(Uo.prototype,{visit:function(t){for(var e=t[0].orig().getCoordinate(),n=t[1].orig().getCoordinate(),s=t[2].orig().getCoordinate(),a=kt.circumcentre(e,n,s),g=new Gt(a),v=0;3>v;v++)t[v].rot().setOrig(g)},interfaces_:function(){return[Ps]},getClass:function(){return Uo}}),f(Vo.prototype,{getTriangleEdges:function(){return this.triList},visit:function(t){this.triList.add(t.clone())},interfaces_:function(){return[Ps]},getClass:function(){return Vo}}),f(Zo.prototype,{visit:function(t){this.triList.add([t[0].orig(),t[1].orig(),t[2].orig()])},getTriangleVertices:function(){return this.triList},interfaces_:function(){return[Ps]},getClass:function(){return Zo}}),f(Ho.prototype,{checkTriangleSize:function(t){t.length>=2?wt.toLineString(t[0],t[1]):t.length>=1&&wt.toPoint(t[0])},visit:function(t){this.coordList.clear();for(var e=0;3>e;e++){var n=t[e].orig();this.coordList.add(n.getCoordinate())}if(this.coordList.size()>0){this.coordList.closeRing();var s=this.coordList.toCoordinateArray();if(s.length!==4)return null;this.triCoords.add(s)}},getTriangles:function(){return this.triCoords},interfaces_:function(){return[Ps]},getClass:function(){return Ho}}),pn.TriangleCircumcentreVisitor=Uo,pn.TriangleEdgesListVisitor=Vo,pn.TriangleVertexListVisitor=Zo,pn.TriangleCoordinatesVisitor=Ho,pn.EDGE_COINCIDENCE_TOL_FACTOR=1e3,f(Hr.prototype,{getLineSegment:function(){return this.ls},getEndZ:function(){var t=this.ls.getCoordinate(1);return t.z},getStartZ:function(){var t=this.ls.getCoordinate(0);return t.z},intersection:function(t){return this.ls.intersection(t.getLineSegment())},getStart:function(){return this.ls.getCoordinate(0)},getEnd:function(){return this.ls.getCoordinate(1)},getEndY:function(){var t=this.ls.getCoordinate(1);return t.y},getStartX:function(){var t=this.ls.getCoordinate(0);return t.x},equalsTopo:function(t){return this.ls.equalsTopo(t.getLineSegment())},getStartY:function(){var t=this.ls.getCoordinate(0);return t.y},setData:function(t){this.data=t},getData:function(){return this.data},getEndX:function(){var t=this.ls.getCoordinate(1);return t.x},toString:function(){return this.ls.toString()},interfaces_:function(){return[]},getClass:function(){return Hr}}),f(co.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return co}}),f(Wo.prototype,{isRepeated:function(){return this.count>1},getRight:function(){return this.right},getCoordinate:function(){return this.p},setLeft:function(t){this.left=t},getX:function(){return this.p.x},getData:function(){return this.data},getCount:function(){return this.count},getLeft:function(){return this.left},getY:function(){return this.p.y},increment:function(){this.count=this.count+1},setRight:function(t){this.right=t},interfaces_:function(){return[]},getClass:function(){return Wo}}),f(Wr.prototype,{insert:function(){if(arguments.length===1){var t=arguments[0];return this.insert(t,null)}if(arguments.length===2){var e=arguments[0],n=arguments[1];if(this.root===null)return this.root=new Wo(e,n),this.root;if(this.tolerance>0){var s=this.findBestMatchNode(e);if(s!==null)return s.increment(),s}return this.insertExact(e,n)}},query:function(){var t=arguments,e=this;if(arguments.length===1){var n=arguments[0],s=new F;return this.query(n,s),s}if(arguments.length===2){if(arguments[0]instanceof G&&nt(arguments[1],R))(function(){var v=t[0],x=t[1];e.queryNode(e.root,v,!0,{interfaces_:function(){return[co]},visit:function(S){x.add(S)}})})();else if(arguments[0]instanceof G&&nt(arguments[1],co)){var a=arguments[0],g=arguments[1];this.queryNode(this.root,a,!0,g)}}},queryNode:function(t,e,n,s){if(t===null)return null;var a=null,g=null,v=null;n?(a=e.getMinX(),g=e.getMaxX(),v=t.getX()):(a=e.getMinY(),g=e.getMaxY(),v=t.getY());var x=v>a,S=g>=v;x&&this.queryNode(t.getLeft(),e,!n,s),e.contains(t.getCoordinate())&&s.visit(t),S&&this.queryNode(t.getRight(),e,!n,s)},findBestMatchNode:function(t){var e=new Xo(t,this.tolerance);return this.query(e.queryEnvelope(),e),e.getNode()},isEmpty:function(){return this.root===null},insertExact:function(t,e){for(var n=this.root,s=this.root,a=!0,g=!0;n!==null;){if(n!==null){var v=t.distance(n.getCoordinate())<=this.tolerance;if(v)return n.increment(),n}g=a?t.x<n.getX():t.y<n.getY(),s=n,n=g?n.getLeft():n.getRight(),a=!a}this.numberOfNodes=this.numberOfNodes+1;var x=new Wo(t,e);return g?s.setLeft(x):s.setRight(x),x},interfaces_:function(){return[]},getClass:function(){return Wr}}),Wr.toCoordinates=function(){if(arguments.length===1){var t=arguments[0];return Wr.toCoordinates(t,!1)}if(arguments.length===2){for(var e=arguments[0],n=arguments[1],s=new V,a=e.iterator();a.hasNext();)for(var g=a.next(),v=n?g.getCount():1,x=0;v>x;x++)s.add(g.getCoordinate(),!0);return s.toCoordinateArray()}},f(Xo.prototype,{visit:function(t){var e=this.p.distance(t.getCoordinate()),n=e<=this.tolerance;if(!n)return null;var s=!1;(this.matchNode===null||e<this.matchDist||this.matchNode!==null&&e===this.matchDist&&t.getCoordinate().compareTo(this.matchNode.getCoordinate())<1)&&(s=!0),s&&(this.matchNode=t,this.matchDist=e)},queryEnvelope:function(){var t=new G(this.p);return t.expandBy(this.tolerance),t},getNode:function(){return this.matchNode},interfaces_:function(){return[co]},getClass:function(){return Xo}}),Wr.BestMatchVisitor=Xo,f(xr.prototype,{getInitialVertices:function(){return this.initialVertices},getKDT:function(){return this.kdt},enforceConstraints:function(){this.addConstraintVertices();var t=0,e=0;do e=this.enforceGabriel(this.segments),t++;while(e>0&&t<xr.MAX_SPLIT_ITER)},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},getVertexFactory:function(){return this.vertexFactory},getPointArray:function(){for(var t=new Array(this.initialVertices.size()+this.segVertices.size()).fill(null),e=0,n=this.initialVertices.iterator();n.hasNext();){var s=n.next();t[e++]=s.getCoordinate()}for(var a=this.segVertices.iterator();a.hasNext();){var s=a.next();t[e++]=s.getCoordinate()}return t},setConstraints:function(t,e){this.segments=t,this.segVertices=e},computeConvexHull:function(){var t=new St,e=this.getPointArray(),n=new Ye(e,t);this.convexHull=n.getConvexHull()},addConstraintVertices:function(){this.computeConvexHull(),this.insertSites(this.segVertices)},findNonGabrielPoint:function(t){var e=t.getStart(),n=t.getEnd(),s=new P((e.x+n.x)/2,(e.y+n.y)/2),a=e.distance(s),g=new G(s);g.expandBy(a);for(var v=this.kdt.query(g),x=null,S=m.MAX_VALUE,O=v.iterator();O.hasNext();){var B=O.next(),H=B.getCoordinate();if(!H.equals2D(e)&&!H.equals2D(n)){var J=s.distance(H);if(a>J){var ut=J;(x===null||S>ut)&&(x=H,S=ut)}}}return x},getConstraintSegments:function(){return this.segments},setSplitPointFinder:function(t){this.splitFinder=t},getConvexHull:function(){return this.convexHull},getTolerance:function(){return this.tolerance},enforceGabriel:function(t){for(var e=new F,n=0,s=new F,a=t.iterator();a.hasNext();){var g=a.next(),v=this.findNonGabrielPoint(g);if(v!==null){this.splitPt=this.splitFinder.findSplitPoint(g,v);var x=this.createVertex(this.splitPt,g),S=(this.insertSite(x),new Hr(g.getStartX(),g.getStartY(),g.getStartZ(),x.getX(),x.getY(),x.getZ(),g.getData())),O=new Hr(x.getX(),x.getY(),x.getZ(),g.getEndX(),g.getEndY(),g.getEndZ(),g.getData());e.add(S),e.add(O),s.add(g),n+=1}}return t.removeAll(s),t.addAll(e),n},createVertex:function(){if(arguments.length===1){var t=arguments[0],e=null;return e=this.vertexFactory!==null?this.vertexFactory.createVertex(t,null):new _r(t)}if(arguments.length===2){var n=arguments[0],s=arguments[1],e=null;return e=this.vertexFactory!==null?this.vertexFactory.createVertex(n,s):new _r(n),e.setOnConstraint(!0),e}},getSubdivision:function(){return this.subdiv},computeBoundingBox:function(){var t=xr.computeVertexEnvelope(this.initialVertices),e=xr.computeVertexEnvelope(this.segVertices),n=new G(t);n.expandToInclude(e);var s=.2*n.getWidth(),a=.2*n.getHeight(),g=Math.max(s,a);this.computeAreaEnv=new G(n),this.computeAreaEnv.expandBy(g)},setVertexFactory:function(t){this.vertexFactory=t},formInitialDelaunay:function(){this.computeBoundingBox(),this.subdiv=new pn(this.computeAreaEnv,this.tolerance),this.subdiv.setLocator(new qo(this.subdiv)),this.incDel=new ho(this.subdiv),this.insertSites(this.initialVertices)},insertSite:function(){if(arguments[0]instanceof _r){var t=arguments[0],e=this.kdt.insert(t.getCoordinate(),t);if(e.isRepeated()){var n=e.getData();return n.merge(t),n}return this.incDel.insertSite(t),t}if(arguments[0]instanceof P){var s=arguments[0];this.insertSite(this.createVertex(s))}},interfaces_:function(){return[]},getClass:function(){return xr}}),xr.computeVertexEnvelope=function(t){for(var e=new G,n=t.iterator();n.hasNext();){var s=n.next();e.expandToInclude(s.getCoordinate())}return e},xr.MAX_SPLIT_ITER=99,f(Ge.prototype,{create:function(){if(this.subdiv!==null)return null;var t=Ge.envelope(this.siteCoords),e=Ge.toVertices(this.siteCoords);this.subdiv=new pn(t,this.tolerance);var n=new ho(this.subdiv);n.insertSites(e)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof Q){var t=arguments[0];this.siteCoords=Ge.extractUniqueCoordinates(t)}else if(nt(arguments[0],it)){var e=arguments[0];this.siteCoords=Ge.unique(dt.toCoordinateArray(e))}},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},interfaces_:function(){return[]},getClass:function(){return Ge}}),Ge.extractUniqueCoordinates=function(t){if(t===null)return new V;var e=t.getCoordinates();return Ge.unique(e)},Ge.envelope=function(t){for(var e=new G,n=t.iterator();n.hasNext();){var s=n.next();e.expandToInclude(s)}return e},Ge.unique=function(t){var e=dt.copyDeep(t);yn.sort(e);var n=new V(e,!1);return n},Ge.toVertices=function(t){for(var e=new F,n=t.iterator();n.hasNext();){var s=n.next();e.add(new Gt(s))}return e},f(Ms.prototype,{createSiteVertices:function(t){for(var e=new F,n=t.iterator();n.hasNext();){var s=n.next();this.constraintVertexMap.containsKey(s)||e.add(new _r(s))}return e},create:function(){if(this.subdiv!==null)return null;var t=Ge.envelope(this.siteCoords),e=new F;this.constraintLines!==null&&(t.expandToInclude(this.constraintLines.getEnvelopeInternal()),this.createVertices(this.constraintLines),e=Ms.createConstraintSegments(this.constraintLines));var n=this.createSiteVertices(this.siteCoords),s=new xr(n,this.tolerance);s.setConstraints(e,new F(this.constraintVertexMap.values())),s.formInitialDelaunay(),s.enforceConstraints(),this.subdiv=s.getSubdivision()},setTolerance:function(t){this.tolerance=t},setConstraints:function(t){this.constraintLines=t},setSites:function(t){this.siteCoords=Ge.extractUniqueCoordinates(t)},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},createVertices:function(t){for(var e=t.getCoordinates(),n=0;n<e.length;n++){var s=new _r(e[n]);this.constraintVertexMap.put(e[n],s)}},interfaces_:function(){return[]},getClass:function(){return Ms}}),Ms.createConstraintSegments=function(){if(arguments.length===1){for(var t=arguments[0],e=fe.getLines(t),n=new F,s=e.iterator();s.hasNext();){var a=s.next();Ms.createConstraintSegments(a,n)}return n}if(arguments.length===2)for(var g=arguments[0],v=arguments[1],x=g.getCoordinates(),s=1;s<x.length;s++)v.add(new Hr(x[s-1],x[s]))},f(fo.prototype,{create:function(){if(this.subdiv!==null)return null;var t=Ge.envelope(this.siteCoords);this.diagramEnv=t;var e=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight());this.diagramEnv.expandBy(e),this.clipEnv!==null&&this.diagramEnv.expandToInclude(this.clipEnv);var n=Ge.toVertices(this.siteCoords);this.subdiv=new pn(t,this.tolerance);var s=new ho(this.subdiv);s.insertSites(n)},getDiagram:function(t){this.create();var e=this.subdiv.getVoronoiDiagram(t);return fo.clipGeometryCollection(e,this.diagramEnv)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof Q){var t=arguments[0];this.siteCoords=Ge.extractUniqueCoordinates(t)}else if(nt(arguments[0],it)){var e=arguments[0];this.siteCoords=Ge.unique(dt.toCoordinateArray(e))}},setClipEnvelope:function(t){this.clipEnv=t},getSubdivision:function(){return this.create(),this.subdiv},interfaces_:function(){return[]},getClass:function(){return fo}}),fo.clipGeometryCollection=function(t,e){for(var n=t.getFactory().toGeometry(e),s=new F,a=0;a<t.getNumGeometries();a++){var g=t.getGeometryN(a),v=null;e.contains(g.getEnvelopeInternal())?v=g:e.intersects(g.getEnvelopeInternal())&&(v=n.intersection(g),v.setUserData(g.getUserData())),v===null||v.isEmpty()||s.add(v)}return t.getFactory().createGeometryCollection(St.toGeometryArray(s))};var Hh=Object.freeze({ConformingDelaunayTriangulationBuilder:Ms,DelaunayTriangulationBuilder:Ge,VoronoiDiagramBuilder:fo});f(Yo.prototype,{interfaces_:function(){return[]},getClass:function(){return Yo}}),Yo.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ct.createEmptyResult(ct.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Xt.overlayOp(t,e,ct.UNION)},f(Q.prototype,{equalsTopo:function(t){return this.getEnvelopeInternal().equals(t.getEnvelopeInternal())?At.relate(this,t).isEquals(this.getDimension(),t.getDimension()):!1},union:function(){if(arguments.length===0)return yr.union(this);if(arguments.length===1){var t=arguments[0];return Yo.union(this,t)}},isValid:function(){return Sn.isValid(this)},intersection:function(t){if(this.isEmpty()||t.isEmpty())return ct.createEmptyResult(ct.INTERSECTION,this,t,this.factory);if(this.isGeometryCollection()){var e=t;return oi.map(this,{interfaces_:function(){return[MapOp]},map:function(n){return n.intersection(e)}})}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Xt.overlayOp(this,t,ct.INTERSECTION)},covers:function(t){return At.covers(this,t)},coveredBy:function(t){return At.coveredBy(this,t)},touches:function(t){return At.touches(this,t)},intersects:function(t){return At.intersects(this,t)},within:function(t){return At.within(this,t)},overlaps:function(t){return At.overlaps(this,t)},disjoint:function(t){return At.disjoint(this,t)},crosses:function(t){return At.crosses(this,t)},buffer:function(){if(arguments.length===1){var t=arguments[0];return E.bufferOp(this,t)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return E.bufferOp(this,e,n)}if(arguments.length===3){var s=arguments[0],a=arguments[1],g=arguments[2];return E.bufferOp(this,s,a,g)}},convexHull:function(){return new Ye(this).getConvexHull()},relate:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return At.relate.apply(At,[this].concat(e))},getCentroid:function(){if(this.isEmpty())return this.factory.createPoint();var t=an.getCentroid(this);return this.createPointFromInternalCoord(t,this)},getInteriorPoint:function(){if(this.isEmpty())return this.factory.createPoint();var t=null,e=this.getDimension();if(e===0){var n=new Oi(this);t=n.getInteriorPoint()}else if(e===1){var n=new tr(this);t=n.getInteriorPoint()}else{var n=new We(this);t=n.getInteriorPoint()}return this.createPointFromInternalCoord(t,this)},symDifference:function(t){if(this.isEmpty()||t.isEmpty()){if(this.isEmpty()&&t.isEmpty())return ct.createEmptyResult(ct.SYMDIFFERENCE,this,t,this.factory);if(this.isEmpty())return t.copy();if(t.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Xt.overlayOp(this,t,ct.SYMDIFFERENCE)},createPointFromInternalCoord:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},toText:function(){var t=new wt;return t.write(this)},toString:function(){this.toText()},contains:function(t){return At.contains(this,t)},difference:function(t){return this.isEmpty()?ct.createEmptyResult(ct.DIFFERENCE,this,t,this.factory):t.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Xt.overlayOp(this,t,ct.DIFFERENCE))},isSimple:function(){var t=new sr(this);return t.isSimple()},isWithinDistance:function(t,e){var n=this.getEnvelopeInternal().distance(t.getEnvelopeInternal());return n>e?!1:tt.isWithinDistance(this,t,e)},distance:function(t){return tt.distance(this,t)},isEquivalentClass:function(t){return this.getClass()===t.getClass()}});var Wh="1.1.2 (248dab8)";c.version=Wh,c.algorithm=Ch,c.densify=Sh,c.dissolve=bh,c.geom=Ih,c.index=Ph,c.io=Rh,c.noding=Oh,c.operation=Uh,c.precision=Vh,c.simplify=Zh,c.triangulate=Hh})})(Fs,Fs.exports);var nl=Fs.exports,ih=function(o,u){var c=new nl.io.GeoJSONReader,f=c.read(JSON.stringify(o.geometry)),l=c.read(JSON.stringify(u.geometry)),d=f.union(l),m=new nl.io.GeoJSONWriter;return d=m.write(d),{type:"Feature",geometry:d,properties:o.properties}},yd=Tu,_d=ih,eu=bn;function xd(o,u,c){if(typeof u!="number")throw new Error("maxEdge parameter is required");if(typeof c!="string")throw new Error("units parameter is required");var f=yd(o),l=f.features.filter(d);f.features=l;function d(m){var _=m.geometry.coordinates[0][0],w=m.geometry.coordinates[0][1],I=m.geometry.coordinates[0][2],b=eu(_,w,c),M=eu(w,I,c),T=eu(_,I,c);return b<=u&&M<=u&&T<=u}return Ld(f)}function Ld(o){for(var u=JSON.parse(JSON.stringify(o.features[0])),c=o.features,f=0,l=c.length;f<l;f++){var d=c[f];d.geometry&&(u=_d(u,d))}return u}var Ed=xd,il=Fs.exports,wd=function(o,u){var c=JSON.parse(JSON.stringify(o)),f=JSON.parse(JSON.stringify(u));c.type!=="Feature"&&(c={type:"Feature",properties:{},geometry:c}),f.type!=="Feature"&&(f={type:"Feature",properties:{},geometry:f});var l=new il.io.GeoJSONReader,d=l.read(JSON.stringify(c.geometry)),m=l.read(JSON.stringify(f.geometry)),_=d.difference(m);if(!_.isEmpty()){var w=new il.io.GeoJSONWriter,I=w.write(_);return c.geometry=_,{type:"Feature",properties:c.properties,geometry:I}}},Id=zs,Cd=function(u,c,f,l){return u.features.forEach(function(d){var m=c.features.filter(function(_){return Id(_,d)}).map(function(_){return _.properties[f]});d.properties||(d.properties={}),d.properties[l]=m}),u},Sd=Un.coordEach,bd=function(u){return u=JSON.parse(JSON.stringify(u)),Sd(u,function(c){c.reverse()}),u},rh={exports:{}};(function(o){(function(){function u(_,w){var I=_.x-w.x,b=_.y-w.y;return I*I+b*b}function c(_,w,I){var b=w.x,M=w.y,T=I.x-b,q=I.y-M;if(T!==0||q!==0){var k=((_.x-b)*T+(_.y-M)*q)/(T*T+q*q);k>1?(b=I.x,M=I.y):k>0&&(b+=T*k,M+=q*k)}return T=_.x-b,q=_.y-M,T*T+q*q}function f(_,w){for(var I=_[0],b=[I],M,T=1,q=_.length;T<q;T++)M=_[T],u(M,I)>w&&(b.push(M),I=M);return I!==M&&b.push(M),b}function l(_,w,I,b,M){for(var T=b,q,k=w+1;k<I;k++){var P=c(_[k],_[w],_[I]);P>T&&(q=k,T=P)}T>b&&(q-w>1&&l(_,w,q,b,M),M.push(_[q]),I-q>1&&l(_,q,I,b,M))}function d(_,w){var I=_.length-1,b=[_[0]];return l(_,0,I,w,b),b.push(_[I]),b}function m(_,w,I){if(_.length<=2)return _;var b=w!==void 0?w*w:1;return _=I?_:f(_,b),_=d(_,b),_}o.exports=m,o.exports.default=m})()})(rh);var gu=rh.exports,rl=["LineString","MultiLineString","Polygon","MultiPolygon"],Nd=function(o,u,c){return o.type==="Feature"?sl(nu(o,u,c),o.properties):o.type==="FeatureCollection"?{type:"FeatureCollection",features:o.features.map(function(f){var l=nu(f,u,c);return rl.indexOf(l.type)>-1?sl(l,f.properties):l})}:o.type==="GeometryCollection"?{type:"GeometryCollection",geometries:o.geometries.map(function(f){return rl.indexOf(f.type)>-1?nu({type:"Feature",geometry:f},u,c):f})}:o};function nu(o,u,c){return o.geometry.type==="LineString"?{type:"LineString",coordinates:al(o.geometry.coordinates,u,c)}:o.geometry.type==="MultiLineString"?{type:"MultiLineString",coordinates:o.geometry.coordinates.map(function(f){return al(f,u,c)})}:o.geometry.type==="Polygon"?{type:"Polygon",coordinates:ul(o.geometry.coordinates,u,c)}:o.geometry.type==="MultiPolygon"?{type:"MultiPolygon",coordinates:o.geometry.coordinates.map(function(f){return ul(f,u,c)})}:o}function Td(o){return o.length<3?!1:!(o.length===3&&o[2][0]===o[0][0]&&o[2][1]===o[0][1])}function sl(o,u){return{type:"Feature",geometry:o,properties:u}}function al(o,u,c){return gu(o.map(function(f){return{x:f[0],y:f[1]}}),u,c).map(function(f){return[f.x,f.y]})}function ul(o,u,c){return o.map(function(f){var l=f.map(function(m){return{x:m[0],y:m[1]}});if(l.length<4)throw new Error("Invalid polygon");for(var d=gu(l,u,c).map(function(m){return[m.x,m.y]});!Td(d);)u-=u*.01,d=gu(l,u,c).map(function(m){return[m.x,m.y]});return(d[d.length-1][0]!==d[0][0]||d[d.length-1][1]!==d[0][1])&&d.push(d[0]),d})}var Ia=function(o){this.points=o.points||[],this.duration=o.duration||1e4,this.sharpness=o.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=o.stepLength||60,this.length=this.points.length,this.delay=0;for(var u=0;u<this.length;u++)this.points[u].z=this.points[u].z||0;for(var u=0;u<this.length-1;u++){var c=this.points[u],f=this.points[u+1];this.centers.push({x:(c.x+f.x)/2,y:(c.y+f.y)/2,z:(c.z+f.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var u=0;u<this.centers.length-1;u++){var c=this.centers[u],f=this.centers[u+1],l=this.points[u+1].x-(this.centers[u].x+this.centers[u+1].x)/2,d=this.points[u+1].y-(this.centers[u].y+this.centers[u+1].y)/2,m=this.points[u+1].z-(this.centers[u].y+this.centers[u+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[u+1].x+this.sharpness*(this.centers[u].x+l),y:(1-this.sharpness)*this.points[u+1].y+this.sharpness*(this.centers[u].y+d),z:(1-this.sharpness)*this.points[u+1].z+this.sharpness*(this.centers[u].z+m)},{x:(1-this.sharpness)*this.points[u+1].x+this.sharpness*(this.centers[u+1].x+l),y:(1-this.sharpness)*this.points[u+1].y+this.sharpness*(this.centers[u+1].y+d),z:(1-this.sharpness)*this.points[u+1].z+this.sharpness*(this.centers[u+1].z+m)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};Ia.prototype.cacheSteps=function(o){var u=[],c=this.pos(0);u.push(0);for(var f=0;f<this.duration;f+=10){var l=this.pos(f),d=Math.sqrt((l.x-c.x)*(l.x-c.x)+(l.y-c.y)*(l.y-c.y)+(l.z-c.z)*(l.z-c.z));d>o&&(u.push(f),c=l)}return u};Ia.prototype.vector=function(o){var u=this.pos(o+10),c=this.pos(o-10);return{angle:180*Math.atan2(u.y-c.y,u.x-c.x)/3.14,speed:Math.sqrt((c.x-u.x)*(c.x-u.x)+(c.y-u.y)*(c.y-u.y)+(c.z-u.z)*(c.z-u.z))}};Ia.prototype.pos=function(o){function u(m,_,w,I,b){var M=function(k){var P=k*k,rt=P*k;return[rt,3*P*(1-k),3*k*(1-k)*(1-k),(1-k)*(1-k)*(1-k)]},T=M(m),q={x:b.x*T[0]+I.x*T[1]+w.x*T[2]+_.x*T[3],y:b.y*T[0]+I.y*T[1]+w.y*T[2]+_.y*T[3],z:b.z*T[0]+I.z*T[1]+w.z*T[2]+_.z*T[3]};return q}var c=o-this.delay;c<0&&(c=0),c>this.duration&&(c=this.duration-1);var f=c/this.duration;if(f>=1)return this.points[this.length-1];var l=Math.floor((this.points.length-1)*f),d=(this.length-1)*f-l;return u(d,this.points[l],this.controls[l][1],this.controls[l+1][0],this.points[l+1])};var Pd=Ia,Md=bt.lineString,Rd=Pd,Od=function(o,u,c){var f=Md([]);f.properties=o.properties;for(var l=new Rd({points:o.geometry.coordinates.map(function(_){return{x:_[0],y:_[1]}}),duration:u,sharpness:c}),d=0;d<l.duration;d+=10){var m=l.pos(d);Math.floor(d/100)%2===0&&f.geometry.coordinates.push([m.x,m.y])}return f},Ad=zs,Dd=function(o,u,c,f){return o=JSON.parse(JSON.stringify(o)),u=JSON.parse(JSON.stringify(u)),o.features.forEach(function(l){l.properties||(l.properties={}),u.features.forEach(function(d){if(l.properties[f]===void 0){var m=Ad(l,d);m&&(l.properties[f]=d.properties[c])}})}),o},kd=bt.featureCollection,Fd=function(o,u){var c=kd(zd(o.features,u));return c};function zd(o,u){for(var c=o.slice(0),f=o.length,l=f-u,d,m;f-- >l;)m=Math.floor((f+1)*Math.random()),d=c[m],c[m]=c[f],c[f]=d;return c.slice(l)}var Gd=bt.polygon,sh=function(o){var u=[o[0],o[1]],c=[o[0],o[3]],f=[o[2],o[3]],l=[o[2],o[1]];return Gd([[u,l,f,c,u]])},Bd=La,qd=sh,Ud=function(o){return qd(Bd(o))},ll=br.getCoord,Ca=function(o,u){var c=Math.PI/180,f=180/Math.PI,l=ll(o),d=ll(u),m=c*l[0],_=c*d[0],w=c*l[1],I=c*d[1],b=Math.sin(_-m)*Math.cos(I),M=Math.cos(w)*Math.sin(I)-Math.sin(w)*Math.cos(I)*Math.cos(_-m),T=f*Math.atan2(b,M);return T},Vd=br.getCoord,oh=bt,Zd=oh.point,Hd=oh.distanceToRadians,Sa=function(o,u,c,f){var l=Math.PI/180,d=180/Math.PI,m=Vd(o),_=l*m[0],w=l*m[1],I=l*c,b=Hd(u,f),M=Math.asin(Math.sin(w)*Math.cos(b)+Math.cos(w)*Math.sin(b)*Math.cos(I)),T=_+Math.atan2(Math.sin(I)*Math.sin(b)*Math.cos(w),Math.cos(b)-Math.sin(w)*Math.sin(M));return Zd([d*T,d*M])},Wd=Ca,Xd=Sa,Yd=bn,Jd=function(o,u){var c=Yd(o,u,"miles"),f=Wd(o,u),l=Xd(o,c/2,f,"miles");return l},Kd=Qd,jd={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function Qd(o){if(!o||!o.type)return null;var u=jd[o.type];if(!u)return null;if(u==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:o}]};if(u==="feature")return{type:"FeatureCollection",features:[o]};if(u==="featurecollection")return o}var ah=bt,$d=ah.featureCollection,hl=Fs.exports,cl=Kd,tg=function(o,u,c){var f=ah.distanceToDegrees(u,c),l=cl(o),d=cl($d(l.features.map(function(m){return eg(m,f)})));if(d.features.length>1)return d;if(d.features.length===1)return d.features[0]};function eg(o,u){var c=new hl.io.GeoJSONReader,f=c.read(o.geometry),l=f.buffer(u),d=new hl.io.GeoJSONWriter;return l=d.write(l),{type:"Feature",geometry:l,properties:{}}}var ng=La,ig=bt.point,uh=function(o){var u=ng(o),c=(u[0]+u[2])/2,f=(u[1]+u[3])/2;return ig([c,f])},rg=Un.coordEach,sg=bt.point,og=function(o){var u=0,c=0,f=0;return rg(o,function(l){u+=l[0],c+=l[1],f++},!0),sg([u/f,c/f])},ag=Un,ug=function(o){var u={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},c=Object.keys(u).reduce(function(l,d){return l[d.replace("Multi","")]=d,l},{});function f(l,d,m){m?u[d].coordinates=u[d].coordinates.concat(l.geometry.coordinates):u[d].coordinates.push(l.geometry.coordinates),u[d].properties.push(l.properties)}return ag.featureEach(o,function(l){!l.geometry||(u[l.geometry.type]?f(l,l.geometry.type,!0):c[l.geometry.type]&&f(l,c[l.geometry.type],!1))}),{type:"FeatureCollection",features:Object.keys(u).filter(function(l){return u[l].coordinates.length}).sort().map(function(l){return{type:"Feature",properties:{collectedProperties:u[l].properties},geometry:{type:l,coordinates:u[l].coordinates}}})}},lg=bt.featureCollection,hg=Un.coordEach,cg=bt.point,lh=function(o){var u=[];return hg(o,function(c){u.push(cg(c))}),lg(u)},Du={exports:{}};Du.exports=ba;Du.exports.default=ba;function ba(o,u,c){c=c||2;var f=u&&u.length,l=f?u[0]*c:o.length,d=hh(o,0,l,c,!0),m=[];if(!d||d.next===d.prev)return m;var _,w,I,b,M,T,q;if(f&&(d=mg(o,u,d,c)),o.length>80*c){_=I=o[0],w=b=o[1];for(var k=c;k<l;k+=c)M=o[k],T=o[k+1],M<_&&(_=M),T<w&&(w=T),M>I&&(I=M),T>b&&(b=T);q=Math.max(I-_,b-w),q=q!==0?32767/q:0}return yo(d,m,c,_,w,q,0),m}function hh(o,u,c,f,l){var d,m;if(l===vu(o,u,c,f)>0)for(d=u;d<c;d+=f)m=fl(d,o[d],o[d+1],m);else for(d=c-f;d>=u;d-=f)m=fl(d,o[d],o[d+1],m);return m&&Na(m,m.next)&&(xo(m),m=m.next),m}function Kr(o,u){if(!o)return o;u||(u=o);var c=o,f;do if(f=!1,!c.steiner&&(Na(c,c.next)||xe(c.prev,c,c.next)===0)){if(xo(c),c=u=c.prev,c===c.next)break;f=!0}else c=c.next;while(f||c!==u);return u}function yo(o,u,c,f,l,d,m){if(!!o){!m&&d&&Lg(o,f,l,d);for(var _=o,w,I;o.prev!==o.next;){if(w=o.prev,I=o.next,d?dg(o,f,l,d):fg(o)){u.push(w.i/c|0),u.push(o.i/c|0),u.push(I.i/c|0),xo(o),o=I.next,_=I.next;continue}if(o=I,o===_){m?m===1?(o=gg(Kr(o),u,c),yo(o,u,c,f,l,d,2)):m===2&&pg(o,u,c,f,l,d):yo(Kr(o),u,c,f,l,d,1);break}}}}function fg(o){var u=o.prev,c=o,f=o.next;if(xe(u,c,f)>=0)return!1;for(var l=u.x,d=c.x,m=f.x,_=u.y,w=c.y,I=f.y,b=l<d?l<m?l:m:d<m?d:m,M=_<w?_<I?_:I:w<I?w:I,T=l>d?l>m?l:m:d>m?d:m,q=_>w?_>I?_:I:w>I?w:I,k=f.next;k!==u;){if(k.x>=b&&k.x<=T&&k.y>=M&&k.y<=q&&ks(l,_,d,w,m,I,k.x,k.y)&&xe(k.prev,k,k.next)>=0)return!1;k=k.next}return!0}function dg(o,u,c,f){var l=o.prev,d=o,m=o.next;if(xe(l,d,m)>=0)return!1;for(var _=l.x,w=d.x,I=m.x,b=l.y,M=d.y,T=m.y,q=_<w?_<I?_:I:w<I?w:I,k=b<M?b<T?b:T:M<T?M:T,P=_>w?_>I?_:I:w>I?w:I,rt=b>M?b>T?b:T:M>T?M:T,ot=pu(q,k,u,c,f),it=pu(P,rt,u,c,f),A=o.prevZ,R=o.nextZ;A&&A.z>=ot&&R&&R.z<=it;){if(A.x>=q&&A.x<=P&&A.y>=k&&A.y<=rt&&A!==l&&A!==m&&ks(_,b,w,M,I,T,A.x,A.y)&&xe(A.prev,A,A.next)>=0||(A=A.prevZ,R.x>=q&&R.x<=P&&R.y>=k&&R.y<=rt&&R!==l&&R!==m&&ks(_,b,w,M,I,T,R.x,R.y)&&xe(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;A&&A.z>=ot;){if(A.x>=q&&A.x<=P&&A.y>=k&&A.y<=rt&&A!==l&&A!==m&&ks(_,b,w,M,I,T,A.x,A.y)&&xe(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;R&&R.z<=it;){if(R.x>=q&&R.x<=P&&R.y>=k&&R.y<=rt&&R!==l&&R!==m&&ks(_,b,w,M,I,T,R.x,R.y)&&xe(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function gg(o,u,c){var f=o;do{var l=f.prev,d=f.next.next;!Na(l,d)&&ch(l,f,f.next,d)&&_o(l,d)&&_o(d,l)&&(u.push(l.i/c|0),u.push(f.i/c|0),u.push(d.i/c|0),xo(f),xo(f.next),f=o=d),f=f.next}while(f!==o);return Kr(f)}function pg(o,u,c,f,l,d){var m=o;do{for(var _=m.next.next;_!==m.prev;){if(m.i!==_.i&&Ig(m,_)){var w=fh(m,_);m=Kr(m,m.next),w=Kr(w,w.next),yo(m,u,c,f,l,d,0),yo(w,u,c,f,l,d,0);return}_=_.next}m=m.next}while(m!==o)}function mg(o,u,c,f){var l=[],d,m,_,w,I;for(d=0,m=u.length;d<m;d++)_=u[d]*f,w=d<m-1?u[d+1]*f:o.length,I=hh(o,_,w,f,!1),I===I.next&&(I.steiner=!0),l.push(wg(I));for(l.sort(vg),d=0;d<l.length;d++)c=yg(l[d],c);return c}function vg(o,u){return o.x-u.x}function yg(o,u){var c=_g(o,u);if(!c)return u;var f=fh(c,o);return Kr(f,f.next),Kr(c,c.next)}function _g(o,u){var c=u,f=o.x,l=o.y,d=-1/0,m;do{if(l<=c.y&&l>=c.next.y&&c.next.y!==c.y){var _=c.x+(l-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(_<=f&&_>d&&(d=_,m=c.x<c.next.x?c:c.next,_===f))return m}c=c.next}while(c!==u);if(!m)return null;var w=m,I=m.x,b=m.y,M=1/0,T;c=m;do f>=c.x&&c.x>=I&&f!==c.x&&ks(l<b?f:d,l,I,b,l<b?d:f,l,c.x,c.y)&&(T=Math.abs(l-c.y)/(f-c.x),_o(c,o)&&(T<M||T===M&&(c.x>m.x||c.x===m.x&&xg(m,c)))&&(m=c,M=T)),c=c.next;while(c!==w);return m}function xg(o,u){return xe(o.prev,o,u.prev)<0&&xe(u.next,o,o.next)<0}function Lg(o,u,c,f){var l=o;do l.z===0&&(l.z=pu(l.x,l.y,u,c,f)),l.prevZ=l.prev,l.nextZ=l.next,l=l.next;while(l!==o);l.prevZ.nextZ=null,l.prevZ=null,Eg(l)}function Eg(o){var u,c,f,l,d,m,_,w,I=1;do{for(c=o,o=null,d=null,m=0;c;){for(m++,f=c,_=0,u=0;u<I&&(_++,f=f.nextZ,!!f);u++);for(w=I;_>0||w>0&&f;)_!==0&&(w===0||!f||c.z<=f.z)?(l=c,c=c.nextZ,_--):(l=f,f=f.nextZ,w--),d?d.nextZ=l:o=l,l.prevZ=d,d=l;c=f}d.nextZ=null,I*=2}while(m>1);return o}function pu(o,u,c,f,l){return o=(o-c)*l|0,u=(u-f)*l|0,o=(o|o<<8)&16711935,o=(o|o<<4)&252645135,o=(o|o<<2)&858993459,o=(o|o<<1)&1431655765,u=(u|u<<8)&16711935,u=(u|u<<4)&252645135,u=(u|u<<2)&858993459,u=(u|u<<1)&1431655765,o|u<<1}function wg(o){var u=o,c=o;do(u.x<c.x||u.x===c.x&&u.y<c.y)&&(c=u),u=u.next;while(u!==o);return c}function ks(o,u,c,f,l,d,m,_){return(l-m)*(u-_)>=(o-m)*(d-_)&&(o-m)*(f-_)>=(c-m)*(u-_)&&(c-m)*(d-_)>=(l-m)*(f-_)}function Ig(o,u){return o.next.i!==u.i&&o.prev.i!==u.i&&!Cg(o,u)&&(_o(o,u)&&_o(u,o)&&Sg(o,u)&&(xe(o.prev,o,u.prev)||xe(o,u.prev,u))||Na(o,u)&&xe(o.prev,o,o.next)>0&&xe(u.prev,u,u.next)>0)}function xe(o,u,c){return(u.y-o.y)*(c.x-u.x)-(u.x-o.x)*(c.y-u.y)}function Na(o,u){return o.x===u.x&&o.y===u.y}function ch(o,u,c,f){var l=oa(xe(o,u,c)),d=oa(xe(o,u,f)),m=oa(xe(c,f,o)),_=oa(xe(c,f,u));return!!(l!==d&&m!==_||l===0&&sa(o,c,u)||d===0&&sa(o,f,u)||m===0&&sa(c,o,f)||_===0&&sa(c,u,f))}function sa(o,u,c){return u.x<=Math.max(o.x,c.x)&&u.x>=Math.min(o.x,c.x)&&u.y<=Math.max(o.y,c.y)&&u.y>=Math.min(o.y,c.y)}function oa(o){return o>0?1:o<0?-1:0}function Cg(o,u){var c=o;do{if(c.i!==o.i&&c.next.i!==o.i&&c.i!==u.i&&c.next.i!==u.i&&ch(c,c.next,o,u))return!0;c=c.next}while(c!==o);return!1}function _o(o,u){return xe(o.prev,o,o.next)<0?xe(o,u,o.next)>=0&&xe(o,o.prev,u)>=0:xe(o,u,o.prev)<0||xe(o,o.next,u)<0}function Sg(o,u){var c=o,f=!1,l=(o.x+u.x)/2,d=(o.y+u.y)/2;do c.y>d!=c.next.y>d&&c.next.y!==c.y&&l<(c.next.x-c.x)*(d-c.y)/(c.next.y-c.y)+c.x&&(f=!f),c=c.next;while(c!==o);return f}function fh(o,u){var c=new mu(o.i,o.x,o.y),f=new mu(u.i,u.x,u.y),l=o.next,d=u.prev;return o.next=u,u.prev=o,c.next=l,l.prev=c,f.next=c,c.prev=f,d.next=f,f.prev=d,f}function fl(o,u,c,f){var l=new mu(o,u,c);return f?(l.next=f.next,l.prev=f,f.next.prev=l,f.next=l):(l.prev=l,l.next=l),l}function xo(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function mu(o,u,c){this.i=o,this.x=u,this.y=c,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}ba.deviation=function(o,u,c,f){var l=u&&u.length,d=l?u[0]*c:o.length,m=Math.abs(vu(o,0,d,c));if(l)for(var _=0,w=u.length;_<w;_++){var I=u[_]*c,b=_<w-1?u[_+1]*c:o.length;m-=Math.abs(vu(o,I,b,c))}var M=0;for(_=0;_<f.length;_+=3){var T=f[_]*c,q=f[_+1]*c,k=f[_+2]*c;M+=Math.abs((o[T]-o[k])*(o[q+1]-o[T+1])-(o[T]-o[q])*(o[k+1]-o[T+1]))}return m===0&&M===0?0:Math.abs((M-m)/m)};function vu(o,u,c,f){for(var l=0,d=u,m=c-f;d<c;d+=f)l+=(o[m]-o[d])*(o[d+1]+o[m+1]),m=d;return l}ba.flatten=function(o){for(var u=o[0][0].length,c={vertices:[],holes:[],dimensions:u},f=0,l=0;l<o.length;l++){for(var d=0;d<o[l].length;d++)for(var m=0;m<u;m++)c.vertices.push(o[l][d][m]);l>0&&(f+=o[l-1].length,c.holes.push(f))}return c};var bg=bt.polygon,Ng=Du.exports,Tg=function(o){if(!o.geometry||o.geometry.type!=="Polygon"&&o.geometry.type!=="MultiPolygon")throw new Error("input must be a Polygon or MultiPolygon");var u={type:"FeatureCollection",features:[]};return o.geometry.type==="Polygon"?u.features=dl(o.geometry.coordinates):o.geometry.coordinates.forEach(function(c){u.features=u.features.concat(dl(c))}),u};function dl(o){var u=Pg(o),c=2,f=Ng(u.vertices,u.holes,c),l=[],d=[];f.forEach(function(w,I){var b=f[I];d.push([u.vertices[b*c],u.vertices[b*c+1]])});for(var m=0;m<d.length;m+=3){var _=d.slice(m,m+3);_.push(d[m]),l.push(bg([_]))}return l}function Pg(o){for(var u=o[0][0].length,c={vertices:[],holes:[],dimensions:u},f=0,l=0;l<o.length;l++){for(var d=0;d<o[l].length;d++)for(var m=0;m<u;m++)c.vertices.push(o[l][d][m]);l>0&&(f+=o[l-1].length,c.holes.push(f))}return c}var gl=Fs.exports,Mg=function(u,c){var f,l;u.type==="Feature"?f=u.geometry:f=u,c.type==="Feature"?l=c.geometry:l=c;var d=new gl.io.GeoJSONReader,m=d.read(JSON.stringify(f)),_=d.read(JSON.stringify(l)),w=m.intersection(_);if(!w.isEmpty()){var I=new gl.io.GeoJSONWriter,b=I.write(w);return{type:"Feature",properties:{},geometry:b}}},Rg=bn,Og=function(o,u){for(var c,f=1/0,l=0;l<u.features.length;l++){var d=Rg(o,u.features[l],"miles");d<f&&(c=u.features[l],f=d)}return c},wo={exports:{}};wo.exports=function(){throw new Error("call .point() or .polygon() instead")};function ku(o){return o?Dg(o):[gh(),ph()]}wo.exports.position=ku;wo.exports.point=function(o,u){var c=[];for(i=0;i<o;i++)c.push(mh(u?pl(ku(u)):pl()));return vh(c)};wo.exports.polygon=function(o,u,c,f){typeof u!="number"&&(u=10),typeof c!="number"&&(c=10);var l=[];for(i=0;i<o;i++){var d=[],m=Array.apply(null,new Array(u+1)).map(Math.random);m.forEach(_),m.forEach(w),d[d.length-1]=d[0],d=d.map(Ag(ku(f))),l.push(mh(kg([d])))}function _(I,b,M){M[b]=b>0?I+M[b-1]:I}function w(I,b){I=I*2*Math.PI/m[m.length-1];var M=Math.random();d.push([M*c*Math.sin(I),M*c*Math.cos(I)])}return vh(l)};function Ag(o){return function(u,c){return[u[0]+o[0],u[1]+o[1]]}}function dh(){return Math.random()-.5}function gh(){return dh()*360}function ph(){return dh()*180}function pl(o){return{type:"Point",coordinates:o||[gh(),ph()]}}function Dg(o){return[Math.random()*(o[2]-o[0])+o[0],Math.random()*(o[3]-o[1])+o[1]]}function kg(o){return{type:"Polygon",coordinates:o}}function mh(o){return{type:"Feature",geometry:o,properties:{}}}function vh(o){return{type:"FeatureCollection",features:o}}var ml=wo.exports,Fg=function(o,u,c){switch(c=c||{},u=u||1,o){case"point":case"points":case void 0:return ml.point(u,c.bbox);case"polygon":case"polygons":return ml.polygon(u,c.num_vertices,c.max_radial_length,c.bbox);default:throw new Error("Unknown type given: valid options are points and polygons")}},zg=bt.point,Gg=function(o){var u,c={type:"FeatureCollection",features:[]};return o.type==="Feature"?u=o.geometry:u=o,u.coordinates.forEach(function(f){u.coordinates.forEach(function(l){for(var d=0;d<f.length-1;d++)for(var m=0;m<l.length-1;m++)if(!(f===l&&(Math.abs(d-m)===1||Math.abs(d-m)===f.length-2))){var _=Bg(f[d][0],f[d][1],f[d+1][0],f[d+1][1],l[m][0],l[m][1],l[m+1][0],l[m+1][1]);_&&c.features.push(zg([_[0],_[1]]))}})}),c};function Bg(o,u,c,f,l,d,m,_){var w,I,b,M,T,q={x:null,y:null,onLine1:!1,onLine2:!1};return w=(_-d)*(c-o)-(m-l)*(f-u),w===0?q.x!==null&&q.y!==null?q:!1:(I=u-d,b=o-l,M=(m-l)*I-(_-d)*b,T=(c-o)*I-(f-u)*b,I=M/w,b=T/w,q.x=o+I*(c-o),q.y=u+I*(f-u),I>=0&&I<=1&&(q.onLine1=!0),b>=0&&b<=1&&(q.onLine2=!0),q.onLine1&&q.onLine2?[q.x,q.y]:!1)}var vl=bt.featureCollection,qg=uh,Ug=bn,Vg=zs,Zg=lh;function Hg(o){o.type!=="FeatureCollection"&&(o.type!=="Feature"&&(o={type:"Feature",geometry:o,properties:{}}),o=vl([o]));for(var u=qg(o),c=!1,f=0;!c&&f<o.features.length;){var l=o.features[f].geometry,d,m,_,w,I,b,M,T=!1;if(l.type==="Point")u.geometry.coordinates[0]===l.coordinates[0]&&u.geometry.coordinates[1]===l.coordinates[1]&&(c=!0);else if(l.type==="MultiPoint"){var q=!1;for(M=0;!q&&M<l.coordinates.length;)u.geometry.coordinates[0]===l.coordinates[M][0]&&u.geometry.coordinates[1]===l.coordinates[M][1]&&(c=!0,q=!0),M++}else if(l.type==="LineString")for(M=0;!T&&M<l.coordinates.length-1;)d=u.geometry.coordinates[0],m=u.geometry.coordinates[1],_=l.coordinates[M][0],w=l.coordinates[M][1],I=l.coordinates[M+1][0],b=l.coordinates[M+1][1],yl(d,m,_,w,I,b)&&(T=!0,c=!0),M++;else if(l.type==="MultiLineString")for(var k=0;k<l.coordinates.length;){T=!1,M=0;for(var P=l.coordinates[k];!T&&M<P.length-1;)d=u.geometry.coordinates[0],m=u.geometry.coordinates[1],_=P[M][0],w=P[M][1],I=P[M+1][0],b=P[M+1][1],yl(d,m,_,w,I,b)&&(T=!0,c=!0),M++;k++}else if(l.type==="Polygon"||l.type==="MultiPolygon"){var rt={type:"Feature",geometry:l,properties:{}};Vg(u,rt)&&(c=!0)}f++}if(c)return u;var ot=vl([]);for(f=0;f<o.features.length;f++)ot.features=ot.features.concat(Zg(o.features[f]).features);var it,A=1/0;for(f=0;f<ot.features.length;f++){var R=Ug(u,ot.features[f],"miles");R<A&&(A=R,it=ot.features[f])}return it}function yl(o,u,c,f,l,d){var m=Math.sqrt((l-c)*(l-c)+(d-f)*(d-f)),_=Math.sqrt((o-c)*(o-c)+(u-f)*(u-f)),w=Math.sqrt((l-o)*(l-o)+(d-u)*(d-u));if(m===_+w)return!0}var Wg=Hg,Fu={},Ta={};Ta.RADIUS=6378137;Ta.FLATTENING=1/298.257223563;Ta.POLAR_RADIUS=63567523142e-4;var _l=Ta;Fu.geometry=yh;Fu.ring=yu;function yh(o){var u=0,c;switch(o.type){case"Polygon":return xl(o.coordinates);case"MultiPolygon":for(c=0;c<o.coordinates.length;c++)u+=xl(o.coordinates[c]);return u;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(c=0;c<o.geometries.length;c++)u+=yh(o.geometries[c]);return u}}function xl(o){var u=0;if(o&&o.length>0){u+=Math.abs(yu(o[0]));for(var c=1;c<o.length;c++)u-=Math.abs(yu(o[c]))}return u}function yu(o){var u,c,f,l,d,m,_=0,w=o.length;if(w>2){for(i=0;i<w;i++)i===w-2?(l=w-2,d=w-1,m=0):i===w-1?(l=w-1,d=0,m=1):(l=i,d=i+1,m=i+2),u=o[l],c=o[d],f=o[m],_+=(iu(f[0])-iu(u[0]))*Math.sin(iu(c[1]));_=_*_l.RADIUS*_l.RADIUS/2}return _}function iu(o){return o*Math.PI/180}var ru=Fu.geometry;function Xg(o){if(o.type==="FeatureCollection"){for(var u=0,c=0;u<o.features.length;u++)o.features[u].geometry&&(c+=ru(o.features[u].geometry));return c}else return o.type==="Feature"?ru(o.geometry):ru(o)}var Yg=Xg,Jg=bn,Ll=bt.point,Kg=Ca,jg=Sa,Qg=function(o,u,c){var f;if(o.type==="Feature")f=o.geometry.coordinates;else if(o.type==="LineString")f=o.coordinates;else throw new Error("input must be a LineString Feature or Geometry");for(var l=0,d=0;d<f.length&&!(u>=l&&d===f.length-1);d++)if(l>=u){var m=u-l;if(m){var _=Kg(f[d],f[d-1])-180,w=jg(f[d],m,_,c);return w}else return Ll(f[d])}else l+=Jg(f[d],f[d+1],c);return Ll(f[f.length-1])},$g=bn,El=bt.point,tp=function o(u,c){if(u.type==="FeatureCollection")return u.features.reduce(function(_,w){return _+o(w,c)},0);var f=u.type==="Feature"?u.geometry:u,l,d;if(f.type==="LineString")return su(f.coordinates,c);if(f.type==="Polygon"||f.type==="MultiLineString"){for(l=0,d=0;d<f.coordinates.length;d++)l+=su(f.coordinates[d],c);return l}else if(u.type==="MultiPolygon"){for(l=0,d=0;d<f.coordinates.length;d++)for(var m=0;m<f.coordinates[d].length;m++)l+=su(f.coordinates[d][m],c);return l}else throw new Error("input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry (or a FeatureCollection containing only those types)")};function su(o,u){for(var c=0,f=El(o[0]),l=El(o[0]),d,m=1;m<o.length;m++)l.geometry.coordinates=o[m],c+=$g(f,l,u),d=f,f=l,l=d;return c}var ou=bn,aa=bt.point,ep=Ca,wl=Sa,_h=function(o,u){var c;if(o.type==="Feature")c=o.geometry.coordinates;else if(o.type==="LineString")c=o.coordinates;else throw new Error("input must be a LineString Feature or Geometry");return np(u,c)};function np(o,u){for(var c="miles",f=aa([1/0,1/0],{dist:1/0}),l=0;l<u.length-1;l++){var d=aa(u[l]),m=aa(u[l+1]);d.properties.dist=ou(o,d,c),m.properties.dist=ou(o,m,c);var _=Math.max(d.properties.dist,m.properties.dist),w=ep(d,m),I=wl(o,_,w+90,c),b=wl(o,_,w-90,c),M=ip(I.geometry.coordinates[0],I.geometry.coordinates[1],b.geometry.coordinates[0],b.geometry.coordinates[1],d.geometry.coordinates[0],d.geometry.coordinates[1],m.geometry.coordinates[0],m.geometry.coordinates[1]),T;M&&(T=aa(M),T.properties.dist=ou(o,T,c)),d.properties.dist<f.properties.dist&&(f=d,f.properties.index=l),m.properties.dist<f.properties.dist&&(f=m,f.properties.index=l),T&&T.properties.dist<f.properties.dist&&(f=T,f.properties.index=l)}return f}function ip(o,u,c,f,l,d,m,_){var w,I,b,M,T,q={x:null,y:null,onLine1:!1,onLine2:!1};return w=(_-d)*(c-o)-(m-l)*(f-u),w===0?q.x!==null&&q.y!==null?q:!1:(I=u-d,b=o-l,M=(m-l)*I-(_-d)*b,T=(c-o)*I-(f-u)*b,I=M/w,b=T/w,q.x=o+I*(c-o),q.y=u+I*(f-u),I>0&&I<1&&(q.onLine1=!0),b>0&&b<1&&(q.onLine2=!0),q.onLine1&&q.onLine2?[q.x,q.y]:!1)}var rp=bt.lineString,Il=_h,sp=function(u,c,f){var l;if(f.type==="Feature")l=f.geometry.coordinates;else if(f.type==="LineString")l=f.coordinates;else throw new Error("input must be a LineString Feature or Geometry");var d=Il(f,u),m=Il(f,c),_;d.properties.index<=m.properties.index?_=[d,m]:_=[m,d];for(var w=rp([_[0].geometry.coordinates],{}),I=_[0].properties.index+1;I<_[1].properties.index+1;I++)w.geometry.coordinates.push(l[I]);return w.geometry.coordinates.push(_[1].geometry.coordinates),w},po=bt.point,op=bt.featureCollection,Cl=bn,ap=function(u,c,f){for(var l=op([]),d=c/Cl(po([u[0],u[1]]),po([u[2],u[1]]),f),m=d*(u[2]-u[0]),_=c/Cl(po([u[0],u[1]]),po([u[0],u[3]]),f),w=_*(u[3]-u[1]),I=u[0];I<=u[2];){for(var b=u[1];b<=u[3];)l.features.push(po([I,b])),b+=w;I+=m}return l},up=bt.featureCollection,ua=bt.point,lp=bt.polygon,Sl=bn,hp=function(u,c,f){for(var l=up([]),d=c/Sl(ua([u[0],u[1]]),ua([u[2],u[1]]),f),m=d*(u[2]-u[0]),_=c/Sl(ua([u[0],u[1]]),ua([u[0],u[3]]),f),w=_*(u[3]-u[1]),I=u[0];I<=u[2];){for(var b=u[1];b<=u[3];){var M=lp([[[I,b],[I,b+w],[I+m,b+w],[I+m,b],[I,b]]]);l.features.push(M),b+=w}I+=m}return l},cp=bt.featureCollection,Ir=bt.polygon,bl=bn,fp=function(o,u,c){for(var f=cp([]),l=u/bl([o[0],o[1]],[o[2],o[1]],c),d=l*(o[2]-o[0]),m=u/bl([o[0],o[1]],[o[0],o[3]],c),_=m*(o[3]-o[1]),w=0,I=o[0];I<=o[2];){for(var b=0,M=o[1];M<=o[3];)w%2===0&&b%2===0?f.features.push(Ir([[[I,M],[I,M+_],[I+d,M],[I,M]]]),Ir([[[I,M+_],[I+d,M+_],[I+d,M],[I,M+_]]])):w%2===0&&b%2===1?f.features.push(Ir([[[I,M],[I+d,M+_],[I+d,M],[I,M]]]),Ir([[[I,M],[I,M+_],[I+d,M+_],[I,M]]])):b%2===0&&w%2===1?f.features.push(Ir([[[I,M],[I,M+_],[I+d,M+_],[I,M]]]),Ir([[[I,M],[I+d,M+_],[I+d,M],[I,M]]])):b%2===1&&w%2===1&&f.features.push(Ir([[[I,M],[I,M+_],[I+d,M],[I,M]]]),Ir([[[I,M+_],[I+d,M+_],[I+d,M],[I,M+_]]])),M+=_,b++;w++,I+=d}return f},la=bt.point,xh=bt.polygon,Nl=bn,dp=bt.featureCollection,da=[],ga=[];for(var au=0;au<6;au++){var Tl=2*Math.PI/6*au;da.push(Math.cos(Tl)),ga.push(Math.sin(Tl))}var gp=function(u,c,f,l){var d=c/Nl(la([u[0],u[1]]),la([u[2],u[1]]),f),m=d*(u[2]-u[0]),_=c/Nl(la([u[0],u[1]]),la([u[0],u[3]]),f),w=_*(u[3]-u[1]),I=m/2,b=I*2,M=Math.sqrt(3)/2*w,T=u[2]-u[0],q=u[3]-u[1],k=3/4*b,P=M,rt=T/(b-I/2),ot=Math.ceil(rt);Math.round(rt)===ot&&ot++;var it=(ot*k-I/2-T)/2-I/2,A=Math.ceil(q/M),R=(q-A*M)/2,Z=A*M-q>M/2;Z&&(R-=M/4);for(var lt=dp([]),F=0;F<ot;F++)for(var V=0;V<=A;V++){var G=F%2===1;if(!(V===0&&G)&&!(V===0&&Z)){var j=F*k+u[0]-it,X=V*P+u[1]+R;G&&(X-=M/2),l?lt.features.push.apply(lt.features,mp([j,X],m/2,w/2)):lt.features.push(pp([j,X],m/2,w/2))}}return lt};function pp(o,u,c){for(var f=[],l=0;l<6;l++){var d=o[0]+u*da[l],m=o[1]+c*ga[l];f.push([d,m])}return f.push(f[0]),xh([f])}function mp(o,u,c){for(var f=[],l=0;l<6;l++){var d=[];d.push(o),d.push([o[0]+u*da[l],o[1]+c*ga[l]]),d.push([o[0]+u*da[(l+1)%6],o[1]+c*ga[(l+1)%6]]),d.push(o),f.push(xh([d]))}return f}qn.exports={isolines:gf,convex:gd,within:vd,concave:Ed,difference:wd,collect:Cd,flip:bd,simplify:Nd,bezier:Od,tag:Dd,sample:Fd,envelope:Ud,square:Yl,midpoint:Jd,buffer:tg,center:uh,centroid:og,combine:ug,distance:bn,explode:lh,bbox:La,tesselate:Tg,bboxPolygon:sh,inside:zs,intersect:Mg,nearest:Og,planepoint:Xl,random:Fg,tin:Tu,union:ih,bearing:Ca,destination:Sa,kinks:Gg,pointOnSurface:Wg,area:Yg,along:Qg,lineDistance:tp,lineSlice:sp,pointOnLine:_h,pointGrid:ap,squareGrid:hp,triangleGrid:fp,hexGrid:gp};var Ui=bt,Pl=qn.exports.point=Ui.point,vp=qn.exports.polygon=Ui.polygon;qn.exports.lineString=Ui.lineString;qn.exports.multiPoint=Ui.multiPoint;qn.exports.multiPolygon=Ui.multiPolygon;qn.exports.multiLineString=Ui.multiLineString;qn.exports.feature=Ui.feature;qn.exports.featureCollection=Ui.featureCollection;qn.exports.geometryCollection=Ui.geometryCollection;const Ml=L.icon({iconRetinaUrl:rc,iconUrl:sc,shadowUrl:ic,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]}),yp={mixins:[Yh],computed:{lang(){const o=["save","cancel","longitude","latitude","graphicsManagement","polygon","point","noSiteFound","theSiteHasNotBeenSelected"];return o.reduce((u,c,f)=>(u[c]=this.$t("dataForm."+o[f]),u),{})},options(){return this.meta.options},value_field_form(){if(this.formValueField)return this.model.form[this.formValueField]}},components:{LeftSquareOutlined:Qh,RightSquareOutlined:nc},mounted(){this.meta.GeographicOption&&(this.zoom=this.meta.GeographicOption.zoom,this.attributes=this.meta.GeographicOption.attributes.split(","),this.currentBaseMap=this.meta.GeographicOption.baseMap,this.geometryType=this.meta.GeographicOption.geometryType,this.center=this.meta.GeographicOption.center,this.allowMultiGeometryTypes=!1,this.allowMultiGeometries=!1,this.checkByArea=this.meta.GeographicOption.checkByArea,this.featureLayerUrl=this.meta.GeographicOption.featureLayerUrl,this.featureTitles=this.meta.GeographicOption.featureTitles,this.searchField=this.meta.GeographicOption.searchField,this.formValueField=this.meta.GeographicOption.formValueField,this.successMsg=this.meta.GeographicOption.successMsg,this.errorMsg=this.meta.GeographicOption.errorMsg,this.searchFieldPlaceHolder=this.meta.GeographicOption.searchFieldPlaceHolder),!this.meta.hidden&&this.do_render&&this.initMap()},data(){return{formInline:{search_value:""},ruleInline:{search_value:[{required:!0,message:"\u0425\u0430\u0439\u0445 \u0443\u0442\u0433\u0430 \u0430\u0430 \u043E\u0440\u0443\u0443\u043B\u043D\u0430 \u0443\u0443",trigger:"blur"}]},current:null,new_point:{lng:null,lat:null},attributes:[],geometryType:"point",points:[],openSide:!1,allowMultiGeometryTypes:!1,allowMultiGeometries:!1,checkByArea:!1,featureLayerUrl:"",featureTitles:"",searchField:"",successMsg:"",formValueField:"",errorMsg:"",searchLoading:!1,center:{lat:47.91876971846709,lng:106.91736415028574},zoom:15,map:null,currentBaseMap:0,baseMaps:[{title:"Google \u0421\u0430\u043D\u0441\u0440\u044B\u043D",thumb:"/webgis/images/baseMaps/googleSatellite.jpg",baseMap:L.tileLayer("https://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}",{name:"googleil",maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}),esri:!1},{title:"Google \u0413\u0443\u0434\u0430\u043C\u0436",thumb:"/webgis/images/baseMaps/googleStreets.jpg",baseMap:L.tileLayer("https://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",{name:"googlei",maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}),esri:!1},{title:"Open Street Map",baseMap:L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{name:"osm",maxZoom:19,subdomains:["a","b","c"]}),thumb:"/webgis/images/baseMaps/openstreet.jpg",esri:!1}],draw:null,layer:new L.FeatureGroup,searchLayer:null,drawValue:null}},beforeMount(){this.meta.options&&(this.meta.options=null)},methods:{removeEditeLauyer(){this.layer.eachLayer(o=>{this.layer.removeLayer(o)}),this.cancelGraphic()},clearSearchLayer(){this.searchLayer&&(this.map.hasLayer(this.searchLayer)&&this.map.removeLayer(this.searchLayer),this.searchLayer=null)},handleSubmit(){let o=this.model.form[this.formValueField];if(o){this.searchLoading=!0;var u=axios.create({headers:{common:{}}});u.get(`/api/get-region/${o}`).then(c=>{if(c.data.object_id>=1){let f=`${this.featureLayerUrl}/query?returnGeometry=true&where=${this.searchField}=${c.data.object_id}&outFields=*&f=json&outSR=4326`;u.get(f).then(l=>{if(l.data.features.length>=1){l.data.features[0].geometry.rings[0];let d=[];l.data.features[0].geometry.rings.forEach(_=>{let w=[];_.forEach(I=>{w.push([I[1],I[0]])}),d.push(w)}),this.clearSearchLayer(),this.searchLayer=L.polygon(d,{color:"green"}).addTo(this.map),this.searchLayer.bindPopup(L.Util.template(this.featureTitles,l.data.features[0].attributes));let m=this.searchLayer.getBounds();this.map.fitBounds(m),this.searchLoading=!1}else this.searchLoading=!1,this.clearSearchLayer(),this.$Message.error(this.lang.noSiteFound)})}})}},cancelGraphic(){this.points=[],this.current=null,this.map.closePopup(),this.openSide=!1;let o=this.getData();if(this.checkByArea&&o)if(this.searchLayer){let u=this.layer.toGeoJSON(),c=this.searchLayer.toGeoJSON(),f=!0;c.geometry.coordinates.forEach(l=>{let d=vp([l]);u.features.forEach(m=>{if(this.geometryType=="polygon"&&m.geometry.coordinates[0].map(_=>{let w=Pl(_);qn.exports.inside(w,d)&&(f=!1)}),this.geometryType=="point"){let _=Pl(m.geometry.coordinates);qn.exports.inside(_,d)&&(f=!1)}})}),f?(this.model.form[this.model.component]=null,this.$Message.error(this.errorMsg)):(this.model.form[this.model.component]=o,this.$Message.success(this.successMsg))}else this.layer.eachLayer(u=>{this.map.removeLayer(u)}),this.model.form[this.model.component]=null,this.$Message.error(this.lang.theSiteHasNotBeenSelected);else this.model.form[this.model.component]=o},createFeature(o){let u=o.toGeoJSON();L.geoJSON(u).eachLayer(f=>{this.layer.addLayer(this.setLayerOptions(f))})},setLayerOptions(o){o.on("click",f=>this.geometrySelectEvent(f));let u={},c=L.DomUtil.create("div");return this.attributes.map(f=>{u[f]=o.feature.properties[f]?o.feature.properties[f]:"";let l=L.DomUtil.create("div"),d=L.DomUtil.create("br"),m=L.DomUtil.create("label");m.innerText=f;let _=L.DomUtil.create("input");_.value=u[f],L.DomEvent.addListener(_,"change",w=>{u[f]=_.value}),l.appendChild(m),l.appendChild(d),l.appendChild(_),c.appendChild(l)}),this.checkByArea||o.bindPopup(c),o.feature.properties=u,o},saveGraphic(){if(this.current){if(this.geometryType=="point"){if(this.IsValidCoordinates(this.points[0])){let u=L.latLng([this.points[0][1],this.points[0][0]]);this.current.setLatLng(u)}}else{let u=[];this.points.map(c=>{this.IsValidCoordinates(c)&&u.push(L.latLng([c[1],c[0]]))}),this.current.setLatLngs(u)}return this.cancelGraphic(),!0}let o=null;if(this.geometryType=="point")this.IsValidCoordinates(this.points[0])&&(o=L.marker([this.points[0][1],this.points[0][0]]));else{let u=[];this.points.map(c=>{this.IsValidCoordinates(c)&&u.push([c[1],c[0]])}),this.geometryType=="line"&&(o=new L.polyline(u)),this.geometryType=="polygon"&&(o=new L.polygon(u))}o&&this.createFeature(o),this.cancelGraphic()},destroy(){if(this.meta.options=null,this.map!==null){this.layer.eachLayer(f=>{this.map.removeLayer(f)}),this.map.removeLayer(this.layer),this.layer=new L.FeatureGroup,this.map.remove(),this.map=null;var o=document.getElementById(`geographic_${this.model.component}`),u=o.parentNode;u.removeChild(o);var c=document.createElement("div");c.setAttribute("id",`geographic_${this.model.component}`),c.setAttribute("class","geographic-mapx"),u.appendChild(c)}},initMap(){L.Marker.prototype.options.icon=Ml,L.Draw.Marker.prototype.options.icon=Ml;var o=L.DomUtil.get(`geographic_${this.model.component}`);o!=null&&(o._leaflet_id=null),this.map=L.map(`geographic_${this.model.component}`).setView([this.center.lat,this.center.lng],this.zoom),this.map.addLayer(this.baseMaps[this.currentBaseMap].baseMap),this.itemValue||(this.layer.eachLayer(u=>{this.map.removeLayer(u)}),this.map.removeLayer(this.layer)),this.draw=new L.Control.Draw({draw:{polygon:this.allowMultiGeometryTypes?!0:this.geometryType==="polygon",rectangle:this.allowMultiGeometryTypes?!0:this.geometryType==="polygon",marker:this.allowMultiGeometryTypes?!0:this.geometryType==="point",polyline:this.allowMultiGeometryTypes?!0:this.geometryType==="line",circle:!1,circlemarker:!1},edit:{featureGroup:this.layer,remove:!(this.meta&&this.meta.disabled)}}),this.map.addControl(this.draw),L.control.scale().addTo(this.map),this.setElement(),this.map.on(L.Draw.Event.CREATED,u=>{u.layerType;let c=u.layer;this.meta&&this.meta.disabled?alert(this.lang.thereZNoRightChangeInformation):(this.createFeature(c),this.cancelGraphic())}),this.map.on(L.Draw.Event.DELETED,u=>{this.meta&&this.meta.disabled?alert(this.lang.thereZNoRightChangeInformation):this.cancelGraphic()}),this.map.on(L.Draw.Event.EDITED,u=>{this.meta&&this.meta.disabled?alert(this.lang.thereZNoRightChangeInformation):this.cancelGraphic()}),this.formValueField&&this.checkByArea&&this.model.form[this.formValueField]&&this.handleSubmit()},setElement(){if(this.model.form[this.model.component]){let o=JSON.parse(this.model.form[this.model.component]);this.geometryType==="point"&&(o={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{coordinates:[o.lng,o.lat],type:"Point"}}]}),L.geoJSON(o).eachLayer(c=>{this.layer.addLayer(this.setLayerOptions(c))})}this.map.addLayer(this.layer)},geometrySelectEvent(o){if(!(this.meta&&this.meta.disabled)){if(this.current=o.target,this.points=[],o.target._latlngs){let u=[];o.target._latlngs[0]instanceof Array?(this.geometryType="polygon",u=o.target.getLatLngs()[0]):(this.geometryType="line",u=o.target.getLatLngs()),u.map(c=>{this.points.push([c.lng,c.lat])})}else{this.geometryType="point";let u=o.target.getLatLng();this.points.push([u.lng,u.lat])}this.openSide=!0}},getData(){let o=this.layer.toGeoJSON();if(o.features.length>=2){let u=0;this.layer.eachLayer(c=>{u=u+1,u<o.features.length&&this.layer.removeLayer(c)})}if(o=this.layer.toGeoJSON(),o.features.length>=1)if(this.geometryType=="point"){this.drawValue=o;let u={lat:o.features[0].geometry.coordinates[1],lng:o.features[0].geometry.coordinates[0]};return JSON.stringify(u)}else return this.drawValue=o,JSON.stringify(o);else return null},changeBaseMap(o){this.map.removeLayer(this.baseMaps[this.currentBaseMap].baseMap),this.currentBaseMap=o,this.baseMaps[o].esri?(this.map.getZoom()>this.baseMaps[o].maxZoom&&this.map.setZoom(this.baseMaps[o].maxZoom),this.map.options.maxZoom=this.baseMaps[o].maxZoom,L.esri.basemapLayer(this.baseMaps[o].baseMap).addTo(this.map)):(this.map.options.maxZoom=20,this.map.addLayer(this.baseMaps[o].baseMap))},createNewGeometry(){let o=null;if(this.new_point.lng!==null&&this.new_point.lat===null&&(o=this.new_point.lng),this.new_point.lng===null&&this.new_point.lat!==null&&(o=this.new_point.lat),this.new_point.lng!==null&&this.new_point.lat!==null&&(this.new_point.lng=this.new_point.lng*1,this.new_point.lat=this.new_point.lat*1,this.IsValidCoordinates([this.new_point.lng,this.new_point.lat])&&(this.points.push([this.new_point.lng,this.new_point.lat]),this.resetInput())),o){let u=o.split(" ");if(u.length>=1){let c=!1;u.map(f=>{let l=f.split("	");l.length>=2?(l[0]=l[0]*1,l[1]=l[1]*1,this.IsValidCoordinates([l[0],l[1]])&&this.points.push(l)):c=!0}),c||this.resetInput()}}},resetInput(){this.new_point={lng:null,lat:null},this.$refs.lng.focus()},IsValidCoordinates(o){return o[0]&&o[1]?(o[0]=o[0]*1,o[1]=o[1]*1,this.longitude(o[0])&&this.latitude(o[1])):!1},longitude(o){return!!(this.isNumber(o)&&this.between(o,-180,180))},latitude(o){return!!(this.isNumber(o)&&this.between(o,-90,90))},isNumber(o){return typeof o=="number"},between(o,u,c){return u<=o&&c>=o}},watch:{drawValue(o,u){},value_field_form(o,u){o&&this.handleSubmit()},itemValue(o,u){o&&!u&&this.setElement(),!o&&!u&&this.editMode&&this.initMap()},do_render(o){o?this.editMode?this.itemValue===null&&this.initMap():this.initMap():this.destroy()},options(){this.meta.options&&(this.formInline.search_value=this.meta.options,this.handleSubmit())}}},_p={class:"geographic"},xp=["id"],Lp={id:"base-maps"},Ep=["onClick"],wp=oe("hr",null,null,-1),Ip=oe("span",null,"Line",-1),Cp=oe("hr",null,null,-1),Sp=["onUpdate:modelValue"],bp=["onUpdate:modelValue"];function Np(o,u,c,f,l,d){const m=Os("RightSquareOutlined"),_=Os("LeftSquareOutlined"),w=Os("a-button"),I=Os("a-radio"),b=Os("a-radio-group"),M=Os("lambda-form-item");return wi(),As(M,{label:o.label,name:o.model.component,meta:o.meta},{default:Er(()=>[oe("div",_p,[oe("div",{class:"geographic-mapx",id:`geographic_${o.model.component}`,style:{height:"100%",width:"100%"}},null,8,xp),oe("div",Lp,[oe("ul",null,[(wi(!0),ta(Gu,null,zu(l.baseMaps,(T,q)=>(wi(),ta("li",{key:q},[oe("a",{href:"javascript:;",onClick:k=>d.changeBaseMap(q),class:ja(q==l.currentBaseMap?"active":"")},wr(T.title),11,Ep)]))),128))])]),oe("div",{id:"side_bar",class:ja(l.openSide?"open":"")},[Ds(w,{onClick:u[0]||(u[0]=T=>l.openSide=!l.openSide),class:ja(l.openSide?"side-toggle show":"side-toggle")},{icon:Er(()=>[l.openSide?(wi(),As(m,{key:0})):(wi(),As(_,{key:1}))]),_:1},8,["class"]),oe("h3",null,wr(d.lang.graphicsManagement),1),wp,l.allowMultiGeometryTypes?(wi(),As(b,{key:0,value:l.geometryType,"onUpdate:value":u[1]||(u[1]=T=>l.geometryType=T),class:"geometry_type"},{default:Er(()=>[Ds(I,{value:"point",disabled:l.current!==null},{default:Er(()=>[oe("span",null,wr(d.lang.point),1)]),_:1},8,["disabled"]),Ds(I,{value:"line",disabled:l.current!==null},{default:Er(()=>[Ip]),_:1},8,["disabled"]),Ds(I,{value:"polygon",disabled:l.current!==null},{default:Er(()=>[oe("span",null,wr(d.lang.polygon),1)]),_:1},8,["disabled"])]),_:1},8,["value"])):Qa("",!0),Cp,oe("table",null,[oe("thead",null,[oe("tr",null,[oe("th",null,wr(d.lang.longitude),1),oe("th",null,wr(d.lang.latitude),1)])]),oe("tbody",null,[(wi(!0),ta(Gu,null,zu(l.points,(T,q)=>(wi(),ta("tr",{key:q},[oe("td",null,[ea(oe("input",{type:"text","onUpdate:modelValue":k=>T[0]=k},null,8,Sp),[[na,T[0]]])]),oe("td",null,[ea(oe("input",{type:"text","onUpdate:modelValue":k=>T[1]=k},null,8,bp),[[na,T[1]]])])]))),128)),oe("tr",null,[oe("td",null,[ea(oe("input",{type:"text",ref:"lng","onUpdate:modelValue":u[2]||(u[2]=T=>l.new_point.lng=T),onChange:u[3]||(u[3]=(...T)=>d.createNewGeometry&&d.createNewGeometry(...T))},null,544),[[na,l.new_point.lng]])]),oe("td",null,[ea(oe("input",{type:"text",ref:"lat","onUpdate:modelValue":u[4]||(u[4]=T=>l.new_point.lat=T),onChange:u[5]||(u[5]=(...T)=>d.createNewGeometry&&d.createNewGeometry(...T))},null,544),[[na,l.new_point.lat]])])])])]),l.points.length>=1?(wi(),As(w,{key:1,type:"success",onClick:d.saveGraphic},{default:Er(()=>[Bu(wr(d.lang.save),1)]),_:1},8,["onClick"])):Qa("",!0),l.points.length>=1?(wi(),As(w,{key:2,type:"warning",onClick:d.cancelGraphic},{default:Er(()=>[Bu(wr(d.lang.cancel),1)]),_:1},8,["onClick"])):Qa("",!0)],2)])]),_:1},8,["label","name","meta"])}const Mp=Xh(yp,[["render",Np]]);export{Mp as default};
