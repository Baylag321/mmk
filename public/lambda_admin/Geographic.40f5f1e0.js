import{f as Rr,c3 as dc,B as Hg,a as Zg,r as Mr,o as Vn,c as Or,w as Si,h as Ft,e as ma,a$ as dl,ae as pl,a9 as Xu,t as Ti,k as Yu,p as va,v as ya,i as ml}from"./entry.feddb565.js";import{m as Xg}from"./_mixin.d060750e.js";var Yg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M365.3 518.5l246 178c5.3 3.8 12.7 0 12.7-6.5v-46.9c0-10.2-4.9-19.9-13.2-25.9L465.4 512l145.4-105.2c8.3-6 13.2-15.6 13.2-25.9V334c0-6.5-7.4-10.3-12.7-6.5l-246 178a8.05 8.05 0 000 13z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"left-square",theme:"outlined"};const Wg=Yg;function vl(n){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?Object(arguments[s]):{},h=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(h=h.concat(Object.getOwnPropertySymbols(a).filter(function(u){return Object.getOwnPropertyDescriptor(a,u).enumerable}))),h.forEach(function(u){Jg(n,u,a[u])})}return n}function Jg(n,s,a){return s in n?Object.defineProperty(n,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[s]=a,n}var xh=function(s,a){var h=vl({},s,a.attrs);return Rr(dc,vl({},h,{icon:Wg}),null)};xh.displayName="LeftSquareOutlined";xh.inheritAttrs=!1;const Kg=xh;var jg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M412.7 696.5l246-178c4.4-3.2 4.4-9.7 0-12.9l-246-178c-5.3-3.8-12.7 0-12.7 6.5V381c0 10.2 4.9 19.9 13.2 25.9L558.6 512 413.2 617.2c-8.3 6-13.2 15.6-13.2 25.9V690c0 6.5 7.4 10.3 12.7 6.5z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"right-square",theme:"outlined"};const $g=jg;function yl(n){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?Object(arguments[s]):{},h=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(h=h.concat(Object.getOwnPropertySymbols(a).filter(function(u){return Object.getOwnPropertyDescriptor(a,u).enumerable}))),h.forEach(function(u){Qg(n,u,a[u])})}return n}function Qg(n,s,a){return s in n?Object.defineProperty(n,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[s]=a,n}var Lh=function(s,a){var h=yl({},s,a.attrs);return Rr(dc,yl({},h,{icon:$g}),null)};Lh.displayName="RightSquareOutlined";Lh.inheritAttrs=!1;const td=Lh;/* @preserve
 * Leaflet 1.9.1, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var ed="1.9.1";function Dt(n){var s,a,h,u;for(a=1,h=arguments.length;a<h;a++){u=arguments[a];for(s in u)n[s]=u[s]}return n}var Pa=Object.create||function(){function n(){}return function(s){return n.prototype=s,new n}}();function Yt(n,s){var a=Array.prototype.slice;if(n.bind)return n.bind.apply(n,a.call(arguments,1));var h=a.call(arguments,2);return function(){return n.apply(s,h.length?h.concat(a.call(arguments)):arguments)}}var pc=0;function Nt(n){return"_leaflet_id"in n||(n._leaflet_id=++pc),n._leaflet_id}function mc(n,s,a){var h,u,c,g;return g=function(){h=!1,u&&(c.apply(a,u),u=!1)},c=function(){h?u=arguments:(n.apply(a,arguments),setTimeout(g,s),h=!0)},c}function Hs(n,s,a){var h=s[1],u=s[0],c=h-u;return n===h&&a?n:((n-u)%c+c)%c+u}function ue(){return!1}function Hn(n,s){if(s===!1)return n;var a=Math.pow(10,s===void 0?6:s);return Math.round(n*a)/a}function Eh(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function er(n){return Eh(n).split(/\s+/)}function Wt(n,s){Object.prototype.hasOwnProperty.call(n,"options")||(n.options=n.options?Pa(n.options):{});for(var a in s)n.options[a]=s[a];return n.options}function vc(n,s,a){var h=[];for(var u in n)h.push(encodeURIComponent(a?u.toUpperCase():u)+"="+encodeURIComponent(n[u]));return(!s||s.indexOf("?")===-1?"?":"&")+h.join("&")}var nd=/\{ *([\w_ -]+) *\}/g;function yc(n,s){return n.replace(nd,function(a,h){var u=s[h];if(u===void 0)throw new Error("No value provided for variable "+a);return typeof u=="function"&&(u=u(s)),u})}var Cn=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function wh(n,s){for(var a=0;a<n.length;a++)if(n[a]===s)return a;return-1}var Ca="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ih(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}var _l=0;function _c(n){var s=+new Date,a=Math.max(0,16-(s-_l));return _l=s+a,window.setTimeout(n,a)}var rh=window.requestAnimationFrame||ih("RequestAnimationFrame")||_c,xc=window.cancelAnimationFrame||ih("CancelAnimationFrame")||ih("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};function He(n,s,a){if(a&&rh===_c)n.call(s);else return rh.call(window,Yt(n,s))}function ln(n){n&&xc.call(window,n)}var id={__proto__:null,extend:Dt,create:Pa,bind:Yt,get lastId(){return pc},stamp:Nt,throttle:mc,wrapNum:Hs,falseFn:ue,formatNum:Hn,trim:Eh,splitWords:er,setOptions:Wt,getParamString:vc,template:yc,isArray:Cn,indexOf:wh,emptyImageUrl:Ca,requestFn:rh,cancelFn:xc,requestAnimFrame:He,cancelAnimFrame:ln};function ri(){}ri.extend=function(n){var s=function(){Wt(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},a=s.__super__=this.prototype,h=Pa(a);h.constructor=s,s.prototype=h;for(var u in this)Object.prototype.hasOwnProperty.call(this,u)&&u!=="prototype"&&u!=="__super__"&&(s[u]=this[u]);return n.statics&&Dt(s,n.statics),n.includes&&(rd(n.includes),Dt.apply(null,[h].concat(n.includes))),Dt(h,n),delete h.statics,delete h.includes,h.options&&(h.options=a.options?Pa(a.options):{},Dt(h.options,n.options)),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){a.callInitHooks&&a.callInitHooks.call(this),this._initHooksCalled=!0;for(var c=0,g=h._initHooks.length;c<g;c++)h._initHooks[c].call(this)}},s};ri.include=function(n){var s=this.prototype.options;return Dt(this.prototype,n),n.options&&(this.prototype.options=s,this.mergeOptions(n.options)),this};ri.mergeOptions=function(n){return Dt(this.prototype.options,n),this};ri.addInitHook=function(n){var s=Array.prototype.slice.call(arguments,1),a=typeof n=="function"?n:function(){this[n].apply(this,s)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(a),this};function rd(n){if(!(typeof L>"u"||!L||!L.Mixin)){n=Cn(n)?n:[n];for(var s=0;s<n.length;s++)n[s]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var $e={on:function(n,s,a){if(typeof n=="object")for(var h in n)this._on(h,n[h],s);else{n=er(n);for(var u=0,c=n.length;u<c;u++)this._on(n[u],s,a)}return this},off:function(n,s,a){if(!arguments.length)delete this._events;else if(typeof n=="object")for(var h in n)this._off(h,n[h],s);else{n=er(n);for(var u=arguments.length===1,c=0,g=n.length;c<g;c++)u?this._off(n[c]):this._off(n[c],s,a)}return this},_on:function(n,s,a,h){if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}if(this._listens(n,s,a)===!1){a===this&&(a=void 0);var u={fn:s,ctx:a};h&&(u.once=!0),this._events=this._events||{},this._events[n]=this._events[n]||[],this._events[n].push(u)}},_off:function(n,s,a){var h,u,c;if(!!this._events&&(h=this._events[n],!!h)){if(arguments.length===1){if(this._firingCount)for(u=0,c=h.length;u<c;u++)h[u].fn=ue;delete this._events[n];return}if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}var g=this._listens(n,s,a);if(g!==!1){var p=h[g];this._firingCount&&(p.fn=ue,this._events[n]=h=h.slice()),h.splice(g,1)}}},fire:function(n,s,a){if(!this.listens(n,a))return this;var h=Dt({},s,{type:n,target:this,sourceTarget:s&&s.sourceTarget||this});if(this._events){var u=this._events[n];if(u){this._firingCount=this._firingCount+1||1;for(var c=0,g=u.length;c<g;c++){var p=u[c],v=p.fn;p.once&&this.off(n,v,p.ctx),v.call(p.ctx||this,h)}this._firingCount--}}return a&&this._propagateEvent(h),this},listens:function(n,s,a,h){typeof n!="string"&&console.warn('"string" type argument expected');var u=s;typeof s!="function"&&(h=!!s,u=void 0,a=void 0);var c=this._events&&this._events[n];if(c&&c.length&&this._listens(n,u,a)!==!1)return!0;if(h){for(var g in this._eventParents)if(this._eventParents[g].listens(n,s,a,h))return!0}return!1},_listens:function(n,s,a){if(!this._events)return!1;var h=this._events[n]||[];if(!s)return!!h.length;a===this&&(a=void 0);for(var u=0,c=h.length;u<c;u++)if(h[u].fn===s&&h[u].ctx===a)return u;return!1},once:function(n,s,a){if(typeof n=="object")for(var h in n)this._on(h,n[h],s,!0);else{n=er(n);for(var u=0,c=n.length;u<c;u++)this._on(n[u],s,a,!0)}return this},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[Nt(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[Nt(n)],this},_propagateEvent:function(n){for(var s in this._eventParents)this._eventParents[s].fire(n.type,Dt({layer:n.target,propagatedFrom:n.target},n),!0)}};$e.addEventListener=$e.on;$e.removeEventListener=$e.clearAllEventListeners=$e.off;$e.addOneTimeEventListener=$e.once;$e.fireEvent=$e.fire;$e.hasEventListeners=$e.listens;var js=ri.extend($e);function ft(n,s,a){this.x=a?Math.round(n):n,this.y=a?Math.round(s):s}var xl=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};ft.prototype={clone:function(){return new ft(this.x,this.y)},add:function(n){return this.clone()._add(lt(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(lt(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new ft(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new ft(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=xl(this.x),this.y=xl(this.y),this},distanceTo:function(n){n=lt(n);var s=n.x-this.x,a=n.y-this.y;return Math.sqrt(s*s+a*a)},equals:function(n){return n=lt(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=lt(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+Hn(this.x)+", "+Hn(this.y)+")"}};function lt(n,s,a){return n instanceof ft?n:Cn(n)?new ft(n[0],n[1]):n==null?n:typeof n=="object"&&"x"in n&&"y"in n?new ft(n.x,n.y):new ft(n,s,a)}function jt(n,s){if(!!n)for(var a=s?[n,s]:n,h=0,u=a.length;h<u;h++)this.extend(a[h])}jt.prototype={extend:function(n){var s,a;if(!n)return this;if(n instanceof ft||typeof n[0]=="number"||"x"in n)s=a=lt(n);else if(n=Ve(n),s=n.min,a=n.max,!s||!a)return this;return!this.min&&!this.max?(this.min=s.clone(),this.max=a.clone()):(this.min.x=Math.min(s.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(s.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)),this},getCenter:function(n){return lt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return lt(this.min.x,this.max.y)},getTopRight:function(){return lt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var s,a;return typeof n[0]=="number"||n instanceof ft?n=lt(n):n=Ve(n),n instanceof jt?(s=n.min,a=n.max):s=a=n,s.x>=this.min.x&&a.x<=this.max.x&&s.y>=this.min.y&&a.y<=this.max.y},intersects:function(n){n=Ve(n);var s=this.min,a=this.max,h=n.min,u=n.max,c=u.x>=s.x&&h.x<=a.x,g=u.y>=s.y&&h.y<=a.y;return c&&g},overlaps:function(n){n=Ve(n);var s=this.min,a=this.max,h=n.min,u=n.max,c=u.x>s.x&&h.x<a.x,g=u.y>s.y&&h.y<a.y;return c&&g},isValid:function(){return!!(this.min&&this.max)},pad:function(n){var s=this.min,a=this.max,h=Math.abs(s.x-a.x)*n,u=Math.abs(s.y-a.y)*n;return Ve(lt(s.x-h,s.y-u),lt(a.x+h,a.y+u))},equals:function(n){return n?(n=Ve(n),this.min.equals(n.getTopLeft())&&this.max.equals(n.getBottomRight())):!1}};function Ve(n,s){return!n||n instanceof jt?n:new jt(n,s)}function Ze(n,s){if(!!n)for(var a=s?[n,s]:n,h=0,u=a.length;h<u;h++)this.extend(a[h])}Ze.prototype={extend:function(n){var s=this._southWest,a=this._northEast,h,u;if(n instanceof zt)h=n,u=n;else if(n instanceof Ze){if(h=n._southWest,u=n._northEast,!h||!u)return this}else return n?this.extend(Gt(n)||ve(n)):this;return!s&&!a?(this._southWest=new zt(h.lat,h.lng),this._northEast=new zt(u.lat,u.lng)):(s.lat=Math.min(h.lat,s.lat),s.lng=Math.min(h.lng,s.lng),a.lat=Math.max(u.lat,a.lat),a.lng=Math.max(u.lng,a.lng)),this},pad:function(n){var s=this._southWest,a=this._northEast,h=Math.abs(s.lat-a.lat)*n,u=Math.abs(s.lng-a.lng)*n;return new Ze(new zt(s.lat-h,s.lng-u),new zt(a.lat+h,a.lng+u))},getCenter:function(){return new zt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new zt(this.getNorth(),this.getWest())},getSouthEast:function(){return new zt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){typeof n[0]=="number"||n instanceof zt||"lat"in n?n=Gt(n):n=ve(n);var s=this._southWest,a=this._northEast,h,u;return n instanceof Ze?(h=n.getSouthWest(),u=n.getNorthEast()):h=u=n,h.lat>=s.lat&&u.lat<=a.lat&&h.lng>=s.lng&&u.lng<=a.lng},intersects:function(n){n=ve(n);var s=this._southWest,a=this._northEast,h=n.getSouthWest(),u=n.getNorthEast(),c=u.lat>=s.lat&&h.lat<=a.lat,g=u.lng>=s.lng&&h.lng<=a.lng;return c&&g},overlaps:function(n){n=ve(n);var s=this._southWest,a=this._northEast,h=n.getSouthWest(),u=n.getNorthEast(),c=u.lat>s.lat&&h.lat<a.lat,g=u.lng>s.lng&&h.lng<a.lng;return c&&g},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,s){return n?(n=ve(n),this._southWest.equals(n.getSouthWest(),s)&&this._northEast.equals(n.getNorthEast(),s)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ve(n,s){return n instanceof Ze?n:new Ze(n,s)}function zt(n,s,a){if(isNaN(n)||isNaN(s))throw new Error("Invalid LatLng object: ("+n+", "+s+")");this.lat=+n,this.lng=+s,a!==void 0&&(this.alt=+a)}zt.prototype={equals:function(n,s){if(!n)return!1;n=Gt(n);var a=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return a<=(s===void 0?1e-9:s)},toString:function(n){return"LatLng("+Hn(this.lat,n)+", "+Hn(this.lng,n)+")"},distanceTo:function(n){return Mi.distance(this,Gt(n))},wrap:function(){return Mi.wrapLatLng(this)},toBounds:function(n){var s=180*n/40075017,a=s/Math.cos(Math.PI/180*this.lat);return ve([this.lat-s,this.lng-a],[this.lat+s,this.lng+a])},clone:function(){return new zt(this.lat,this.lng,this.alt)}};function Gt(n,s,a){return n instanceof zt?n:Cn(n)&&typeof n[0]!="object"?n.length===3?new zt(n[0],n[1],n[2]):n.length===2?new zt(n[0],n[1]):null:n==null?n:typeof n=="object"&&"lat"in n?new zt(n.lat,"lng"in n?n.lng:n.lon,n.alt):s===void 0?null:new zt(n,s,a)}var si={latLngToPoint:function(n,s){var a=this.projection.project(n),h=this.scale(s);return this.transformation._transform(a,h)},pointToLatLng:function(n,s){var a=this.scale(s),h=this.transformation.untransform(n,a);return this.projection.unproject(h)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var s=this.projection.bounds,a=this.scale(n),h=this.transformation.transform(s.min,a),u=this.transformation.transform(s.max,a);return new jt(h,u)},infinite:!1,wrapLatLng:function(n){var s=this.wrapLng?Hs(n.lng,this.wrapLng,!0):n.lng,a=this.wrapLat?Hs(n.lat,this.wrapLat,!0):n.lat,h=n.alt;return new zt(a,s,h)},wrapLatLngBounds:function(n){var s=n.getCenter(),a=this.wrapLatLng(s),h=s.lat-a.lat,u=s.lng-a.lng;if(h===0&&u===0)return n;var c=n.getSouthWest(),g=n.getNorthEast(),p=new zt(c.lat-h,c.lng-u),v=new zt(g.lat-h,g.lng-u);return new Ze(p,v)}},Mi=Dt({},si,{wrapLng:[-180,180],R:6371e3,distance:function(n,s){var a=Math.PI/180,h=n.lat*a,u=s.lat*a,c=Math.sin((s.lat-n.lat)*a/2),g=Math.sin((s.lng-n.lng)*a/2),p=c*c+Math.cos(h)*Math.cos(u)*g*g,v=2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p));return this.R*v}}),Ll=6378137,sh={R:Ll,MAX_LATITUDE:85.0511287798,project:function(n){var s=Math.PI/180,a=this.MAX_LATITUDE,h=Math.max(Math.min(a,n.lat),-a),u=Math.sin(h*s);return new ft(this.R*n.lng*s,this.R*Math.log((1+u)/(1-u))/2)},unproject:function(n){var s=180/Math.PI;return new zt((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*s,n.x*s/this.R)},bounds:function(){var n=Ll*Math.PI;return new jt([-n,-n],[n,n])}()};function Ih(n,s,a,h){if(Cn(n)){this._a=n[0],this._b=n[1],this._c=n[2],this._d=n[3];return}this._a=n,this._b=s,this._c=a,this._d=h}Ih.prototype={transform:function(n,s){return this._transform(n.clone(),s)},_transform:function(n,s){return s=s||1,n.x=s*(this._a*n.x+this._b),n.y=s*(this._c*n.y+this._d),n},untransform:function(n,s){return s=s||1,new ft((n.x/s-this._b)/this._a,(n.y/s-this._d)/this._c)}};function $s(n,s,a,h){return new Ih(n,s,a,h)}var Ch=Dt({},Mi,{code:"EPSG:3857",projection:sh,transformation:function(){var n=.5/(Math.PI*sh.R);return $s(n,.5,-n,.5)}()}),sd=Dt({},Ch,{code:"EPSG:900913"});function Lc(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function Ec(n,s){var a="",h,u,c,g,p,v;for(h=0,c=n.length;h<c;h++){for(p=n[h],u=0,g=p.length;u<g;u++)v=p[u],a+=(u?"L":"M")+v.x+" "+v.y;a+=s?tt.svg?"z":"x":""}return a||"M0 0"}var Nh=document.documentElement.style,za="ActiveXObject"in window,od=za&&!document.addEventListener,wc="msLaunchUri"in navigator&&!("documentMode"in document),Sh=Yn("webkit"),Ic=Yn("android"),Cc=Yn("android 2")||Yn("android 3"),ad=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ud=Ic&&Yn("Google")&&ad<537&&!("AudioNode"in window),Th=!!window.opera,Nc=!wc&&Yn("chrome"),Sc=Yn("gecko")&&!Sh&&!Th&&!za,hd=!Nc&&Yn("safari"),Tc=Yn("phantom"),Pc="OTransition"in Nh,ld=navigator.platform.indexOf("Win")===0,bc=za&&"transition"in Nh,Ph="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Cc,Mc="MozPerspective"in Nh,cd=!window.L_DISABLE_3D&&(bc||Ph||Mc)&&!Pc&&!Tc,Qs=typeof orientation<"u"||Yn("mobile"),fd=Qs&&Sh,gd=Qs&&Ph,Oc=!window.PointerEvent&&window.MSPointerEvent,Rc=!!(window.PointerEvent||Oc),Dc="ontouchstart"in window||!!window.TouchEvent,dd=!window.L_NO_TOUCH&&(Dc||Rc),pd=Qs&&Th,md=Qs&&Sc,vd=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,yd=function(){var n=!1;try{var s=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveEventSupport",ue,s),window.removeEventListener("testPassiveEventSupport",ue,s)}catch{}return n}(),_d=function(){return!!document.createElement("canvas").getContext}(),bh=!!(document.createElementNS&&Lc("svg").createSVGRect),xd=!!bh&&function(){var n=document.createElement("div");return n.innerHTML="<svg/>",(n.firstChild&&n.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ld=!bh&&function(){try{var n=document.createElement("div");n.innerHTML='<v:shape adj="1"/>';var s=n.firstChild;return s.style.behavior="url(#default#VML)",s&&typeof s.adj=="object"}catch{return!1}}(),Ed=navigator.platform.indexOf("Mac")===0,wd=navigator.platform.indexOf("Linux")===0;function Yn(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}var tt={ie:za,ielt9:od,edge:wc,webkit:Sh,android:Ic,android23:Cc,androidStock:ud,opera:Th,chrome:Nc,gecko:Sc,safari:hd,phantom:Tc,opera12:Pc,win:ld,ie3d:bc,webkit3d:Ph,gecko3d:Mc,any3d:cd,mobile:Qs,mobileWebkit:fd,mobileWebkit3d:gd,msPointer:Oc,pointer:Rc,touch:dd,touchNative:Dc,mobileOpera:pd,mobileGecko:md,retina:vd,passiveEvents:yd,canvas:_d,svg:bh,vml:Ld,inlineSvg:xd,mac:Ed,linux:wd},Ac=tt.msPointer?"MSPointerDown":"pointerdown",kc=tt.msPointer?"MSPointerMove":"pointermove",Fc=tt.msPointer?"MSPointerUp":"pointerup",zc=tt.msPointer?"MSPointerCancel":"pointercancel",oh={touchstart:Ac,touchmove:kc,touchend:Fc,touchcancel:zc},El={touchstart:Pd,touchmove:Na,touchend:Na,touchcancel:Na},Fr={},wl=!1;function Id(n,s,a){return s==="touchstart"&&Td(),El[s]?(a=El[s].bind(this,a),n.addEventListener(oh[s],a,!1),a):(console.warn("wrong event specified:",s),L.Util.falseFn)}function Cd(n,s,a){if(!oh[s]){console.warn("wrong event specified:",s);return}n.removeEventListener(oh[s],a,!1)}function Nd(n){Fr[n.pointerId]=n}function Sd(n){Fr[n.pointerId]&&(Fr[n.pointerId]=n)}function Il(n){delete Fr[n.pointerId]}function Td(){wl||(document.addEventListener(Ac,Nd,!0),document.addEventListener(kc,Sd,!0),document.addEventListener(Fc,Il,!0),document.addEventListener(zc,Il,!0),wl=!0)}function Na(n,s){if(s.pointerType!==(s.MSPOINTER_TYPE_MOUSE||"mouse")){s.touches=[];for(var a in Fr)s.touches.push(Fr[a]);s.changedTouches=[s],n(s)}}function Pd(n,s){s.MSPOINTER_TYPE_TOUCH&&s.pointerType===s.MSPOINTER_TYPE_TOUCH&&Ee(s),Na(n,s)}function bd(n){var s={},a,h;for(h in n)a=n[h],s[h]=a&&a.bind?a.bind(n):a;return n=s,s.type="dblclick",s.detail=2,s.isTrusted=!1,s._simulated=!0,s}var Md=200;function Od(n,s){n.addEventListener("dblclick",s);var a=0,h;function u(c){if(c.detail!==1){h=c.detail;return}if(!(c.pointerType==="mouse"||c.sourceCapabilities&&!c.sourceCapabilities.firesTouchEvents)){var g=Uc(c);if(!(g.some(function(v){return v instanceof HTMLLabelElement&&v.attributes.for})&&!g.some(function(v){return v instanceof HTMLInputElement||v instanceof HTMLSelectElement}))){var p=Date.now();p-a<=Md?(h++,h===2&&s(bd(c))):h=1,a=p}}}return n.addEventListener("click",u),{dblclick:s,simDblclick:u}}function Rd(n,s){n.removeEventListener("dblclick",s.dblclick),n.removeEventListener("click",s.simDblclick)}var Mh=Ba(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Bs=Ba(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Gc=Bs==="webkitTransition"||Bs==="OTransition"?Bs+"End":"transitionend";function Bc(n){return typeof n=="string"?document.getElementById(n):n}function Zs(n,s){var a=n.style[s]||n.currentStyle&&n.currentStyle[s];if((!a||a==="auto")&&document.defaultView){var h=document.defaultView.getComputedStyle(n,null);a=h?h[s]:null}return a==="auto"?null:a}function Ct(n,s,a){var h=document.createElement(n);return h.className=s||"",a&&a.appendChild(h),h}function Kt(n){var s=n.parentNode;s&&s.removeChild(n)}function ba(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function Ur(n){var s=n.parentNode;s&&s.lastChild!==n&&s.appendChild(n)}function Vr(n){var s=n.parentNode;s&&s.firstChild!==n&&s.insertBefore(n,s.firstChild)}function Oh(n,s){if(n.classList!==void 0)return n.classList.contains(s);var a=Ga(n);return a.length>0&&new RegExp("(^|\\s)"+s+"(\\s|$)").test(a)}function gt(n,s){if(n.classList!==void 0)for(var a=er(s),h=0,u=a.length;h<u;h++)n.classList.add(a[h]);else if(!Oh(n,s)){var c=Ga(n);Rh(n,(c?c+" ":"")+s)}}function se(n,s){n.classList!==void 0?n.classList.remove(s):Rh(n,Eh((" "+Ga(n)+" ").replace(" "+s+" "," ")))}function Rh(n,s){n.className.baseVal===void 0?n.className=s:n.className.baseVal=s}function Ga(n){return n.correspondingElement&&(n=n.correspondingElement),n.className.baseVal===void 0?n.className:n.className.baseVal}function hn(n,s){"opacity"in n.style?n.style.opacity=s:"filter"in n.style&&Dd(n,s)}function Dd(n,s){var a=!1,h="DXImageTransform.Microsoft.Alpha";try{a=n.filters.item(h)}catch{if(s===1)return}s=Math.round(s*100),a?(a.Enabled=s!==100,a.Opacity=s):n.style.filter+=" progid:"+h+"(opacity="+s+")"}function Ba(n){for(var s=document.documentElement.style,a=0;a<n.length;a++)if(n[a]in s)return n[a];return!1}function sr(n,s,a){var h=s||new ft(0,0);n.style[Mh]=(tt.ie3d?"translate("+h.x+"px,"+h.y+"px)":"translate3d("+h.x+"px,"+h.y+"px,0)")+(a?" scale("+a+")":"")}function he(n,s){n._leaflet_pos=s,tt.any3d?sr(n,s):(n.style.left=s.x+"px",n.style.top=s.y+"px")}function or(n){return n._leaflet_pos||new ft(0,0)}var Xs,Ys,Wu;if("onselectstart"in document)Xs=function(){ct(window,"selectstart",Ee)},Ys=function(){Bt(window,"selectstart",Ee)};else{var ks=Ba(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Xs=function(){if(ks){var n=document.documentElement.style;Wu=n[ks],n[ks]="none"}},Ys=function(){ks&&(document.documentElement.style[ks]=Wu,Wu=void 0)}}function Dh(){ct(window,"dragstart",Ee)}function Ah(){Bt(window,"dragstart",Ee)}var Sa,ah;function kh(n){for(;n.tabIndex===-1;)n=n.parentNode;!n.style||(Ma(),Sa=n,ah=n.style.outline,n.style.outline="none",ct(window,"keydown",Ma))}function Ma(){!Sa||(Sa.style.outline=ah,Sa=void 0,ah=void 0,Bt(window,"keydown",Ma))}function qc(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function Fh(n){var s=n.getBoundingClientRect();return{x:s.width/n.offsetWidth||1,y:s.height/n.offsetHeight||1,boundingClientRect:s}}var Ad={__proto__:null,TRANSFORM:Mh,TRANSITION:Bs,TRANSITION_END:Gc,get:Bc,getStyle:Zs,create:Ct,remove:Kt,empty:ba,toFront:Ur,toBack:Vr,hasClass:Oh,addClass:gt,removeClass:se,setClass:Rh,getClass:Ga,setOpacity:hn,testProp:Ba,setTransform:sr,setPosition:he,getPosition:or,get disableTextSelection(){return Xs},get enableTextSelection(){return Ys},disableImageDrag:Dh,enableImageDrag:Ah,preventOutline:kh,restoreOutline:Ma,getSizedParentNode:qc,getScale:Fh};function ct(n,s,a,h){if(s&&typeof s=="object")for(var u in s)hh(n,u,s[u],a);else{s=er(s);for(var c=0,g=s.length;c<g;c++)hh(n,s[c],a,h)}return this}var Zn="_leaflet_events";function Bt(n,s,a,h){if(arguments.length===1)Cl(n),delete n[Zn];else if(s&&typeof s=="object")for(var u in s)lh(n,u,s[u],a);else if(s=er(s),arguments.length===2)Cl(n,function(p){return wh(s,p)!==-1});else for(var c=0,g=s.length;c<g;c++)lh(n,s[c],a,h);return this}function Cl(n,s){for(var a in n[Zn]){var h=a.split(/\d/)[0];(!s||s(h))&&lh(n,h,null,null,a)}}var uh={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function hh(n,s,a,h){var u=s+Nt(a)+(h?"_"+Nt(h):"");if(n[Zn]&&n[Zn][u])return this;var c=function(p){return a.call(h||n,p||window.event)},g=c;!tt.touchNative&&tt.pointer&&s.indexOf("touch")===0?c=Id(n,s,c):tt.touch&&s==="dblclick"?c=Od(n,c):"addEventListener"in n?s==="touchstart"||s==="touchmove"||s==="wheel"||s==="mousewheel"?n.addEventListener(uh[s]||s,c,tt.passiveEvents?{passive:!1}:!1):s==="mouseenter"||s==="mouseleave"?(c=function(p){p=p||window.event,Gh(n,p)&&g(p)},n.addEventListener(uh[s],c,!1)):n.addEventListener(s,g,!1):n.attachEvent("on"+s,c),n[Zn]=n[Zn]||{},n[Zn][u]=c}function lh(n,s,a,h,u){u=u||s+Nt(a)+(h?"_"+Nt(h):"");var c=n[Zn]&&n[Zn][u];if(!c)return this;!tt.touchNative&&tt.pointer&&s.indexOf("touch")===0?Cd(n,s,c):tt.touch&&s==="dblclick"?Rd(n,c):"removeEventListener"in n?n.removeEventListener(uh[s]||s,c,!1):n.detachEvent("on"+s,c),n[Zn][u]=null}function nr(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,this}function zh(n){return hh(n,"wheel",nr),this}function to(n){return ct(n,"mousedown touchstart dblclick contextmenu",nr),n._leaflet_disable_click=!0,this}function Ee(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function ar(n){return Ee(n),nr(n),this}function Uc(n){if(n.composedPath)return n.composedPath();for(var s=[],a=n.target;a;)s.push(a),a=a.parentNode;return s}function Vc(n,s){if(!s)return new ft(n.clientX,n.clientY);var a=Fh(s),h=a.boundingClientRect;return new ft((n.clientX-h.left)/a.x-s.clientLeft,(n.clientY-h.top)/a.y-s.clientTop)}var kd=tt.linux&&tt.chrome?window.devicePixelRatio:tt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Hc(n){return tt.edge?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/kd:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}function Gh(n,s){var a=s.relatedTarget;if(!a)return!0;try{for(;a&&a!==n;)a=a.parentNode}catch{return!1}return a!==n}var Fd={__proto__:null,on:ct,off:Bt,stopPropagation:nr,disableScrollPropagation:zh,disableClickPropagation:to,preventDefault:Ee,stop:ar,getPropagationPath:Uc,getMousePosition:Vc,getWheelDelta:Hc,isExternalTarget:Gh,addListener:ct,removeListener:Bt},Zc=js.extend({run:function(n,s,a,h){this.stop(),this._el=n,this._inProgress=!0,this._duration=a||.25,this._easeOutPower=1/Math.max(h||.5,.2),this._startPos=or(n),this._offset=s.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=He(this._animate,this),this._step()},_step:function(n){var s=+new Date-this._startTime,a=this._duration*1e3;s<a?this._runFrame(this._easeOut(s/a),n):(this._runFrame(1),this._complete())},_runFrame:function(n,s){var a=this._startPos.add(this._offset.multiplyBy(n));s&&a._round(),he(this._el,a),this.fire("step")},_complete:function(){ln(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),Lt=js.extend({options:{crs:Ch,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,s){s=Wt(this,s),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(n),this._initLayout(),this._onResize=Yt(this._onResize,this),this._initEvents(),s.maxBounds&&this.setMaxBounds(s.maxBounds),s.zoom!==void 0&&(this._zoom=this._limitZoom(s.zoom)),s.center&&s.zoom!==void 0&&this.setView(Gt(s.center),s.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Bs&&tt.any3d&&!tt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ct(this._proxy,Gc,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(n,s,a){if(s=s===void 0?this._zoom:this._limitZoom(s),n=this._limitCenter(Gt(n),s,this.options.maxBounds),a=a||{},this._stop(),this._loaded&&!a.reset&&a!==!0){a.animate!==void 0&&(a.zoom=Dt({animate:a.animate},a.zoom),a.pan=Dt({animate:a.animate,duration:a.duration},a.pan));var h=this._zoom!==s?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,s,a.zoom):this._tryAnimatedPan(n,a.pan);if(h)return clearTimeout(this._sizeTimer),this}return this._resetView(n,s,a.pan&&a.pan.noMoveStart),this},setZoom:function(n,s){return this._loaded?this.setView(this.getCenter(),n,{zoom:s}):(this._zoom=n,this)},zoomIn:function(n,s){return n=n||(tt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+n,s)},zoomOut:function(n,s){return n=n||(tt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-n,s)},setZoomAround:function(n,s,a){var h=this.getZoomScale(s),u=this.getSize().divideBy(2),c=n instanceof ft?n:this.latLngToContainerPoint(n),g=c.subtract(u).multiplyBy(1-1/h),p=this.containerPointToLatLng(u.add(g));return this.setView(p,s,{zoom:a})},_getBoundsCenterZoom:function(n,s){s=s||{},n=n.getBounds?n.getBounds():ve(n);var a=lt(s.paddingTopLeft||s.padding||[0,0]),h=lt(s.paddingBottomRight||s.padding||[0,0]),u=this.getBoundsZoom(n,!1,a.add(h));if(u=typeof s.maxZoom=="number"?Math.min(s.maxZoom,u):u,u===1/0)return{center:n.getCenter(),zoom:u};var c=h.subtract(a).divideBy(2),g=this.project(n.getSouthWest(),u),p=this.project(n.getNorthEast(),u),v=this.unproject(g.add(p).divideBy(2).add(c),u);return{center:v,zoom:u}},fitBounds:function(n,s){if(n=ve(n),!n.isValid())throw new Error("Bounds are not valid.");var a=this._getBoundsCenterZoom(n,s);return this.setView(a.center,a.zoom,s)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,s){return this.setView(n,this._zoom,{pan:s})},panBy:function(n,s){if(n=lt(n).round(),s=s||{},!n.x&&!n.y)return this.fire("moveend");if(s.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Zc,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),s.noMoveStart||this.fire("movestart"),s.animate!==!1){gt(this._mapPane,"leaflet-pan-anim");var a=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,a,s.duration||.25,s.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,s,a){if(a=a||{},a.animate===!1||!tt.any3d)return this.setView(n,s,a);this._stop();var h=this.project(this.getCenter()),u=this.project(n),c=this.getSize(),g=this._zoom;n=Gt(n),s=s===void 0?g:s;var p=Math.max(c.x,c.y),v=p*this.getZoomScale(g,s),y=u.distanceTo(h)||1,_=1.42,I=_*_;function w(O){var M=O?-1:1,B=O?v:p,z=v*v-p*p+M*I*I*y*y,x=2*B*I*y,V=z/x,rt=Math.sqrt(V*V+1)-V,bt=rt<1e-9?-18:Math.log(rt);return bt}function D(O){return(Math.exp(O)-Math.exp(-O))/2}function P(O){return(Math.exp(O)+Math.exp(-O))/2}function C(O){return D(O)/P(O)}var Z=w(0);function Y(O){return p*(P(Z)/P(Z+_*O))}function X(O){return p*(P(Z)*C(Z+_*O)-D(Z))/I}function T(O){return 1-Math.pow(1-O,1.5)}var N=Date.now(),F=(w(1)-Z)/_,K=a.duration?1e3*a.duration:1e3*F*.8;function b(){var O=(Date.now()-N)/K,M=T(O)*F;O<=1?(this._flyToFrame=He(b,this),this._move(this.unproject(h.add(u.subtract(h).multiplyBy(X(M)/y)),g),this.getScaleZoom(p/Y(M),g),{flyTo:!0})):this._move(n,s)._moveEnd(!0)}return this._moveStart(!0,a.noMoveStart),b.call(this),this},flyToBounds:function(n,s){var a=this._getBoundsCenterZoom(n,s);return this.flyTo(a.center,a.zoom,s)},setMaxBounds:function(n){return n=ve(n),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),n.isValid()?(this.options.maxBounds=n,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(n){var s=this.options.minZoom;return this.options.minZoom=n,this._loaded&&s!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(n):this},setMaxZoom:function(n){var s=this.options.maxZoom;return this.options.maxZoom=n,this._loaded&&s!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(n):this},panInsideBounds:function(n,s){this._enforcingBounds=!0;var a=this.getCenter(),h=this._limitCenter(a,this._zoom,ve(n));return a.equals(h)||this.panTo(h,s),this._enforcingBounds=!1,this},panInside:function(n,s){s=s||{};var a=lt(s.paddingTopLeft||s.padding||[0,0]),h=lt(s.paddingBottomRight||s.padding||[0,0]),u=this.project(this.getCenter()),c=this.project(n),g=this.getPixelBounds(),p=Ve([g.min.add(a),g.max.subtract(h)]),v=p.getSize();if(!p.contains(c)){this._enforcingBounds=!0;var y=c.subtract(p.getCenter()),_=p.extend(c).getSize().subtract(v);u.x+=y.x<0?-_.x:_.x,u.y+=y.y<0?-_.y:_.y,this.panTo(this.unproject(u),s),this._enforcingBounds=!1}return this},invalidateSize:function(n){if(!this._loaded)return this;n=Dt({animate:!1,pan:!0},n===!0?{animate:!0}:n);var s=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var a=this.getSize(),h=s.divideBy(2).round(),u=a.divideBy(2).round(),c=h.subtract(u);return!c.x&&!c.y?this:(n.animate&&n.pan?this.panBy(c):(n.pan&&this._rawPanBy(c),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(Yt(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:s,newSize:a}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=Dt({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var s=Yt(this._handleGeolocationResponse,this),a=Yt(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(s,a,n):navigator.geolocation.getCurrentPosition(s,a,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){if(!!this._container._leaflet_id){var s=n.code,a=n.message||(s===1?"permission denied":s===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:s,message:"Geolocation error: "+a+"."})}},_handleGeolocationResponse:function(n){if(!!this._container._leaflet_id){var s=n.coords.latitude,a=n.coords.longitude,h=new zt(s,a),u=h.toBounds(n.coords.accuracy*2),c=this._locateOptions;if(c.setView){var g=this.getBoundsZoom(u);this.setView(h,c.maxZoom?Math.min(g,c.maxZoom):g)}var p={latlng:h,bounds:u,timestamp:n.timestamp};for(var v in n.coords)typeof n.coords[v]=="number"&&(p[v]=n.coords[v]);this.fire("locationfound",p)}},addHandler:function(n,s){if(!s)return this;var a=this[n]=new s(this);return this._handlers.push(a),this.options[n]&&a.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Kt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ln(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var n;for(n in this._layers)this._layers[n].remove();for(n in this._panes)Kt(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,s){var a="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),h=Ct("div",a,s||this._mapPane);return n&&(this._panes[n]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),s=this.unproject(n.getBottomLeft()),a=this.unproject(n.getTopRight());return new Ze(s,a)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,s,a){n=ve(n),a=lt(a||[0,0]);var h=this.getZoom()||0,u=this.getMinZoom(),c=this.getMaxZoom(),g=n.getNorthWest(),p=n.getSouthEast(),v=this.getSize().subtract(a),y=Ve(this.project(p,h),this.project(g,h)).getSize(),_=tt.any3d?this.options.zoomSnap:1,I=v.x/y.x,w=v.y/y.y,D=s?Math.max(I,w):Math.min(I,w);return h=this.getScaleZoom(D,h),_&&(h=Math.round(h/(_/100))*(_/100),h=s?Math.ceil(h/_)*_:Math.floor(h/_)*_),Math.max(u,Math.min(c,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ft(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,s){var a=this._getTopLeftPoint(n,s);return new jt(a,a.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===void 0?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,s){var a=this.options.crs;return s=s===void 0?this._zoom:s,a.scale(n)/a.scale(s)},getScaleZoom:function(n,s){var a=this.options.crs;s=s===void 0?this._zoom:s;var h=a.zoom(n*a.scale(s));return isNaN(h)?1/0:h},project:function(n,s){return s=s===void 0?this._zoom:s,this.options.crs.latLngToPoint(Gt(n),s)},unproject:function(n,s){return s=s===void 0?this._zoom:s,this.options.crs.pointToLatLng(lt(n),s)},layerPointToLatLng:function(n){var s=lt(n).add(this.getPixelOrigin());return this.unproject(s)},latLngToLayerPoint:function(n){var s=this.project(Gt(n))._round();return s._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(Gt(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(ve(n))},distance:function(n,s){return this.options.crs.distance(Gt(n),Gt(s))},containerPointToLayerPoint:function(n){return lt(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return lt(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var s=this.containerPointToLayerPoint(lt(n));return this.layerPointToLatLng(s)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Gt(n)))},mouseEventToContainerPoint:function(n){return Vc(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var s=this._container=Bc(n);if(s){if(s._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ct(s,"scroll",this._onScroll,this),this._containerId=Nt(s)},_initLayout:function(){var n=this._container;this._fadeAnimated=this.options.fadeAnimation&&tt.any3d,gt(n,"leaflet-container"+(tt.touch?" leaflet-touch":"")+(tt.retina?" leaflet-retina":"")+(tt.ielt9?" leaflet-oldie":"")+(tt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var s=Zs(n,"position");s!=="absolute"&&s!=="relative"&&s!=="fixed"&&(n.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),he(this._mapPane,new ft(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(gt(n.markerPane,"leaflet-zoom-hide"),gt(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,s,a){he(this._mapPane,new ft(0,0));var h=!this._loaded;this._loaded=!0,s=this._limitZoom(s),this.fire("viewprereset");var u=this._zoom!==s;this._moveStart(u,a)._move(n,s)._moveEnd(u),this.fire("viewreset"),h&&this.fire("load")},_moveStart:function(n,s){return n&&this.fire("zoomstart"),s||this.fire("movestart"),this},_move:function(n,s,a,h){s===void 0&&(s=this._zoom);var u=this._zoom!==s;return this._zoom=s,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),h?a&&a.pinch&&this.fire("zoom",a):((u||a&&a.pinch)&&this.fire("zoom",a),this.fire("move",a)),this},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ln(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){he(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(n){this._targets={},this._targets[Nt(this._container)]=this;var s=n?Bt:ct;s(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&s(window,"resize",this._onResize,this),tt.any3d&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ln(this._resizeRequest),this._resizeRequest=He(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,s){for(var a=[],h,u=s==="mouseout"||s==="mouseover",c=n.target||n.srcElement,g=!1;c;){if(h=this._targets[Nt(c)],h&&(s==="click"||s==="preclick")&&this._draggableMoved(h)){g=!0;break}if(h&&h.listens(s,!0)&&(u&&!Gh(c,n)||(a.push(h),u))||c===this._container)break;c=c.parentNode}return!a.length&&!g&&!u&&this.listens(s,!0)&&(a=[this]),a},_isClickDisabled:function(n){for(;n&&n!==this._container;){if(n._leaflet_disable_click)return!0;n=n.parentNode}},_handleDOMEvent:function(n){var s=n.target||n.srcElement;if(!(!this._loaded||s._leaflet_disable_events||n.type==="click"&&this._isClickDisabled(s))){var a=n.type;a==="mousedown"&&kh(s),this._fireDOMEvent(n,a)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,s,a){if(n.type==="click"){var h=Dt({},n);h.type="preclick",this._fireDOMEvent(h,h.type,a)}var u=this._findEventTargets(n,s);if(a){for(var c=[],g=0;g<a.length;g++)a[g].listens(s,!0)&&c.push(a[g]);u=c.concat(u)}if(!!u.length){s==="contextmenu"&&Ee(n);var p=u[0],v={originalEvent:n};if(n.type!=="keypress"&&n.type!=="keydown"&&n.type!=="keyup"){var y=p.getLatLng&&(!p._radius||p._radius<=10);v.containerPoint=y?this.latLngToContainerPoint(p.getLatLng()):this.mouseEventToContainerPoint(n),v.layerPoint=this.containerPointToLayerPoint(v.containerPoint),v.latlng=y?p.getLatLng():this.layerPointToLatLng(v.layerPoint)}for(g=0;g<u.length;g++)if(u[g].fire(s,v,!0),v.originalEvent._stopped||u[g].options.bubblingMouseEvents===!1&&wh(this._mouseEvents,s)!==-1)return}},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,s=this._handlers.length;n<s;n++)this._handlers[n].disable()},whenReady:function(n,s){return this._loaded?n.call(s||this,{target:this}):this.on("load",n,s),this},_getMapPanePos:function(){return or(this._mapPane)||new ft(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,s){var a=n&&s!==void 0?this._getNewPixelOrigin(n,s):this.getPixelOrigin();return a.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,s){var a=this.getSize()._divideBy(2);return this.project(n,s)._subtract(a)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,s,a){var h=this._getNewPixelOrigin(a,s);return this.project(n,s)._subtract(h)},_latLngBoundsToNewLayerBounds:function(n,s,a){var h=this._getNewPixelOrigin(a,s);return Ve([this.project(n.getSouthWest(),s)._subtract(h),this.project(n.getNorthWest(),s)._subtract(h),this.project(n.getSouthEast(),s)._subtract(h),this.project(n.getNorthEast(),s)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,s,a){if(!a)return n;var h=this.project(n,s),u=this.getSize().divideBy(2),c=new jt(h.subtract(u),h.add(u)),g=this._getBoundsOffset(c,a,s);return g.round().equals([0,0])?n:this.unproject(h.add(g),s)},_limitOffset:function(n,s){if(!s)return n;var a=this.getPixelBounds(),h=new jt(a.min.add(n),a.max.add(n));return n.add(this._getBoundsOffset(h,s))},_getBoundsOffset:function(n,s,a){var h=Ve(this.project(s.getNorthEast(),a),this.project(s.getSouthWest(),a)),u=h.min.subtract(n.min),c=h.max.subtract(n.max),g=this._rebound(u.x,-c.x),p=this._rebound(u.y,-c.y);return new ft(g,p)},_rebound:function(n,s){return n+s>0?Math.round(n-s)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(s))},_limitZoom:function(n){var s=this.getMinZoom(),a=this.getMaxZoom(),h=tt.any3d?this.options.zoomSnap:1;return h&&(n=Math.round(n/h)*h),Math.max(s,Math.min(a,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){se(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(n,s){var a=this._getCenterOffset(n)._trunc();return(s&&s.animate)!==!0&&!this.getSize().contains(a)?!1:(this.panBy(a,s),!0)},_createAnimProxy:function(){var n=this._proxy=Ct("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(s){var a=Mh,h=this._proxy.style[a];sr(this._proxy,this.project(s.center,s.zoom),this.getZoomScale(s.zoom,1)),h===this._proxy.style[a]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Kt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var n=this.getCenter(),s=this.getZoom();sr(this._proxy,this.project(n,s),this.getZoomScale(s,1))},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,s,a){if(this._animatingZoom)return!0;if(a=a||{},!this._zoomAnimated||a.animate===!1||this._nothingToAnimate()||Math.abs(s-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(s),u=this._getCenterOffset(n)._divideBy(1-1/h);return a.animate!==!0&&!this.getSize().contains(u)?!1:(He(function(){this._moveStart(!0,!1)._animateZoom(n,s,!0)},this),!0)},_animateZoom:function(n,s,a,h){!this._mapPane||(a&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=s,gt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:s,noUpdate:h}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(Yt(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&se(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function zd(n,s){return new Lt(n,s)}var In=ri.extend({options:{position:"topright"},initialize:function(n){Wt(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var s=this._map;return s&&s.removeControl(this),this.options.position=n,s&&s.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove(),this._map=n;var s=this._container=this.onAdd(n),a=this.getPosition(),h=n._controlCorners[a];return gt(s,"leaflet-control"),a.indexOf("bottom")!==-1?h.insertBefore(s,h.firstChild):h.appendChild(s),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Kt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}}),eo=function(n){return new In(n)};Lt.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){var n=this._controlCorners={},s="leaflet-",a=this._controlContainer=Ct("div",s+"control-container",this._container);function h(u,c){var g=s+u+" "+s+c;n[u+c]=Ct("div",g,a)}h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)Kt(this._controlCorners[n]);Kt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Xc=In.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,s,a,h){return a<h?-1:h<a?1:0}},initialize:function(n,s,a){Wt(this,a),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var h in n)this._addLayer(n[h],h);for(h in s)this._addLayer(s[h],h,!0)},onAdd:function(n){this._initLayout(),this._update(),this._map=n,n.on("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return In.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,s){return this._addLayer(n,s),this._map?this._update():this},addOverlay:function(n,s){return this._addLayer(n,s,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var s=this._getLayer(Nt(n));return s&&this._layers.splice(this._layers.indexOf(s),1),this._map?this._update():this},expand:function(){gt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._section.clientHeight?(gt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=n+"px"):se(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return se(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",s=this._container=Ct("div",n),a=this.options.collapsed;s.setAttribute("aria-haspopup",!0),to(s),zh(s);var h=this._section=Ct("section",n+"-list");a&&(this._map.on("click",this.collapse,this),ct(s,{mouseenter:function(){ct(h,"click",Ee),this.expand(),setTimeout(function(){Bt(h,"click",Ee)})},mouseleave:this.collapse},this));var u=this._layersLink=Ct("a",n+"-toggle",s);u.href="#",u.title="Layers",u.setAttribute("role","button"),ct(u,"click",Ee),ct(u,"focus",this.expand,this),a||this.expand(),this._baseLayersList=Ct("div",n+"-base",h),this._separator=Ct("div",n+"-separator",h),this._overlaysList=Ct("div",n+"-overlays",h),s.appendChild(h)},_getLayer:function(n){for(var s=0;s<this._layers.length;s++)if(this._layers[s]&&Nt(this._layers[s].layer)===n)return this._layers[s]},_addLayer:function(n,s,a){this._map&&n.on("add remove",this._onLayerChange,this),this._layers.push({layer:n,name:s,overlay:a}),this.options.sortLayers&&this._layers.sort(Yt(function(h,u){return this.options.sortFunction(h.layer,u.layer,h.name,u.name)},this)),this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ba(this._baseLayersList),ba(this._overlaysList),this._layerControlInputs=[];var n,s,a,h,u=0;for(a=0;a<this._layers.length;a++)h=this._layers[a],this._addItem(h),s=s||h.overlay,n=n||!h.overlay,u+=h.overlay?0:1;return this.options.hideSingleBase&&(n=n&&u>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=s&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var s=this._getLayer(Nt(n.target)),a=s.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;a&&this._map.fire(a,s)},_createRadioElement:function(n,s){var a='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(s?' checked="checked"':"")+"/>",h=document.createElement("div");return h.innerHTML=a,h.firstChild},_addItem:function(n){var s=document.createElement("label"),a=this._map.hasLayer(n.layer),h;n.overlay?(h=document.createElement("input"),h.type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=a):h=this._createRadioElement("leaflet-base-layers_"+Nt(this),a),this._layerControlInputs.push(h),h.layerId=Nt(n.layer),ct(h,"click",this._onInputClick,this);var u=document.createElement("span");u.innerHTML=" "+n.name;var c=document.createElement("span");s.appendChild(c),c.appendChild(h),c.appendChild(u);var g=n.overlay?this._overlaysList:this._baseLayersList;return g.appendChild(s),this._checkDisabledLayers(),s},_onInputClick:function(){var n=this._layerControlInputs,s,a,h=[],u=[];this._handlingClick=!0;for(var c=n.length-1;c>=0;c--)s=n[c],a=this._getLayer(s.layerId).layer,s.checked?h.push(a):s.checked||u.push(a);for(c=0;c<u.length;c++)this._map.hasLayer(u[c])&&this._map.removeLayer(u[c]);for(c=0;c<h.length;c++)this._map.hasLayer(h[c])||this._map.addLayer(h[c]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var n=this._layerControlInputs,s,a,h=this._map.getZoom(),u=n.length-1;u>=0;u--)s=n[u],a=this._getLayer(s.layerId).layer,s.disabled=a.options.minZoom!==void 0&&h<a.options.minZoom||a.options.maxZoom!==void 0&&h>a.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this}}),Gd=function(n,s,a){return new Xc(n,s,a)},Bh=In.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(n){var s="leaflet-control-zoom",a=Ct("div",s+" leaflet-bar"),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,s+"-in",a,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,s+"-out",a,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),a},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,s,a,h,u){var c=Ct("a",a,h);return c.innerHTML=n,c.href="#",c.title=s,c.setAttribute("role","button"),c.setAttribute("aria-label",s),to(c),ct(c,"click",ar),ct(c,"click",u,this),ct(c,"click",this._refocusOnMap,this),c},_updateDisabled:function(){var n=this._map,s="leaflet-disabled";se(this._zoomInButton,s),se(this._zoomOutButton,s),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||n._zoom===n.getMinZoom())&&(gt(this._zoomOutButton,s),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||n._zoom===n.getMaxZoom())&&(gt(this._zoomInButton,s),this._zoomInButton.setAttribute("aria-disabled","true"))}});Lt.mergeOptions({zoomControl:!0});Lt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Bh,this.addControl(this.zoomControl))});var Bd=function(n){return new Bh(n)},Yc=In.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var s="leaflet-control-scale",a=Ct("div",s),h=this.options;return this._addScales(h,s+"-line",a),n.on(h.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),a},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,s,a){n.metric&&(this._mScale=Ct("div",s,a)),n.imperial&&(this._iScale=Ct("div",s,a))},_update:function(){var n=this._map,s=n.getSize().y/2,a=n.distance(n.containerPointToLatLng([0,s]),n.containerPointToLatLng([this.options.maxWidth,s]));this._updateScales(a)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n),this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var s=this._getRoundNum(n),a=s<1e3?s+" m":s/1e3+" km";this._updateScale(this._mScale,a,s/n)},_updateImperial:function(n){var s=n*3.2808399,a,h,u;s>5280?(a=s/5280,h=this._getRoundNum(a),this._updateScale(this._iScale,h+" mi",h/a)):(u=this._getRoundNum(s),this._updateScale(this._iScale,u+" ft",u/s))},_updateScale:function(n,s,a){n.style.width=Math.round(this.options.maxWidth*a)+"px",n.innerHTML=s},_getRoundNum:function(n){var s=Math.pow(10,(Math.floor(n)+"").length-1),a=n/s;return a=a>=10?10:a>=5?5:a>=3?3:a>=2?2:1,s*a}}),qd=function(n){return new Yc(n)},Ud='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',qh=In.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(tt.inlineSvg?Ud+" ":"")+"Leaflet</a>"},initialize:function(n){Wt(this,n),this._attributions={}},onAdd:function(n){n.attributionControl=this,this._container=Ct("div","leaflet-control-attribution"),to(this._container);for(var s in n._layers)n._layers[s].getAttribution&&this.addAttribution(n._layers[s].getAttribution());return this._update(),n.on("layeradd",this._addAttribution,this),this._container},onRemove:function(n){n.off("layeradd",this._addAttribution,this)},_addAttribution:function(n){n.layer.getAttribution&&(this.addAttribution(n.layer.getAttribution()),n.layer.once("remove",function(){this.removeAttribution(n.layer.getAttribution())},this))},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){if(!!this._map){var n=[];for(var s in this._attributions)this._attributions[s]&&n.push(s);var a=[];this.options.prefix&&a.push(this.options.prefix),n.length&&a.push(n.join(", ")),this._container.innerHTML=a.join(' <span aria-hidden="true">|</span> ')}}});Lt.mergeOptions({attributionControl:!0});Lt.addInitHook(function(){this.options.attributionControl&&new qh().addTo(this)});var Vd=function(n){return new qh(n)};In.Layers=Xc;In.Zoom=Bh;In.Scale=Yc;In.Attribution=qh;eo.layers=Gd;eo.zoom=Bd;eo.scale=qd;eo.attribution=Vd;var Wn=ri.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Wn.addTo=function(n,s){return n.addHandler(s,this),this};var Hd={Events:$e},Nl=tt.touch?"touchstart mousedown":"mousedown",bi=js.extend({options:{clickTolerance:3},initialize:function(n,s,a,h){Wt(this,h),this._element=n,this._dragStartTarget=s||n,this._preventOutline=a},enable:function(){this._enabled||(ct(this._dragStartTarget,Nl,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(bi._dragging===this&&this.finishDrag(!0),Bt(this._dragStartTarget,Nl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(!!this._enabled&&(this._moved=!1,!Oh(this._element,"leaflet-zoom-anim"))){if(n.touches&&n.touches.length!==1){bi._dragging===this&&this.finishDrag();return}if(!(bi._dragging||n.shiftKey||n.which!==1&&n.button!==1&&!n.touches)&&(bi._dragging=this,this._preventOutline&&kh(this._element),Dh(),Xs(),!this._moving)){this.fire("down");var s=n.touches?n.touches[0]:n,a=qc(this._element);this._startPoint=new ft(s.clientX,s.clientY),this._startPos=or(this._element),this._parentScale=Fh(a);var h=n.type==="mousedown";ct(document,h?"mousemove":"touchmove",this._onMove,this),ct(document,h?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(n){if(!!this._enabled){if(n.touches&&n.touches.length>1){this._moved=!0;return}var s=n.touches&&n.touches.length===1?n.touches[0]:n,a=new ft(s.clientX,s.clientY)._subtract(this._startPoint);!a.x&&!a.y||Math.abs(a.x)+Math.abs(a.y)<this.options.clickTolerance||(a.x/=this._parentScale.x,a.y/=this._parentScale.y,Ee(n),this._moved||(this.fire("dragstart"),this._moved=!0,gt(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),gt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(a),this._moving=!0,this._lastEvent=n,this._updatePosition())}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n),he(this._element,this._newPos),this.fire("drag",n)},_onUp:function(){!this._enabled||this.finishDrag()},finishDrag:function(n){se(document.body,"leaflet-dragging"),this._lastTarget&&(se(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Bt(document,"mousemove touchmove",this._onMove,this),Bt(document,"mouseup touchend touchcancel",this._onUp,this),Ah(),Ys(),this._moved&&this._moving&&this.fire("dragend",{noInertia:n,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,bi._dragging=!1}});function Wc(n,s){if(!s||!n.length)return n.slice();var a=s*s;return n=Yd(n,a),n=Xd(n,a),n}function Jc(n,s,a){return Math.sqrt(no(n,s,a,!0))}function Zd(n,s,a){return no(n,s,a)}function Xd(n,s){var a=n.length,h=typeof Uint8Array!=void 0+""?Uint8Array:Array,u=new h(a);u[0]=u[a-1]=1,ch(n,u,s,0,a-1);var c,g=[];for(c=0;c<a;c++)u[c]&&g.push(n[c]);return g}function ch(n,s,a,h,u){var c=0,g,p,v;for(p=h+1;p<=u-1;p++)v=no(n[p],n[h],n[u],!0),v>c&&(g=p,c=v);c>a&&(s[g]=1,ch(n,s,a,h,g),ch(n,s,a,g,u))}function Yd(n,s){for(var a=[n[0]],h=1,u=0,c=n.length;h<c;h++)Wd(n[h],n[u])>s&&(a.push(n[h]),u=h);return u<c-1&&a.push(n[c-1]),a}var Sl;function Kc(n,s,a,h,u){var c=h?Sl:ir(n,a),g=ir(s,a),p,v,y;for(Sl=g;;){if(!(c|g))return[n,s];if(c&g)return!1;p=c||g,v=Oa(n,s,p,a,u),y=ir(v,a),p===c?(n=v,c=y):(s=v,g=y)}}function Oa(n,s,a,h,u){var c=s.x-n.x,g=s.y-n.y,p=h.min,v=h.max,y,_;return a&8?(y=n.x+c*(v.y-n.y)/g,_=v.y):a&4?(y=n.x+c*(p.y-n.y)/g,_=p.y):a&2?(y=v.x,_=n.y+g*(v.x-n.x)/c):a&1&&(y=p.x,_=n.y+g*(p.x-n.x)/c),new ft(y,_,u)}function ir(n,s){var a=0;return n.x<s.min.x?a|=1:n.x>s.max.x&&(a|=2),n.y<s.min.y?a|=4:n.y>s.max.y&&(a|=8),a}function Wd(n,s){var a=s.x-n.x,h=s.y-n.y;return a*a+h*h}function no(n,s,a,h){var u=s.x,c=s.y,g=a.x-u,p=a.y-c,v=g*g+p*p,y;return v>0&&(y=((n.x-u)*g+(n.y-c)*p)/v,y>1?(u=a.x,c=a.y):y>0&&(u+=g*y,c+=p*y)),g=n.x-u,p=n.y-c,h?g*g+p*p:new ft(u,c)}function cn(n){return!Cn(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]<"u"}function jc(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),cn(n)}function $c(n,s){var a,h,u,c,g,p,v,y;if(!n||n.length===0)throw new Error("latlngs not passed");cn(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var _=[];for(var I in n)_.push(s.project(Gt(n[I])));var w=_.length;for(a=0,h=0;a<w-1;a++)h+=_[a].distanceTo(_[a+1])/2;if(h===0)y=_[0];else for(a=0,c=0;a<w-1;a++)if(g=_[a],p=_[a+1],u=g.distanceTo(p),c+=u,c>h){v=(c-h)/u,y=[p.x-v*(p.x-g.x),p.y-v*(p.y-g.y)];break}return s.unproject(lt(y))}var Jd={__proto__:null,simplify:Wc,pointToSegmentDistance:Jc,closestPointOnSegment:Zd,clipSegment:Kc,_getEdgeIntersection:Oa,_getBitCode:ir,_sqClosestPointOnSegment:no,isFlat:cn,_flat:jc,polylineCenter:$c};function Qc(n,s,a){var h,u=[1,4,2,8],c,g,p,v,y,_,I,w;for(c=0,_=n.length;c<_;c++)n[c]._code=ir(n[c],s);for(p=0;p<4;p++){for(I=u[p],h=[],c=0,_=n.length,g=_-1;c<_;g=c++)v=n[c],y=n[g],v._code&I?y._code&I||(w=Oa(y,v,I,s,a),w._code=ir(w,s),h.push(w)):(y._code&I&&(w=Oa(y,v,I,s,a),w._code=ir(w,s),h.push(w)),h.push(v));n=h}return n}function tf(n,s){var a,h,u,c,g,p,v,y,_;if(!n||n.length===0)throw new Error("latlngs not passed");cn(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var I=[];for(var w in n)I.push(s.project(Gt(n[w])));var D=I.length;for(p=v=y=0,a=0,h=D-1;a<D;h=a++)u=I[a],c=I[h],g=u.y*c.x-c.y*u.x,v+=(u.x+c.x)*g,y+=(u.y+c.y)*g,p+=g*3;return p===0?_=I[0]:_=[v/p,y/p],s.unproject(lt(_))}var Kd={__proto__:null,clipPolygon:Qc,polygonCenter:tf},Uh={project:function(n){return new ft(n.lng,n.lat)},unproject:function(n){return new zt(n.y,n.x)},bounds:new jt([-180,-90],[180,90])},fh={R:6378137,R_MINOR:6356752314245179e-9,bounds:new jt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(n){var s=Math.PI/180,a=this.R,h=n.lat*s,u=this.R_MINOR/a,c=Math.sqrt(1-u*u),g=c*Math.sin(h),p=Math.tan(Math.PI/4-h/2)/Math.pow((1-g)/(1+g),c/2);return h=-a*Math.log(Math.max(p,1e-10)),new ft(n.lng*s*a,h)},unproject:function(n){for(var s=180/Math.PI,a=this.R,h=this.R_MINOR/a,u=Math.sqrt(1-h*h),c=Math.exp(-n.y/a),g=Math.PI/2-2*Math.atan(c),p=0,v=.1,y;p<15&&Math.abs(v)>1e-7;p++)y=u*Math.sin(g),y=Math.pow((1-y)/(1+y),u/2),v=Math.PI/2-2*Math.atan(c*y)-g,g+=v;return new zt(g*s,n.x*s/a)}},jd={__proto__:null,LonLat:Uh,Mercator:fh,SphericalMercator:sh},$d=Dt({},Mi,{code:"EPSG:3395",projection:fh,transformation:function(){var n=.5/(Math.PI*fh.R);return $s(n,.5,-n,.5)}()}),ef=Dt({},Mi,{code:"EPSG:4326",projection:Uh,transformation:$s(1/180,1,-1/180,.5)}),Qd=Dt({},si,{projection:Uh,transformation:$s(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,s){var a=s.lng-n.lng,h=s.lat-n.lat;return Math.sqrt(a*a+h*h)},infinite:!0});si.Earth=Mi;si.EPSG3395=$d;si.EPSG3857=Ch;si.EPSG900913=sd;si.EPSG4326=ef;si.Simple=Qd;var Nn=js.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[Nt(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[Nt(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var s=n.target;if(!!s.hasLayer(this)){if(this._map=s,this._zoomAnimated=s._zoomAnimated,this.getEvents){var a=this.getEvents();s.on(a,this),this.once("remove",function(){s.off(a,this)},this)}this.onAdd(s),this.fire("add"),s.fire("layeradd",{layer:this})}}});Lt.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var s=Nt(n);return this._layers[s]?this:(this._layers[s]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var s=Nt(n);return this._layers[s]?(this._loaded&&n.onRemove(this),delete this._layers[s],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return Nt(n)in this._layers},eachLayer:function(n,s){for(var a in this._layers)n.call(s,this._layers[a]);return this},_addLayers:function(n){n=n?Cn(n)?n:[n]:[];for(var s=0,a=n.length;s<a;s++)this.addLayer(n[s])},_addZoomLimit:function(n){(!isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[Nt(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var s=Nt(n);this._zoomBoundLayers[s]&&(delete this._zoomBoundLayers[s],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,s=-1/0,a=this._getZoomSpan();for(var h in this._zoomBoundLayers){var u=this._zoomBoundLayers[h].options;n=u.minZoom===void 0?n:Math.min(n,u.minZoom),s=u.maxZoom===void 0?s:Math.max(s,u.maxZoom)}this._layersMaxZoom=s===-1/0?void 0:s,this._layersMinZoom=n===1/0?void 0:n,a!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ar=Nn.extend({initialize:function(n,s){Wt(this,s),this._layers={};var a,h;if(n)for(a=0,h=n.length;a<h;a++)this.addLayer(n[a])},addLayer:function(n){var s=this.getLayerId(n);return this._layers[s]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var s=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[s]&&this._map.removeLayer(this._layers[s]),delete this._layers[s],this},hasLayer:function(n){var s=typeof n=="number"?n:this.getLayerId(n);return s in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var s=Array.prototype.slice.call(arguments,1),a,h;for(a in this._layers)h=this._layers[a],h[n]&&h[n].apply(h,s);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,s){for(var a in this._layers)n.call(s,this._layers[a]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return Nt(n)}}),tp=function(n,s){return new Ar(n,s)},rr=Ar.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),Ar.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),Ar.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new Ze;for(var s in this._layers){var a=this._layers[s];n.extend(a.getBounds?a.getBounds():a.getLatLng())}return n}}),ep=function(n,s){return new rr(n,s)},zr=ri.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(n){Wt(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,s){var a=this._getIconUrl(n);if(!a){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var h=this._createImg(a,s&&s.tagName==="IMG"?s:null);return this._setIconStyles(h,n),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),h},_setIconStyles:function(n,s){var a=this.options,h=a[s+"Size"];typeof h=="number"&&(h=[h,h]);var u=lt(h),c=lt(s==="shadow"&&a.shadowAnchor||a.iconAnchor||u&&u.divideBy(2,!0));n.className="leaflet-marker-"+s+" "+(a.className||""),c&&(n.style.marginLeft=-c.x+"px",n.style.marginTop=-c.y+"px"),u&&(n.style.width=u.x+"px",n.style.height=u.y+"px")},_createImg:function(n,s){return s=s||document.createElement("img"),s.src=n,s},_getIconUrl:function(n){return tt.retina&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});function np(n){return new zr(n)}var qs=zr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return typeof qs.imagePath!="string"&&(qs.imagePath=this._detectIconPath()),(this.options.imagePath||qs.imagePath)+zr.prototype._getIconUrl.call(this,n)},_stripUrl:function(n){var s=function(a,h,u){var c=h.exec(a);return c&&c[u]};return n=s(n,/^url\((['"])?(.+)\1\)$/,2),n&&s(n,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var n=Ct("div","leaflet-default-icon-path",document.body),s=Zs(n,"background-image")||Zs(n,"backgroundImage");if(document.body.removeChild(n),s=this._stripUrl(s),s)return s;var a=document.querySelector('link[href$="leaflet.css"]');return a?a.href.substring(0,a.href.length-11-1):""}}),Tl=Wn.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new bi(n,n,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),gt(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&se(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var s=this._marker,a=s._map,h=this._marker.options.autoPanSpeed,u=this._marker.options.autoPanPadding,c=or(s._icon),g=a.getPixelBounds(),p=a.getPixelOrigin(),v=Ve(g.min._subtract(p).add(u),g.max._subtract(p).subtract(u));if(!v.contains(c)){var y=lt((Math.max(v.max.x,c.x)-v.max.x)/(g.max.x-v.max.x)-(Math.min(v.min.x,c.x)-v.min.x)/(g.min.x-v.min.x),(Math.max(v.max.y,c.y)-v.max.y)/(g.max.y-v.max.y)-(Math.min(v.min.y,c.y)-v.min.y)/(g.min.y-v.min.y)).multiplyBy(h);a.panBy(y,{animate:!1}),this._draggable._newPos._add(y),this._draggable._startPos._add(y),he(s._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=He(this._adjustPan.bind(this,n))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(ln(this._panRequest),this._panRequest=He(this._adjustPan.bind(this,n)))},_onDrag:function(n){var s=this._marker,a=s._shadow,h=or(s._icon),u=s._map.layerPointToLatLng(h);a&&he(a,h),s._latlng=u,n.latlng=u,n.oldLatLng=this._oldLatLng,s.fire("move",n).fire("drag",n)},_onDragEnd:function(n){ln(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",n)}}),qa=Nn.extend({options:{icon:new qs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,s){Wt(this,s),this._latlng=Gt(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated&&n.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var s=this._latlng;return this._latlng=Gt(n),this.update(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},getIcon:function(){return this.options.icon},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,s="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),a=n.icon.createIcon(this._icon),h=!1;a!==this._icon&&(this._icon&&this._removeIcon(),h=!0,n.title&&(a.title=n.title),a.tagName==="IMG"&&(a.alt=n.alt||"")),gt(a,s),n.keyboard&&(a.tabIndex="0",a.setAttribute("role","button")),this._icon=a,n.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ct(a,"focus",this._panOnFocus,this);var u=n.icon.createShadow(this._shadow),c=!1;u!==this._shadow&&(this._removeShadow(),c=!0),u&&(gt(u,s),u.alt=""),this._shadow=u,n.opacity<1&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),u&&c&&this.getPane(n.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Bt(this._icon,"focus",this._panOnFocus,this),Kt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Kt(this._shadow),this._shadow=null},_setPos:function(n){this._icon&&he(this._icon,n),this._shadow&&he(this._shadow,n),this._zIndex=n.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(n){this._icon&&(this._icon.style.zIndex=this._zIndex+n)},_animateZoom:function(n){var s=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(s)},_initInteraction:function(){if(!!this.options.interactive&&(gt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Tl)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Tl(this),n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;this._icon&&hn(this._icon,n),this._shadow&&hn(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var n=this._map;if(!!n){var s=this.options.icon.options,a=s.iconSize?lt(s.iconSize):lt(0,0),h=s.iconAnchor?lt(s.iconAnchor):lt(0,0);n.panInside(this._latlng,{paddingTopLeft:h,paddingBottomRight:a.subtract(h)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ip(n,s){return new qa(n,s)}var Oi=Nn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return Wt(this,n),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&n&&Object.prototype.hasOwnProperty.call(n,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ua=Oi.extend({options:{fill:!0,radius:10},initialize:function(n,s){Wt(this,s),this._latlng=Gt(n),this._radius=this.options.radius},setLatLng:function(n){var s=this._latlng;return this._latlng=Gt(n),this.redraw(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var s=n&&n.radius||this._radius;return Oi.prototype.setStyle.call(this,n),this.setRadius(s),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var n=this._radius,s=this._radiusY||n,a=this._clickTolerance(),h=[n+a,s+a];this._pxBounds=new jt(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function rp(n,s){return new Ua(n,s)}var Vh=Ua.extend({initialize:function(n,s,a){if(typeof s=="number"&&(s=Dt({},a,{radius:s})),Wt(this,s),this._latlng=Gt(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new Ze(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:Oi.prototype.setStyle,_project:function(){var n=this._latlng.lng,s=this._latlng.lat,a=this._map,h=a.options.crs;if(h.distance===Mi.distance){var u=Math.PI/180,c=this._mRadius/Mi.R/u,g=a.project([s+c,n]),p=a.project([s-c,n]),v=g.add(p).divideBy(2),y=a.unproject(v).lat,_=Math.acos((Math.cos(c*u)-Math.sin(s*u)*Math.sin(y*u))/(Math.cos(s*u)*Math.cos(y*u)))/u;(isNaN(_)||_===0)&&(_=c/Math.cos(Math.PI/180*s)),this._point=v.subtract(a.getPixelOrigin()),this._radius=isNaN(_)?0:v.x-a.project([y,n-_]).x,this._radiusY=v.y-g.y}else{var I=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=a.latLngToLayerPoint(this._latlng),this._radius=this._point.x-a.latLngToLayerPoint(I).x}this._updateBounds()}});function sp(n,s,a){return new Vh(n,s,a)}var ii=Oi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,s){Wt(this,s),this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var s=1/0,a=null,h=no,u,c,g=0,p=this._parts.length;g<p;g++)for(var v=this._parts[g],y=1,_=v.length;y<_;y++){u=v[y-1],c=v[y];var I=h(n,u,c,!0);I<s&&(s=I,a=h(n,u,c))}return a&&(a.distance=Math.sqrt(s)),a},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return $c(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(n,s){return s=s||this._defaultShape(),n=Gt(n),s.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new Ze,this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return cn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var s=[],a=cn(n),h=0,u=n.length;h<u;h++)a?(s[h]=Gt(n[h]),this._bounds.extend(s[h])):s[h]=this._convertLatLngs(n[h]);return s},_project:function(){var n=new jt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,n),this._bounds.isValid()&&n.isValid()&&(this._rawPxBounds=n,this._updateBounds())},_updateBounds:function(){var n=this._clickTolerance(),s=new ft(n,n);!this._rawPxBounds||(this._pxBounds=new jt([this._rawPxBounds.min.subtract(s),this._rawPxBounds.max.add(s)]))},_projectLatlngs:function(n,s,a){var h=n[0]instanceof zt,u=n.length,c,g;if(h){for(g=[],c=0;c<u;c++)g[c]=this._map.latLngToLayerPoint(n[c]),a.extend(g[c]);s.push(g)}else for(c=0;c<u;c++)this._projectLatlngs(n[c],s,a)},_clipPoints:function(){var n=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}var s=this._parts,a,h,u,c,g,p,v;for(a=0,u=0,c=this._rings.length;a<c;a++)for(v=this._rings[a],h=0,g=v.length;h<g-1;h++)p=Kc(v[h],v[h+1],n,h,!0),p&&(s[u]=s[u]||[],s[u].push(p[0]),(p[1]!==v[h+1]||h===g-2)&&(s[u].push(p[1]),u++))}},_simplifyPoints:function(){for(var n=this._parts,s=this.options.smoothFactor,a=0,h=n.length;a<h;a++)n[a]=Wc(n[a],s)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,s){var a,h,u,c,g,p,v=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(a=0,c=this._parts.length;a<c;a++)for(p=this._parts[a],h=0,g=p.length,u=g-1;h<g;u=h++)if(!(!s&&h===0)&&Jc(n,p[u],p[h])<=v)return!0;return!1}});function op(n,s){return new ii(n,s)}ii._flat=jc;var Gr=ii.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return tf(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(n){var s=ii.prototype._convertLatLngs.call(this,n),a=s.length;return a>=2&&s[0]instanceof zt&&s[0].equals(s[a-1])&&s.pop(),s},_setLatLngs:function(n){ii.prototype._setLatLngs.call(this,n),cn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return cn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,s=this.options.weight,a=new ft(s,s);if(n=new jt(n.min.subtract(a),n.max.add(a)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}for(var h=0,u=this._rings.length,c;h<u;h++)c=Qc(this._rings[h],n,!0),c.length&&this._parts.push(c)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var s=!1,a,h,u,c,g,p,v,y;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(c=0,v=this._parts.length;c<v;c++)for(a=this._parts[c],g=0,y=a.length,p=y-1;g<y;p=g++)h=a[g],u=a[p],h.y>n.y!=u.y>n.y&&n.x<(u.x-h.x)*(n.y-h.y)/(u.y-h.y)+h.x&&(s=!s);return s||ii.prototype._containsPoint.call(this,n,!0)}});function ap(n,s){return new Gr(n,s)}var oi=rr.extend({initialize:function(n,s){Wt(this,s),this._layers={},n&&this.addData(n)},addData:function(n){var s=Cn(n)?n:n.features,a,h,u;if(s){for(a=0,h=s.length;a<h;a++)u=s[a],(u.geometries||u.geometry||u.features||u.coordinates)&&this.addData(u);return this}var c=this.options;if(c.filter&&!c.filter(n))return this;var g=Ra(n,c);return g?(g.feature=Ha(n),g.defaultOptions=g.options,this.resetStyle(g),c.onEachFeature&&c.onEachFeature(n,g),this.addLayer(g)):this},resetStyle:function(n){return n===void 0?this.eachLayer(this.resetStyle,this):(n.options=Dt({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this)},setStyle:function(n){return this.eachLayer(function(s){this._setLayerStyle(s,n)},this)},_setLayerStyle:function(n,s){n.setStyle&&(typeof s=="function"&&(s=s(n.feature)),n.setStyle(s))}});function Ra(n,s){var a=n.type==="Feature"?n.geometry:n,h=a?a.coordinates:null,u=[],c=s&&s.pointToLayer,g=s&&s.coordsToLatLng||Hh,p,v,y,_;if(!h&&!a)return null;switch(a.type){case"Point":return p=g(h),Pl(c,n,p,s);case"MultiPoint":for(y=0,_=h.length;y<_;y++)p=g(h[y]),u.push(Pl(c,n,p,s));return new rr(u);case"LineString":case"MultiLineString":return v=Da(h,a.type==="LineString"?0:1,g),new ii(v,s);case"Polygon":case"MultiPolygon":return v=Da(h,a.type==="Polygon"?1:2,g),new Gr(v,s);case"GeometryCollection":for(y=0,_=a.geometries.length;y<_;y++){var I=Ra({geometry:a.geometries[y],type:"Feature",properties:n.properties},s);I&&u.push(I)}return new rr(u);case"FeatureCollection":for(y=0,_=a.features.length;y<_;y++){var w=Ra(a.features[y],s);w&&u.push(w)}return new rr(u);default:throw new Error("Invalid GeoJSON object.")}}function Pl(n,s,a,h){return n?n(s,a):new qa(a,h&&h.markersInheritOptions&&h)}function Hh(n){return new zt(n[1],n[0],n[2])}function Da(n,s,a){for(var h=[],u=0,c=n.length,g;u<c;u++)g=s?Da(n[u],s-1,a):(a||Hh)(n[u]),h.push(g);return h}function Zh(n,s){return n=Gt(n),n.alt!==void 0?[Hn(n.lng,s),Hn(n.lat,s),Hn(n.alt,s)]:[Hn(n.lng,s),Hn(n.lat,s)]}function Va(n,s,a,h){for(var u=[],c=0,g=n.length;c<g;c++)u.push(s?Va(n[c],cn(n[c])?0:s-1,a,h):Zh(n[c],h));return!s&&a&&u.push(u[0]),u}function Br(n,s){return n.feature?Dt({},n.feature,{geometry:s}):Ha(s)}function Ha(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}var Xh={toGeoJSON:function(n){return Br(this,{type:"Point",coordinates:Zh(this.getLatLng(),n)})}};qa.include(Xh);Vh.include(Xh);Ua.include(Xh);ii.include({toGeoJSON:function(n){var s=!cn(this._latlngs),a=Va(this._latlngs,s?1:0,!1,n);return Br(this,{type:(s?"Multi":"")+"LineString",coordinates:a})}});Gr.include({toGeoJSON:function(n){var s=!cn(this._latlngs),a=s&&!cn(this._latlngs[0]),h=Va(this._latlngs,a?2:s?1:0,!0,n);return s||(h=[h]),Br(this,{type:(a?"Multi":"")+"Polygon",coordinates:h})}});Ar.include({toMultiPoint:function(n){var s=[];return this.eachLayer(function(a){s.push(a.toGeoJSON(n).geometry.coordinates)}),Br(this,{type:"MultiPoint",coordinates:s})},toGeoJSON:function(n){var s=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(s==="MultiPoint")return this.toMultiPoint(n);var a=s==="GeometryCollection",h=[];return this.eachLayer(function(u){if(u.toGeoJSON){var c=u.toGeoJSON(n);if(a)h.push(c.geometry);else{var g=Ha(c);g.type==="FeatureCollection"?h.push.apply(h,g.features):h.push(g)}}}),a?Br(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}});function nf(n,s){return new oi(n,s)}var up=nf,Za=Nn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,s,a){this._url=n,this._bounds=ve(s),Wt(this,a)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(gt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Kt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&Ur(this._image),this},bringToBack:function(){return this._map&&Vr(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=ve(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var n=this._url.tagName==="IMG",s=this._image=n?this._url:Ct("img");if(gt(s,"leaflet-image-layer"),this._zoomAnimated&&gt(s,"leaflet-zoom-animated"),this.options.className&&gt(s,this.options.className),s.onselectstart=ue,s.onmousemove=ue,s.onload=Yt(this.fire,this,"load"),s.onerror=Yt(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),n){this._url=s.src;return}s.src=this._url,s.alt=this.options.alt},_animateZoom:function(n){var s=this._map.getZoomScale(n.zoom),a=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;sr(this._image,a,s)},_reset:function(){var n=this._image,s=new jt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),a=s.getSize();he(n,s.min),n.style.width=a.x+"px",n.style.height=a.y+"px"},_updateOpacity:function(){hn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)},getCenter:function(){return this._bounds.getCenter()}}),hp=function(n,s,a){return new Za(n,s,a)},rf=Za.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var n=this._url.tagName==="VIDEO",s=this._image=n?this._url:Ct("video");if(gt(s,"leaflet-image-layer"),this._zoomAnimated&&gt(s,"leaflet-zoom-animated"),this.options.className&&gt(s,this.options.className),s.onselectstart=ue,s.onmousemove=ue,s.onloadeddata=Yt(this.fire,this,"load"),n){for(var a=s.getElementsByTagName("source"),h=[],u=0;u<a.length;u++)h.push(a[u].src);this._url=a.length>0?h:[s.src];return}Cn(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(s.style,"objectFit")&&(s.style.objectFit="fill"),s.autoplay=!!this.options.autoplay,s.loop=!!this.options.loop,s.muted=!!this.options.muted,s.playsInline=!!this.options.playsInline;for(var c=0;c<this._url.length;c++){var g=Ct("source");g.src=this._url[c],s.appendChild(g)}}});function lp(n,s,a){return new rf(n,s,a)}var sf=Za.extend({_initImage:function(){var n=this._image=this._url;gt(n,"leaflet-image-layer"),this._zoomAnimated&&gt(n,"leaflet-zoom-animated"),this.options.className&&gt(n,this.options.className),n.onselectstart=ue,n.onmousemove=ue}});function cp(n,s,a){return new sf(n,s,a)}var Xn=Nn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(n,s){n&&(n instanceof L.LatLng||Cn(n))?(this._latlng=Gt(n),Wt(this,s)):(Wt(this,n),this._source=s),this.options.content&&(this._content=this.options.content)},openOn:function(n){return n=arguments.length?n:this._source._map,n.hasLayer(this)||n.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(n){return this._map?this.close():(arguments.length?this._source=n:n=this._source,this._prepareOpen(),this.openOn(n._map)),this},onAdd:function(n){this._zoomAnimated=n._zoomAnimated,this._container||this._initLayout(),n._fadeAnimated&&hn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),n._fadeAnimated&&hn(this._container,1),this.bringToFront(),this.options.interactive&&(gt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(n){n._fadeAnimated?(hn(this._container,0),this._removeTimeout=setTimeout(Yt(Kt,void 0,this._container),200)):Kt(this._container),this.options.interactive&&(se(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=Gt(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ur(this._container),this},bringToBack:function(){return this._map&&Vr(this._container),this},_prepareOpen:function(n){var s=this._source;if(!s._map)return!1;if(s instanceof rr){s=null;var a=this._source._layers;for(var h in a)if(a[h]._map){s=a[h];break}if(!s)return!1;this._source=s}if(!n)if(s.getCenter)n=s.getCenter();else if(s.getLatLng)n=s.getLatLng();else if(s.getBounds)n=s.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(n),this._map&&this.update(),!0},_updateContent:function(){if(!!this._content){var n=this._contentNode,s=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof s=="string")n.innerHTML=s;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(s)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var n=this._map.latLngToLayerPoint(this._latlng),s=lt(this.options.offset),a=this._getAnchor();this._zoomAnimated?he(this._container,n.add(a)):s=s.add(n).add(a);var h=this._containerBottom=-s.y,u=this._containerLeft=-Math.round(this._containerWidth/2)+s.x;this._container.style.bottom=h+"px",this._container.style.left=u+"px"}},_getAnchor:function(){return[0,0]}});Lt.include({_initOverlay:function(n,s,a,h){var u=s;return u instanceof n||(u=new n(h).setContent(s)),a&&u.setLatLng(a),u}});Nn.include({_initOverlay:function(n,s,a,h){var u=a;return u instanceof n?(Wt(u,h),u._source=this):(u=s&&!h?s:new n(h,this),u.setContent(a)),u}});var Xa=Xn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n=arguments.length?n:this._source._map,!n.hasLayer(this)&&n._popup&&n._popup.options.autoClose&&n.removeLayer(n._popup),n._popup=this,Xn.prototype.openOn.call(this,n)},onAdd:function(n){Xn.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Oi||this._source.on("preclick",nr))},onRemove:function(n){Xn.prototype.onRemove.call(this,n),n.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Oi||this._source.off("preclick",nr))},getEvents:function(){var n=Xn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this.close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_initLayout:function(){var n="leaflet-popup",s=this._container=Ct("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),a=this._wrapper=Ct("div",n+"-content-wrapper",s);if(this._contentNode=Ct("div",n+"-content",a),to(s),zh(this._contentNode),ct(s,"contextmenu",nr),this._tipContainer=Ct("div",n+"-tip-container",s),this._tip=Ct("div",n+"-tip",this._tipContainer),this.options.closeButton){var h=this._closeButton=Ct("a",n+"-close-button",s);h.setAttribute("role","button"),h.setAttribute("aria-label","Close popup"),h.href="#close",h.innerHTML='<span aria-hidden="true">&#215;</span>',ct(h,"click",function(u){Ee(u),this.close()},this)}},_updateLayout:function(){var n=this._contentNode,s=n.style;s.width="",s.whiteSpace="nowrap";var a=n.offsetWidth;a=Math.min(a,this.options.maxWidth),a=Math.max(a,this.options.minWidth),s.width=a+1+"px",s.whiteSpace="",s.height="";var h=n.offsetHeight,u=this.options.maxHeight,c="leaflet-popup-scrolled";u&&h>u?(s.height=u+"px",gt(n,c)):se(n,c),this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var s=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),a=this._getAnchor();he(this._container,s.add(a))},_adjustPan:function(n){if(!!this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var s=this._map,a=parseInt(Zs(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+a,u=this._containerWidth,c=new ft(this._containerLeft,-h-this._containerBottom);c._add(or(this._container));var g=s.layerPointToContainerPoint(c),p=lt(this.options.autoPanPadding),v=lt(this.options.autoPanPaddingTopLeft||p),y=lt(this.options.autoPanPaddingBottomRight||p),_=s.getSize(),I=0,w=0;g.x+u+y.x>_.x&&(I=g.x+u-_.x+y.x),g.x-I-v.x<0&&(I=g.x-v.x),g.y+h+y.y>_.y&&(w=g.y+h-_.y+y.y),g.y-w-v.y<0&&(w=g.y-v.y),(I||w)&&s.fire("autopanstart").panBy([I,w],{animate:n&&n.type==="moveend"})}},_getAnchor:function(){return lt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),fp=function(n,s){return new Xa(n,s)};Lt.mergeOptions({closePopupOnClick:!0});Lt.include({openPopup:function(n,s,a){return this._initOverlay(Xa,n,s,a).openOn(this),this},closePopup:function(n){return n=arguments.length?n:this._popup,n&&n.close(),this}});Nn.include({bindPopup:function(n,s){return this._popup=this._initOverlay(Xa,this._popup,n,s),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n){return this._popup&&this._popup._prepareOpen(n)&&this._popup.openOn(this._map),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){if(!(!this._popup||!this._map)){ar(n);var s=n.layer||n.target;if(this._popup._source===s&&!(s instanceof Oi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(n.latlng);return}this._popup._source=s,this.openPopup(n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});var Ya=Xn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(n){Xn.prototype.onAdd.call(this,n),this.setOpacity(this.options.opacity),n.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(n){Xn.prototype.onRemove.call(this,n),n.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var n=Xn.prototype.getEvents.call(this);return this.options.permanent||(n.preclick=this.close),n},_initLayout:function(){var n="leaflet-tooltip",s=n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ct("div",s),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+Nt(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var s,a,h=this._map,u=this._container,c=h.latLngToContainerPoint(h.getCenter()),g=h.layerPointToContainerPoint(n),p=this.options.direction,v=u.offsetWidth,y=u.offsetHeight,_=lt(this.options.offset),I=this._getAnchor();p==="top"?(s=v/2,a=y):p==="bottom"?(s=v/2,a=0):p==="center"?(s=v/2,a=y/2):p==="right"?(s=0,a=y/2):p==="left"?(s=v,a=y/2):g.x<c.x?(p="right",s=0,a=y/2):(p="left",s=v+(_.x+I.x)*2,a=y/2),n=n.subtract(lt(s,a,!0)).add(_).add(I),se(u,"leaflet-tooltip-right"),se(u,"leaflet-tooltip-left"),se(u,"leaflet-tooltip-top"),se(u,"leaflet-tooltip-bottom"),gt(u,"leaflet-tooltip-"+p),he(u,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n,this._container&&hn(this._container,n)},_animateZoom:function(n){var s=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(s)},_getAnchor:function(){return lt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),gp=function(n,s){return new Ya(n,s)};Lt.include({openTooltip:function(n,s,a){return this._initOverlay(Ya,n,s,a).openOn(this),this},closeTooltip:function(n){return n.close(),this}});Nn.include({bindTooltip:function(n,s){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ya,this._tooltip,n,s),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(!(!n&&this._tooltipHandlersAdded)){var s=n?"off":"on",a={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?a.add=this._openTooltip:(a.mouseover=this._openTooltip,a.mouseout=this.closeTooltip,a.click=this._openTooltip,this._map?this._addFocusListeners():a.add=this._addFocusListeners),this._tooltip.options.sticky&&(a.mousemove=this._moveTooltip),this[s](a),this._tooltipHandlersAdded=!n}},openTooltip:function(n){return this._tooltip&&this._tooltip._prepareOpen(n)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this)),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(n){ct(n.getElement(),"focus",function(){this._tooltip._source=n,this.openTooltip()},this),ct(n.getElement(),"blur",this.closeTooltip,this)},_setAriaDescribedByOnLayer:function(n){n.getElement().setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(n){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=n.layer||n.target,this.openTooltip(this._tooltip.options.sticky?n.latlng:void 0))},_moveTooltip:function(n){var s=n.latlng,a,h;this._tooltip.options.sticky&&n.originalEvent&&(a=this._map.mouseEventToContainerPoint(n.originalEvent),h=this._map.containerPointToLayerPoint(a),s=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(s)}});var of=zr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var s=n&&n.tagName==="DIV"?n:document.createElement("div"),a=this.options;if(a.html instanceof Element?(ba(s),s.appendChild(a.html)):s.innerHTML=a.html!==!1?a.html:"",a.bgPos){var h=lt(a.bgPos);s.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(s,"icon"),s},createShadow:function(){return null}});function dp(n){return new of(n)}zr.Default=qs;var Us=Nn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:tt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){Wt(this,n)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles(),Kt(this._container),n._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ur(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Vr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var n=this._clampZoom(this._map.getZoom());n!==this._tileZoom&&(this._tileZoom=n,this._updateLevels()),this._update()}return this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=mc(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof ft?n:new ft(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var s=this.getPane().children,a=-n(-1/0,1/0),h=0,u=s.length,c;h<u;h++)c=s[h].style.zIndex,s[h]!==this._container&&c&&(a=n(a,+c));isFinite(a)&&(this.options.zIndex=a+n(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!tt.ielt9){hn(this._container,this.options.opacity);var n=+new Date,s=!1,a=!1;for(var h in this._tiles){var u=this._tiles[h];if(!(!u.current||!u.loaded)){var c=Math.min(1,(n-u.loaded)/200);hn(u.el,c),c<1?s=!0:(u.active?a=!0:this._onOpaqueTile(u),u.active=!0)}}a&&!this._noPrune&&this._pruneTiles(),s&&(ln(this._fadeFrame),this._fadeFrame=He(this._updateOpacity,this))}},_onOpaqueTile:ue,_initContainer:function(){this._container||(this._container=Ct("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var n=this._tileZoom,s=this.options.maxZoom;if(n!==void 0){for(var a in this._levels)a=Number(a),this._levels[a].el.children.length||a===n?(this._levels[a].el.style.zIndex=s-Math.abs(n-a),this._onUpdateLevel(a)):(Kt(this._levels[a].el),this._removeTilesAtZoom(a),this._onRemoveLevel(a),delete this._levels[a]);var h=this._levels[n],u=this._map;return h||(h=this._levels[n]={},h.el=Ct("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=s,h.origin=u.project(u.unproject(u.getPixelOrigin()),n).round(),h.zoom=n,this._setZoomTransform(h,u.getCenter(),u.getZoom()),ue(h.el.offsetWidth),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:ue,_onRemoveLevel:ue,_onCreateLevel:ue,_pruneTiles:function(){if(!!this._map){var n,s,a=this._map.getZoom();if(a>this.options.maxZoom||a<this.options.minZoom){this._removeAllTiles();return}for(n in this._tiles)s=this._tiles[n],s.retain=s.current;for(n in this._tiles)if(s=this._tiles[n],s.current&&!s.active){var h=s.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(n in this._tiles)this._tiles[n].retain||this._removeTile(n)}},_removeTilesAtZoom:function(n){for(var s in this._tiles)this._tiles[s].coords.z===n&&this._removeTile(s)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)Kt(this._levels[n].el),this._onRemoveLevel(Number(n)),delete this._levels[n];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(n,s,a,h){var u=Math.floor(n/2),c=Math.floor(s/2),g=a-1,p=new ft(+u,+c);p.z=+g;var v=this._tileCoordsToKey(p),y=this._tiles[v];return y&&y.active?(y.retain=!0,!0):(y&&y.loaded&&(y.retain=!0),g>h?this._retainParent(u,c,g,h):!1)},_retainChildren:function(n,s,a,h){for(var u=2*n;u<2*n+2;u++)for(var c=2*s;c<2*s+2;c++){var g=new ft(u,c);g.z=a+1;var p=this._tileCoordsToKey(g),v=this._tiles[p];if(v&&v.active){v.retain=!0;continue}else v&&v.loaded&&(v.retain=!0);a+1<h&&this._retainChildren(u,c,a+1,h)}},_resetView:function(n){var s=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),s,s)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var s=this.options;return s.minNativeZoom!==void 0&&n<s.minNativeZoom?s.minNativeZoom:s.maxNativeZoom!==void 0&&s.maxNativeZoom<n?s.maxNativeZoom:n},_setView:function(n,s,a,h){var u=Math.round(s);this.options.maxZoom!==void 0&&u>this.options.maxZoom||this.options.minZoom!==void 0&&u<this.options.minZoom?u=void 0:u=this._clampZoom(u);var c=this.options.updateWhenZooming&&u!==this._tileZoom;(!h||c)&&(this._tileZoom=u,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),u!==void 0&&this._update(n),a||this._pruneTiles(),this._noPrune=!!a),this._setZoomTransforms(n,s)},_setZoomTransforms:function(n,s){for(var a in this._levels)this._setZoomTransform(this._levels[a],n,s)},_setZoomTransform:function(n,s,a){var h=this._map.getZoomScale(a,n.zoom),u=n.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(s,a)).round();tt.any3d?sr(n.el,u,h):he(n.el,u)},_resetGrid:function(){var n=this._map,s=n.options.crs,a=this._tileSize=this.getTileSize(),h=this._tileZoom,u=this._map.getPixelWorldBounds(this._tileZoom);u&&(this._globalTileRange=this._pxBoundsToTileRange(u)),this._wrapX=s.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,s.wrapLng[0]],h).x/a.x),Math.ceil(n.project([0,s.wrapLng[1]],h).x/a.y)],this._wrapY=s.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([s.wrapLat[0],0],h).y/a.x),Math.ceil(n.project([s.wrapLat[1],0],h).y/a.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(n){var s=this._map,a=s._animatingZoom?Math.max(s._animateToZoom,s.getZoom()):s.getZoom(),h=s.getZoomScale(a,this._tileZoom),u=s.project(n,this._tileZoom).floor(),c=s.getSize().divideBy(h*2);return new jt(u.subtract(c),u.add(c))},_update:function(n){var s=this._map;if(!!s){var a=this._clampZoom(s.getZoom());if(n===void 0&&(n=s.getCenter()),this._tileZoom!==void 0){var h=this._getTiledPixelBounds(n),u=this._pxBoundsToTileRange(h),c=u.getCenter(),g=[],p=this.options.keepBuffer,v=new jt(u.getBottomLeft().subtract([p,-p]),u.getTopRight().add([p,-p]));if(!(isFinite(u.min.x)&&isFinite(u.min.y)&&isFinite(u.max.x)&&isFinite(u.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var y in this._tiles){var _=this._tiles[y].coords;(_.z!==this._tileZoom||!v.contains(new ft(_.x,_.y)))&&(this._tiles[y].current=!1)}if(Math.abs(a-this._tileZoom)>1){this._setView(n,a);return}for(var I=u.min.y;I<=u.max.y;I++)for(var w=u.min.x;w<=u.max.x;w++){var D=new ft(w,I);if(D.z=this._tileZoom,!!this._isValidTile(D)){var P=this._tiles[this._tileCoordsToKey(D)];P?P.current=!0:g.push(D)}}if(g.sort(function(Z,Y){return Z.distanceTo(c)-Y.distanceTo(c)}),g.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var C=document.createDocumentFragment();for(w=0;w<g.length;w++)this._addTile(g[w],C);this._level.el.appendChild(C)}}}},_isValidTile:function(n){var s=this._map.options.crs;if(!s.infinite){var a=this._globalTileRange;if(!s.wrapLng&&(n.x<a.min.x||n.x>a.max.x)||!s.wrapLat&&(n.y<a.min.y||n.y>a.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(n);return ve(this.options.bounds).overlaps(h)},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var s=this._map,a=this.getTileSize(),h=n.scaleBy(a),u=h.add(a),c=s.unproject(h,n.z),g=s.unproject(u,n.z);return[c,g]},_tileCoordsToBounds:function(n){var s=this._tileCoordsToNwSe(n),a=new Ze(s[0],s[1]);return this.options.noWrap||(a=this._map.wrapLatLngBounds(a)),a},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var s=n.split(":"),a=new ft(+s[0],+s[1]);return a.z=+s[2],a},_removeTile:function(n){var s=this._tiles[n];!s||(Kt(s.el),delete this._tiles[n],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){gt(n,"leaflet-tile");var s=this.getTileSize();n.style.width=s.x+"px",n.style.height=s.y+"px",n.onselectstart=ue,n.onmousemove=ue,tt.ielt9&&this.options.opacity<1&&hn(n,this.options.opacity)},_addTile:function(n,s){var a=this._getTilePos(n),h=this._tileCoordsToKey(n),u=this.createTile(this._wrapCoords(n),Yt(this._tileReady,this,n));this._initTile(u),this.createTile.length<2&&He(Yt(this._tileReady,this,n,null,u)),he(u,a),this._tiles[h]={el:u,coords:n,current:!0},s.appendChild(u),this.fire("tileloadstart",{tile:u,coords:n})},_tileReady:function(n,s,a){s&&this.fire("tileerror",{error:s,tile:a,coords:n});var h=this._tileCoordsToKey(n);a=this._tiles[h],a&&(a.loaded=+new Date,this._map._fadeAnimated?(hn(a.el,0),ln(this._fadeFrame),this._fadeFrame=He(this._updateOpacity,this)):(a.active=!0,this._pruneTiles()),s||(gt(a.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:a.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),tt.ielt9||!this._map._fadeAnimated?He(this._pruneTiles,this):setTimeout(Yt(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var s=new ft(this._wrapX?Hs(n.x,this._wrapX):n.x,this._wrapY?Hs(n.y,this._wrapY):n.y);return s.z=n.z,s},_pxBoundsToTileRange:function(n){var s=this.getTileSize();return new jt(n.min.unscaleBy(s).floor(),n.max.unscaleBy(s).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});function pp(n){return new Us(n)}var kr=Us.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(n,s){this._url=n,s=Wt(this,s),s.detectRetina&&tt.retina&&s.maxZoom>0?(s.tileSize=Math.floor(s.tileSize/2),s.zoomReverse?(s.zoomOffset--,s.minZoom=Math.min(s.maxZoom,s.minZoom+1)):(s.zoomOffset++,s.maxZoom=Math.max(s.minZoom,s.maxZoom-1)),s.minZoom=Math.max(0,s.minZoom)):s.zoomReverse?s.minZoom=Math.min(s.maxZoom,s.minZoom):s.maxZoom=Math.max(s.minZoom,s.maxZoom),typeof s.subdomains=="string"&&(s.subdomains=s.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(n,s){return this._url===n&&s===void 0&&(s=!0),this._url=n,s||this.redraw(),this},createTile:function(n,s){var a=document.createElement("img");return ct(a,"load",Yt(this._tileOnLoad,this,s,a)),ct(a,"error",Yt(this._tileOnError,this,s,a)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(a.referrerPolicy=this.options.referrerPolicy),a.alt="",a.src=this.getTileUrl(n),a},getTileUrl:function(n){var s={r:tt.retina?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var a=this._globalTileRange.max.y-n.y;this.options.tms&&(s.y=a),s["-y"]=a}return yc(this._url,Dt(s,this.options))},_tileOnLoad:function(n,s){tt.ielt9?setTimeout(Yt(n,this,null,s),0):n(null,s)},_tileOnError:function(n,s,a){var h=this.options.errorTileUrl;h&&s.getAttribute("src")!==h&&(s.src=h),n(a,s)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,s=this.options.maxZoom,a=this.options.zoomReverse,h=this.options.zoomOffset;return a&&(n=s-n),n+h},_getSubdomain:function(n){var s=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[s]},_abortLoading:function(){var n,s;for(n in this._tiles)if(this._tiles[n].coords.z!==this._tileZoom&&(s=this._tiles[n].el,s.onload=ue,s.onerror=ue,!s.complete)){s.src=Ca;var a=this._tiles[n].coords;Kt(s),delete this._tiles[n],this.fire("tileabort",{tile:s,coords:a})}},_removeTile:function(n){var s=this._tiles[n];if(!!s)return s.el.setAttribute("src",Ca),Us.prototype._removeTile.call(this,n)},_tileReady:function(n,s,a){if(!(!this._map||a&&a.getAttribute("src")===Ca))return Us.prototype._tileReady.call(this,n,s,a)}});function af(n,s){return new kr(n,s)}var uf=kr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,s){this._url=n;var a=Dt({},this.defaultWmsParams);for(var h in s)h in this.options||(a[h]=s[h]);s=Wt(this,s);var u=s.detectRetina&&tt.retina?2:1,c=this.getTileSize();a.width=c.x*u,a.height=c.y*u,this.wmsParams=a},onAdd:function(n){this._crs=this.options.crs||n.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var s=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[s]=this._crs.code,kr.prototype.onAdd.call(this,n)},getTileUrl:function(n){var s=this._tileCoordsToNwSe(n),a=this._crs,h=Ve(a.project(s[0]),a.project(s[1])),u=h.min,c=h.max,g=(this._wmsVersion>=1.3&&this._crs===ef?[u.y,u.x,c.y,c.x]:[u.x,u.y,c.x,c.y]).join(","),p=kr.prototype.getTileUrl.call(this,n);return p+vc(this.wmsParams,p,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+g},setParams:function(n,s){return Dt(this.wmsParams,n),s||this.redraw(),this}});function mp(n,s){return new uf(n,s)}kr.WMS=uf;af.wms=mp;var ni=Nn.extend({options:{padding:.1},initialize:function(n){Wt(this,n),Nt(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&gt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,s){var a=this._map.getZoomScale(s,this._zoom),h=this._map.getSize().multiplyBy(.5+this.options.padding),u=this._map.project(this._center,s),c=h.multiplyBy(-a).add(u).subtract(this._map._getNewPixelOrigin(n,s));tt.any3d?sr(this._container,c,a):he(this._container,c)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,s=this._map.getSize(),a=this._map.containerPointToLayerPoint(s.multiplyBy(-n)).round();this._bounds=new jt(a,a.add(s.multiplyBy(1+n*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),hf=ni.extend({options:{tolerance:0},getEvents:function(){var n=ni.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ni.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");ct(n,"mousemove",this._onMouseMove,this),ct(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ct(n,"mouseout",this._handleMouseOut,this),n._leaflet_disable_events=!0,this._ctx=n.getContext("2d")},_destroyContainer:function(){ln(this._redrawRequest),delete this._ctx,Kt(this._container),Bt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var n;this._redrawBounds=null;for(var s in this._layers)n=this._layers[s],n._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ni.prototype._update.call(this);var n=this._bounds,s=this._container,a=n.getSize(),h=tt.retina?2:1;he(s,n.min),s.width=h*a.x,s.height=h*a.y,s.style.width=a.x+"px",s.style.height=a.y+"px",tt.retina&&this._ctx.scale(2,2),this._ctx.translate(-n.min.x,-n.min.y),this.fire("update")}},_reset:function(){ni.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n),this._layers[Nt(n)]=n;var s=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=s),this._drawLast=s,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var s=n._order,a=s.next,h=s.prev;a?a.prev=h:this._drawLast=h,h?h.next=a:this._drawFirst=a,delete n._order,delete this._layers[Nt(n)],this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n),n._project(),n._update(),this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n),this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){var s=n.options.dashArray.split(/[, ]+/),a=[],h,u;for(u=0;u<s.length;u++){if(h=Number(s[u]),isNaN(h))return;a.push(h)}n.options._dashArray=a}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){!this._map||(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||He(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var s=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new jt,this._redrawBounds.extend(n._pxBounds.min.subtract([s,s])),this._redrawBounds.extend(n._pxBounds.max.add([s,s]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var n=this._redrawBounds;if(n){var s=n.getSize();this._ctx.clearRect(n.min.x,n.min.y,s.x,s.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var n,s=this._redrawBounds;if(this._ctx.save(),s){var a=s.getSize();this._ctx.beginPath(),this._ctx.rect(s.min.x,s.min.y,a.x,a.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)n=h.layer,(!s||n._pxBounds&&n._pxBounds.intersects(s))&&n._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(n,s){if(!!this._drawing){var a,h,u,c,g=n._parts,p=g.length,v=this._ctx;if(!!p){for(v.beginPath(),a=0;a<p;a++){for(h=0,u=g[a].length;h<u;h++)c=g[a][h],v[h?"lineTo":"moveTo"](c.x,c.y);s&&v.closePath()}this._fillStroke(v,n)}}},_updateCircle:function(n){if(!(!this._drawing||n._empty())){var s=n._point,a=this._ctx,h=Math.max(Math.round(n._radius),1),u=(Math.max(Math.round(n._radiusY),1)||h)/h;u!==1&&(a.save(),a.scale(1,u)),a.beginPath(),a.arc(s.x,s.y/u,h,0,Math.PI*2,!1),u!==1&&a.restore(),this._fillStroke(a,n)}},_fillStroke:function(n,s){var a=s.options;a.fill&&(n.globalAlpha=a.fillOpacity,n.fillStyle=a.fillColor||a.color,n.fill(a.fillRule||"evenodd")),a.stroke&&a.weight!==0&&(n.setLineDash&&n.setLineDash(s.options&&s.options._dashArray||[]),n.globalAlpha=a.opacity,n.lineWidth=a.weight,n.strokeStyle=a.color,n.lineCap=a.lineCap,n.lineJoin=a.lineJoin,n.stroke())},_onClick:function(n){for(var s=this._map.mouseEventToLayerPoint(n),a,h,u=this._drawFirst;u;u=u.next)a=u.layer,a.options.interactive&&a._containsPoint(s)&&(!(n.type==="click"||n.type==="preclick")||!this._map._draggableMoved(a))&&(h=a);this._fireEvent(h?[h]:!1,n)},_onMouseMove:function(n){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var s=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,s)}},_handleMouseOut:function(n){var s=this._hoveredLayer;s&&(se(this._container,"leaflet-interactive"),this._fireEvent([s],n,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(n,s){if(!this._mouseHoverThrottled){for(var a,h,u=this._drawFirst;u;u=u.next)a=u.layer,a.options.interactive&&a._containsPoint(s)&&(h=a);h!==this._hoveredLayer&&(this._handleMouseOut(n),h&&(gt(this._container,"leaflet-interactive"),this._fireEvent([h],n,"mouseover"),this._hoveredLayer=h)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,n),this._mouseHoverThrottled=!0,setTimeout(Yt(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(n,s,a){this._map._fireDOMEvent(s,a||s.type,n)},_bringToFront:function(n){var s=n._order;if(!!s){var a=s.next,h=s.prev;if(a)a.prev=h;else return;h?h.next=a:a&&(this._drawFirst=a),s.prev=this._drawLast,this._drawLast.next=s,s.next=null,this._drawLast=s,this._requestRedraw(n)}},_bringToBack:function(n){var s=n._order;if(!!s){var a=s.next,h=s.prev;if(h)h.next=a;else return;a?a.prev=h:h&&(this._drawLast=h),s.prev=null,s.next=this._drawFirst,this._drawFirst.prev=s,this._drawFirst=s,this._requestRedraw(n)}}});function lf(n){return tt.canvas?new hf(n):null}var zs=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch{}return function(n){return document.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),vp={_initContainer:function(){this._container=Ct("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ni.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var s=n._container=zs("shape");gt(s,"leaflet-vml-shape "+(this.options.className||"")),s.coordsize="1 1",n._path=zs("path"),s.appendChild(n._path),this._updateStyle(n),this._layers[Nt(n)]=n},_addPath:function(n){var s=n._container;this._container.appendChild(s),n.options.interactive&&n.addInteractiveTarget(s)},_removePath:function(n){var s=n._container;Kt(s),n.removeInteractiveTarget(s),delete this._layers[Nt(n)]},_updateStyle:function(n){var s=n._stroke,a=n._fill,h=n.options,u=n._container;u.stroked=!!h.stroke,u.filled=!!h.fill,h.stroke?(s||(s=n._stroke=zs("stroke")),u.appendChild(s),s.weight=h.weight+"px",s.color=h.color,s.opacity=h.opacity,h.dashArray?s.dashStyle=Cn(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):s.dashStyle="",s.endcap=h.lineCap.replace("butt","flat"),s.joinstyle=h.lineJoin):s&&(u.removeChild(s),n._stroke=null),h.fill?(a||(a=n._fill=zs("fill")),u.appendChild(a),a.color=h.fillColor||h.color,a.opacity=h.fillOpacity):a&&(u.removeChild(a),n._fill=null)},_updateCircle:function(n){var s=n._point.round(),a=Math.round(n._radius),h=Math.round(n._radiusY||a);this._setPath(n,n._empty()?"M0 0":"AL "+s.x+","+s.y+" "+a+","+h+" 0,"+65535*360)},_setPath:function(n,s){n._path.v=s},_bringToFront:function(n){Ur(n._container)},_bringToBack:function(n){Vr(n._container)}},Ta=tt.vml?zs:Lc,io=ni.extend({_initContainer:function(){this._container=Ta("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ta("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Kt(this._container),Bt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ni.prototype._update.call(this);var n=this._bounds,s=n.getSize(),a=this._container;(!this._svgSize||!this._svgSize.equals(s))&&(this._svgSize=s,a.setAttribute("width",s.x),a.setAttribute("height",s.y)),he(a,n.min),a.setAttribute("viewBox",[n.min.x,n.min.y,s.x,s.y].join(" ")),this.fire("update")}},_initPath:function(n){var s=n._path=Ta("path");n.options.className&&gt(s,n.options.className),n.options.interactive&&gt(s,"leaflet-interactive"),this._updateStyle(n),this._layers[Nt(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(n._path),n.addInteractiveTarget(n._path)},_removePath:function(n){Kt(n._path),n.removeInteractiveTarget(n._path),delete this._layers[Nt(n)]},_updatePath:function(n){n._project(),n._update()},_updateStyle:function(n){var s=n._path,a=n.options;!s||(a.stroke?(s.setAttribute("stroke",a.color),s.setAttribute("stroke-opacity",a.opacity),s.setAttribute("stroke-width",a.weight),s.setAttribute("stroke-linecap",a.lineCap),s.setAttribute("stroke-linejoin",a.lineJoin),a.dashArray?s.setAttribute("stroke-dasharray",a.dashArray):s.removeAttribute("stroke-dasharray"),a.dashOffset?s.setAttribute("stroke-dashoffset",a.dashOffset):s.removeAttribute("stroke-dashoffset")):s.setAttribute("stroke","none"),a.fill?(s.setAttribute("fill",a.fillColor||a.color),s.setAttribute("fill-opacity",a.fillOpacity),s.setAttribute("fill-rule",a.fillRule||"evenodd")):s.setAttribute("fill","none"))},_updatePoly:function(n,s){this._setPath(n,Ec(n._parts,s))},_updateCircle:function(n){var s=n._point,a=Math.max(Math.round(n._radius),1),h=Math.max(Math.round(n._radiusY),1)||a,u="a"+a+","+h+" 0 1,0 ",c=n._empty()?"M0 0":"M"+(s.x-a)+","+s.y+u+a*2+",0 "+u+-a*2+",0 ";this._setPath(n,c)},_setPath:function(n,s){n._path.setAttribute("d",s)},_bringToFront:function(n){Ur(n._path)},_bringToBack:function(n){Vr(n._path)}});tt.vml&&io.include(vp);function cf(n){return tt.svg||tt.vml?new io(n):null}Lt.include({getRenderer:function(n){var s=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return s||(s=this._renderer=this._createRenderer()),this.hasLayer(s)||this.addLayer(s),s},_getPaneRenderer:function(n){if(n==="overlayPane"||n===void 0)return!1;var s=this._paneRenderers[n];return s===void 0&&(s=this._createRenderer({pane:n}),this._paneRenderers[n]=s),s},_createRenderer:function(n){return this.options.preferCanvas&&lf(n)||cf(n)}});var ff=Gr.extend({initialize:function(n,s){Gr.prototype.initialize.call(this,this._boundsToLatLngs(n),s)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=ve(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});function yp(n,s){return new ff(n,s)}io.create=Ta;io.pointsToPath=Ec;oi.geometryToLayer=Ra;oi.coordsToLatLng=Hh;oi.coordsToLatLngs=Da;oi.latLngToCoords=Zh;oi.latLngsToCoords=Va;oi.getFeature=Br;oi.asFeature=Ha;Lt.mergeOptions({boxZoom:!0});var gf=Wn.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane,this._resetStateTimeout=0,n.on("unload",this._destroy,this)},addHooks:function(){ct(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Bt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Kt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Xs(),Dh(),this._startPoint=this._map.mouseEventToContainerPoint(n),ct(document,{contextmenu:ar,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=Ct("div","leaflet-zoom-box",this._container),gt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(n);var s=new jt(this._point,this._startPoint),a=s.getSize();he(this._box,s.min),this._box.style.width=a.x+"px",this._box.style.height=a.y+"px"},_finish:function(){this._moved&&(Kt(this._box),se(this._container,"leaflet-crosshair")),Ys(),Ah(),Bt(document,{contextmenu:ar,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(!(n.which!==1&&n.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(Yt(this._resetState,this),0);var s=new Ze(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(s).fire("boxzoomend",{boxZoomBounds:s})}},_onKeyDown:function(n){n.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Lt.addInitHook("addHandler","boxZoom",gf);Lt.mergeOptions({doubleClickZoom:!0});var df=Wn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var s=this._map,a=s.getZoom(),h=s.options.zoomDelta,u=n.originalEvent.shiftKey?a-h:a+h;s.options.doubleClickZoom==="center"?s.setZoom(u):s.setZoomAround(n.containerPoint,u)}});Lt.addInitHook("addHandler","doubleClickZoom",df);Lt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var pf=Wn.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new bi(n._mapPane,n._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),n.on("zoomend",this._onZoomEnd,this),n.whenReady(this._onZoomEnd,this))}gt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){se(this._map._container,"leaflet-grab"),se(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map;if(n._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var s=ve(this._map.options.maxBounds);this._offsetLimit=Ve(this._map.latLngToContainerPoint(s.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(s.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;n.fire("movestart").fire("dragstart"),n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var s=this._lastTime=+new Date,a=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(a),this._times.push(s),this._prunePositions(s)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){for(;this._positions.length>1&&n-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),s=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=s.subtract(n).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,s){return n-(n-s)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var n=this._draggable._newPos.subtract(this._draggable._startPos),s=this._offsetLimit;n.x<s.min.x&&(n.x=this._viscousLimit(n.x,s.min.x)),n.y<s.min.y&&(n.y=this._viscousLimit(n.y,s.min.y)),n.x>s.max.x&&(n.x=this._viscousLimit(n.x,s.max.x)),n.y>s.max.y&&(n.y=this._viscousLimit(n.y,s.max.y)),this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var n=this._worldWidth,s=Math.round(n/2),a=this._initialWorldOffset,h=this._draggable._newPos.x,u=(h-s+a)%n+s-a,c=(h+s+a)%n-s-a,g=Math.abs(u+a)<Math.abs(c+a)?u:c;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=g},_onDragEnd:function(n){var s=this._map,a=s.options,h=!a.inertia||n.noInertia||this._times.length<2;if(s.fire("dragend",n),h)s.fire("moveend");else{this._prunePositions(+new Date);var u=this._lastPos.subtract(this._positions[0]),c=(this._lastTime-this._times[0])/1e3,g=a.easeLinearity,p=u.multiplyBy(g/c),v=p.distanceTo([0,0]),y=Math.min(a.inertiaMaxSpeed,v),_=p.multiplyBy(y/v),I=y/(a.inertiaDeceleration*g),w=_.multiplyBy(-I/2).round();!w.x&&!w.y?s.fire("moveend"):(w=s._limitOffset(w,s.options.maxBounds),He(function(){s.panBy(w,{duration:I,easeLinearity:g,noMoveStart:!0,animate:!0})}))}}});Lt.addInitHook("addHandler","dragging",pf);Lt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var mf=Wn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n,this._setPanDelta(n.options.keyboardPanDelta),this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0"),ct(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Bt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,s=document.documentElement,a=n.scrollTop||s.scrollTop,h=n.scrollLeft||s.scrollLeft;this._map._container.focus(),window.scrollTo(h,a)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(n){var s=this._panKeys={},a=this.keyCodes,h,u;for(h=0,u=a.left.length;h<u;h++)s[a.left[h]]=[-1*n,0];for(h=0,u=a.right.length;h<u;h++)s[a.right[h]]=[n,0];for(h=0,u=a.down.length;h<u;h++)s[a.down[h]]=[0,n];for(h=0,u=a.up.length;h<u;h++)s[a.up[h]]=[0,-1*n]},_setZoomDelta:function(n){var s=this._zoomKeys={},a=this.keyCodes,h,u;for(h=0,u=a.zoomIn.length;h<u;h++)s[a.zoomIn[h]]=n;for(h=0,u=a.zoomOut.length;h<u;h++)s[a.zoomOut[h]]=-n},_addHooks:function(){ct(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Bt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var s=n.keyCode,a=this._map,h;if(s in this._panKeys)(!a._panAnim||!a._panAnim._inProgress)&&(h=this._panKeys[s],n.shiftKey&&(h=lt(h).multiplyBy(3)),a.panBy(h),a.options.maxBounds&&a.panInsideBounds(a.options.maxBounds));else if(s in this._zoomKeys)a.setZoom(a.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[s]);else if(s===27&&a._popup&&a._popup.options.closeOnEscapeKey)a.closePopup();else return;ar(n)}}});Lt.addInitHook("addHandler","keyboard",mf);Lt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var vf=Wn.extend({addHooks:function(){ct(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Bt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var s=Hc(n),a=this._map.options.wheelDebounceTime;this._delta+=s,this._lastMousePos=this._map.mouseEventToContainerPoint(n),this._startTime||(this._startTime=+new Date);var h=Math.max(a-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(Yt(this._performZoom,this),h),ar(n)},_performZoom:function(){var n=this._map,s=n.getZoom(),a=this._map.options.zoomSnap||0;n._stop();var h=this._delta/(this._map.options.wheelPxPerZoomLevel*4),u=4*Math.log(2/(1+Math.exp(-Math.abs(h))))/Math.LN2,c=a?Math.ceil(u/a)*a:u,g=n._limitZoom(s+(this._delta>0?c:-c))-s;this._delta=0,this._startTime=null,g&&(n.options.scrollWheelZoom==="center"?n.setZoom(s+g):n.setZoomAround(this._lastMousePos,s+g))}});Lt.addInitHook("addHandler","scrollWheelZoom",vf);var _p=600;Lt.mergeOptions({tapHold:tt.touchNative&&tt.safari&&tt.mobile,tapTolerance:15});var yf=Wn.extend({addHooks:function(){ct(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Bt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(clearTimeout(this._holdTimeout),n.touches.length===1){var s=n.touches[0];this._startPos=this._newPos=new ft(s.clientX,s.clientY),this._holdTimeout=setTimeout(Yt(function(){this._cancel(),this._isTapValid()&&(ct(document,"touchend",Ee),ct(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",s))},this),_p),ct(document,"touchend touchcancel contextmenu",this._cancel,this),ct(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function n(){Bt(document,"touchend",Ee),Bt(document,"touchend touchcancel",n)},_cancel:function(){clearTimeout(this._holdTimeout),Bt(document,"touchend touchcancel contextmenu",this._cancel,this),Bt(document,"touchmove",this._onMove,this)},_onMove:function(n){var s=n.touches[0];this._newPos=new ft(s.clientX,s.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(n,s){var a=new MouseEvent(n,{bubbles:!0,cancelable:!0,view:window,screenX:s.screenX,screenY:s.screenY,clientX:s.clientX,clientY:s.clientY});a._simulated=!0,s.target.dispatchEvent(a)}});Lt.addInitHook("addHandler","tapHold",yf);Lt.mergeOptions({touchZoom:tt.touch,bounceAtZoomLimits:!0});var _f=Wn.extend({addHooks:function(){gt(this._map._container,"leaflet-touch-zoom"),ct(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){se(this._map._container,"leaflet-touch-zoom"),Bt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var s=this._map;if(!(!n.touches||n.touches.length!==2||s._animatingZoom||this._zooming)){var a=s.mouseEventToContainerPoint(n.touches[0]),h=s.mouseEventToContainerPoint(n.touches[1]);this._centerPoint=s.getSize()._divideBy(2),this._startLatLng=s.containerPointToLatLng(this._centerPoint),s.options.touchZoom!=="center"&&(this._pinchStartLatLng=s.containerPointToLatLng(a.add(h)._divideBy(2))),this._startDist=a.distanceTo(h),this._startZoom=s.getZoom(),this._moved=!1,this._zooming=!0,s._stop(),ct(document,"touchmove",this._onTouchMove,this),ct(document,"touchend touchcancel",this._onTouchEnd,this),Ee(n)}},_onTouchMove:function(n){if(!(!n.touches||n.touches.length!==2||!this._zooming)){var s=this._map,a=s.mouseEventToContainerPoint(n.touches[0]),h=s.mouseEventToContainerPoint(n.touches[1]),u=a.distanceTo(h)/this._startDist;if(this._zoom=s.getScaleZoom(u,this._startZoom),!s.options.bounceAtZoomLimits&&(this._zoom<s.getMinZoom()&&u<1||this._zoom>s.getMaxZoom()&&u>1)&&(this._zoom=s._limitZoom(this._zoom)),s.options.touchZoom==="center"){if(this._center=this._startLatLng,u===1)return}else{var c=a._add(h)._divideBy(2)._subtract(this._centerPoint);if(u===1&&c.x===0&&c.y===0)return;this._center=s.unproject(s.project(this._pinchStartLatLng,this._zoom).subtract(c),this._zoom)}this._moved||(s._moveStart(!0,!1),this._moved=!0),ln(this._animRequest);var g=Yt(s._move,s,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=He(g,this,!0),Ee(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ln(this._animRequest),Bt(document,"touchmove",this._onTouchMove,this),Bt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Lt.addInitHook("addHandler","touchZoom",_f);Lt.BoxZoom=gf;Lt.DoubleClickZoom=df;Lt.Drag=pf;Lt.Keyboard=mf;Lt.ScrollWheelZoom=vf;Lt.TapHold=yf;Lt.TouchZoom=_f;var xp={__proto__:null,version:ed,Control:In,control:eo,Class:ri,Handler:Wn,extend:Dt,bind:Yt,stamp:Nt,setOptions:Wt,Browser:tt,Evented:js,Mixin:Hd,Util:id,PosAnimation:Zc,Draggable:bi,DomEvent:Fd,DomUtil:Ad,Point:ft,point:lt,Bounds:jt,bounds:Ve,Transformation:Ih,transformation:$s,LineUtil:Jd,PolyUtil:Kd,LatLng:zt,latLng:Gt,LatLngBounds:Ze,latLngBounds:ve,CRS:si,Projection:jd,Layer:Nn,LayerGroup:Ar,layerGroup:tp,FeatureGroup:rr,featureGroup:ep,ImageOverlay:Za,imageOverlay:hp,VideoOverlay:rf,videoOverlay:lp,SVGOverlay:sf,svgOverlay:cp,DivOverlay:Xn,Popup:Xa,popup:fp,Tooltip:Ya,tooltip:gp,icon:np,DivIcon:of,divIcon:dp,Marker:qa,marker:ip,Icon:zr,GridLayer:Us,gridLayer:pp,TileLayer:kr,tileLayer:af,Renderer:ni,Canvas:hf,canvas:lf,Path:Oi,CircleMarker:Ua,circleMarker:rp,Circle:Vh,circle:sp,Polyline:ii,polyline:op,Polygon:Gr,polygon:ap,Rectangle:ff,rectangle:yp,SVG:io,svg:cf,GeoJSON:oi,geoJSON:nf,geoJson:up,Map:Lt,map:zd},xf=Dt(xp,{noConflict:Ep}),Yh=wp(),Lp=Yh.L;Yh.L=xf;function Ep(){return Yh.L=Lp,xf}function wp(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Ip="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC",Cp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",Np="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=";(function(n,s,a){function h(u,c){for(;(u=u.parentElement)&&!u.classList.contains(c););return u}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(u,c){this._map=u,this._container=u._container,this._overlayPane=u._panes.overlayPane,this._popupPane=u._panes.popupPane,c&&c.shapeOptions&&(c.shapeOptions=L.Util.extend({},this.options.shapeOptions,c.shapeOptions)),L.setOptions(this,c);var g=L.version.split(".");parseInt(g[0],10)===1&&parseInt(g[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var u=this._map;u&&(L.DomUtil.disableTextSelection(),u.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(u){L.setOptions(this,u)},_fireCreatedEvent:function(u){this._map.fire(L.Draw.Event.CREATED,{layer:u,layerType:this.type})},_cancelDrawing:function(u){u.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(u,c){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,c&&c.drawError&&(c.drawError=L.Util.extend({},this.options.drawError,c.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,u,c)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var u=this._markers.pop(),c=this._poly,g=c.getLatLngs(),p=g.splice(-1,1)[0];this._poly.setLatLngs(g),this._markerGroup.removeLayer(u),c.getLatLngs().length<2&&this._map.removeLayer(c),this._vertexChanged(p,!1)}},addVertex:function(u){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(u))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(u)),this._poly.addLatLng(u),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(u,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var u=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),c=this._poly.newLatLngIntersects(u[u.length-1]);if(!this.options.allowIntersection&&c||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(u){var c=this._map.mouseEventToLayerPoint(u.originalEvent),g=this._map.layerPointToLatLng(c);this._currentLatLng=g,this._updateTooltip(g),this._updateGuide(c),this._mouseMarker.setLatLng(g),L.DomEvent.preventDefault(u.originalEvent)},_vertexChanged:function(u,c){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(u,c),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(u){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(u),this._clickHandled=!0,this._disableNewMarkers();var c=u.originalEvent,g=c.clientX,p=c.clientY;this._startPoint.call(this,g,p)}},_startPoint:function(u,c){this._mouseDownOrigin=L.point(u,c)},_onMouseUp:function(u){var c=u.originalEvent,g=c.clientX,p=c.clientY;this._endPoint.call(this,g,p,u),this._clickHandled=null},_endPoint:function(u,c,g){if(this._mouseDownOrigin){var p=L.point(u,c).distanceTo(this._mouseDownOrigin),v=this._calculateFinishDistance(g.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(g.latlng),this._finishShape()):v<10&&L.Browser.touch?this._finishShape():Math.abs(p)<9*(n.devicePixelRatio||1)&&this.addVertex(g.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(u){var c,g,p=u.originalEvent;!p.touches||!p.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(c=p.touches[0].clientX,g=p.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,c,g),this._endPoint.call(this,c,g,u),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(u){var c;if(this._markers.length>0){var g;if(this.type===L.Draw.Polyline.TYPE)g=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;g=this._markers[0]}var p=this._map.latLngToContainerPoint(g.getLatLng()),v=new L.Marker(u,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),y=this._map.latLngToContainerPoint(v.getLatLng());c=p.distanceTo(y)}else c=1/0;return c},_updateFinishHandler:function(){var u=this._markers.length;u>1&&this._markers[u-1].on("click",this._finishShape,this),u>2&&this._markers[u-2].off("click",this._finishShape,this)},_createMarker:function(u){var c=new L.Marker(u,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(c),c},_updateGuide:function(u){var c=this._markers?this._markers.length:0;c>0&&(u=u||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[c-1].getLatLng()),u))},_updateTooltip:function(u){var c=this._getTooltipText();u&&this._tooltip.updatePosition(u),this._errorShown||this._tooltip.updateContent(c)},_drawGuide:function(u,c){var g,p,v,y=Math.floor(Math.sqrt(Math.pow(c.x-u.x,2)+Math.pow(c.y-u.y,2))),_=this.options.guidelineDistance,I=this.options.maxGuideLineLength,w=y>I?y-I:_;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));w<y;w+=this.options.guidelineDistance)g=w/y,p={x:Math.floor(u.x*(1-g)+g*c.x),y:Math.floor(u.y*(1-g)+g*c.y)},v=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),v.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(v,p)},_updateGuideColor:function(u){if(this._guidesContainer)for(var c=0,g=this._guidesContainer.childNodes.length;c<g;c++)this._guidesContainer.childNodes[c].style.backgroundColor=u},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var u,c,g=this.options.showLength;return this._markers.length===0?u={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(c=g?this._getMeasurementString():"",u=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:c}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:c}),u},_updateRunningMeasure:function(u,c){var g,p,v=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(g=v-(c?2:1),p=L.GeometryUtil.isVersion07x()?u.distanceTo(this._markers[g].getLatLng())*(this.options.factor||1):this._map.distance(u,this._markers[g].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=p*(c?1:-1))},_getMeasurementString:function(){var u,c=this._currentLatLng,g=this._markers[this._markers.length-1].getLatLng();return u=L.GeometryUtil.isVersion07x()?g&&c&&c.distanceTo?this._measurementRunningTotal+c.distanceTo(g)*(this.options.factor||1):this._measurementRunningTotal||0:g&&c?this._measurementRunningTotal+this._map.distance(c,g)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(u,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var u=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,u)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(u,c){L.Draw.Polyline.prototype.initialize.call(this,u,c),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var u=this._markers.length;u===1&&this._markers[0].on("click",this._finishShape,this),u>2&&(this._markers[u-1].on("dblclick",this._finishShape,this),u>3&&this._markers[u-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var u,c;return this._markers.length===0?u=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(u=L.drawLocal.draw.handlers.polygon.tooltip.cont,c=this._getMeasurementString()):(u=L.drawLocal.draw.handlers.polygon.tooltip.end,c=this._getMeasurementString()),{text:u,subtext:c}},_getMeasurementString:function(){var u=this._area,c="";return u||this.options.showLength?(this.options.showLength&&(c=L.Draw.Polyline.prototype._getMeasurementString.call(this)),u&&(c+="<br>"+L.GeometryUtil.readableArea(u,this.options.metric,this.options.precision)),c):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(u,c){var g;!this.options.allowIntersection&&this.options.showArea&&(g=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(g)),L.Draw.Polyline.prototype._vertexChanged.call(this,u,c)},_cleanUpShape:function(){var u=this._markers.length;u>0&&(this._markers[0].off("click",this._finishShape,this),u>2&&this._markers[u-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(u,c){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,u,c)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),s.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(s,"mouseup",this._onMouseUp,this),L.DomEvent.off(s,"touchend",this._onMouseUp,this),s.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(u){this._isDrawing=!0,this._startLatLng=u.latlng,L.DomEvent.on(s,"mouseup",this._onMouseUp,this).on(s,"touchend",this._onMouseUp,this).preventDefault(u.originalEvent)},_onMouseMove:function(u){var c=u.latlng;this._tooltip.updatePosition(c),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(c))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(u,c){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,u,c)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(u){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!h(u.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(u){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,u)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,u),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var u=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,u)},_getTooltipText:function(){var u,c,g,p=L.Draw.SimpleShape.prototype._getTooltipText.call(this),v=this._shape,y=this.options.showArea;return v&&(u=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),c=L.GeometryUtil.geodesicArea(u),g=y?L.GeometryUtil.readableArea(c,this.options.metric):""),{text:p.text,subtext:g}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(u,c){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,u,c)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(u){var c=u.latlng;this._tooltip.updatePosition(c),this._mouseMarker.setLatLng(c),this._marker?(c=this._mouseMarker.getLatLng(),this._marker.setLatLng(c)):(this._marker=this._createMarker(c),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(u){return new L.Marker(u,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(u){this._onMouseMove(u),this._onClick()},_fireCreatedEvent:function(){var u=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,u)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(u,c){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,u,c)},_fireCreatedEvent:function(){var u=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,u)},_createMarker:function(u){return new L.CircleMarker(u,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(u,c){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,u,c)},_drawShape:function(u){if(L.GeometryUtil.isVersion07x())var c=this._startLatLng.distanceTo(u);else var c=this._map.distance(this._startLatLng,u);this._shape?this._shape.setRadius(c):(this._shape=new L.Circle(this._startLatLng,c,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var u=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,u)},_onMouseMove:function(u){var c,g=u.latlng,p=this.options.showRadius,v=this.options.metric;if(this._tooltip.updatePosition(g),this._isDrawing){this._drawShape(g),c=this._shape.getRadius().toFixed(1);var y="";p&&(y=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(c,v,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:y})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(u,c){this._marker=u,L.setOptions(this,c)},addHooks:function(){var u=this._marker;u.dragging.enable(),u.on("dragend",this._onDragEnd,u),this._toggleMarkerHighlight()},removeHooks:function(){var u=this._marker;u.dragging.disable(),u.off("dragend",this._onDragEnd,u),this._toggleMarkerHighlight()},_onDragEnd:function(u){var c=u.target;c.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:c})},_toggleMarkerHighlight:function(){var u=this._marker._icon;u&&(u.style.display="none",L.DomUtil.hasClass(u,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(u,"leaflet-edit-marker-selected"),this._offsetMarker(u,-4)):(L.DomUtil.addClass(u,"leaflet-edit-marker-selected"),this._offsetMarker(u,4)),u.style.display="")},_offsetMarker:function(u,c){var g=parseInt(u.style.marginTop,10)-c,p=parseInt(u.style.marginLeft,10)-c;u.style.marginTop=g+"px",u.style.marginLeft=p+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(u){this.latlngs=[u._latlngs],u._holes&&(this.latlngs=this.latlngs.concat(u._holes)),this._poly=u,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(u){for(var c=0;c<this._verticesHandlers.length;c++)u(this._verticesHandlers[c])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(u){u.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(u){u.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(u){u.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var u=0;u<this.latlngs.length;u++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[u],this._poly.options.poly))},_updateLatLngs:function(u){this.latlngs=[u.layer._latlngs],u.layer._holes&&(this.latlngs=this.latlngs.concat(u.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(u,c,g){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=u,g&&g.drawError&&(g.drawError=L.Util.extend({},this.options.drawError,g.drawError)),this._latlngs=c,L.setOptions(this,g)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var u=this._poly,c=u._path;u instanceof L.Polygon||(u.options.fill=!1,u.options.editing&&(u.options.editing.fill=!1)),c&&u.options.editing&&u.options.editing.className&&(u.options.original.className&&u.options.original.className.split(" ").forEach(function(g){L.DomUtil.removeClass(c,g)}),u.options.editing.className.split(" ").forEach(function(g){L.DomUtil.addClass(c,g)})),u.setStyle(u.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var u=this._poly,c=u._path;c&&u.options.editing&&u.options.editing.className&&(u.options.editing.className.split(" ").forEach(function(g){L.DomUtil.removeClass(c,g)}),u.options.original.className&&u.options.original.className.split(" ").forEach(function(g){L.DomUtil.addClass(c,g)})),u.setStyle(u.options.original),u._map&&(u._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var u,c,g,p,v=this._defaultShape();for(u=0,g=v.length;u<g;u++)p=this._createMarker(v[u],u),p.on("click",this._onMarkerClick,this),p.on("contextmenu",this._onContextMenu,this),this._markers.push(p);var y,_;for(u=0,c=g-1;u<g;c=u++)(u!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(y=this._markers[c],_=this._markers[u],this._createMiddleMarker(y,_),this._updatePrevNext(y,_))},_createMarker:function(u,c){var g=new L.Marker.Touch(u,{draggable:!0,icon:this.options.icon});return g._origLatLng=u,g._index=c,g.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(g),g},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var u=this._defaultShape(),c=[].splice.apply(u,arguments);return this._poly._convertLatLngs(u,!0),this._poly.redraw(),c},_removeMarker:function(u){var c=u._index;this._markerGroup.removeLayer(u),this._markers.splice(c,1),this._spliceLatLngs(c,1),this._updateIndexes(c,-1),u.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(u){var c=u.target,g=this._poly,p=L.LatLngUtil.cloneLatLng(c._origLatLng);if(L.extend(c._origLatLng,c._latlng),g.options.poly){var v=g._map._editTooltip;if(!g.options.poly.allowIntersection&&g.intersects()){L.extend(c._origLatLng,p),c.setLatLng(p);var y=g.options.color;g.setStyle({color:this.options.drawError.color}),v&&v.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){g.setStyle({color:y}),v&&v.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}c._middleLeft&&c._middleLeft.setLatLng(this._getMiddleLatLng(c._prev,c)),c._middleRight&&c._middleRight.setLatLng(this._getMiddleLatLng(c,c._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var _=this._poly.getLatLngs();this._poly._convertLatLngs(_,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(u){var c=L.Polygon&&this._poly instanceof L.Polygon?4:3,g=u.target;this._defaultShape().length<c||(this._removeMarker(g),this._updatePrevNext(g._prev,g._next),g._middleLeft&&this._markerGroup.removeLayer(g._middleLeft),g._middleRight&&this._markerGroup.removeLayer(g._middleRight),g._prev&&g._next?this._createMiddleMarker(g._prev,g._next):g._prev?g._next||(g._prev._middleRight=null):g._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(u){var c=u.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:c,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(u){var c=this._map.mouseEventToLayerPoint(u.originalEvent.touches[0]),g=this._map.layerPointToLatLng(c),p=u.target;L.extend(p._origLatLng,g),p._middleLeft&&p._middleLeft.setLatLng(this._getMiddleLatLng(p._prev,p)),p._middleRight&&p._middleRight.setLatLng(this._getMiddleLatLng(p,p._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(u,c){this._markerGroup.eachLayer(function(g){g._index>u&&(g._index+=c)})},_createMiddleMarker:function(u,c){var g,p,v,y=this._getMiddleLatLng(u,c),_=this._createMarker(y);_.setOpacity(.6),u._middleRight=c._middleLeft=_,p=function(){_.off("touchmove",p,this);var I=c._index;_._index=I,_.off("click",g,this).on("click",this._onMarkerClick,this),y.lat=_.getLatLng().lat,y.lng=_.getLatLng().lng,this._spliceLatLngs(I,0,y),this._markers.splice(I,0,_),_.setOpacity(1),this._updateIndexes(I,1),c._index++,this._updatePrevNext(u,_),this._updatePrevNext(_,c),this._poly.fire("editstart")},v=function(){_.off("dragstart",p,this),_.off("dragend",v,this),_.off("touchmove",p,this),this._createMiddleMarker(u,_),this._createMiddleMarker(_,c)},g=function(){p.call(this),v.call(this),this._fireEdit()},_.on("click",g,this).on("dragstart",p,this).on("dragend",v,this).on("touchmove",p,this),this._markerGroup.addLayer(_)},_updatePrevNext:function(u,c){u&&(u._next=c),c&&(c._prev=u)},_getMiddleLatLng:function(u,c){var g=this._poly._map,p=g.project(u.getLatLng()),v=g.project(c.getLatLng());return g.unproject(p._add(v)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(u,c){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=u,L.Util.setOptions(this,c)},addHooks:function(){var u=this._shape;this._shape._map&&(this._map=this._shape._map,u.setStyle(u.options.editing),u._map&&(this._map=u._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var u=this._shape;if(u.setStyle(u.options.original),u._map){this._unbindMarker(this._moveMarker);for(var c=0,g=this._resizeMarkers.length;c<g;c++)this._unbindMarker(this._resizeMarkers[c]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(u,c){var g=new L.Marker.Touch(u,{draggable:!0,icon:c,zIndexOffset:10});return this._bindMarker(g),this._markerGroup.addLayer(g),g},_bindMarker:function(u){u.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(u){u.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(u){u.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(u){var c=u.target,g=c.getLatLng();c===this._moveMarker?this._move(g):this._resize(g),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(u){u.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(u){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,u),typeof this._getCorners=="function"){var c=this._getCorners(),g=u.target,p=g._cornerIndex;g.setOpacity(0),this._oppositeCorner=c[(p+2)%4],this._toggleCornerMarkers(0,p)}this._shape.fire("editstart")},_onTouchMove:function(u){var c=this._map.mouseEventToLayerPoint(u.originalEvent.touches[0]),g=this._map.layerPointToLatLng(c);return u.target===this._moveMarker?this._move(g):this._resize(g),this._shape.redraw(),!1},_onTouchEnd:function(u){u.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var u=this._shape.getBounds(),c=u.getCenter();this._moveMarker=this._createMarker(c,this.options.moveIcon)},_createResizeMarker:function(){var u=this._getCorners();this._resizeMarkers=[];for(var c=0,g=u.length;c<g;c++)this._resizeMarkers.push(this._createMarker(u[c],this.options.resizeIcon)),this._resizeMarkers[c]._cornerIndex=c},_onMarkerDragStart:function(u){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,u);var c=this._getCorners(),g=u.target,p=g._cornerIndex;this._oppositeCorner=c[(p+2)%4],this._toggleCornerMarkers(0,p)},_onMarkerDragEnd:function(u){var c,g,p=u.target;p===this._moveMarker&&(c=this._shape.getBounds(),g=c.getCenter(),p.setLatLng(g)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,u)},_move:function(u){for(var c,g=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),p=this._shape.getBounds(),v=p.getCenter(),y=[],_=0,I=g.length;_<I;_++)c=[g[_].lat-v.lat,g[_].lng-v.lng],y.push([u.lat+c[0],u.lng+c[1]]);this._shape.setLatLngs(y),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(u){var c;this._shape.setBounds(L.latLngBounds(u,this._oppositeCorner)),c=this._shape.getBounds(),this._moveMarker.setLatLng(c.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var u=this._shape.getBounds();return[u.getNorthWest(),u.getNorthEast(),u.getSouthEast(),u.getSouthWest()]},_toggleCornerMarkers:function(u){for(var c=0,g=this._resizeMarkers.length;c<g;c++)this._resizeMarkers[c].setOpacity(u)},_repositionCornerMarkers:function(){for(var u=this._getCorners(),c=0,g=this._resizeMarkers.length;c<g;c++)this._resizeMarkers[c].setLatLng(u[c])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var u=this._shape.getLatLng();this._moveMarker=this._createMarker(u,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(u){if(this._resizeMarkers.length){var c=this._getResizeMarkerPoint(u);this._resizeMarkers[0].setLatLng(c)}this._shape.setLatLng(u),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var u=this._shape.getLatLng(),c=this._getResizeMarkerPoint(u);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(c,this.options.resizeIcon))},_getResizeMarkerPoint:function(u){var c=this._shape._radius*Math.cos(Math.PI/4),g=this._map.project(u);return this._map.unproject([g.x+c,g.y-c])},_resize:function(u){var c=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=c.distanceTo(u):radius=this._map.distance(c,u),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(u,c){var g={};if(u.touches!==void 0){if(!u.touches.length)return;g=u.touches[0]}else if(u.pointerType!=="touch"||(g=u,!this._filterClick(u)))return;var p=this._map.mouseEventToContainerPoint(g),v=this._map.mouseEventToLayerPoint(g),y=this._map.layerPointToLatLng(v);this._map.fire(c,{latlng:y,layerPoint:v,containerPoint:p,pageX:g.pageX,pageY:g.pageY,originalEvent:u})},_filterClick:function(u){var c=u.timeStamp||u.originalEvent.timeStamp,g=L.DomEvent._lastClick&&c-L.DomEvent._lastClick;return g&&g>100&&g<500||u.target._simulatedClick&&!u._simulated?(L.DomEvent.stop(u),!1):(L.DomEvent._lastClick=c,!0)},_onTouchStart:function(u){this._map._loaded&&this._touchEvent(u,"touchstart")},_onTouchEnd:function(u){this._map._loaded&&this._touchEvent(u,"touchend")},_onTouchCancel:function(u){if(this._map._loaded){var c="touchcancel";this._detectIE()&&(c="pointercancel"),this._touchEvent(u,c)}},_onTouchLeave:function(u){this._map._loaded&&this._touchEvent(u,"touchleave")},_onTouchMove:function(u){this._map._loaded&&this._touchEvent(u,"touchmove")},_detectIE:function(){var u=n.navigator.userAgent,c=u.indexOf("MSIE ");if(c>0)return parseInt(u.substring(c+5,u.indexOf(".",c)),10);if(u.indexOf("Trident/")>0){var g=u.indexOf("rv:");return parseInt(u.substring(g+3,u.indexOf(".",g)),10)}var p=u.indexOf("Edge/");return p>0&&parseInt(u.substring(p+5,u.indexOf(".",p)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var u=this._icon,c=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?c.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):c.concat(["touchcancel"]),L.DomUtil.addClass(u,"leaflet-clickable"),L.DomEvent.on(u,"click",this._onMouseClick,this),L.DomEvent.on(u,"keypress",this._onKeyPress,this);for(var g=0;g<c.length;g++)L.DomEvent.on(u,c[g],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var u=n.navigator.userAgent,c=u.indexOf("MSIE ");if(c>0)return parseInt(u.substring(c+5,u.indexOf(".",c)),10);if(u.indexOf("Trident/")>0){var g=u.indexOf("rv:");return parseInt(u.substring(g+3,u.indexOf(".",g)),10)}var p=u.indexOf("Edge/");return p>0&&parseInt(u.substring(p+5,u.indexOf(".",p)),10)}}),L.LatLngUtil={cloneLatLngs:function(u){for(var c=[],g=0,p=u.length;g<p;g++)Array.isArray(u[g])?c.push(L.LatLngUtil.cloneLatLngs(u[g])):c.push(this.cloneLatLng(u[g]));return c},cloneLatLng:function(u){return L.latLng(u.lat,u.lng)}},function(){var u={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(c){var g,p,v=c.length,y=0,_=Math.PI/180;if(v>2){for(var I=0;I<v;I++)g=c[I],p=c[(I+1)%v],y+=(p.lng-g.lng)*_*(2+Math.sin(g.lat*_)+Math.sin(p.lat*_));y=6378137*y*6378137/2}return Math.abs(y)},formattedNumber:function(c,g){var p=parseFloat(c).toFixed(g),v=L.drawLocal.format&&L.drawLocal.format.numeric,y=v&&v.delimiters,_=y&&y.thousands,I=y&&y.decimal;if(_||I){var w=p.split(".");p=_?w[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+_):w[0],I=I||".",w.length>1&&(p=p+I+w[1])}return p},readableArea:function(c,g,_){var v,y,_=L.Util.extend({},u,_);return g?(y=["ha","m"],type=typeof g,type==="string"?y=[g]:type!=="boolean"&&(y=g),v=c>=1e6&&y.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*c,_.km)+" km\xB2":c>=1e4&&y.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*c,_.ha)+" ha":L.GeometryUtil.formattedNumber(c,_.m)+" m\xB2"):(c/=.836127,v=c>=3097600?L.GeometryUtil.formattedNumber(c/3097600,_.mi)+" mi\xB2":c>=4840?L.GeometryUtil.formattedNumber(c/4840,_.ac)+" acres":L.GeometryUtil.formattedNumber(c,_.yd)+" yd\xB2"),v},readableDistance:function(c,g,p,v,I){var _,I=L.Util.extend({},u,I);switch(g?typeof g=="string"?g:"metric":p?"feet":v?"nauticalMile":"yards"){case"metric":_=c>1e3?L.GeometryUtil.formattedNumber(c/1e3,I.km)+" km":L.GeometryUtil.formattedNumber(c,I.m)+" m";break;case"feet":c*=3.28083,_=L.GeometryUtil.formattedNumber(c,I.ft)+" ft";break;case"nauticalMile":c*=.53996,_=L.GeometryUtil.formattedNumber(c/1e3,I.nm)+" nm";break;case"yards":default:c*=1.09361,_=c>1760?L.GeometryUtil.formattedNumber(c/1760,I.mi)+" miles":L.GeometryUtil.formattedNumber(c,I.yd)+" yd"}return _},isVersion07x:function(){var c=L.version.split(".");return parseInt(c[0],10)===0&&parseInt(c[1],10)===7}})}(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(u,c,g,p){return this._checkCounterclockwise(u,g,p)!==this._checkCounterclockwise(c,g,p)&&this._checkCounterclockwise(u,c,g)!==this._checkCounterclockwise(u,c,p)},_checkCounterclockwise:function(u,c,g){return(g.y-u.y)*(c.x-u.x)>(c.y-u.y)*(g.x-u.x)}}),L.Polyline.include({intersects:function(){var u,c,g,p=this._getProjectedPoints(),v=p?p.length:0;if(this._tooFewPointsForIntersection())return!1;for(u=v-1;u>=3;u--)if(c=p[u-1],g=p[u],this._lineSegmentsIntersectsRange(c,g,u-2))return!0;return!1},newLatLngIntersects:function(u,c){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(u),c)},newPointIntersects:function(u,c){var g=this._getProjectedPoints(),p=g?g.length:0,v=g?g[p-1]:null,y=p-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(v,u,y,c?1:0)},_tooFewPointsForIntersection:function(u){var c=this._getProjectedPoints(),g=c?c.length:0;return g+=u||0,!c||g<=3},_lineSegmentsIntersectsRange:function(u,c,g,p){var v,y,_=this._getProjectedPoints();p=p||0;for(var I=g;I>p;I--)if(v=_[I-1],y=_[I],L.LineUtil.segmentsIntersect(u,c,v,y))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var u=[],c=this._defaultShape(),g=0;g<c.length;g++)u.push(this._map.latLngToLayerPoint(c[g]));return u}}),L.Polygon.include({intersects:function(){var u,c,g,p,v=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(u=v.length,c=v[0],g=v[u-1],p=u-2,this._lineSegmentsIntersectsRange(g,c,p,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(u){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,u);var c;this._toolbars={},L.DrawToolbar&&this.options.draw&&(c=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=c,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(c=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=c,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(u){var c,g=L.DomUtil.create("div","leaflet-draw"),p=!1;for(var v in this._toolbars)this._toolbars.hasOwnProperty(v)&&(c=this._toolbars[v].addToolbar(u))&&(p||(L.DomUtil.hasClass(c,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(c.childNodes[0],"leaflet-draw-toolbar-top"),p=!0),g.appendChild(c));return g},onRemove:function(){for(var u in this._toolbars)this._toolbars.hasOwnProperty(u)&&this._toolbars[u].removeToolbar()},setDrawingOptions:function(u){for(var c in this._toolbars)this._toolbars[c]instanceof L.DrawToolbar&&this._toolbars[c].setOptions(u)},_toolbarEnabled:function(u){var c=u.target;for(var g in this._toolbars)this._toolbars[g]!==c&&this._toolbars[g].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(u){L.setOptions(this,u),this._modes={},this._actionButtons=[],this._activeMode=null;var c=L.version.split(".");parseInt(c[0],10)===1&&parseInt(c[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(u){var c,g=L.DomUtil.create("div","leaflet-draw-section"),p=0,v=this._toolbarClass||"",y=this.getModeHandlers(u);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=u,c=0;c<y.length;c++)y[c].enabled&&this._initModeHandler(y[c].handler,this._toolbarContainer,p++,v,y[c].title);if(p)return this._lastButtonIndex=--p,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),g.appendChild(this._toolbarContainer),g.appendChild(this._actionsContainer),g},removeToolbar:function(){for(var u in this._modes)this._modes.hasOwnProperty(u)&&(this._disposeButton(this._modes[u].button,this._modes[u].handler.enable,this._modes[u].handler),this._modes[u].handler.disable(),this._modes[u].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var c=0,g=this._actionButtons.length;c<g;c++)this._disposeButton(this._actionButtons[c].button,this._actionButtons[c].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(u,c,g,p,v){var y=u.type;this._modes[y]={},this._modes[y].handler=u,this._modes[y].button=this._createButton({type:y,title:v,className:p+"-"+y,container:c,callback:this._modes[y].handler.enable,context:this._modes[y].handler}),this._modes[y].buttonIndex=g,this._modes[y].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!n.MSStream},_createButton:function(u){var c=L.DomUtil.create("a",u.className||"",u.container),g=L.DomUtil.create("span","sr-only",u.container);c.href="#",c.appendChild(g),u.title&&(c.title=u.title,g.innerHTML=u.title),u.text&&(c.innerHTML=u.text,g.innerHTML=u.text);var p=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(c,"click",L.DomEvent.stopPropagation).on(c,"mousedown",L.DomEvent.stopPropagation).on(c,"dblclick",L.DomEvent.stopPropagation).on(c,"touchstart",L.DomEvent.stopPropagation).on(c,"click",L.DomEvent.preventDefault).on(c,p,u.callback,u.context),c},_disposeButton:function(u,c){var g=this._detectIOS()?"touchstart":"click";L.DomEvent.off(u,"click",L.DomEvent.stopPropagation).off(u,"mousedown",L.DomEvent.stopPropagation).off(u,"dblclick",L.DomEvent.stopPropagation).off(u,"touchstart",L.DomEvent.stopPropagation).off(u,"click",L.DomEvent.preventDefault).off(u,g,c)},_handlerActivated:function(u){this.disable(),this._activeMode=this._modes[u.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(u){var c,g,p,v,y=this._actionsContainer,_=this.getActions(u),I=_.length;for(g=0,p=this._actionButtons.length;g<p;g++)this._disposeButton(this._actionButtons[g].button,this._actionButtons[g].callback);for(this._actionButtons=[];y.firstChild;)y.removeChild(y.firstChild);for(var w=0;w<I;w++)"enabled"in _[w]&&!_[w].enabled||(c=L.DomUtil.create("li","",y),v=this._createButton({title:_[w].title,text:_[w].text,container:c,callback:_[w].callback,context:_[w].context}),this._actionButtons.push({button:v,callback:_[w].callback}))},_showActionsToolbar:function(){var u=this._activeMode.buttonIndex,c=this._lastButtonIndex,g=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=g+"px",u===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),u===c&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(u){this._map=u,this._popupPane=u._panes.popupPane,this._visible=!1,this._container=u.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(u){return this._container?(u.subtext=u.subtext||"",u.subtext.length!==0||this._singleLineLabel?u.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(u.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+u.subtext+"</span><br />":"")+"<span>"+u.text+"</span>",u.text||u.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(u){var c=this._map.latLngToLayerPoint(u),g=this._container;return this._container&&(this._visible&&(g.style.visibility="inherit"),L.DomUtil.setPosition(g,c)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(u){for(var c in this.options)this.options.hasOwnProperty(c)&&u[c]&&(u[c]=L.extend({},this.options[c],u[c]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,u)},getModeHandlers:function(u){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(u,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(u,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(u,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(u,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(u,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(u,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(u){return[{enabled:u.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:u.completeShape,context:u},{enabled:u.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:u.deleteLastVertex,context:u},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(u){L.setOptions(this,u);for(var c in this._modes)this._modes.hasOwnProperty(c)&&u.hasOwnProperty(c)&&this._modes[c].handler.setOptions(u[c])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(u){u.edit&&(u.edit.selectedPathOptions===void 0&&(u.edit.selectedPathOptions=this.options.edit.selectedPathOptions),u.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,u.edit.selectedPathOptions)),u.remove&&(u.remove=L.extend({},this.options.remove,u.remove)),u.poly&&(u.poly=L.extend({},this.options.poly,u.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,u),this._selectedFeatureCount=0},getModeHandlers:function(u){var c=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(u,{featureGroup:c,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(u,{featureGroup:c}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(u){var c=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return u.removeAllLayers&&c.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),c},addToolbar:function(u){var c=L.Toolbar.prototype.addToolbar.call(this,u);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),c},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var u,c=this.options.featureGroup,g=c.getLayers().length!==0;this.options.edit&&(u=this._modes[L.EditToolbar.Edit.TYPE].button,g?L.DomUtil.removeClass(u,"leaflet-disabled"):L.DomUtil.addClass(u,"leaflet-disabled"),u.setAttribute("title",g?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(u=this._modes[L.EditToolbar.Delete.TYPE].button,g?L.DomUtil.removeClass(u,"leaflet-disabled"):L.DomUtil.addClass(u,"leaflet-disabled"),u.setAttribute("title",g?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(u,c){if(L.Handler.prototype.initialize.call(this,u),L.setOptions(this,c),this._featureGroup=c.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var g=L.version.split(".");parseInt(g[0],10)===1&&parseInt(g[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var u=this._map;u&&(u.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),u._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(u){this._revertLayer(u)},this)},save:function(){var u=new L.LayerGroup;this._featureGroup.eachLayer(function(c){c.edited&&(u.addLayer(c),c.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:u})},_backupLayer:function(u){var c=L.Util.stamp(u);this._uneditedLayerProps[c]||(u instanceof L.Polyline||u instanceof L.Polygon||u instanceof L.Rectangle?this._uneditedLayerProps[c]={latlngs:L.LatLngUtil.cloneLatLngs(u.getLatLngs())}:u instanceof L.Circle?this._uneditedLayerProps[c]={latlng:L.LatLngUtil.cloneLatLng(u.getLatLng()),radius:u.getRadius()}:(u instanceof L.Marker||u instanceof L.CircleMarker)&&(this._uneditedLayerProps[c]={latlng:L.LatLngUtil.cloneLatLng(u.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(u){var c=L.Util.stamp(u);u.edited=!1,this._uneditedLayerProps.hasOwnProperty(c)&&(u instanceof L.Polyline||u instanceof L.Polygon||u instanceof L.Rectangle?u.setLatLngs(this._uneditedLayerProps[c].latlngs):u instanceof L.Circle?(u.setLatLng(this._uneditedLayerProps[c].latlng),u.setRadius(this._uneditedLayerProps[c].radius)):(u instanceof L.Marker||u instanceof L.CircleMarker)&&u.setLatLng(this._uneditedLayerProps[c].latlng),u.fire("revert-edited",{layer:u}))},_enableLayerEdit:function(u){var c,g,p=u.layer||u.target||u;this._backupLayer(p),this.options.poly&&(g=L.Util.extend({},this.options.poly),p.options.poly=g),this.options.selectedPathOptions&&(c=L.Util.extend({},this.options.selectedPathOptions),c.maintainColor&&(c.color=p.options.color,c.fillColor=p.options.fillColor),p.options.original=L.extend({},p.options),p.options.editing=c),p instanceof L.Marker?(p.editing&&p.editing.enable(),p.dragging.enable(),p.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):p.editing.enable()},_disableLayerEdit:function(u){var c=u.layer||u.target||u;c.edited=!1,c.editing&&c.editing.disable(),delete c.options.editing,delete c.options.original,this._selectedPathOptions&&(c instanceof L.Marker?this._toggleMarkerHighlight(c):(c.setStyle(c.options.previousOptions),delete c.options.previousOptions)),c instanceof L.Marker?(c.dragging.disable(),c.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):c.editing.disable()},_onMouseMove:function(u){this._tooltip.updatePosition(u.latlng)},_onMarkerDragEnd:function(u){var c=u.target;c.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:c})},_onTouchMove:function(u){var c=u.originalEvent.changedTouches[0],g=this._map.mouseEventToLayerPoint(c),p=this._map.layerPointToLatLng(g);u.target.setLatLng(p)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(u,c){if(L.Handler.prototype.initialize.call(this,u),L.Util.setOptions(this,c),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var g=L.version.split(".");parseInt(g[0],10)===1&&parseInt(g[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var u=this._map;u&&(u.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(u){this._deletableLayers.addLayer(u),u.fire("revert-deleted",{layer:u})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(u){this._removeLayer({layer:u})},this),this.save()},_enableLayerDelete:function(u){(u.layer||u.target||u).on("click",this._removeLayer,this)},_disableLayerDelete:function(u){var c=u.layer||u.target||u;c.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(c)},_removeLayer:function(u){var c=u.layer||u.target||u;this._deletableLayers.removeLayer(c),this._deletedLayers.addLayer(c),c.fire("deleted")},_onMouseMove:function(u){this._tooltip.updatePosition(u.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);var fn={exports:{}},ot={};function Ri(n,s){return{type:"Feature",properties:s||{},geometry:n}}ot.feature=Ri;ot.point=function(n,s){if(!Array.isArray(n))throw new Error("Coordinates must be an array");if(n.length<2)throw new Error("Coordinates must be at least 2 numbers long");return Ri({type:"Point",coordinates:n.slice()},s)};ot.polygon=function(n,s){if(!n)throw new Error("No coordinates passed");for(var a=0;a<n.length;a++){var h=n[a];if(h.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var u=0;u<h[h.length-1].length;u++)if(h[h.length-1][u]!==h[0][u])throw new Error("First and last Position are not equivalent.")}return Ri({type:"Polygon",coordinates:n},s)};ot.lineString=function(n,s){if(!n)throw new Error("No coordinates passed");return Ri({type:"LineString",coordinates:n},s)};ot.featureCollection=function(n){return{type:"FeatureCollection",features:n}};ot.multiLineString=function(n,s){if(!n)throw new Error("No coordinates passed");return Ri({type:"MultiLineString",coordinates:n},s)};ot.multiPoint=function(n,s){if(!n)throw new Error("No coordinates passed");return Ri({type:"MultiPoint",coordinates:n},s)};ot.multiPolygon=function(n,s){if(!n)throw new Error("No coordinates passed");return Ri({type:"MultiPolygon",coordinates:n},s)};ot.geometryCollection=function(n,s){return Ri({type:"GeometryCollection",geometries:n},s)};var Wh={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,kilometers:6373,kilometres:6373};ot.radiansToDistance=function(n,s){var a=Wh[s||"kilometers"];if(a===void 0)throw new Error("Invalid unit");return n*a};ot.distanceToRadians=function(n,s){var a=Wh[s||"kilometers"];if(a===void 0)throw new Error("Invalid unit");return n/a};ot.distanceToDegrees=function(n,s){var a=Wh[s||"kilometers"];if(a===void 0)throw new Error("Invalid unit");return n/a*57.2958};var Sp=ot.polygon,Tp=ot.featureCollection,Jh=function(n,s){return Tp(Mp(n.features.map(function(a){var h={x:a.geometry.coordinates[0],y:a.geometry.coordinates[1]};return s&&(h.z=a.properties[s]),h})).map(function(a){return Sp([[[a.a.x,a.a.y],[a.b.x,a.b.y],[a.c.x,a.c.y],[a.a.x,a.a.y]]],{a:a.a.z,b:a.b.z,c:a.c.z})}))};function bl(n,s,a){this.a=n,this.b=s,this.c=a;var h=s.x-n.x,u=s.y-n.y,c=a.x-n.x,g=a.y-n.y,p=h*(n.x+s.x)+u*(n.y+s.y),v=c*(n.x+a.x)+g*(n.y+a.y),y=2*(h*(a.y-s.y)-u*(a.x-s.x)),_,I,w,D;Math.abs(y)<1e-6?(_=Math.min(n.x,s.x,a.x),I=Math.min(n.y,s.y,a.y),w=(Math.max(n.x,s.x,a.x)-_)*.5,D=(Math.max(n.y,s.y,a.y)-I)*.5,this.x=_+w,this.y=I+D,this.r=w*w+D*D):(this.x=(g*p-u*v)/y,this.y=(h*v-c*p)/y,w=this.x-n.x,D=this.y-n.y,this.r=w*w+D*D)}function Pp(n,s){return s.x-n.x}function bp(n){var s=n.length,a,h,u,c,g;t:for(;s;)for(h=n[--s],a=n[--s],u=s;u;)if(g=n[--u],c=n[--u],a===c&&h===g||a===g&&h===c){n.splice(s,2),n.splice(u,2),s-=2;continue t}}function Mp(n){if(n.length<3)return[];n.sort(Pp);for(var s=n.length-1,a=n[s].x,h=n[0].x,u=n[s].y,c=u;s--;)n[s].y<u&&(u=n[s].y),n[s].y>c&&(c=n[s].y);var g=h-a,p=c-u,v=g>p?g:p,y=(h+a)*.5,_=(c+u)*.5,I=[new bl({x:y-20*v,y:_-v,__sentinel:!0},{x:y,y:_+20*v,__sentinel:!0},{x:y+20*v,y:_-v,__sentinel:!0})],w=[],D=[],P,C,Z;for(s=n.length;s--;){for(D.length=0,P=I.length;P--;){if(g=n[s].x-I[P].x,g>0&&g*g>I[P].r){w.push(I[P]),I.splice(P,1);continue}p=n[s].y-I[P].y,!(g*g+p*p>I[P].r)&&(D.push(I[P].a,I[P].b,I[P].b,I[P].c,I[P].c,I[P].a),I.splice(P,1))}for(bp(D),P=D.length;P;)Z=D[--P],C=D[--P],I.push(new bl(C,Z,n[s]))}for(Array.prototype.push.apply(w,I),s=w.length;s--;)(w[s].a.__sentinel||w[s].b.__sentinel||w[s].c.__sentinel)&&w.splice(s,1);return w}var Di={};function Op(n){if(Array.isArray(n)&&typeof n[0]=="number"&&typeof n[1]=="number")return n;if(n){if(n.type==="Feature"&&n.geometry&&n.geometry.type==="Point"&&Array.isArray(n.geometry.coordinates))return n.geometry.coordinates;if(n.type==="Point"&&Array.isArray(n.coordinates))return n.coordinates}throw new Error("A coordinate, feature, or point geometry is required")}function Rp(n,s,a){if(!s||!a)throw new Error("type and name required");if(!n||n.type!==s)throw new Error("Invalid input to "+a+": must be a "+s+", given "+n.type)}function Dp(n,s,a){if(!a)throw new Error(".featureOf() requires a name");if(!n||n.type!=="Feature"||!n.geometry)throw new Error("Invalid input to "+a+", Feature with geometry required");if(!n.geometry||n.geometry.type!==s)throw new Error("Invalid input to "+a+": must be a "+s+", given "+n.geometry.type)}function Ap(n,s,a){if(!a)throw new Error(".collectionOf() requires a name");if(!n||n.type!=="FeatureCollection")throw new Error("Invalid input to "+a+", FeatureCollection required");for(var h=0;h<n.features.length;h++){var u=n.features[h];if(!u||u.type!=="Feature"||!u.geometry)throw new Error("Invalid input to "+a+", Feature with geometry required");if(!u.geometry||u.geometry.type!==s)throw new Error("Invalid input to "+a+": must be a "+s+", given "+u.geometry.type)}}Di.geojsonType=Rp;Di.collectionOf=Ap;Di.featureOf=Dp;Di.getCoord=Op;var kp=Di,Hr=function(s,a){var h=kp.getCoord(s),u=a.geometry.coordinates;a.geometry.type==="Polygon"&&(u=[u]);for(var c=0,g=!1;c<u.length&&!g;c++)if(Ml(h,u[c][0])){for(var p=!1,v=1;v<u[c].length&&!p;)Ml(h,u[c][v])&&(p=!0),v++;p||(g=!0)}return g};function Ml(n,s){for(var a=!1,h=0,u=s.length-1;h<s.length;u=h++){var c=s[h][0],g=s[h][1],p=s[u][0],v=s[u][1],y=g>n[1]!=v>n[1]&&n[0]<(p-c)*(n[1]-g)/(v-g)+c;y&&(a=!a)}return a}var Fp=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"},zp=function(n,s){if(!Fp(n))throw new Error("Coordinates must be an array");if(n.length<2)throw new Error("Coordinates must be at least 2 numbers long");return{type:"Feature",geometry:{type:"Point",coordinates:n},properties:s||{}}},Gp=zp,Bp=function(n,s){var a=n[0],h=n[1],u=n[2];n[3];for(var c=(u-a)/s,g={type:"FeatureCollection",features:[]},p=0;p<=s;p++)for(var v=0;v<=s;v++)g.features.push(Gp([p*c+a,v*c+h]));return g},gn={};function Kh(n,s,a){var h,u,c,g,p,v,y,_,I,w=0,D,P=n.type==="FeatureCollection",C=n.type==="Feature",Z=P?n.features.length:1;for(h=0;h<Z;h++)for(I=P?n.features[h].geometry:C?n.geometry:n,D=I.type==="GeometryCollection",y=D?I.geometries.length:1,g=0;g<y;g++)if(v=D?I.geometries[g]:I,_=v.coordinates,w=a&&(v.type==="Polygon"||v.type==="MultiPolygon")?1:0,v.type==="Point")s(_);else if(v.type==="LineString"||v.type==="MultiPoint")for(u=0;u<_.length;u++)s(_[u]);else if(v.type==="Polygon"||v.type==="MultiLineString")for(u=0;u<_.length;u++)for(c=0;c<_[u].length-w;c++)s(_[u][c]);else if(v.type==="MultiPolygon")for(u=0;u<_.length;u++)for(c=0;c<_[u].length;c++)for(p=0;p<_[u][c].length-w;p++)s(_[u][c][p]);else throw new Error("Unknown Geometry Type")}gn.coordEach=Kh;function qp(n,s,a,h){return Kh(n,function(u){a=s(a,u)},h),a}gn.coordReduce=qp;function Lf(n,s){var a;switch(n.type){case"FeatureCollection":for(a=0;a<n.features.length;a++)s(n.features[a].properties);break;case"Feature":s(n.properties);break}}gn.propEach=Lf;function Up(n,s,a){return Lf(n,function(h){a=s(a,h)}),a}gn.propReduce=Up;function Vp(n,s){if(n.type==="Feature")s(n);else if(n.type==="FeatureCollection")for(var a=0;a<n.features.length;a++)s(n.features[a])}gn.featureEach=Vp;function Hp(n){var s=[];return Kh(n,function(a){s.push(a)}),s}gn.coordAll=Hp;var Zp=gn.coordEach,Wa=function(n){var s=[1/0,1/0,-1/0,-1/0];return Zp(n,function(a){s[0]>a[0]&&(s[0]=a[0]),s[1]>a[1]&&(s[1]=a[1]),s[2]<a[0]&&(s[2]=a[0]),s[3]<a[1]&&(s[3]=a[1])}),s},Ef=function(n,s){var a=n.geometry.coordinates[0],h=n.geometry.coordinates[1],u=s.geometry.coordinates[0][0][0],c=s.geometry.coordinates[0][0][1],g=s.properties.a,p=s.geometry.coordinates[0][1][0],v=s.geometry.coordinates[0][1][1],y=s.properties.b,_=s.geometry.coordinates[0][2][0],I=s.geometry.coordinates[0][2][1],w=s.properties.c,D=(w*(a-u)*(h-v)+g*(a-p)*(h-I)+y*(a-_)*(h-c)-y*(a-u)*(h-I)-w*(a-p)*(h-c)-g*(a-_)*(h-v))/((a-u)*(h-v)+(a-p)*(h-I)+(a-_)*(h-c)-(a-u)*(h-I)-(a-p)*(h-c)-(a-_)*(h-v));return D},Ol=Di.getCoord,Xp=ot.radiansToDistance,Qe=function(n,s,a){var h=Math.PI/180,u=Ol(n),c=Ol(s),g=h*(c[1]-u[1]),p=h*(c[0]-u[0]),v=h*u[1],y=h*c[1],_=Math.pow(Math.sin(g/2),2)+Math.pow(Math.sin(p/2),2)*Math.cos(v)*Math.cos(y);return Xp(2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_)),a)},Rl=Qe,wf=function(n){var s=Rl(n.slice(0,2),[n[2],n[1]],"miles"),a=Rl(n.slice(0,2),[n[0],n[3]],"miles");if(s>=a){var h=(n[1]+n[3])/2;return[n[0],h-(n[2]-n[0])/2,n[2],h+(n[2]-n[0])/2]}else{var u=(n[0]+n[2])/2;return[u-(n[3]-n[1])/2,n[1],u+(n[3]-n[1])/2,n[3]]}},Yp=If,gh=1e-10;function _a(n,s){var a=n.x-s.x,h=n.y-s.y;return a*a+h*h<gh}function Dl(n){for(var s=n.head;s;){var a=s.next;s.next=s.prev,s.prev=a,s=a}var a=n.head;n.head=n.tail,n.tail=a}function jh(n){this.level=n,this.s=null,this.count=0}jh.prototype.remove_seq=function(n){n.prev?n.prev.next=n.next:this.s=n.next,n.next&&(n.next.prev=n.prev),--this.count};jh.prototype.addSegment=function(n,s){for(var a=this.s,h=null,u=null,c=!1,g=!1;a&&(h==null&&(_a(n,a.head.p)?(h=a,c=!0):_a(n,a.tail.p)&&(h=a)),u==null&&(_a(s,a.head.p)?(u=a,g=!0):_a(s,a.tail.p)&&(u=a)),!(u!=null&&h!=null));)a=a.next;var p=(h!=null?1:0)|(u!=null?2:0);switch(p){case 0:var v={p:n,prev:null},y={p:s,next:null};v.next=y,y.prev=v,h={head:v,tail:y,next:this.s,prev:null,closed:!1},this.s&&(this.s.prev=h),this.s=h,++this.count;break;case 1:var _={p:s};c?(_.next=h.head,_.prev=null,h.head.prev=_,h.head=_):(_.next=null,_.prev=h.tail,h.tail.next=_,h.tail=_);break;case 2:var _={p:n};g?(_.next=u.head,_.prev=null,u.head.prev=_,u.head=_):(_.next=null,_.prev=u.tail,u.tail.next=_,u.tail=_);break;case 3:if(h===u){var _={p:h.tail.p,next:h.head,prev:null};h.head.prev=_,h.head=_,h.closed=!0;break}switch((c?1:0)|(g?2:0)){case 0:Dl(h);case 1:u.tail.next=h.head,h.head.prev=u.tail,u.tail=h.tail,this.remove_seq(h);break;case 3:Dl(h);case 2:h.tail.next=u.head,u.head.prev=h.tail,h.tail=u.tail,this.remove_seq(u);break}}};function If(n){if(n)this.drawContour=n;else{var s=this;s.contours={},this.drawContour=function(a,h,u,c,g,p){var v=s.contours[p];v||(v=s.contours[p]=new jh(g)),v.addSegment({x:a,y:h},{x:u,y:c})},this.contourList=function(){var a=[],h=s.contours;for(var u in h)for(var c=h[u].s,g=h[u].level;c;){var p=c.head,v=[];for(v.level=g,v.k=u;p&&p.p;)v.push(p.p),p=p.next;a.push(v),c=c.next}return a.sort(function(y,_){return y.k-_.k}),a}}this.h=new Array(5),this.sh=new Array(5),this.xh=new Array(5),this.yh=new Array(5)}If.prototype.contour=function(n,s,a,h,u,c,g,p,v){var y=this.h,_=this.sh,I=this.xh,w=this.yh,D=this.drawContour;this.contours={};for(var P=function(At,ut){return(y[ut]*I[At]-y[At]*I[ut])/(y[ut]-y[At])},C=function(At,ut){return(y[ut]*w[At]-y[At]*w[ut])/(y[ut]-y[At])},Z,Y,X,T,N,F,K=0,b=0,O=0,M=0,B=[0,1,1,0],z=[0,0,1,1],x=[[[0,0,8],[0,2,5],[7,6,9]],[[0,3,4],[1,3,1],[4,3,0]],[[9,6,7],[5,2,0],[8,0,0]]],V=u-1;V>=h;V--)for(var rt=s;rt<=a-1;rt++){var bt,qt;if(bt=Math.min(n[rt][V],n[rt][V+1]),qt=Math.min(n[rt+1][V],n[rt+1][V+1]),N=Math.min(bt,qt),bt=Math.max(n[rt][V],n[rt][V+1]),qt=Math.max(n[rt+1][V],n[rt+1][V+1]),F=Math.max(bt,qt),F>=v[0]&&N<=v[p-1]){for(var ee=0;ee<p;ee++)if(v[ee]>=N&&v[ee]<=F){for(var A=4;A>=0;A--)A>0?(y[A]=n[rt+B[A-1]][V+z[A-1]]-v[ee],I[A]=c[rt+B[A-1]],w[A]=g[V+z[A-1]]):(y[0]=.25*(y[1]+y[2]+y[3]+y[4]),I[0]=.5*(c[rt]+c[rt+1]),w[0]=.5*(g[V]+g[V+1])),y[A]>gh?_[A]=1:y[A]<-gh?_[A]=-1:_[A]=0;for(A=1;A<=4;A++)if(Z=A,Y=0,A!=4?X=A+1:X=1,T=x[_[Z]+1][_[Y]+1][_[X]+1],T!=0){switch(T){case 1:K=I[Z],O=w[Z],b=I[Y],M=w[Y];break;case 2:K=I[Y],O=w[Y],b=I[X],M=w[X];break;case 3:K=I[X],O=w[X],b=I[Z],M=w[Z];break;case 4:K=I[Z],O=w[Z],b=P(Y,X),M=C(Y,X);break;case 5:K=I[Y],O=w[Y],b=P(X,Z),M=C(X,Z);break;case 6:K=I[X],O=w[X],b=P(Z,Y),M=C(Z,Y);break;case 7:K=P(Z,Y),O=C(Z,Y),b=P(Y,X),M=C(Y,X);break;case 8:K=P(Y,X),O=C(Y,X),b=P(X,Z),M=C(X,Z);break;case 9:K=P(X,Z),O=C(X,Z),b=P(Z,Y),M=C(Z,Y);break}D(K,O,b,M,v[ee],ee)}}}}};var Wp=Jh,Jp=Hr,Kp=Bp,jp=Wa,$p=Ef,Qp=ot.featureCollection,tm=ot.lineString,em=wf,nm=Yp,im=function(n,s,a,h){for(var u=Wp(n,s),c=jp(n),g=em(c),p=Kp(g,a),v=[],y=0;y<p.features.length;y++)for(var _=p.features[y],I=0;I<u.features.length;I++){var w=u.features[I];Jp(_,w)&&(_.properties={},_.properties[s]=$p(_,w))}for(var D=Math.sqrt(p.features.length),P=0;P<D;P++){for(var C=p.features.slice(P*D,(P+1)*D),Z=[],Y=0;Y<C.length;Y++)C[Y].properties?Z.push(C[Y].properties[s]):Z.push(0);v.push(Z)}for(var X=(g[2]-g[0])/D,T=[],N=[],F=0;F<D;F++)T.push(F*X+g[0]),N.push(F*X+g[1]);var K=new nm;K.contour(v,0,a,0,a,T,N,h.length,h);var b=K.contourList(),O=Qp([]);return b.forEach(function(M){if(M.length>2){var B=[];M.forEach(function(x){B.push([x.x,x.y])});var z=tm(B);z.properties={},z.properties[s]=M.level,O.features.push(z)}}),O},rm=sm;function sm(n){for(var s=0,a=0,h=1;h<n.length;++h)n[h][0]<n[s][0]&&(s=h),n[h][0]>n[a][0]&&(a=h);return s<a?[[s],[a]]:s>a?[[a],[s]]:[[s]]}var Ja={exports:{}},Cf=om,Al=+(Math.pow(2,27)+1);function om(n,s,a){var h=n*s,u=Al*n,c=u-n,g=u-c,p=n-g,v=Al*s,y=v-s,_=v-y,I=s-_,w=h-g*_,D=w-p*_,P=D-g*I,C=p*I-P;return a?(a[0]=C,a[1]=h,a):[C,h]}var am=hm;function um(n,s){var a=n+s,h=a-n,u=a-h,c=s-h,g=n-u,p=g+c;return p?[p,a]:[a]}function hm(n,s){var a=n.length|0,h=s.length|0;if(a===1&&h===1)return um(n[0],s[0]);var u=a+h,c=new Array(u),g=0,p=0,v=0,y=Math.abs,_=n[p],I=y(_),w=s[v],D=y(w),P,C;I<D?(C=_,p+=1,p<a&&(_=n[p],I=y(_))):(C=w,v+=1,v<h&&(w=s[v],D=y(w))),p<a&&I<D||v>=h?(P=_,p+=1,p<a&&(_=n[p],I=y(_))):(P=w,v+=1,v<h&&(w=s[v],D=y(w)));for(var Z=P+C,Y=Z-P,X=C-Y,T=X,N=Z,F,K,b,O,M;p<a&&v<h;)I<D?(P=_,p+=1,p<a&&(_=n[p],I=y(_))):(P=w,v+=1,v<h&&(w=s[v],D=y(w))),C=T,Z=P+C,Y=Z-P,X=C-Y,X&&(c[g++]=X),F=N+Z,K=F-N,b=F-K,O=Z-K,M=N-b,T=M+O,N=F;for(;p<a;)P=_,C=T,Z=P+C,Y=Z-P,X=C-Y,X&&(c[g++]=X),F=N+Z,K=F-N,b=F-K,O=Z-K,M=N-b,T=M+O,N=F,p+=1,p<a&&(_=n[p]);for(;v<h;)P=w,C=T,Z=P+C,Y=Z-P,X=C-Y,X&&(c[g++]=X),F=N+Z,K=F-N,b=F-K,O=Z-K,M=N-b,T=M+O,N=F,v+=1,v<h&&(w=s[v]);return T&&(c[g++]=T),N&&(c[g++]=N),g||(c[g++]=0),c.length=g,c}var lm=cm;function cm(n,s,a){var h=n+s,u=h-n,c=h-u,g=s-u,p=n-c;return a?(a[0]=p+g,a[1]=h,a):[p+g,h]}var Ju=Cf,fm=lm,gm=dm;function dm(n,s){var a=n.length;if(a===1){var h=Ju(n[0],s);return h[0]?h:[h[1]]}var u=new Array(2*a),c=[.1,.1],g=[.1,.1],p=0;Ju(n[0],s,c),c[0]&&(u[p++]=c[0]);for(var v=1;v<a;++v){Ju(n[v],s,g);var y=c[1];fm(y,g[0],c),c[0]&&(u[p++]=c[0]);var _=g[1],I=c[1],w=_+I,D=w-_,P=I-D;c[1]=w,P&&(u[p++]=P)}return c[1]&&(u[p++]=c[1]),p===0&&(u[p++]=0),u.length=p,u}var pm=vm;function mm(n,s){var a=n+s,h=a-n,u=a-h,c=s-h,g=n-u,p=g+c;return p?[p,a]:[a]}function vm(n,s){var a=n.length|0,h=s.length|0;if(a===1&&h===1)return mm(n[0],-s[0]);var u=a+h,c=new Array(u),g=0,p=0,v=0,y=Math.abs,_=n[p],I=y(_),w=-s[v],D=y(w),P,C;I<D?(C=_,p+=1,p<a&&(_=n[p],I=y(_))):(C=w,v+=1,v<h&&(w=-s[v],D=y(w))),p<a&&I<D||v>=h?(P=_,p+=1,p<a&&(_=n[p],I=y(_))):(P=w,v+=1,v<h&&(w=-s[v],D=y(w)));for(var Z=P+C,Y=Z-P,X=C-Y,T=X,N=Z,F,K,b,O,M;p<a&&v<h;)I<D?(P=_,p+=1,p<a&&(_=n[p],I=y(_))):(P=w,v+=1,v<h&&(w=-s[v],D=y(w))),C=T,Z=P+C,Y=Z-P,X=C-Y,X&&(c[g++]=X),F=N+Z,K=F-N,b=F-K,O=Z-K,M=N-b,T=M+O,N=F;for(;p<a;)P=_,C=T,Z=P+C,Y=Z-P,X=C-Y,X&&(c[g++]=X),F=N+Z,K=F-N,b=F-K,O=Z-K,M=N-b,T=M+O,N=F,p+=1,p<a&&(_=n[p]);for(;v<h;)P=w,C=T,Z=P+C,Y=Z-P,X=C-Y,X&&(c[g++]=X),F=N+Z,K=F-N,b=F-K,O=Z-K,M=N-b,T=M+O,N=F,v+=1,v<h&&(w=-s[v]);return T&&(c[g++]=T),N&&(c[g++]=N),g||(c[g++]=0),c.length=g,c}(function(n){var s=Cf,a=am,h=gm,u=pm,c=5,g=11102230246251565e-32,p=(3+16*g)*g,v=(7+56*g)*g;function y(T,N,F,K){return function(O,M,B){var z=T(T(N(M[1],B[0]),N(-B[1],M[0])),T(N(O[1],M[0]),N(-M[1],O[0]))),x=T(N(O[1],B[0]),N(-B[1],O[0])),V=K(z,x);return V[V.length-1]}}function _(T,N,F,K){return function(O,M,B,z){var x=T(T(F(T(N(B[1],z[0]),N(-z[1],B[0])),M[2]),T(F(T(N(M[1],z[0]),N(-z[1],M[0])),-B[2]),F(T(N(M[1],B[0]),N(-B[1],M[0])),z[2]))),T(F(T(N(M[1],z[0]),N(-z[1],M[0])),O[2]),T(F(T(N(O[1],z[0]),N(-z[1],O[0])),-M[2]),F(T(N(O[1],M[0]),N(-M[1],O[0])),z[2])))),V=T(T(F(T(N(B[1],z[0]),N(-z[1],B[0])),O[2]),T(F(T(N(O[1],z[0]),N(-z[1],O[0])),-B[2]),F(T(N(O[1],B[0]),N(-B[1],O[0])),z[2]))),T(F(T(N(M[1],B[0]),N(-B[1],M[0])),O[2]),T(F(T(N(O[1],B[0]),N(-B[1],O[0])),-M[2]),F(T(N(O[1],M[0]),N(-M[1],O[0])),B[2])))),rt=K(x,V);return rt[rt.length-1]}}function I(T,N,F,K){return function(O,M,B,z,x){var V=T(T(T(F(T(F(T(N(z[1],x[0]),N(-x[1],z[0])),B[2]),T(F(T(N(B[1],x[0]),N(-x[1],B[0])),-z[2]),F(T(N(B[1],z[0]),N(-z[1],B[0])),x[2]))),M[3]),T(F(T(F(T(N(z[1],x[0]),N(-x[1],z[0])),M[2]),T(F(T(N(M[1],x[0]),N(-x[1],M[0])),-z[2]),F(T(N(M[1],z[0]),N(-z[1],M[0])),x[2]))),-B[3]),F(T(F(T(N(B[1],x[0]),N(-x[1],B[0])),M[2]),T(F(T(N(M[1],x[0]),N(-x[1],M[0])),-B[2]),F(T(N(M[1],B[0]),N(-B[1],M[0])),x[2]))),z[3]))),T(F(T(F(T(N(B[1],z[0]),N(-z[1],B[0])),M[2]),T(F(T(N(M[1],z[0]),N(-z[1],M[0])),-B[2]),F(T(N(M[1],B[0]),N(-B[1],M[0])),z[2]))),-x[3]),T(F(T(F(T(N(z[1],x[0]),N(-x[1],z[0])),M[2]),T(F(T(N(M[1],x[0]),N(-x[1],M[0])),-z[2]),F(T(N(M[1],z[0]),N(-z[1],M[0])),x[2]))),O[3]),F(T(F(T(N(z[1],x[0]),N(-x[1],z[0])),O[2]),T(F(T(N(O[1],x[0]),N(-x[1],O[0])),-z[2]),F(T(N(O[1],z[0]),N(-z[1],O[0])),x[2]))),-M[3])))),T(T(F(T(F(T(N(M[1],x[0]),N(-x[1],M[0])),O[2]),T(F(T(N(O[1],x[0]),N(-x[1],O[0])),-M[2]),F(T(N(O[1],M[0]),N(-M[1],O[0])),x[2]))),z[3]),T(F(T(F(T(N(M[1],z[0]),N(-z[1],M[0])),O[2]),T(F(T(N(O[1],z[0]),N(-z[1],O[0])),-M[2]),F(T(N(O[1],M[0]),N(-M[1],O[0])),z[2]))),-x[3]),F(T(F(T(N(B[1],z[0]),N(-z[1],B[0])),M[2]),T(F(T(N(M[1],z[0]),N(-z[1],M[0])),-B[2]),F(T(N(M[1],B[0]),N(-B[1],M[0])),z[2]))),O[3]))),T(F(T(F(T(N(B[1],z[0]),N(-z[1],B[0])),O[2]),T(F(T(N(O[1],z[0]),N(-z[1],O[0])),-B[2]),F(T(N(O[1],B[0]),N(-B[1],O[0])),z[2]))),-M[3]),T(F(T(F(T(N(M[1],z[0]),N(-z[1],M[0])),O[2]),T(F(T(N(O[1],z[0]),N(-z[1],O[0])),-M[2]),F(T(N(O[1],M[0]),N(-M[1],O[0])),z[2]))),B[3]),F(T(F(T(N(M[1],B[0]),N(-B[1],M[0])),O[2]),T(F(T(N(O[1],B[0]),N(-B[1],O[0])),-M[2]),F(T(N(O[1],M[0]),N(-M[1],O[0])),B[2]))),-z[3]))))),rt=T(T(T(F(T(F(T(N(z[1],x[0]),N(-x[1],z[0])),B[2]),T(F(T(N(B[1],x[0]),N(-x[1],B[0])),-z[2]),F(T(N(B[1],z[0]),N(-z[1],B[0])),x[2]))),O[3]),F(T(F(T(N(z[1],x[0]),N(-x[1],z[0])),O[2]),T(F(T(N(O[1],x[0]),N(-x[1],O[0])),-z[2]),F(T(N(O[1],z[0]),N(-z[1],O[0])),x[2]))),-B[3])),T(F(T(F(T(N(B[1],x[0]),N(-x[1],B[0])),O[2]),T(F(T(N(O[1],x[0]),N(-x[1],O[0])),-B[2]),F(T(N(O[1],B[0]),N(-B[1],O[0])),x[2]))),z[3]),F(T(F(T(N(B[1],z[0]),N(-z[1],B[0])),O[2]),T(F(T(N(O[1],z[0]),N(-z[1],O[0])),-B[2]),F(T(N(O[1],B[0]),N(-B[1],O[0])),z[2]))),-x[3]))),T(T(F(T(F(T(N(B[1],x[0]),N(-x[1],B[0])),M[2]),T(F(T(N(M[1],x[0]),N(-x[1],M[0])),-B[2]),F(T(N(M[1],B[0]),N(-B[1],M[0])),x[2]))),O[3]),F(T(F(T(N(B[1],x[0]),N(-x[1],B[0])),O[2]),T(F(T(N(O[1],x[0]),N(-x[1],O[0])),-B[2]),F(T(N(O[1],B[0]),N(-B[1],O[0])),x[2]))),-M[3])),T(F(T(F(T(N(M[1],x[0]),N(-x[1],M[0])),O[2]),T(F(T(N(O[1],x[0]),N(-x[1],O[0])),-M[2]),F(T(N(O[1],M[0]),N(-M[1],O[0])),x[2]))),B[3]),F(T(F(T(N(M[1],B[0]),N(-B[1],M[0])),O[2]),T(F(T(N(O[1],B[0]),N(-B[1],O[0])),-M[2]),F(T(N(O[1],M[0]),N(-M[1],O[0])),B[2]))),-x[3])))),bt=K(V,rt);return bt[bt.length-1]}}function w(T){var N=T===3?y:T===4?_:I;return N(a,s,h,u)}var D=w(3),P=w(4),C=[function(){return 0},function(){return 0},function(N,F){return F[0]-N[0]},function(N,F,K){var b=(N[1]-K[1])*(F[0]-K[0]),O=(N[0]-K[0])*(F[1]-K[1]),M=b-O,B;if(b>0){if(O<=0)return M;B=b+O}else if(b<0){if(O>=0)return M;B=-(b+O)}else return M;var z=p*B;return M>=z||M<=-z?M:D(N,F,K)},function(N,F,K,b){var O=N[0]-b[0],M=F[0]-b[0],B=K[0]-b[0],z=N[1]-b[1],x=F[1]-b[1],V=K[1]-b[1],rt=N[2]-b[2],bt=F[2]-b[2],qt=K[2]-b[2],ee=M*V,A=B*x,At=B*z,ut=O*V,Et=O*x,fe=M*z,ui=rt*(ee-A)+bt*(At-ut)+qt*(Et-fe),De=(Math.abs(ee)+Math.abs(A))*Math.abs(rt)+(Math.abs(At)+Math.abs(ut))*Math.abs(bt)+(Math.abs(Et)+Math.abs(fe))*Math.abs(qt),W=v*De;return ui>W||-ui>W?ui:P(N,F,K,b)}];function Z(T){var N=C[T.length];return N||(N=C[T.length]=w(T.length)),N.apply(void 0,T)}function Y(T,N,F,K,b,O,M){return function(z,x,V,rt,bt){switch(arguments.length){case 0:case 1:return 0;case 2:return K(z,x);case 3:return b(z,x,V);case 4:return O(z,x,V,rt);case 5:return M(z,x,V,rt,bt)}for(var qt=new Array(arguments.length),ee=0;ee<arguments.length;++ee)qt[ee]=arguments[ee];return T(qt)}}function X(){for(;C.length<=c;)C.push(w(C.length));n.exports=Y.apply(void 0,[Z].concat(C));for(var T=0;T<=c;++T)n.exports[T]=C[T]}X()})(Ja);var ym=_m,kl=Ja.exports[3];function _m(n){var s=n.length;if(s<3){for(var y=new Array(s),a=0;a<s;++a)y[a]=a;return s===2&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:y}for(var h=new Array(s),a=0;a<s;++a)h[a]=a;h.sort(function(D,P){var C=n[D][0]-n[P][0];return C||n[D][1]-n[P][1]});for(var u=[h[0],h[1]],c=[h[0],h[1]],a=2;a<s;++a){for(var g=h[a],p=n[g],v=u.length;v>1&&kl(n[u[v-2]],n[u[v-1]],p)<=0;)v-=1,u.pop();for(u.push(g),v=c.length;v>1&&kl(n[c[v-2]],n[c[v-1]],p)>=0;)v-=1,c.pop();c.push(g)}for(var y=new Array(c.length+u.length-2),_=0,a=0,I=u.length;a<I;++a)y[_++]=u[a];for(var w=c.length-2;w>0;--w)y[_++]=c[w];return y}var xm=Em,Lm=ym;function Em(n){var s=Lm(n),a=s.length;if(a<=2)return[];for(var h=new Array(a),u=s[a-1],c=0;c<a;++c){var g=s[c];h[c]=[u,g],u=g}return h}var Xe={},te={},$h=32;te.INT_BITS=$h;te.INT_MAX=2147483647;te.INT_MIN=-1<<$h-1;te.sign=function(n){return(n>0)-(n<0)};te.abs=function(n){var s=n>>$h-1;return(n^s)-s};te.min=function(n,s){return s^(n^s)&-(n<s)};te.max=function(n,s){return n^(n^s)&-(n<s)};te.isPow2=function(n){return!(n&n-1)&&!!n};te.log2=function(n){var s,a;return s=(n>65535)<<4,n>>>=s,a=(n>255)<<3,n>>>=a,s|=a,a=(n>15)<<2,n>>>=a,s|=a,a=(n>3)<<1,n>>>=a,s|=a,s|n>>1};te.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0};te.popCount=function(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),(n+(n>>>4)&252645135)*16843009>>>24};function Nf(n){var s=32;return n&=-n,n&&s--,n&65535&&(s-=16),n&16711935&&(s-=8),n&252645135&&(s-=4),n&858993459&&(s-=2),n&1431655765&&(s-=1),s}te.countTrailingZeros=Nf;te.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1};te.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n-(n>>>1)};te.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,n&=15,27030>>>n&1};var Gs=new Array(256);(function(n){for(var s=0;s<256;++s){var a=s,h=s,u=7;for(a>>>=1;a;a>>>=1)h<<=1,h|=a&1,--u;n[s]=h<<u&255}})(Gs);te.reverse=function(n){return Gs[n&255]<<24|Gs[n>>>8&255]<<16|Gs[n>>>16&255]<<8|Gs[n>>>24&255]};te.interleave2=function(n,s){return n&=65535,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,s&=65535,s=(s|s<<8)&16711935,s=(s|s<<4)&252645135,s=(s|s<<2)&858993459,s=(s|s<<1)&1431655765,n|s<<1};te.deinterleave2=function(n,s){return n=n>>>s&1431655765,n=(n|n>>>1)&858993459,n=(n|n>>>2)&252645135,n=(n|n>>>4)&16711935,n=(n|n>>>16)&65535,n<<16>>16};te.interleave3=function(n,s,a){return n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,s&=1023,s=(s|s<<16)&4278190335,s=(s|s<<8)&251719695,s=(s|s<<4)&3272356035,s=(s|s<<2)&1227133513,n|=s<<1,a&=1023,a=(a|a<<16)&4278190335,a=(a|a<<8)&251719695,a=(a|a<<4)&3272356035,a=(a|a<<2)&1227133513,n|a<<2};te.deinterleave3=function(n,s){return n=n>>>s&1227133513,n=(n|n>>>2)&3272356035,n=(n|n>>>4)&251719695,n=(n|n>>>8)&4278190335,n=(n|n>>>16)&1023,n<<22>>22};te.nextCombination=function(n){var s=n|n-1;return s+1|(~s&-~s)-1>>>Nf(n)+1};var wm=Sf;function Sf(n){this.roots=new Array(n),this.ranks=new Array(n);for(var s=0;s<n;++s)this.roots[s]=s,this.ranks[s]=0}var Ka=Sf.prototype;Object.defineProperty(Ka,"length",{get:function(){return this.roots.length}});Ka.makeSet=function(){var n=this.roots.length;return this.roots.push(n),this.ranks.push(0),n};Ka.find=function(n){for(var s=n,a=this.roots;a[n]!==n;)n=a[n];for(;a[s]!==n;){var h=a[s];a[s]=n,s=h}return n};Ka.link=function(n,s){var a=this.find(n),h=this.find(s);if(a!==h){var u=this.ranks,c=this.roots,g=u[a],p=u[h];g<p?c[a]=h:p<g?c[h]=a:(c[h]=a,++u[a])}};var Tf=te,Pf=wm;function Im(n){for(var s=0,a=Math.max,h=0,u=n.length;h<u;++h)s=a(s,n[h].length);return s-1}Xe.dimension=Im;function Cm(n){for(var s=-1,a=Math.max,h=0,u=n.length;h<u;++h)for(var c=n[h],g=0,p=c.length;g<p;++g)s=a(s,c[g]);return s+1}Xe.countVertices=Cm;function Nm(n){for(var s=new Array(n.length),a=0,h=n.length;a<h;++a)s[a]=n[a].slice(0);return s}Xe.cloneCells=Nm;function Zr(n,s){var a=n.length,h=n.length-s.length,u=Math.min;if(h)return h;switch(a){case 0:return 0;case 1:return n[0]-s[0];case 2:var y=n[0]+n[1]-s[0]-s[1];return y||u(n[0],n[1])-u(s[0],s[1]);case 3:var c=n[0]+n[1],g=s[0]+s[1];if(y=c+n[2]-(g+s[2]),y)return y;var p=u(n[0],n[1]),v=u(s[0],s[1]),y=u(p,n[2])-u(v,s[2]);return y||u(p+n[2],c)-u(v+s[2],g);default:var _=n.slice(0);_.sort();var I=s.slice(0);I.sort();for(var w=0;w<a;++w)if(h=_[w]-I[w],h)return h;return 0}}Xe.compareCells=Zr;function Sm(n,s){return Zr(n[0],s[0])}function ro(n,s){if(s){for(var a=n.length,h=new Array(a),u=0;u<a;++u)h[u]=[n[u],s[u]];h.sort(Sm);for(var u=0;u<a;++u)n[u]=h[u][0],s[u]=h[u][1];return n}else return n.sort(Zr),n}Xe.normalize=ro;function Qh(n){if(n.length===0)return[];for(var s=1,a=n.length,h=1;h<a;++h){var u=n[h];if(Zr(u,n[h-1])){if(h===s){s++;continue}n[s++]=u}}return n.length=s,n}Xe.unique=Qh;function Vs(n,s){for(var a=0,h=n.length-1,u=-1;a<=h;){var c=a+h>>1,g=Zr(n[c],s);g<=0?(g===0&&(u=c),a=c+1):g>0&&(h=c-1)}return u}Xe.findCell=Vs;function bf(n,s){for(var a=new Array(n.length),h=0,u=a.length;h<u;++h)a[h]=[];for(var c=[],h=0,g=s.length;h<g;++h)for(var p=s[h],v=p.length,y=1,_=1<<v;y<_;++y){c.length=Tf.popCount(y);for(var I=0,w=0;w<v;++w)y&1<<w&&(c[I++]=p[w]);var D=Vs(n,c);if(!(D<0))for(;a[D++].push(h),!(D>=n.length||Zr(n[D],c)!==0););}return a}Xe.incidence=bf;function Tm(n,s){if(!s)return bf(Qh(tl(n,0)),n);for(var a=new Array(s),h=0;h<s;++h)a[h]=[];for(var h=0,u=n.length;h<u;++h)for(var c=n[h],g=0,p=c.length;g<p;++g)a[c[g]].push(h);return a}Xe.dual=Tm;function Pm(n){for(var s=[],a=0,h=n.length;a<h;++a)for(var u=n[a],c=u.length|0,g=1,p=1<<c;g<p;++g){for(var v=[],y=0;y<c;++y)g>>>y&1&&v.push(u[y]);s.push(v)}return ro(s)}Xe.explode=Pm;function tl(n,s){if(s<0)return[];for(var a=[],h=(1<<s+1)-1,u=0;u<n.length;++u)for(var c=n[u],g=h;g<1<<c.length;g=Tf.nextCombination(g)){for(var p=new Array(s+1),v=0,y=0;y<c.length;++y)g&1<<y&&(p[v++]=c[y]);a.push(p)}return ro(a)}Xe.skeleton=tl;function bm(n){for(var s=[],a=0,h=n.length;a<h;++a)for(var u=n[a],c=0,g=u.length;c<g;++c){for(var p=new Array(u.length-1),v=0,y=0;v<g;++v)v!==c&&(p[y++]=u[v]);s.push(p)}return ro(s)}Xe.boundary=bm;function Mm(n,s){for(var a=new Pf(s),h=0;h<n.length;++h)for(var u=n[h],c=0;c<u.length;++c)for(var g=c+1;g<u.length;++g)a.link(u[c],u[g]);for(var p=[],v=a.ranks,h=0;h<v.length;++h)v[h]=-1;for(var h=0;h<n.length;++h){var y=a.find(n[h][0]);v[y]<0?(v[y]=p.length,p.push([n[h].slice(0)])):p[v[y]].push(n[h].slice(0))}return p}function Om(n){for(var s=Qh(ro(tl(n,0))),a=new Pf(s.length),h=0;h<n.length;++h)for(var u=n[h],c=0;c<u.length;++c)for(var g=Vs(s,[u[c]]),p=c+1;p<u.length;++p)a.link(g,Vs(s,[u[p]]));for(var v=[],y=a.ranks,h=0;h<y.length;++h)y[h]=-1;for(var h=0;h<n.length;++h){var _=a.find(Vs(s,[n[h][0]]));y[_]<0?(y[_]=v.length,v.push([n[h].slice(0)])):v[y[_]].push(n[h].slice(0))}return v}function Rm(n,s){return s?Mm(n,s):Om(n)}Xe.connectedComponents=Rm;var Dm=Gm,dh=Ja.exports,Am=Xe.compareCells;function Aa(n,s,a){this.vertices=n,this.adjacent=s,this.boundary=a,this.lastVisited=-1}Aa.prototype.flip=function(){var n=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=n;var s=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=s};function km(n,s,a){this.vertices=n,this.cell=s,this.index=a}function Fm(n,s){return Am(n.vertices,s.vertices)}function zm(n){for(var s=["function orient(){var tuple=this.tuple;return test("],a=0;a<=n;++a)a>0&&s.push(","),s.push("tuple[",a,"]");s.push(")}return orient");var h=new Function("test",s.join("")),u=dh[n+1];return u||(u=dh),h(u)}var Fl=[];function Mf(n,s,a){this.dimension=n,this.vertices=s,this.simplices=a,this.interior=a.filter(function(c){return!c.boundary}),this.tuple=new Array(n+1);for(var h=0;h<=n;++h)this.tuple[h]=this.vertices[h];var u=Fl[n];u||(u=Fl[n]=zm(n)),this.orient=u}var so=Mf.prototype;so.handleBoundaryDegeneracy=function(n,s){var a=this.dimension,h=this.vertices.length-1,u=this.tuple,c=this.vertices,g=[n];for(n.lastVisited=-h;g.length>0;){n=g.pop(),n.vertices;for(var p=n.adjacent,v=0;v<=a;++v){var y=p[v];if(!(!y.boundary||y.lastVisited<=-h)){for(var _=y.vertices,I=0;I<=a;++I){var w=_[I];w<0?u[I]=s:u[I]=c[w]}var D=this.orient();if(D>0)return y;y.lastVisited=-h,D===0&&g.push(y)}}}return null};so.walk=function(n,s){var a=this.vertices.length-1,h=this.dimension,u=this.vertices,c=this.tuple,g=s?this.interior.length*Math.random()|0:this.interior.length-1,p=this.interior[g];t:for(;!p.boundary;){for(var v=p.vertices,y=p.adjacent,_=0;_<=h;++_)c[_]=u[v[_]];p.lastVisited=a;for(var _=0;_<=h;++_){var I=y[_];if(!(I.lastVisited>=a)){var w=c[_];c[_]=n;var D=this.orient();if(c[_]=w,D<0){p=I;continue t}else I.boundary?I.lastVisited=-a:I.lastVisited=a}}return}return p};so.addPeaks=function(n,s){var a=this.vertices.length-1,h=this.dimension,u=this.vertices,c=this.tuple,g=this.interior,p=this.simplices,v=[s];s.lastVisited=a,s.vertices[s.vertices.indexOf(-1)]=a,s.boundary=!1,g.push(s);for(var y=[];v.length>0;){var s=v.pop(),_=s.vertices,I=s.adjacent,w=_.indexOf(a);if(!(w<0)){for(var D=0;D<=h;++D)if(D!==w){var P=I[D];if(!(!P.boundary||P.lastVisited>=a)){var C=P.vertices;if(P.lastVisited!==-a){for(var Z=0,Y=0;Y<=h;++Y)C[Y]<0?(Z=Y,c[Y]=n):c[Y]=u[C[Y]];var X=this.orient();if(X>0){C[Z]=a,P.boundary=!1,g.push(P),v.push(P),P.lastVisited=a;continue}else P.lastVisited=-a}var T=P.adjacent,N=_.slice(),F=I.slice(),K=new Aa(N,F,!0);p.push(K);var b=T.indexOf(s);if(!(b<0)){T[b]=K,F[w]=P,N[D]=-1,F[D]=s,I[D]=K,K.flip();for(var Y=0;Y<=h;++Y){var O=N[Y];if(!(O<0||O===a)){for(var M=new Array(h-1),B=0,z=0;z<=h;++z){var x=N[z];x<0||z===Y||(M[B++]=x)}y.push(new km(M,K,Y))}}}}}}}y.sort(Fm);for(var D=0;D+1<y.length;D+=2){var V=y[D],rt=y[D+1],bt=V.index,qt=rt.index;bt<0||qt<0||(V.cell.adjacent[V.index]=rt.cell,rt.cell.adjacent[rt.index]=V.cell)}};so.insert=function(n,s){var a=this.vertices;a.push(n);var h=this.walk(n,s);if(!!h){for(var u=this.dimension,c=this.tuple,g=0;g<=u;++g){var p=h.vertices[g];p<0?c[g]=n:c[g]=a[p]}var v=this.orient(c);v<0||v===0&&(h=this.handleBoundaryDegeneracy(h,n),!h)||this.addPeaks(n,h)}};so.boundary=function(){for(var n=this.dimension,s=[],a=this.simplices,h=a.length,u=0;u<h;++u){var c=a[u];if(c.boundary){for(var g=new Array(n),p=c.vertices,v=0,y=0,_=0;_<=n;++_)p[_]>=0?g[v++]=p[_]:y=_&1;if(y===(n&1)){var I=g[0];g[0]=g[1],g[1]=I}s.push(g)}}return s};function Gm(n,s){var a=n.length;if(a===0)throw new Error("Must have at least d+1 points");var h=n[0].length;if(a<=h)throw new Error("Must input at least d+1 points");var u=n.slice(0,h+1),c=dh.apply(void 0,u);if(c===0)throw new Error("Input not in general position");for(var g=new Array(h+1),p=0;p<=h;++p)g[p]=p;c<0&&(g[0]=1,g[1]=0);for(var v=new Aa(g,new Array(h+1),!1),y=v.adjacent,_=new Array(h+2),p=0;p<=h;++p){for(var I=g.slice(),w=0;w<=h;++w)w===p&&(I[w]=-1);var D=I[0];I[0]=I[1],I[1]=D;var P=new Aa(I,new Array(h+1),!0);y[p]=P,_[p]=P}_[h+1]=v;for(var p=0;p<=h;++p)for(var I=y[p].vertices,C=y[p].adjacent,w=0;w<=h;++w){var Z=I[w];if(Z<0){C[w]=v;continue}for(var Y=0;Y<=h;++Y)y[Y].vertices.indexOf(Z)<0&&(C[w]=y[Y])}for(var X=new Mf(h,u,_),T=!!s,p=h+1;p<a;++p)X.insert(n[p],T);return X.boundary()}var Bm=Vm,qm=Ja.exports;function Um(n,s){for(var a=new Array(s+1),h=0;h<n.length;++h)a[h]=n[h];for(var h=0;h<=n.length;++h){for(var u=n.length;u<=s;++u){for(var c=new Array(s),g=0;g<s;++g)c[g]=Math.pow(u+1-h,g);a[u]=c}var p=qm.apply(void 0,a);if(p)return!0}return!1}function Vm(n){var s=n.length;if(s===0)return[];if(s===1)return[0];for(var a=n[0].length,h=[n[0]],u=[0],c=1;c<s;++c){if(h.push(n[c]),!Um(h,a)){h.pop();continue}if(u.push(c),u.length===a+1)return u}return u}var Hm=Wm,zl=Dm,Zm=Bm;function Xm(n,s){for(var a=n.length,h=new Array(a),u=0;u<s.length;++u)h[u]=n[s[u]];for(var c=s.length,u=0;u<a;++u)s.indexOf(u)<0&&(h[c++]=n[u]);return h}function Ym(n,s){for(var a=n.length,h=s.length,u=0;u<a;++u)for(var c=n[u],g=0;g<c.length;++g){var p=c[g];if(p<h)c[g]=s[p];else{p=p-h;for(var v=0;v<h;++v)p>=s[v]&&(p+=1);c[g]=p}}return n}function Wm(n,s){try{return zl(n,!0)}catch{var a=Zm(n);if(a.length<=s)return[];var h=Xm(n,a),u=zl(h,!0);return Ym(u,a)}}var Jm=rm,Km=xm,jm=Hm,$m=Qm;function Qm(n){var s=n.length;if(s===0)return[];if(s===1)return[[0]];var a=n[0].length;return a===0?[]:a===1?Jm(n):a===2?Km(n):jm(n,a)}var tv=gn.coordEach,ev=$m,nv=ot.polygon,iv=function(n){var s=[];tv(n,function(c){s.push(c)});var a=ev(s);if(a.length>0){for(var h=[],u=0;u<a.length;u++)h.push(s[a[u][0]]);return h.push(s[a[a.length-1][1]]),nv([h])}},rv=Hr,sv=ot.featureCollection,ov=function(n,s){for(var a=sv([]),h=0;h<s.features.length;h++)for(var u=0;u<n.features.length;u++){var c=rv(n.features[u],s.features[h]);c&&a.features.push(n.features[u])}return a},qr={exports:{}};(function(n,s){(function(a,h){h(s)})(Hg,function(a){function h(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}function u(){}function c(){}function g(){}function p(){}function v(){}function y(){}function _(){}function I(t){this.message=t}function w(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}function D(){if(arguments.length===0)I.call(this);else if(arguments.length===1){var t=arguments[0];I.call(this,t)}}function P(){}function C(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)C.call(this,0,0);else if(arguments.length===1){var t=arguments[0];C.call(this,t.x,t.y,t.z)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];C.call(this,e,r,C.NULL_ORDINATE)}else if(arguments.length===3){var o=arguments[0],l=arguments[1],f=arguments[2];this.x=o,this.y=l,this.z=f}}function Z(){if(this.dimensionsToTest=2,arguments.length===0)Z.call(this,2);else if(arguments.length===1){var t=arguments[0];if(t!==2&&t!==3)throw new c;this.dimensionsToTest=t}}function Y(){}function X(){}function T(t){this.message=t||""}function N(){}function F(t){this.message=t||""}function K(t){this.message=t||""}function b(){this.array_=[],arguments[0]instanceof X&&this.addAll(arguments[0])}function O(){if(b.apply(this),arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];this.ensureCapacity(e.length),this.add(e,r)}}}function M(){if(this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof C){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof M){var e=arguments[0];this.init(e)}}else if(arguments.length===2){var r=arguments[0],o=arguments[1];this.init(r.x,o.x,r.y,o.y)}else if(arguments.length===4){var l=arguments[0],f=arguments[1],d=arguments[2],m=arguments[3];this.init(l,f,d,m)}}function B(){}function z(){B.call(this,"Projective point not representable on the Cartesian plane.")}function x(){}function V(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1}function rt(){}function bt(t){this.str=t}function qt(t){this.value=t}function ee(){}function A(){if(this.hi=0,this.lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof A){var e=arguments[0];this.init(e)}else if(typeof arguments[0]=="string"){var r=arguments[0];A.call(this,A.parse(r))}}else if(arguments.length===2){var o=arguments[0],l=arguments[1];this.init(o,l)}}function At(){}function ut(){}function Et(){}function fe(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],r=arguments[1];this.x=e,this.y=r,this.w=1}else if(arguments[0]instanceof fe&&arguments[1]instanceof fe){var o=arguments[0],l=arguments[1];this.x=o.y*l.w-l.y*o.w,this.y=l.x*o.w-o.x*l.w,this.w=o.x*l.y-l.x*o.y}else if(arguments[0]instanceof C&&arguments[1]instanceof C){var f=arguments[0],d=arguments[1];this.x=f.y-d.y,this.y=d.x-f.x,this.w=f.x*d.y-d.x*f.y}}else if(arguments.length===3){var m=arguments[0],E=arguments[1],S=arguments[2];this.x=m,this.y=E,this.w=S}else if(arguments.length===4){var R=arguments[0],k=arguments[1],G=arguments[2],J=arguments[3],$=R.y-k.y,et=k.x-R.x,Pt=R.x*k.y-k.x*R.y,Xt=G.y-J.y,un=J.x-G.x,tr=G.x*J.y-J.x*G.y;this.x=et*tr-un*Pt,this.y=Xt*Pt-$*tr,this.w=$*un-Xt*et}}function ui(){}function De(){}function W(){this.envelope=null,this.factory=null,this.SRID=null,this.userData=null;var t=arguments[0];this.factory=t,this.SRID=t.getSRID()}function hi(){}function ne(){}function ao(){}function uo(){}function ho(){}function lo(){}function Q(){}function iu(){}function ru(){}function Ai(){}function rl(){}function co(){}function oe(){this.array_=[],arguments[0]instanceof X&&this.addAll(arguments[0])}function sl(t){return t==null?Bn:t.color}function St(t){return t==null?null:t.parent}function Sn(t,e){t!==null&&(t.color=e)}function su(t){return t==null?null:t.left}function al(t){return t==null?null:t.right}function $t(){this.root_=null,this.size_=0}function fo(){}function ul(){}function ye(){this.array_=[],arguments[0]instanceof X&&this.addAll(arguments[0])}function Tn(){}function q(){}function Pn(){}function ki(){}function ht(){this.geometries=null;var t=arguments[0],e=arguments[1];if(W.call(this,e),t===null&&(t=[]),W.hasNullElements(t))throw new c;this.geometries=t}function Ne(){var t=arguments[0],e=arguments[1];ht.call(this,t,e)}function Jn(){if(this.geom=null,this.geomFact=null,this.bnRule=null,this.endpointMap=null,arguments.length===1){var t=arguments[0];Jn.call(this,t,ne.MOD2_BOUNDARY_RULE)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];this.geom=e,this.geomFact=e.getFactory(),this.bnRule=r}}function ou(){this.count=null}function Kf(){}function jf(){}function $f(){}function Qf(){}function tg(){}function eg(){}function Ae(){}function Zt(){}function st(){this.points=null;var t=arguments[0],e=arguments[1];W.call(this,e),this.init(t)}function go(){}function Ot(){this.coordinates=null;var t=arguments[0],e=arguments[1];W.call(this,e),this.init(t)}function bn(){}function wt(){this.shell=null,this.holes=null;var t=arguments[0],e=arguments[1],r=arguments[2];if(W.call(this,r),t===null&&(t=this.getFactory().createLinearRing()),e===null&&(e=[]),W.hasNullElements(e))throw new c;if(t.isEmpty()&&W.hasNonEmptyElements(e))throw new c;this.shell=t,this.holes=e}function Se(){var t=arguments[0],e=arguments[1];ht.call(this,t,e)}function Ut(){if(arguments[0]instanceof C&&arguments[1]instanceof at){var t=arguments[0],e=arguments[1];Ut.call(this,e.getCoordinateSequenceFactory().create(t),e)}else if(V(arguments[0],ut)&&arguments[1]instanceof at){var r=arguments[0],o=arguments[1];st.call(this,r,o),this.validateConstruction()}}function ae(){var t=arguments[0],e=arguments[1];ht.call(this,t,e)}function ke(){if(this.factory=null,this.isUserDataCopied=!1,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.factory=t}}}function po(){}function au(){}function uu(){}function hu(){}function Fe(){if(this.dimension=3,this.coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];Fe.call(this,t,3)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.coordinates=new Array(e).fill(null);for(var r=0;e>r;r++)this.coordinates[r]=new C}else if(V(arguments[0],ut)){var o=arguments[0];if(o===null)return this.coordinates=new Array(0).fill(null),null;this.dimension=o.getDimension(),this.coordinates=new Array(o.size()).fill(null);for(var r=0;r<this.coordinates.length;r++)this.coordinates[r]=o.getCoordinateCopy(r)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var l=arguments[0],f=arguments[1];this.coordinates=l,this.dimension=f,l===null&&(this.coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var d=arguments[0],m=arguments[1];this.coordinates=new Array(d).fill(null),this.dimension=m;for(var r=0;d>r;r++)this.coordinates[r]=new C}}}function Kn(){}function ng(t,e){return t===e||t!==t&&e!==e}function ig(t,e){function r(o){return this&&this.constructor===r?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,void(o&&rg.call(this,o))):new r(o)}return e||yg(t,"size",{get:dg}),t.constructor=r,r.prototype=t,r}function rg(t){this.add?t.forEach(this.add,this):t.forEach(function(e){this.set(e[0],e[1])},this)}function sg(t){return this.has(t)&&(this._keys.splice(En,1),this._values.splice(En,1),this._itp.forEach(function(e){En<e[0]&&e[0]--})),En>-1}function og(t){return this.has(t)?this._values[En]:void 0}function ag(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!==e||e===0)for(En=t.length;En--&&!ng(t[En],e););else En=t.indexOf(e);return En>-1}function ug(t){return ag.call(this,this._keys,t)}function hg(t,e){return this.has(t)?this._values[En]=e:this._values[this._keys.push(t)-1]=e,this}function lg(){(this._keys||0).length=this._values.length=0}function cg(){return lu(this._itp,this._keys)}function fg(){return lu(this._itp,this._values)}function gg(){return lu(this._itp,this._keys,this._values)}function lu(t,e,r){var o=[0],l=!1;return t.push(o),{next:function(){var f,d=o[0];return!l&&d<e.length?(f=r?[e[d],r[d]]:e[d],o[0]++):(l=!0,t.splice(t.indexOf(o),1)),{done:l,value:f}}}}function dg(){return this._values.length}function pg(t,e){for(var r=this.entries();;){var o=r.next();if(o.done)break;t.call(e,o.value[1],o.value[0],this)}}function Mn(){this.map_=new xg}function yt(){if(this.modelType=null,this.scale=null,arguments.length===0)this.modelType=yt.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof dn){var t=arguments[0];this.modelType=t,t===yt.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var e=arguments[0];this.modelType=yt.FIXED,this.setScale(e)}else if(arguments[0]instanceof yt){var r=arguments[0];this.modelType=r.modelType,this.scale=r.scale}}}function dn(){this.name=null;var t=arguments[0];this.name=t,dn.nameToTypeMap.put(t,this)}function at(){if(this.precisionModel=null,this.coordinateSequenceFactory=null,this.SRID=null,arguments.length===0)at.call(this,new yt,0);else if(arguments.length===1){if(V(arguments[0],ui)){var t=arguments[0];at.call(this,new yt,0,t)}else if(arguments[0]instanceof yt){var e=arguments[0];at.call(this,e,0,at.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var r=arguments[0],o=arguments[1];at.call(this,r,o,at.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var l=arguments[0],f=arguments[1],d=arguments[2];this.precisionModel=l,this.coordinateSequenceFactory=d,this.SRID=f}}function cu(t){this.geometryFactory=t||new at}function ge(t){this.parser=new cu(t)}function It(){this.result=null,this.inputLines=Array(2).fill().map(function(){return Array(2)}),this.intPt=new Array(2).fill(null),this.intLineIndex=null,this._isProper=null,this.pa=null,this.pb=null,this.precisionModel=null,this.intPt[0]=new C,this.intPt[1]=new C,this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=0}function ie(){It.apply(this)}function Fi(){}function zi(){this.p=null,this.crossingCount=0,this.isPointOnSegment=!1;var t=arguments[0];this.p=t}function H(){}function nt(){if(this.p0=null,this.p1=null,arguments.length===0)nt.call(this,new C,new C);else if(arguments.length===1){var t=arguments[0];nt.call(this,t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];this.p0=e,this.p1=r}else if(arguments.length===4){var o=arguments[0],l=arguments[1],f=arguments[2],d=arguments[3];nt.call(this,new C(o,l),new C(f,d))}}function _t(){if(this.matrix=null,arguments.length===0)this.matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(q.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var t=arguments[0];_t.call(this),this.set(t)}else if(arguments[0]instanceof _t){var e=arguments[0];_t.call(this),this.matrix[x.INTERIOR][x.INTERIOR]=e.matrix[x.INTERIOR][x.INTERIOR],this.matrix[x.INTERIOR][x.BOUNDARY]=e.matrix[x.INTERIOR][x.BOUNDARY],this.matrix[x.INTERIOR][x.EXTERIOR]=e.matrix[x.INTERIOR][x.EXTERIOR],this.matrix[x.BOUNDARY][x.INTERIOR]=e.matrix[x.BOUNDARY][x.INTERIOR],this.matrix[x.BOUNDARY][x.BOUNDARY]=e.matrix[x.BOUNDARY][x.BOUNDARY],this.matrix[x.BOUNDARY][x.EXTERIOR]=e.matrix[x.BOUNDARY][x.EXTERIOR],this.matrix[x.EXTERIOR][x.INTERIOR]=e.matrix[x.EXTERIOR][x.INTERIOR],this.matrix[x.EXTERIOR][x.BOUNDARY]=e.matrix[x.EXTERIOR][x.BOUNDARY],this.matrix[x.EXTERIOR][x.EXTERIOR]=e.matrix[x.EXTERIOR][x.EXTERIOR]}}}function On(){this.areaBasePt=null,this.triangleCent3=new C,this.areasum2=0,this.cg3=new C,this.lineCentSum=new C,this.totalLength=0,this.ptCount=0,this.ptCentSum=new C;var t=arguments[0];this.areaBasePt=null,this.add(t)}function mo(t){this.message=t||""}function _e(){this.array_=[]}function hr(){this.treeSet=new ye,this.list=new b}function Rn(){if(this.geomFactory=null,this.inputPts=null,arguments.length===1){var t=arguments[0];Rn.call(this,Rn.extractCoordinates(t),t.getFactory())}else if(arguments.length===2){var e=arguments[0],r=arguments[1];this.inputPts=hr.filterCoordinates(e),this.geomFactory=r}}function lr(){this.origin=null;var t=arguments[0];this.origin=t}function we(){this.inputGeom=null,this.factory=null,this.pruneEmptyGeometry=!0,this.preserveGeometryCollectionType=!0,this.preserveCollections=!1,this.preserveType=!1}function cr(){if(this.snapTolerance=0,this.srcPts=null,this.seg=new nt,this.allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof st&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];cr.call(this,t.getCoordinates(),e)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var r=arguments[0],o=arguments[1];this.srcPts=r,this._isClosed=cr.isClosed(r),this.snapTolerance=o}}function xe(){this.srcGeom=null;var t=arguments[0];this.srcGeom=t}function Xr(){if(we.apply(this),this.snapTolerance=null,this.snapPts=null,this.isSelfSnap=!1,arguments.length===2){var t=arguments[0],e=arguments[1];this.snapTolerance=t,this.snapPts=e}else if(arguments.length===3){var r=arguments[0],o=arguments[1],l=arguments[2];this.snapTolerance=r,this.snapPts=o,this.isSelfSnap=l}}function ze(){this.isFirst=!0,this.commonMantissaBitsCount=53,this.commonBits=0,this.commonSignExp=null}function Yr(){this.commonCoord=null,this.ccFilter=new vo}function vo(){this.commonBitsX=new ze,this.commonBitsY=new ze}function Wr(){this.trans=null;var t=arguments[0];this.trans=t}function Gi(){this.parent=null,this.atStart=null,this.max=null,this.index=null,this.subcollectionIterator=null;var t=arguments[0];this.parent=t,this.atStart=!0,this.index=0,this.max=t.getNumGeometries()}function Bi(){if(this.boundaryRule=ne.OGC_SFS_BOUNDARY_RULE,this.isIn=null,this.numBoundaries=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];if(t===null)throw new c;this.boundaryRule=t}}}function fr(){}function Jr(){}function fu(){this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function yo(){}function Dn(){this.bounds=null,this.item=null;var t=arguments[0],e=arguments[1];this.bounds=t,this.item=e}function gu(){this._size=null,this.items=null,this._size=0,this.items=new b,this.items.add(null)}function li(){}function _o(){}function Le(){if(this.childBoundables=new b,this.bounds=null,this.level=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.level=t}}}function Ie(){this.boundable1=null,this.boundable2=null,this._distance=null,this.itemDistance=null;var t=arguments[0],e=arguments[1],r=arguments[2];this.boundable1=t,this.boundable2=e,this.itemDistance=r,this._distance=this.distance()}function Vt(){if(this.root=null,this.built=!1,this.itemBoundables=new b,this.nodeCapacity=null,arguments.length===0)Vt.call(this,Vt.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var t=arguments[0];P.isTrue(t>1,"Node capacity must be greater than 1"),this.nodeCapacity=t}}function mg(){}function xo(){}function Rt(){if(arguments.length===0)Rt.call(this,Rt.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var t=arguments[0];Vt.call(this,t)}}function Kr(){var t=arguments[0];Le.call(this,t)}function Ce(){}function du(){this.segString=null,this.coord=null,this.segmentIndex=null,this.segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],r=arguments[2],o=arguments[3];this.segString=t,this.coord=new C(e),this.segmentIndex=r,this.segmentOctant=o,this._isInterior=!e.equals2D(t.getCoordinate(r))}function pu(){this.nodeMap=new $t,this.edge=null;var t=arguments[0];this.edge=t}function hl(){this.nodeList=null,this.edge=null,this.nodeIt=null,this.currNode=null,this.nextNode=null,this.currSegIndex=0;var t=arguments[0];this.nodeList=t,this.edge=t.getEdge(),this.nodeIt=t.iterator(),this.readNextNode()}function mu(){}function pn(){this.nodeList=new pu(this),this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function jr(){this.tempEnv1=new M,this.tempEnv2=new M,this.overlapSeg1=new nt,this.overlapSeg2=new nt}function vu(){this.pts=null,this.start=null,this.end=null,this.env=null,this.context=null,this.id=null;var t=arguments[0],e=arguments[1],r=arguments[2],o=arguments[3];this.pts=t,this.start=e,this.end=r,this.context=o}function pt(){}function tn(){}function $r(){}function Lo(){if(this.segInt=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setSegmentIntersector(t)}}}function ci(){if(this.monoChains=new b,this.index=new Rt,this.idCounter=0,this.nodedSegStrings=null,this.nOverlaps=0,arguments.length!==0){if(arguments.length===1){var t=arguments[0];Lo.call(this,t)}}}function Qr(){jr.apply(this),this.si=null;var t=arguments[0];this.si=t}function Te(){if(this.pt=null,arguments.length===1){var t=arguments[0];I.call(this,t)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];I.call(this,Te.msgWithCoord(e,r)),this.pt=new C(r)}}function ts(){}function jn(){this.findAllIntersections=!1,this.isCheckEndSegmentsOnly=!1,this.li=null,this.interiorIntersection=null,this.intSegments=null,this.intersections=new b,this.intersectionCount=0,this.keepIntersections=!0;var t=arguments[0];this.li=t,this.interiorIntersection=null}function es(){this.li=new ie,this.segStrings=null,this.findAllIntersections=!1,this.segInt=null,this._isValid=!0;var t=arguments[0];this.segStrings=t}function qi(){this.nv=null;var t=arguments[0];this.nv=new es(qi.toSegmentStrings(t))}function gr(){this.mapOp=null;var t=arguments[0];this.mapOp=t}function U(){}function Pe(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[U.ON]=e}else if(arguments[0]instanceof Pe){var r=arguments[0];if(this.init(r.location.length),r!==null)for(var o=0;o<this.location.length;o++)this.location[o]=r.location[o]}}else if(arguments.length===3){var l=arguments[0],f=arguments[1],d=arguments[2];this.init(3),this.location[U.ON]=l,this.location[U.LEFT]=f,this.location[U.RIGHT]=d}}function Ht(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Pe(t),this.elt[1]=new Pe(t)}else if(arguments[0]instanceof Ht){var e=arguments[0];this.elt[0]=new Pe(e.elt[0]),this.elt[1]=new Pe(e.elt[1])}}else if(arguments.length===2){var r=arguments[0],o=arguments[1];this.elt[0]=new Pe(x.NONE),this.elt[1]=new Pe(x.NONE),this.elt[r].setLocation(o)}else if(arguments.length===3){var l=arguments[0],f=arguments[1],d=arguments[2];this.elt[0]=new Pe(l,f,d),this.elt[1]=new Pe(l,f,d)}else if(arguments.length===4){var m=arguments[0],E=arguments[1],S=arguments[2],R=arguments[3];this.elt[0]=new Pe(x.NONE,x.NONE,x.NONE),this.elt[1]=new Pe(x.NONE,x.NONE,x.NONE),this.elt[m].setLocations(E,S,R)}}function dr(){this.startDe=null,this.maxNodeDegree=-1,this.edges=new b,this.pts=new b,this.label=new Ht(x.NONE),this.ring=null,this._isHole=null,this.shell=null,this.holes=new b,this.geometryFactory=null;var t=arguments[0],e=arguments[1];this.geometryFactory=e,this.computePoints(t),this.computeRing()}function Eo(){var t=arguments[0],e=arguments[1];dr.call(this,t,e)}function ns(){var t=arguments[0],e=arguments[1];dr.call(this,t,e)}function fi(){if(this.label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.label=t}}}function An(){fi.apply(this),this.coord=null,this.edges=null;var t=arguments[0],e=arguments[1];this.coord=t,this.edges=e,this.label=new Ht(0,x.NONE)}function pr(){this.nodeMap=new $t,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}function mn(){if(this.edge=null,this.label=null,this.node=null,this.p0=null,this.p1=null,this.dx=null,this.dy=null,this.quadrant=null,arguments.length===1){var t=arguments[0];this.edge=t}else if(arguments.length===3){var e=arguments[0],r=arguments[1],o=arguments[2];mn.call(this,e,r,o,null)}else if(arguments.length===4){var l=arguments[0],f=arguments[1],d=arguments[2],m=arguments[3];mn.call(this,l),this.init(f,d),this.label=m}}function Ui(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this.sym=null,this.next=null,this.nextMin=null,this.edgeRing=null,this.minEdgeRing=null,this.depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(mn.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var r=t.getNumPoints()-1;this.init(t.getCoordinate(r),t.getCoordinate(r-1))}this.computeDirectedLabel()}function Vi(){}function vn(){if(this.edges=new b,this.nodes=null,this.edgeEndList=new b,arguments.length===0)this.nodes=new pr(new Vi);else if(arguments.length===1){var t=arguments[0];this.nodes=new pr(t)}}function wo(){this.geometryFactory=null,this.shellList=new b;var t=arguments[0];this.geometryFactory=t}function yu(){this.op=null,this.geometryFactory=null,this.ptLocator=null,this.lineEdgesList=new b,this.resultLineList=new b;var t=arguments[0],e=arguments[1],r=arguments[2];this.op=t,this.geometryFactory=e,this.ptLocator=r}function _u(){this.op=null,this.geometryFactory=null,this.resultPointList=new b;var t=arguments[0],e=arguments[1];this.op=t,this.geometryFactory=e}function Io(){}function Ge(){this.geom=null;var t=arguments[0];this.geom=t}function Hi(){this.edgeMap=new $t,this.edgeList=null,this.ptInAreaLocation=[x.NONE,x.NONE]}function Co(){Hi.apply(this),this.resultAreaEdgeList=null,this.label=null,this.SCANNING_FOR_INCOMING=1,this.LINKING_TO_OUTGOING=2}function mr(){Vi.apply(this)}function xu(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}function kn(){if(this.label=null,this.xValue=null,this.eventType=null,this.insertEvent=null,this.deleteEventIndex=null,this.obj=null,arguments.length===2){var t=arguments[0],e=arguments[1];this.eventType=kn.DELETE,this.xValue=t,this.insertEvent=e}else if(arguments.length===3){var r=arguments[0],o=arguments[1],l=arguments[2];this.eventType=kn.INSERT,this.label=r,this.xValue=o,this.obj=l}}function No(){}function gi(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.properIntersectionPoint=null,this.li=null,this.includeProper=null,this.recordIsolated=null,this.isSelfIntersection=null,this.numIntersections=0,this.numTests=0,this.bdyNodes=null,this._isDone=!1,this.isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],r=arguments[2];this.li=t,this.includeProper=e,this.recordIsolated=r}function So(){No.apply(this),this.events=new b,this.nOverlaps=null}function Zi(){this.min=g.POSITIVE_INFINITY,this.max=g.NEGATIVE_INFINITY}function Lu(){}function To(){Zi.apply(this),this.item=null;var t=arguments[0],e=arguments[1],r=arguments[2];this.min=t,this.max=e,this.item=r}function Po(){Zi.apply(this),this.node1=null,this.node2=null;var t=arguments[0],e=arguments[1];this.node1=t,this.node2=e,this.buildExtent(this.node1,this.node2)}function Eu(){this.leaves=new b,this.root=null,this.level=0}function de(){if(this.lines=null,this.isForcedToLineString=!1,arguments.length===1){var t=arguments[0];this.lines=t}else if(arguments.length===2){var e=arguments[0],r=arguments[1];this.lines=e,this.isForcedToLineString=r}}function bo(){this.items=new b}function is(){this.index=null;var t=arguments[0];if(!V(t,bn))throw new c;this.index=new Oo(t)}function Mo(){this.counter=null;var t=arguments[0];this.counter=t}function Oo(){this.index=new Eu;var t=arguments[0];this.init(t)}function wu(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],r=arguments[2];this.coord=new C(t),this.segmentIndex=e,this.dist=r}function Iu(){this.nodeMap=new $t,this.edge=null;var t=arguments[0];this.edge=t}function rs(){}function Cu(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new M,this.env2=new M;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new rs;this.startIndex=e.getChainStartIndices(this.pts)}function en(){this.depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;2>t;t++)for(var e=0;3>e;e++)this.depth[t][e]=en.NULL_VALUE}function Ye(){if(fi.apply(this),this.pts=null,this.env=null,this.eiList=new Iu(this),this.name=null,this.mce=null,this._isIsolated=!0,this.depth=new en,this.depthDelta=0,arguments.length===1){var t=arguments[0];Ye.call(this,t,null)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];this.pts=e,this.label=r}}function be(){if(vn.apply(this),this.parentGeom=null,this.lineEdgeMap=new Mn,this.boundaryNodeRule=null,this.useBoundaryDeterminationRule=!0,this.argIndex=null,this.boundaryNodes=null,this._hasTooFewPoints=!1,this.invalidPoint=null,this.areaPtLocator=null,this.ptLocator=new Bi,arguments.length===2){var t=arguments[0],e=arguments[1];be.call(this,t,e,ne.OGC_SFS_BOUNDARY_RULE)}else if(arguments.length===3){var r=arguments[0],o=arguments[1],l=arguments[2];this.argIndex=r,this.parentGeom=o,this.boundaryNodeRule=l,o!==null&&this.add(o)}}function di(){if(this.li=new ie,this.resultPrecisionModel=null,this.arg=null,arguments.length===1){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this.arg=new Array(1).fill(null),this.arg[0]=new be(0,t)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];di.call(this,e,r,ne.OGC_SFS_BOUNDARY_RULE)}else if(arguments.length===3){var o=arguments[0],l=arguments[1],f=arguments[2];o.getPrecisionModel().compareTo(l.getPrecisionModel())>=0?this.setComputationPrecision(o.getPrecisionModel()):this.setComputationPrecision(l.getPrecisionModel()),this.arg=new Array(2).fill(null),this.arg[0]=new be(0,o,f),this.arg[1]=new be(1,l,f)}}function pi(){this.pts=null,this._orientation=null;var t=arguments[0];this.pts=t,this._orientation=pi.orientation(t)}function Ro(){this.edges=new b,this.ocaMap=new $t}function j(){this.ptLocator=new Bi,this.geomFact=null,this.resultGeom=null,this.graph=null,this.edgeList=new Ro,this.resultPolyList=new b,this.resultLineList=new b,this.resultPointList=new b;var t=arguments[0],e=arguments[1];di.call(this,t,e),this.graph=new vn(new mr),this.geomFact=t.getFactory()}function We(){this.geom=new Array(2).fill(null),this.snapTolerance=null,this.cbr=null;var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e,this.computeSnapTolerance()}function re(){this.geom=new Array(2).fill(null);var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e}function nn(){this.factory=null,this.interiorPoint=null,this.maxWidth=0;var t=arguments[0];this.factory=t.getFactory(),this.add(t)}function vr(){this.poly=null,this.centreY=null,this.hiY=g.MAX_VALUE,this.loY=-g.MAX_VALUE;var t=arguments[0];this.poly=t,this.hiY=t.getEnvelopeInternal().getMaxY(),this.loY=t.getEnvelopeInternal().getMinY(),this.centreY=nn.avg(this.loY,this.hiY)}function Do(){this.centroid=null,this.minDistance=g.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.addInterior(t),this.interiorPoint===null&&this.addEndpoints(t)}function Ao(){this.centroid=null,this.minDistance=g.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.add(t)}function it(){}function Tt(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],r=arguments[2];this.p0=t,this.p1=e,this.p2=r}function $n(){this.input=null,this.extremalPts=null,this.centre=null,this.radius=0;var t=arguments[0];this.input=t}function pe(){if(this.inputGeom=null,this.isConvex=null,this.convexHullPts=null,this.minBaseSeg=new nt,this.minWidthPt=null,this.minPtIndex=null,this.minWidth=0,arguments.length===1){var t=arguments[0];pe.call(this,t,!1)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];this.inputGeom=e,this.isConvex=r}}function mi(){this.inputGeom=null,this.distanceTolerance=null;var t=arguments[0];this.inputGeom=t}function ss(){we.apply(this),this.distanceTolerance=null;var t=arguments[0];this.distanceTolerance=t}function Fn(){this._orig=null,this._sym=null,this._next=null;var t=arguments[0];this._orig=t}function Me(){this._isMarked=!1;var t=arguments[0];Fn.call(this,t)}function yr(){this.vertexMap=new Mn}function ko(){this._isStart=!1;var t=arguments[0];Me.call(this,t)}function Fo(){yr.apply(this)}function os(){this.result=null,this.factory=null,this.graph=null,this.lines=new b,this.nodeEdgeStack=new _e,this.ringStartEdge=null,this.graph=new Fo}function yn(){this.items=new b,this.subnode=new Array(4).fill(null)}function Xi(){}function vg(t,e){var r,o,l,f,d={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}},m={32:8,64:11}[t];if(f||(r=0>e||0>1/e,isFinite(e)||(f=d[t],r&&(f.d+=1<<t/4-1),o=Math.pow(2,m)-1,l=0)),!f){for(o={32:127,64:1023}[t],l=Math.abs(e);l>=2;)o++,l/=2;for(;1>l&&o>0;)o--,l*=2;0>=o&&(l/=2),t===32&&o>254&&(f={d:r?255:127,c:128,b:0,a:0},o=Math.pow(2,m)-1,l=0)}return o}function as(){this.pt=new C,this.level=0,this.env=null;var t=arguments[0];this.computeKey(t)}function Qn(){yn.apply(this),this.env=null,this.centrex=null,this.centrey=null,this.level=null;var t=arguments[0],e=arguments[1];this.env=t,this.level=e,this.centrex=(t.getMinX()+t.getMaxX())/2,this.centrey=(t.getMinY()+t.getMaxY())/2}function vi(){}function Yi(){yn.apply(this)}function yi(){this.root=null,this.minExtent=1,this.root=new Yi}function Nu(t){this.geometryFactory=t||new at}function ll(t){this.geometryFactory=t||new at,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Nu(this.geometryFactory)}function cl(){this.parser=new Nu(this.geometryFactory)}function fl(t){this.geometryFactory=t||new at,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new cu(this.geometryFactory)}function us(t){return[t.x,t.y]}function gl(t){this.geometryFactory=t||new at}function hs(){if(this.noder=null,this.scaleFactor=null,this.offsetX=null,this.offsetY=null,this.isScaled=!1,arguments.length===2){var t=arguments[0],e=arguments[1];hs.call(this,t,e,0,0)}else if(arguments.length===4){var r=arguments[0],o=arguments[1];this.noder=r,this.scaleFactor=o,this.isScaled=!this.isIntegerPrecision()}}function ls(){if(this.inputGeom=null,this.isClosedEndpointsInInterior=!0,this.nonSimpleLocation=null,arguments.length===1){var t=arguments[0];this.inputGeom=t}else if(arguments.length===2){var e=arguments[0],r=arguments[1];this.inputGeom=e,this.isClosedEndpointsInInterior=!r.isInBoundary(2)}}function zo(){this.pt=null,this.isClosed=null,this.degree=null;var t=arguments[0];this.pt=t,this.isClosed=!1,this.degree=0}function mt(){if(this.quadrantSegments=mt.DEFAULT_QUADRANT_SEGMENTS,this.endCapStyle=mt.CAP_ROUND,this.joinStyle=mt.JOIN_ROUND,this.mitreLimit=mt.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this.simplifyFactor=mt.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(r)}else if(arguments.length===4){var o=arguments[0],l=arguments[1],f=arguments[2],d=arguments[3];this.setQuadrantSegments(o),this.setEndCapStyle(l),this.setJoinStyle(f),this.setMitreLimit(d)}}}function Su(){this.minIndex=-1,this.minCoord=null,this.minDe=null,this.orientedDe=null}function Go(){this.array_=[]}function Tu(){this.finder=null,this.dirEdgeList=new b,this.nodes=new b,this.rightMostCoord=null,this.env=null,this.finder=new Su}function le(){this.inputLine=null,this.distanceTol=null,this.isDeleted=null,this.angleOrientation=H.COUNTERCLOCKWISE;var t=arguments[0];this.inputLine=t}function cs(){this.ptList=null,this.precisionModel=null,this.minimimVertexDistance=0,this.ptList=new b}function _n(){this.maxCurveSegmentError=0,this.filletAngleQuantum=null,this.closingSegLengthFactor=1,this.segList=null,this.distance=0,this.precisionModel=null,this.bufParams=null,this.li=null,this.s0=null,this.s1=null,this.s2=null,this.seg0=new nt,this.seg1=new nt,this.offset0=new nt,this.offset1=new nt,this.side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],r=arguments[2];this.precisionModel=t,this.bufParams=e,this.li=new ie,this.filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===mt.JOIN_ROUND&&(this.closingSegLengthFactor=_n.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)}function fs(){this.distance=0,this.precisionModel=null,this.bufParams=null;var t=arguments[0],e=arguments[1];this.precisionModel=t,this.bufParams=e}function Bo(){this.subgraphs=null,this.seg=new nt,this.cga=new H;var t=arguments[0];this.subgraphs=t}function qo(){this.upwardSeg=null,this.leftDepth=null;var t=arguments[0],e=arguments[1];this.upwardSeg=new nt(t),this.leftDepth=e}function Pu(){this.inputGeom=null,this.distance=null,this.curveBuilder=null,this.curveList=new b;var t=arguments[0],e=arguments[1],r=arguments[2];this.inputGeom=t,this.distance=e,this.curveBuilder=r}function gs(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.hasInterior=!1,this.properIntersectionPoint=null,this.li=null,this.isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this.li=t}function _i(){this.bufParams=null,this.workingPrecisionModel=null,this.workingNoder=null,this.geomFact=null,this.graph=null,this.edgeList=new Ro;var t=arguments[0];this.bufParams=t}function ds(){this.li=new ie,this.segStrings=null;var t=arguments[0];this.segStrings=t}function _r(){this.li=null,this.pt=null,this.originalPt=null,this.ptScaled=null,this.p0Scaled=null,this.p1Scaled=null,this.scaleFactor=null,this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,this.corner=new Array(4).fill(null),this.safeEnv=null;var t=arguments[0],e=arguments[1],r=arguments[2];if(this.originalPt=t,this.pt=t,this.scaleFactor=e,this.li=r,0>=e)throw new c;e!==1&&(this.pt=new C(this.scale(t.x),this.scale(t.y)),this.p0Scaled=new C,this.p1Scaled=new C),this.initCorners(this.pt)}function xi(){this.tempEnv1=new M,this.selectedSegment=new nt}function Uo(){this.index=null;var t=arguments[0];this.index=t}function ps(){xi.apply(this),this.hotPixel=null,this.parentEdge=null,this.hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],r=arguments[2];this.hotPixel=t,this.parentEdge=e,this.hotPixelVertexIndex=r}function bu(){this.li=null,this.interiorIntersections=null;var t=arguments[0];this.li=t,this.interiorIntersections=new b}function Mu(){this.pm=null,this.li=null,this.scaleFactor=null,this.noder=null,this.pointSnapper=null,this.nodedSegStrings=null;var t=arguments[0];this.pm=t,this.li=new ie,this.li.setPrecisionModel(t),this.scaleFactor=t.getScale()}function ce(){if(this.argGeom=null,this.distance=null,this.bufParams=new mt,this.resultGeometry=null,this.saveException=null,arguments.length===1){var t=arguments[0];this.argGeom=t}else if(arguments.length===2){var e=arguments[0],r=arguments[1];this.argGeom=e,this.bufParams=r}}function Wi(){this.comps=null;var t=arguments[0];this.comps=t}function Oe(){if(this.component=null,this.segIndex=null,this.pt=null,arguments.length===2){var t=arguments[0],e=arguments[1];Oe.call(this,t,Oe.INSIDE_AREA,e)}else if(arguments.length===3){var r=arguments[0],o=arguments[1],l=arguments[2];this.component=r,this.segIndex=o,this.pt=l}}function Ji(){this.pts=null;var t=arguments[0];this.pts=t}function ms(){this.locations=null;var t=arguments[0];this.locations=t}function rn(){if(this.geom=null,this.terminateDistance=0,this.ptLocator=new Bi,this.minDistanceLocation=null,this.minDistance=g.MAX_VALUE,arguments.length===2){var t=arguments[0],e=arguments[1];rn.call(this,t,e,0)}else if(arguments.length===3){var r=arguments[0],o=arguments[1],l=arguments[2];this.geom=new Array(2).fill(null),this.geom[0]=r,this.geom[1]=o,this.terminateDistance=l}}function Ou(){this.factory=null,this.directedEdges=new b,this.coordinates=null;var t=arguments[0];this.factory=t}function Je(){this._isMarked=!1,this._isVisited=!1,this.data=null}function Be(){Je.apply(this),this.parentEdge=null,this.from=null,this.to=null,this.p0=null,this.p1=null,this.sym=null,this.edgeDirection=null,this.quadrant=null,this.angle=null;var t=arguments[0],e=arguments[1],r=arguments[2],o=arguments[3];this.from=t,this.to=e,this.edgeDirection=o,this.p0=t.getCoordinate(),this.p1=r;var l=this.p1.x-this.p0.x,f=this.p1.y-this.p0.y;this.quadrant=pt.quadrant(l,f),this.angle=Math.atan2(f,l)}function vs(){var t=arguments[0],e=arguments[1],r=arguments[2],o=arguments[3];Be.call(this,t,e,r,o)}function xn(){if(Je.apply(this),this.dirEdge=null,arguments.length!==0){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.setDirectedEdges(t,e)}}}function Ru(){this.outEdges=new b,this.sorted=!1}function zn(){if(Je.apply(this),this.pt=null,this.deStar=null,arguments.length===1){var t=arguments[0];zn.call(this,t,new Ru)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];this.pt=e,this.deStar=r}}function Vo(){xn.apply(this),this.line=null;var t=arguments[0];this.line=t}function Du(){this.nodeMap=new $t}function xr(){this.edges=new oe,this.dirEdges=new oe,this.nodeMap=new Du}function Ho(){xr.apply(this)}function Au(){this.graph=new Ho,this.mergedLineStrings=null,this.factory=null,this.edgeStrings=null}function ys(){this.edgeRing=null,this.next=null,this.label=-1;var t=arguments[0],e=arguments[1],r=arguments[2],o=arguments[3];Be.call(this,t,e,r,o)}function Zo(){xn.apply(this),this.line=null;var t=arguments[0];this.line=t}function sn(){this.factory=null,this.deList=new b,this.lowestEdge=null,this.ring=null,this.ringPts=null,this.holes=null,this.shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;var t=arguments[0];this.factory=t}function ku(){}function Qt(){xr.apply(this),this.factory=null;var t=arguments[0];this.factory=t}function Re(){if(this.lineStringAdder=new Xo(this),this.graph=null,this.dangles=new b,this.cutEdges=new b,this.invalidRingLines=new b,this.holeList=null,this.shellList=null,this.polyList=null,this.isCheckingRingsValid=!0,this.extractOnlyPolygonal=null,this.geomFactory=null,arguments.length===0)Re.call(this,!1);else if(arguments.length===1){var t=arguments[0];this.extractOnlyPolygonal=t}}function Xo(){this.p=null;var t=arguments[0];this.p=t}function Yo(){}function _s(){if(this.edgeEnds=new b,arguments.length===1){var t=arguments[0];_s.call(this,null,t)}else if(arguments.length===2){var e=arguments[1];mn.call(this,e.getEdge(),e.getCoordinate(),e.getDirectedCoordinate(),new Ht(e.getLabel())),this.insert(e)}}function Wo(){Hi.apply(this)}function Jo(){var t=arguments[0],e=arguments[1];An.call(this,t,e)}function xs(){Vi.apply(this)}function Ko(){this.li=new ie,this.ptLocator=new Bi,this.arg=null,this.nodes=new pr(new xs),this.im=null,this.isolatedEdges=new b,this.invalidPoint=null;var t=arguments[0];this.arg=t}function Ls(){this.rectEnv=null;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal()}function Fu(){this.li=new ie,this.rectEnv=null,this.diagUp0=null,this.diagUp1=null,this.diagDown0=null,this.diagDown1=null;var t=arguments[0];this.rectEnv=t,this.diagUp0=new C(t.getMinX(),t.getMinY()),this.diagUp1=new C(t.getMaxX(),t.getMaxY()),this.diagDown0=new C(t.getMinX(),t.getMaxY()),this.diagDown1=new C(t.getMaxX(),t.getMinY())}function Li(){this._isDone=!1}function Lr(){this.rectangle=null,this.rectEnv=null;var t=arguments[0];this.rectangle=t,this.rectEnv=t.getEnvelopeInternal()}function jo(){Li.apply(this),this.rectEnv=null,this._intersects=!1;var t=arguments[0];this.rectEnv=t}function $o(){Li.apply(this),this.rectSeq=null,this.rectEnv=null,this._containsPoint=!1;var t=arguments[0];this.rectSeq=t.getExteriorRing().getCoordinateSequence(),this.rectEnv=t.getEnvelopeInternal()}function Qo(){Li.apply(this),this.rectEnv=null,this.rectIntersector=null,this.hasIntersection=!1,this.p0=new C,this.p1=new C;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal(),this.rectIntersector=new Fu(this.rectEnv)}function vt(){if(this._relate=null,arguments.length===2){var t=arguments[0],e=arguments[1];di.call(this,t,e),this._relate=new Ko(this.arg)}else if(arguments.length===3){var r=arguments[0],o=arguments[1],l=arguments[2];di.call(this,r,o,l),this._relate=new Ko(this.arg)}}function qe(){this.geomFactory=null,this.skipEmpty=!1,this.inputGeoms=null;var t=arguments[0];this.geomFactory=qe.extractFactory(t),this.inputGeoms=t}function Es(){this.pointGeom=null,this.otherGeom=null,this.geomFact=null;var t=arguments[0],e=arguments[1];this.pointGeom=t,this.otherGeom=e,this.geomFact=e.getFactory()}function Ei(){this.sortIndex=-1,this.comps=null;var t=arguments[0],e=arguments[1];this.sortIndex=t,this.comps=e}function Ke(){this.inputPolys=null,this.geomFactory=null;var t=arguments[0];this.inputPolys=t,this.inputPolys===null&&(this.inputPolys=new b)}function wi(){if(this.polygons=new b,this.lines=new b,this.points=new b,this.geomFact=null,arguments.length===1){if(V(arguments[0],X)){var t=arguments[0];this.extract(t)}else if(arguments[0]instanceof W){var e=arguments[0];this.extract(e)}}else if(arguments.length===2){var r=arguments[0],o=arguments[1];this.geomFact=o,this.extract(r)}}function ws(){this.geometryFactory=new at,this.geomGraph=null,this.disconnectedRingcoord=null;var t=arguments[0];this.geomGraph=t}function Ln(){this.items=new b,this.subnode=[null,null]}function Gn(){if(this.min=null,this.max=null,arguments.length===0)this.min=0,this.max=0;else if(arguments.length===1){var t=arguments[0];this.init(t.min,t.max)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];this.init(e,r)}}function Is(){this.pt=0,this.level=0,this.interval=null;var t=arguments[0];this.computeKey(t)}function ti(){Ln.apply(this),this.interval=null,this.centre=null,this.level=null;var t=arguments[0],e=arguments[1];this.interval=t,this.level=e,this.centre=(t.getMin()+t.getMax())/2}function Er(){Ln.apply(this)}function wr(){this.root=null,this.minExtent=1,this.root=new Er}function zu(){}function ta(){this.ring=null,this.tree=null,this.crossings=0,this.interval=new Gn;var t=arguments[0];this.ring=t,this.buildIndex()}function Cs(){xi.apply(this),this.mcp=null,this.p=null;var t=arguments[0],e=arguments[1];this.mcp=t,this.p=e}function Gu(){this.nodes=new pr(new xs)}function Bu(){this.li=new ie,this.geomGraph=null,this.nodeGraph=new Gu,this.invalidPoint=null;var t=arguments[0];this.geomGraph=t}function qu(){this.graph=null,this.rings=new b,this.totalEnv=new M,this.index=null,this.nestedPt=null;var t=arguments[0];this.graph=t}function dt(){if(this.errorType=null,this.pt=null,arguments.length===1){var t=arguments[0];dt.call(this,t,null)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];this.errorType=e,r!==null&&(this.pt=r.copy())}}function je(){this.parentGeometry=null,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null;var t=arguments[0];this.parentGeometry=t}function ea(){ke.CoordinateOperation.apply(this),this.targetPM=null,this.removeCollapsed=!0;var t=arguments[0],e=arguments[1];this.targetPM=t,this.removeCollapsed=e}function Ki(){this.targetPM=null,this.removeCollapsed=!0,this.changePrecisionModel=!1,this.isPointwise=!1;var t=arguments[0];this.targetPM=t}function Ns(){this.pts=null,this.usePt=null,this.distanceTolerance=null,this.seg=new nt;var t=arguments[0];this.pts=t}function Ir(){this.inputGeom=null,this.distanceTolerance=null,this.isEnsureValidTopology=!0;var t=arguments[0];this.inputGeom=t}function Ss(){we.apply(this),this.isEnsureValidTopology=!0,this.distanceTolerance=null;var t=arguments[0],e=arguments[1];this.isEnsureValidTopology=t,this.distanceTolerance=e}function Ts(){if(this.parent=null,this.index=null,arguments.length===2){var t=arguments[0],e=arguments[1];Ts.call(this,t,e,null,-1)}else if(arguments.length===4){var r=arguments[0],o=arguments[1],l=arguments[2],f=arguments[3];nt.call(this,r,o),this.parent=l,this.index=f}}function ei(){if(this.parentLine=null,this.segs=null,this.resultSegs=new b,this.minimumSize=null,arguments.length===1){var t=arguments[0];ei.call(this,t,2)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];this.parentLine=e,this.minimumSize=r,this.init()}}function Cr(){this.index=new yi}function Uu(){this.querySeg=null,this.items=new b;var t=arguments[0];this.querySeg=t}function Ps(){this.li=new ie,this.inputIndex=new Cr,this.outputIndex=new Cr,this.line=null,this.linePts=null,this.distanceTolerance=0;var t=arguments[0],e=arguments[1];this.inputIndex=t,this.outputIndex=e}function Vu(){this.inputIndex=new Cr,this.outputIndex=new Cr,this.distanceTolerance=0}function ji(){this.inputGeom=null,this.lineSimplifier=new Vu,this.linestringMap=null;var t=arguments[0];this.inputGeom=t}function bs(){we.apply(this),this.linestringMap=null;var t=arguments[0];this.linestringMap=t}function na(){this.tps=null;var t=arguments[0];this.tps=t}function Nr(){this.seg=null,this.segLen=null,this.splitPt=null,this.minimumLen=0;var t=arguments[0];this.seg=t,this.segLen=t.getLength()}function Hu(){}function Ms(){}function Mt(){}function xt(){if(this.p=null,arguments.length===1){var t=arguments[0];this.p=new C(t)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];this.p=new C(e,r)}else if(arguments.length===3){var o=arguments[0],l=arguments[1],f=arguments[2];this.p=new C(o,l,f)}}function Ii(){this._isOnConstraint=null,this.constraint=null;var t=arguments[0];xt.call(this,t)}function kt(){this._rot=null,this.vertex=null,this.next=null,this.data=null}function Os(){this.subdiv=null,this.isUsingTolerance=!1;var t=arguments[0];this.subdiv=t,this.isUsingTolerance=t.getTolerance()>0}function Zu(){}function ia(){this.subdiv=null,this.lastEdge=null;var t=arguments[0];this.subdiv=t,this.init()}function Sr(){if(this.seg=null,arguments.length===1){if(typeof arguments[0]=="string"){var t=arguments[0];I.call(this,t)}else if(arguments[0]instanceof nt){var e=arguments[0];I.call(this,"Locate failed to converge (at edge: "+e+").  Possible causes include invalid Subdivision topology or very close sites"),this.seg=new nt(e)}}else if(arguments.length===2){var r=arguments[0],o=arguments[1];I.call(this,Sr.msgWithSpatial(r,o)),this.seg=new nt(o)}}function Tr(){}function Ue(){this.visitedKey=0,this.quadEdges=new b,this.startingEdge=null,this.tolerance=null,this.edgeCoincidenceTolerance=null,this.frameVertex=new Array(3).fill(null),this.frameEnv=null,this.locator=null,this.seg=new nt,this.triEdges=new Array(3).fill(null);var t=arguments[0],e=arguments[1];this.tolerance=e,this.edgeCoincidenceTolerance=e/Ue.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(t),this.startingEdge=this.initSubdiv(),this.locator=new ia(this)}function ra(){}function sa(){this.triList=new b}function oa(){this.triList=new b}function aa(){this.coordList=new O,this.triCoords=new b}function $i(){if(this.ls=null,this.data=null,arguments.length===2){var t=arguments[0],e=arguments[1];this.ls=new nt(t,e)}else if(arguments.length===3){var r=arguments[0],o=arguments[1],l=arguments[2];this.ls=new nt(r,o),this.data=l}else if(arguments.length===6){var f=arguments[0],d=arguments[1],m=arguments[2],E=arguments[3],S=arguments[4],R=arguments[5];$i.call(this,new C(f,d,m),new C(E,S,R))}else if(arguments.length===7){var k=arguments[0],G=arguments[1],J=arguments[2],$=arguments[3],et=arguments[4],Pt=arguments[5],Xt=arguments[6];$i.call(this,new C(k,G,J),new C($,et,Pt),Xt)}}function Rs(){}function ua(){if(this.p=null,this.data=null,this.left=null,this.right=null,this.count=null,arguments.length===2){var t=arguments[0],e=arguments[1];this.p=new C(t),this.left=null,this.right=null,this.count=1,this.data=e}else if(arguments.length===3){var r=arguments[0],o=arguments[1],l=arguments[2];this.p=new C(r,o),this.left=null,this.right=null,this.count=1,this.data=l}}function Qi(){if(this.root=null,this.numberOfNodes=null,this.tolerance=null,arguments.length===0)Qi.call(this,0);else if(arguments.length===1){var t=arguments[0];this.tolerance=t}}function ha(){this.tolerance=null,this.matchNode=null,this.matchDist=0,this.p=null;var t=arguments[0],e=arguments[1];this.p=t,this.tolerance=e}function Ci(){this.initialVertices=null,this.segVertices=null,this.segments=new b,this.subdiv=null,this.incDel=null,this.convexHull=null,this.splitFinder=new Ms,this.kdt=null,this.vertexFactory=null,this.computeAreaEnv=null,this.splitPt=null,this.tolerance=null;var t=arguments[0],e=arguments[1];this.initialVertices=new b(t),this.tolerance=e,this.kdt=new Qi(e)}function me(){this.siteCoords=null,this.tolerance=0,this.subdiv=null}function Pr(){this.siteCoords=null,this.constraintLines=null,this.tolerance=0,this.subdiv=null,this.constraintVertexMap=new $t}function Ds(){this.siteCoords=null,this.tolerance=0,this.subdiv=null,this.clipEnv=null,this.diagramEnv=null}function la(){}Array.prototype.fill||(Array.prototype.fill=function(t){for(var e=Object(this),r=parseInt(e.length,10),o=arguments[1],l=parseInt(o,10)||0,f=0>l?Math.max(r+l,0):Math.min(l,r),d=arguments[2],m=d===void 0?r:parseInt(d,10)||0,E=0>m?Math.max(r+m,0):Math.min(m,r);E>f;f++)e[f]=t;return e}),Number.isFinite=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!==t},Math.trunc=Math.trunc||function(t){return 0>t?Math.ceil(t):Math.floor(t)},h(u.prototype,{interfaces_:function(){return[]},getClass:function(){return u}}),u.equalsWithTolerance=function(t,e,r){return Math.abs(t-e)<=r},g.isNaN=function(t){return Number.isNaN(t)},g.doubleToLongBits=function(t){return t},g.longBitsToDouble=function(t){return t},g.isInfinite=function(t){return!Number.isFinite(t)},g.MAX_VALUE=Number.MAX_VALUE,w(D,I),h(D.prototype,{interfaces_:function(){return[]},getClass:function(){return D}}),h(P.prototype,{interfaces_:function(){return[]},getClass:function(){return P}}),P.shouldNeverReachHere=function(){if(arguments.length===0)P.shouldNeverReachHere(null);else if(arguments.length===1){var t=arguments[0];throw new D("Should never reach here"+(t!==null?": "+t:""))}},P.isTrue=function(){if(arguments.length===1){var t=arguments[0];P.isTrue(t,null)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];if(!e)throw r===null?new D:new D(r)}},P.equals=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];P.equals(t,e,null)}else if(arguments.length===3){var r=arguments[0],o=arguments[1],l=arguments[2];if(!o.equals(r))throw new D("Expected "+r+" but encountered "+o+(l!==null?": "+l:""))}},h(C.prototype,{setOrdinate:function(t,e){switch(t){case C.X:this.x=e;break;case C.Y:this.y=e;break;case C.Z:this.z=e;break;default:throw new c}},equals2D:function(){if(arguments.length===1){var t=arguments[0];return this.x!==t.x?!1:this.y===t.y}if(arguments.length===2){var e=arguments[0],r=arguments[1];return u.equalsWithTolerance(this.x,e.x,r)?!!u.equalsWithTolerance(this.y,e.y,r):!1}},getOrdinate:function(t){switch(t){case C.X:return this.x;case C.Y:return this.y;case C.Z:return this.z}throw new c},equals3D:function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||g.isNaN(this.z)&&g.isNaN(t.z))},equals:function(t){return t instanceof C?this.equals2D(t):!1},equalInZ:function(t,e){return u.equalsWithTolerance(this.z,t.z,e)},compareTo:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},clone:function(){try{var t=null;return t}catch(e){if(e instanceof CloneNotSupportedException)return P.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw e}finally{}},copy:function(){return new C(this)},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"},distance3D:function(t){var e=this.x-t.x,r=this.y-t.y,o=this.z-t.z;return Math.sqrt(e*e+r*r+o*o)},distance:function(t){var e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)},hashCode:function(){var t=17;return t=37*t+C.hashCode(this.x),t=37*t+C.hashCode(this.y)},setCoordinate:function(t){this.x=t.x,this.y=t.y,this.z=t.z},interfaces_:function(){return[p,v,_]},getClass:function(){return C}}),C.hashCode=function(){if(arguments.length===1){var t=arguments[0],e=g.doubleToLongBits(t);return Math.trunc(e^e>>>32)}},h(Z.prototype,{compare:function(t,e){var r=t,o=e,l=Z.compare(r.x,o.x);if(l!==0)return l;var f=Z.compare(r.y,o.y);if(f!==0)return f;if(this.dimensionsToTest<=2)return 0;var d=Z.compare(r.z,o.z);return d},interfaces_:function(){return[y]},getClass:function(){return Z}}),Z.compare=function(t,e){return e>t?-1:t>e?1:g.isNaN(t)?g.isNaN(e)?0:-1:g.isNaN(e)?1:0},C.DimensionalComparator=Z,C.serialVersionUID=6683108902428367e3,C.NULL_ORDINATE=g.NaN,C.X=0,C.Y=1,C.Z=2,Y.prototype.hasNext=function(){},Y.prototype.next=function(){},Y.prototype.remove=function(){},X.prototype.add=function(){},X.prototype.addAll=function(){},X.prototype.isEmpty=function(){},X.prototype.iterator=function(){},X.prototype.size=function(){},X.prototype.toArray=function(){},X.prototype.remove=function(){},T.prototype=new Error,T.prototype.name="IndexOutOfBoundsException",N.prototype=Object.create(X.prototype),N.prototype.constructor=N,N.prototype.get=function(){},N.prototype.set=function(){},N.prototype.isEmpty=function(){},F.prototype=new Error,F.prototype.name="NoSuchElementException",K.prototype=new Error,K.prototype.name="OperationNotSupported",b.prototype=Object.create(N.prototype),b.prototype.constructor=b,b.prototype.ensureCapacity=function(){},b.prototype.interfaces_=function(){return[N,X]},b.prototype.add=function(t){return this.array_.push(t),!0},b.prototype.clear=function(){this.array_=[]},b.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},b.prototype.set=function(t,e){var r=this.array_[t];return this.array_[t]=e,r},b.prototype.iterator=function(){return new As(this)},b.prototype.get=function(t){if(0>t||t>=this.size())throw new T;return this.array_[t]},b.prototype.isEmpty=function(){return this.array_.length===0},b.prototype.size=function(){return this.array_.length},b.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;r>e;e++)t.push(this.array_[e]);return t},b.prototype.remove=function(t){for(var e=!1,r=0,o=this.array_.length;o>r;r++)if(this.array_[r]===t){this.array_.splice(r,1),e=!0;break}return e};var As=function(t){this.arrayList_=t,this.position_=0};As.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new F;return this.arrayList_.get(this.position_++)},As.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},As.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},As.prototype.remove=function(){throw new K},w(O,b),h(O.prototype,{getCoordinate:function(t){return this.get(t)},addAll:function(){if(arguments.length===2){for(var t=arguments[0],e=arguments[1],r=!1,o=t.iterator();o.hasNext();)this.add(o.next(),e),r=!0;return r}return b.prototype.addAll.apply(this,arguments)},clone:function(){for(var e=b.prototype.clone.call(this),r=0;r<this.size();r++)e.add(r,this.get(r).copy());return e},toCoordinateArray:function(){return this.toArray(O.coordArrayType)},add:function(){if(arguments.length===1){var t=arguments[0];b.prototype.add.call(this,t)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var e=arguments[0],r=arguments[1];return this.add(e,r,!0),!0}if(arguments[0]instanceof C&&typeof arguments[1]=="boolean"){var o=arguments[0],l=arguments[1];if(!l&&this.size()>=1){var f=this.get(this.size()-1);if(f.equals2D(o))return null}b.prototype.add.call(this,o)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var d=arguments[0],m=arguments[1];return this.add(d,m),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var E=arguments[0],S=arguments[1],R=arguments[2];if(R)for(var k=0;k<E.length;k++)this.add(E[k],S);else for(var k=E.length-1;k>=0;k--)this.add(E[k],S);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof C){var G=arguments[0],J=arguments[1],$=arguments[2];if(!$){var et=this.size();if(et>0){if(G>0){var Pt=this.get(G-1);if(Pt.equals2D(J))return null}if(et>G){var Xt=this.get(G);if(Xt.equals2D(J))return null}}}b.prototype.add.call(this,G,J)}}else if(arguments.length===4){var un=arguments[0],tr=arguments[1],ga=arguments[2],da=arguments[3],pa=1;ga>da&&(pa=-1);for(var k=ga;k!==da;k+=pa)this.add(un[k],tr);return!0}},closeRing:function(){this.size()>0&&this.add(new C(this.get(0)),!1)},interfaces_:function(){return[]},getClass:function(){return O}}),O.coordArrayType=new Array(0).fill(null),h(M.prototype,{getArea:function(){return this.getWidth()*this.getHeight()},equals:function(t){if(!(t instanceof M))return!1;var e=t;return this.isNull()?e.isNull():this.maxx===e.getMaxX()&&this.maxy===e.getMaxY()&&this.minx===e.getMinX()&&this.miny===e.getMinY()},intersection:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new M;var e=this.minx>t.minx?this.minx:t.minx,r=this.miny>t.miny?this.miny:t.miny,o=this.maxx<t.maxx?this.maxx:t.maxx,l=this.maxy<t.maxy?this.maxy:t.maxy;return new M(e,o,r,l)},isNull:function(){return this.maxx<this.minx},getMaxX:function(){return this.maxx},covers:function(){if(arguments.length===1){if(arguments[0]instanceof C){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof M){var e=arguments[0];return this.isNull()||e.isNull()?!1:e.getMinX()>=this.minx&&e.getMaxX()<=this.maxx&&e.getMinY()>=this.miny&&e.getMaxY()<=this.maxy}}else if(arguments.length===2){var r=arguments[0],o=arguments[1];return this.isNull()?!1:r>=this.minx&&r<=this.maxx&&o>=this.miny&&o<=this.maxy}},intersects:function(){if(arguments.length===1){if(arguments[0]instanceof M){var t=arguments[0];return this.isNull()||t.isNull()?!1:!(t.minx>this.maxx||t.maxx<this.minx||t.miny>this.maxy||t.maxy<this.miny)}if(arguments[0]instanceof C){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(arguments.length===2){var r=arguments[0],o=arguments[1];return this.isNull()?!1:!(r>this.maxx||r<this.minx||o>this.maxy||o<this.miny)}},getMinY:function(){return this.miny},getMinX:function(){return this.minx},expandToInclude:function(){if(arguments.length===1){if(arguments[0]instanceof C){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof M){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this.minx=e.getMinX(),this.maxx=e.getMaxX(),this.miny=e.getMinY(),this.maxy=e.getMaxY()):(e.minx<this.minx&&(this.minx=e.minx),e.maxx>this.maxx&&(this.maxx=e.maxx),e.miny<this.miny&&(this.miny=e.miny),e.maxy>this.maxy&&(this.maxy=e.maxy))}}else if(arguments.length===2){var r=arguments[0],o=arguments[1];this.isNull()?(this.minx=r,this.maxx=r,this.miny=o,this.maxy=o):(r<this.minx&&(this.minx=r),r>this.maxx&&(this.maxx=r),o<this.miny&&(this.miny=o),o>this.maxy&&(this.maxy=o))}},minExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return e>t?t:e},getWidth:function(){return this.isNull()?0:this.maxx-this.minx},compareTo:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this.minx<e.minx?-1:this.minx>e.minx?1:this.miny<e.miny?-1:this.miny>e.miny?1:this.maxx<e.maxx?-1:this.maxx>e.maxx?1:this.maxy<e.maxy?-1:this.maxy>e.maxy?1:0},translate:function(t,e){return this.isNull()?null:void this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},toString:function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"},setToNull:function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1},getHeight:function(){return this.isNull()?0:this.maxy-this.miny},maxExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},expandBy:function(){if(arguments.length===1){var t=arguments[0];this.expandBy(t,t)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];if(this.isNull())return null;this.minx-=e,this.maxx+=e,this.miny-=r,this.maxy+=r,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull()}},contains:function(){if(arguments.length===1){if(arguments[0]instanceof M){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof C){var e=arguments[0];return this.covers(e)}}else if(arguments.length===2){var r=arguments[0],o=arguments[1];return this.covers(r,o)}},centre:function(){return this.isNull()?null:new C((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},init:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof C){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof M){var e=arguments[0];this.minx=e.minx,this.maxx=e.maxx,this.miny=e.miny,this.maxy=e.maxy}}else if(arguments.length===2){var r=arguments[0],o=arguments[1];this.init(r.x,o.x,r.y,o.y)}else if(arguments.length===4){var l=arguments[0],f=arguments[1],d=arguments[2],m=arguments[3];f>l?(this.minx=l,this.maxx=f):(this.minx=f,this.maxx=l),m>d?(this.miny=d,this.maxy=m):(this.miny=m,this.maxy=d)}},getMaxY:function(){return this.maxy},distance:function(t){if(this.intersects(t))return 0;var e=0;this.maxx<t.minx?e=t.minx-this.maxx:this.minx>t.maxx&&(e=this.minx-t.maxx);var r=0;return this.maxy<t.miny?r=t.miny-this.maxy:this.miny>t.maxy&&(r=this.miny-t.maxy),e===0?r:r===0?e:Math.sqrt(e*e+r*r)},hashCode:function(){var t=17;return t=37*t+C.hashCode(this.minx),t=37*t+C.hashCode(this.maxx),t=37*t+C.hashCode(this.miny),t=37*t+C.hashCode(this.maxy)},interfaces_:function(){return[p,_]},getClass:function(){return M}}),M.intersects=function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],r=arguments[2];return r.x>=(t.x<e.x?t.x:e.x)&&r.x<=(t.x>e.x?t.x:e.x)&&r.y>=(t.y<e.y?t.y:e.y)&&r.y<=(t.y>e.y?t.y:e.y)}if(arguments.length===4){var o=arguments[0],l=arguments[1],f=arguments[2],d=arguments[3],m=Math.min(f.x,d.x),E=Math.max(f.x,d.x),S=Math.min(o.x,l.x),R=Math.max(o.x,l.x);return S>E||m>R?!1:(m=Math.min(f.y,d.y),E=Math.max(f.y,d.y),S=Math.min(o.y,l.y),R=Math.max(o.y,l.y),S>E?!1:!(m>R))}},M.serialVersionUID=5873921885273102e3,w(z,B),h(z.prototype,{interfaces_:function(){return[]},getClass:function(){return z}}),h(x.prototype,{interfaces_:function(){return[]},getClass:function(){return x}}),x.toLocationSymbol=function(t){switch(t){case x.EXTERIOR:return"e";case x.BOUNDARY:return"b";case x.INTERIOR:return"i";case x.NONE:return"-"}throw new c},x.INTERIOR=0,x.BOUNDARY=1,x.EXTERIOR=2,x.NONE=-1,h(rt.prototype,{interfaces_:function(){return[]},getClass:function(){return rt}}),rt.log10=function(t){var e=Math.log(t);return g.isInfinite(e)||g.isNaN(e)?e:e/rt.LOG_10},rt.min=function(t,e,r,o){var l=t;return l>e&&(l=e),l>r&&(l=r),l>o&&(l=o),l},rt.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1],r=arguments[2];return e>t?e:t>r?r:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var o=arguments[0],l=arguments[1],f=arguments[2];return l>o?l:o>f?f:o}},rt.wrap=function(t,e){return 0>t?e- -t%e:t%e},rt.max=function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],r=arguments[2],o=t;return e>o&&(o=e),r>o&&(o=r),o}if(arguments.length===4){var l=arguments[0],f=arguments[1],d=arguments[2],m=arguments[3],o=l;return f>o&&(o=f),d>o&&(o=d),m>o&&(o=m),o}},rt.average=function(t,e){return(t+e)/2},rt.LOG_10=Math.log(10),bt.prototype.append=function(t){this.str+=t},bt.prototype.setCharAt=function(t,e){return this.str.substr(0,t)+e+this.str.substr(t+1)},bt.prototype.toString=function(t){return this.str},qt.prototype.intValue=function(){return this.value},qt.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},qt.isNaN=function(t){return Number.isNaN(t)},ee.isWhitespace=function(t){return 32>=t&&t>=0||t==127},ee.toUpperCase=function(t){return t.toUpperCase()},h(A.prototype,{le:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<=t.lo},extractSignificantDigits:function(t,e){var r=this.abs(),o=A.magnitude(r.hi),l=A.TEN.pow(o);r=r.divide(l),r.gt(A.TEN)?(r=r.divide(A.TEN),o+=1):r.lt(A.ONE)&&(r=r.multiply(A.TEN),o-=1);for(var f=o+1,d=new bt,m=A.MAX_PRINT_DIGITS-1,E=0;m>=E;E++){t&&E===f&&d.append(".");var S=Math.trunc(r.hi);if(0>S)break;var R=!1,k=0;S>9?(R=!0,k="9"):k="0"+S,d.append(k),r=r.subtract(A.valueOf(S)).multiply(A.TEN),R&&r.selfAdd(A.TEN);var G=!0,J=A.magnitude(r.hi);if(0>J&&Math.abs(J)>=m-E&&(G=!1),!G)break}return e[0]=o,d.toString()},sqr:function(){return this.multiply(this)},doubleValue:function(){return this.hi+this.lo},subtract:function(){if(arguments[0]instanceof A){var t=arguments[0];return this.add(t.negate())}if(typeof arguments[0]=="number"){var e=arguments[0];return this.add(-e)}},equals:function(){if(arguments.length===1){var t=arguments[0];return this.hi===t.hi&&this.lo===t.lo}},isZero:function(){return this.hi===0&&this.lo===0},selfSubtract:function(){if(arguments[0]instanceof A){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t.hi,-t.lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},getSpecialNumberString:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},min:function(t){return this.le(t)?this:t},selfDivide:function(){if(arguments.length===1){if(arguments[0]instanceof A){var t=arguments[0];return this.selfDivide(t.hi,t.lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfDivide(e,0)}}else if(arguments.length===2){var r=arguments[0],o=arguments[1],l=null,f=null,d=null,m=null,E=null,S=null,R=null,k=null;return E=this.hi/r,S=A.SPLIT*E,l=S-E,k=A.SPLIT*r,l=S-l,f=E-l,d=k-r,R=E*r,d=k-d,m=r-d,k=l*d-R+l*m+f*d+f*m,S=(this.hi-R-k+this.lo-E*o)/r,k=E+S,this.hi=k,this.lo=E-k+S,this}},dump:function(){return"DD<"+this.hi+", "+this.lo+">"},divide:function(){if(arguments[0]instanceof A){var t=arguments[0],e=null,r=null,o=null,l=null,f=null,d=null,m=null,E=null;f=this.hi/t.hi,d=A.SPLIT*f,e=d-f,E=A.SPLIT*t.hi,e=d-e,r=f-e,o=E-t.hi,m=f*t.hi,o=E-o,l=t.hi-o,E=e*o-m+e*l+r*o+r*l,d=(this.hi-m-E+this.lo-f*t.lo)/t.hi,E=f+d;var S=E,R=f-E+d;return new A(S,R)}if(typeof arguments[0]=="number"){var k=arguments[0];return g.isNaN(k)?A.createNaN():A.copy(this).selfDivide(k,0)}},ge:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>=t.lo},pow:function(t){if(t===0)return A.valueOf(1);var e=new A(this),r=A.valueOf(1),o=Math.abs(t);if(o>1)for(;o>0;)o%2===1&&r.selfMultiply(e),o/=2,o>0&&(e=e.sqr());else r=e;return 0>t?r.reciprocal():r},ceil:function(){if(this.isNaN())return A.NaN;var t=Math.ceil(this.hi),e=0;return t===this.hi&&(e=Math.ceil(this.lo)),new A(t,e)},compareTo:function(t){var e=t;return this.hi<e.hi?-1:this.hi>e.hi?1:this.lo<e.lo?-1:this.lo>e.lo?1:0},rint:function(){if(this.isNaN())return this;var t=this.add(.5);return t.floor()},setValue:function(){if(arguments[0]instanceof A){var t=arguments[0];return this.init(t),this}if(typeof arguments[0]=="number"){var e=arguments[0];return this.init(e),this}},max:function(t){return this.ge(t)?this:t},sqrt:function(){if(this.isZero())return A.valueOf(0);if(this.isNegative())return A.NaN;var t=1/Math.sqrt(this.hi),e=this.hi*t,r=A.valueOf(e),o=this.subtract(r.sqr()),l=o.hi*(.5*t);return r.add(l)},selfAdd:function(){if(arguments.length===1){if(arguments[0]instanceof A){var t=arguments[0];return this.selfAdd(t.hi,t.lo)}if(typeof arguments[0]=="number"){var e=arguments[0],r=null,o=null,l=null,f=null,d=null,m=null;return l=this.hi+e,d=l-this.hi,f=l-d,f=e-d+(this.hi-f),m=f+this.lo,r=l+m,o=m+(l-r),this.hi=r+o,this.lo=o+(r-this.hi),this}}else if(arguments.length===2){var E=arguments[0],S=arguments[1],r=null,o=null,R=null,k=null,l=null,f=null,d=null,m=null;l=this.hi+E,R=this.lo+S,d=l-this.hi,m=R-this.lo,f=l-d,k=R-m,f=E-d+(this.hi-f),k=S-m+(this.lo-k),d=f+R,r=l+d,o=d+(l-r),d=k+o;var G=r+d,J=d+(r-G);return this.hi=G,this.lo=J,this}},selfMultiply:function(){if(arguments.length===1){if(arguments[0]instanceof A){var t=arguments[0];return this.selfMultiply(t.hi,t.lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfMultiply(e,0)}}else if(arguments.length===2){var r=arguments[0],o=arguments[1],l=null,f=null,d=null,m=null,E=null,S=null;E=A.SPLIT*this.hi,l=E-this.hi,S=A.SPLIT*r,l=E-l,f=this.hi-l,d=S-r,E=this.hi*r,d=S-d,m=r-d,S=l*d-E+l*m+f*d+f*m+(this.hi*o+this.lo*r);var R=E+S;l=E-R;var k=S+l;return this.hi=R,this.lo=k,this}},selfSqr:function(){return this.selfMultiply(this)},floor:function(){if(this.isNaN())return A.NaN;var t=Math.floor(this.hi),e=0;return t===this.hi&&(e=Math.floor(this.lo)),new A(t,e)},negate:function(){return this.isNaN()?this:new A(-this.hi,-this.lo)},clone:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}finally{}},multiply:function(){if(arguments[0]instanceof A){var t=arguments[0];return t.isNaN()?A.createNaN():A.copy(this).selfMultiply(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return g.isNaN(e)?A.createNaN():A.copy(this).selfMultiply(e,0)}},isNaN:function(){return g.isNaN(this.hi)},intValue:function(){return Math.trunc(this.hi)},toString:function(){var t=A.magnitude(this.hi);return t>=-3&&20>=t?this.toStandardNotation():this.toSciNotation()},toStandardNotation:function(){var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),r=this.extractSignificantDigits(!0,e),o=e[0]+1,l=r;if(r.charAt(0)===".")l="0"+r;else if(0>o)l="0."+A.stringOfChar("0",-o)+r;else if(r.indexOf(".")===-1){var f=o-r.length,d=A.stringOfChar("0",f);l=r+d+".0"}return this.isNegative()?"-"+l:l},reciprocal:function(){var t=null,e=null,r=null,o=null,l=null,f=null,d=null,m=null;l=1/this.hi,f=A.SPLIT*l,t=f-l,m=A.SPLIT*this.hi,t=f-t,e=l-t,r=m-this.hi,d=l*this.hi,r=m-r,o=this.hi-r,m=t*r-d+t*o+e*r+e*o,f=(1-d-m-l*this.lo)/this.hi;var E=l+f,S=l-E+f;return new A(E,S)},toSciNotation:function(){if(this.isZero())return A.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),r=this.extractSignificantDigits(!1,e),o=A.SCI_NOT_EXPONENT_CHAR+e[0];if(r.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+r);var l="";r.length>1&&(l=r.substring(1));var f=r.charAt(0)+"."+l;return this.isNegative()?"-"+f+o:f+o},abs:function(){return this.isNaN()?A.NaN:this.isNegative()?this.negate():new A(this)},isPositive:function(){return this.hi>0||this.hi===0&&this.lo>0},lt:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<t.lo},add:function(){if(arguments[0]instanceof A){var t=arguments[0];return A.copy(this).selfAdd(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return A.copy(this).selfAdd(e)}},init:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.hi=t,this.lo=0}else if(arguments[0]instanceof A){var e=arguments[0];this.hi=e.hi,this.lo=e.lo}}else if(arguments.length===2){var r=arguments[0],o=arguments[1];this.hi=r,this.lo=o}},gt:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>t.lo},isNegative:function(){return this.hi<0||this.hi===0&&this.lo<0},trunc:function(){return this.isNaN()?A.NaN:this.isPositive()?this.floor():this.ceil()},signum:function(){return this.hi>0?1:this.hi<0?-1:this.lo>0?1:this.lo<0?-1:0},interfaces_:function(){return[_,p,v]},getClass:function(){return A}}),A.sqr=function(t){return A.valueOf(t).selfMultiply(t)},A.valueOf=function(){if(typeof arguments[0]=="string"){var t=arguments[0];return A.parse(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return new A(e)}},A.sqrt=function(t){return A.valueOf(t).sqrt()},A.parse=function(t){for(var e=0,r=t.length;ee.isWhitespace(t.charAt(e));)e++;var o=!1;if(r>e){var l=t.charAt(e);l!=="-"&&l!=="+"||(e++,l==="-"&&(o=!0))}for(var f=new A,d=0,m=0,E=0;!(e>=r);){var S=t.charAt(e);if(e++,ee.isDigit(S)){var R=S-"0";f.selfMultiply(A.TEN),f.selfAdd(R),d++}else{if(S!=="."){if(S==="e"||S==="E"){var k=t.substring(e);try{E=qt.parseInt(k)}catch(et){throw et instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+k+" in string "+t):et}finally{}break}throw new NumberFormatException("Unexpected character '"+S+"' at position "+e+" in string "+t)}m=d}}var G=f,J=d-m-E;if(J===0)G=f;else if(J>0){var $=A.TEN.pow(J);G=f.divide($)}else if(0>J){var $=A.TEN.pow(-J);G=f.multiply($)}return o?G.negate():G},A.createNaN=function(){return new A(g.NaN,g.NaN)},A.copy=function(t){return new A(t)},A.magnitude=function(t){var e=Math.abs(t),r=Math.log(e)/Math.log(10),o=Math.trunc(Math.floor(r)),l=Math.pow(10,o);return e>=10*l&&(o+=1),o},A.stringOfChar=function(t,e){for(var r=new bt,o=0;e>o;o++)r.append(t);return r.toString()},A.PI=new A(3.141592653589793,12246467991473532e-32),A.TWO_PI=new A(6.283185307179586,24492935982947064e-32),A.PI_2=new A(1.5707963267948966,6123233995736766e-32),A.E=new A(2.718281828459045,14456468917292502e-32),A.NaN=new A(g.NaN,g.NaN),A.EPS=123259516440783e-46,A.SPLIT=134217729,A.MAX_PRINT_DIGITS=32,A.TEN=A.valueOf(10),A.ONE=A.valueOf(1),A.SCI_NOT_EXPONENT_CHAR="E",A.SCI_NOT_ZERO="0.0E0",h(At.prototype,{interfaces_:function(){return[]},getClass:function(){return At}}),At.orientationIndex=function(t,e,r){var o=At.orientationIndexFilter(t,e,r);if(1>=o)return o;var l=A.valueOf(e.x).selfAdd(-t.x),f=A.valueOf(e.y).selfAdd(-t.y),d=A.valueOf(r.x).selfAdd(-e.x),m=A.valueOf(r.y).selfAdd(-e.y);return l.selfMultiply(m).selfSubtract(f.selfMultiply(d)).signum()},At.signOfDet2x2=function(t,e,r,o){var l=t.multiply(o).selfSubtract(e.multiply(r));return l.signum()},At.intersection=function(t,e,r,o){var l=A.valueOf(o.y).selfSubtract(r.y).selfMultiply(A.valueOf(e.x).selfSubtract(t.x)),f=A.valueOf(o.x).selfSubtract(r.x).selfMultiply(A.valueOf(e.y).selfSubtract(t.y)),d=l.subtract(f),m=A.valueOf(o.x).selfSubtract(r.x).selfMultiply(A.valueOf(t.y).selfSubtract(r.y)),E=A.valueOf(o.y).selfSubtract(r.y).selfMultiply(A.valueOf(t.x).selfSubtract(r.x)),S=m.subtract(E),R=S.selfDivide(d).doubleValue(),k=A.valueOf(t.x).selfAdd(A.valueOf(e.x).selfSubtract(t.x).selfMultiply(R)).doubleValue(),G=A.valueOf(e.x).selfSubtract(t.x).selfMultiply(A.valueOf(t.y).selfSubtract(r.y)),J=A.valueOf(e.y).selfSubtract(t.y).selfMultiply(A.valueOf(t.x).selfSubtract(r.x)),$=G.subtract(J),et=$.selfDivide(d).doubleValue(),Pt=A.valueOf(r.y).selfAdd(A.valueOf(o.y).selfSubtract(r.y).selfMultiply(et)).doubleValue();return new C(k,Pt)},At.orientationIndexFilter=function(t,e,r){var o=null,l=(t.x-r.x)*(e.y-r.y),f=(t.y-r.y)*(e.x-r.x),d=l-f;if(l>0){if(0>=f)return At.signum(d);o=l+f}else{if(!(0>l)||f>=0)return At.signum(d);o=-l-f}var m=At.DP_SAFE_EPSILON*o;return d>=m||-d>=m?At.signum(d):2},At.signum=function(t){return t>0?1:0>t?-1:0},At.DP_SAFE_EPSILON=1e-15,h(ut.prototype,{setOrdinate:function(t,e,r){},size:function(){},getOrdinate:function(t,e){},getCoordinate:function(){},getCoordinateCopy:function(t){},getDimension:function(){},getX:function(t){},clone:function(){},expandEnvelope:function(t){},copy:function(){},getY:function(t){},toCoordinateArray:function(){},interfaces_:function(){return[v]},getClass:function(){return ut}}),ut.X=0,ut.Y=1,ut.Z=2,ut.M=3,Et.arraycopy=function(t,e,r,o,l){for(var f=0,d=e;e+l>d;d++)r[o+f]=t[d],f++},Et.getProperty=function(t){return{"line.separator":`
`}[t]},h(fe.prototype,{getY:function(){var t=this.y/this.w;if(g.isNaN(t)||g.isInfinite(t))throw new z;return t},getX:function(){var t=this.x/this.w;if(g.isNaN(t)||g.isInfinite(t))throw new z;return t},getCoordinate:function(){var t=new C;return t.x=this.getX(),t.y=this.getY(),t},interfaces_:function(){return[]},getClass:function(){return fe}}),fe.intersection=function(t,e,r,o){var l=t.y-e.y,f=e.x-t.x,d=t.x*e.y-e.x*t.y,m=r.y-o.y,E=o.x-r.x,S=r.x*o.y-o.x*r.y,R=f*S-E*d,k=m*d-l*S,G=l*E-m*f,J=R/G,$=k/G;if(g.isNaN(J)||g.isInfinite(J)||g.isNaN($)||g.isInfinite($))throw new z;return new C(J,$)},h(ui.prototype,{create:function(){arguments.length===1&&(arguments[0]instanceof Array||V(arguments[0],ut))},interfaces_:function(){return[]},getClass:function(){return ui}}),h(De.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return De}}),h(W.prototype,{isGeometryCollection:function(){return this.getSortIndex()===W.SORTINDEX_GEOMETRYCOLLECTION},getFactory:function(){return this.factory},getGeometryN:function(t){return this},getArea:function(){return 0},isRectangle:function(){return!1},equals:function(){if(arguments.length===1){if(arguments[0]instanceof W){var t=arguments[0];return t===null?!1:this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof W))return!1;var r=e;return this.equalsExact(r)}}},equalsExact:function(t){return this===t||this.equalsExact(t,0)},geometryChanged:function(){this.apply(W.geometryChangedFilter)},geometryChangedAction:function(){this.envelope=null},equalsNorm:function(t){return t===null?!1:this.norm().equalsExact(t.norm())},getLength:function(){return 0},getNumGeometries:function(){return 1},compareTo:function(){if(arguments.length===1){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(arguments.length===2){var r=arguments[0],o=arguments[1],e=r;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(r,o)}},getUserData:function(){return this.userData},getSRID:function(){return this.SRID},getEnvelope:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},checkNotGeometryCollection:function(t){if(t.getSortIndex()===W.SORTINDEX_GEOMETRYCOLLECTION)throw new c},equal:function(t,e,r){return r===0?t.equals(e):t.distance(e)<=r},norm:function(){var t=this.copy();return t.normalize(),t},getPrecisionModel:function(){return this.factory.getPrecisionModel()},getEnvelopeInternal:function(){return this.envelope===null&&(this.envelope=this.computeEnvelopeInternal()),new M(this.envelope)},setSRID:function(t){this.SRID=t},setUserData:function(t){this.userData=t},compare:function(t,e){for(var r=t.iterator(),o=e.iterator();r.hasNext()&&o.hasNext();){var l=r.next(),f=o.next(),d=l.compareTo(f);if(d!==0)return d}return r.hasNext()?1:o.hasNext()?-1:0},hashCode:function(){return this.getEnvelopeInternal().hashCode()},isGeometryCollectionOrDerived:function(){return this.getSortIndex()===W.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===W.SORTINDEX_MULTIPOINT||this.getSortIndex()===W.SORTINDEX_MULTILINESTRING||this.getSortIndex()===W.SORTINDEX_MULTIPOLYGON},interfaces_:function(){return[v,p,_]},getClass:function(){return W}}),W.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},W.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(t[e]===null)return!0;return!1},W.serialVersionUID=8763622679187377e3,W.SORTINDEX_POINT=0,W.SORTINDEX_MULTIPOINT=1,W.SORTINDEX_LINESTRING=2,W.SORTINDEX_LINEARRING=3,W.SORTINDEX_MULTILINESTRING=4,W.SORTINDEX_POLYGON=5,W.SORTINDEX_MULTIPOLYGON=6,W.SORTINDEX_GEOMETRYCOLLECTION=7,W.geometryChangedFilter={interfaces_:function(){return[De]},filter:function(t){t.geometryChangedAction()}},h(hi.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return hi}}),h(ne.prototype,{isInBoundary:function(t){},interfaces_:function(){return[]},getClass:function(){return ne}}),h(ao.prototype,{isInBoundary:function(t){return t%2===1},interfaces_:function(){return[ne]},getClass:function(){return ao}}),h(uo.prototype,{isInBoundary:function(t){return t>0},interfaces_:function(){return[ne]},getClass:function(){return uo}}),h(ho.prototype,{isInBoundary:function(t){return t>1},interfaces_:function(){return[ne]},getClass:function(){return ho}}),h(lo.prototype,{isInBoundary:function(t){return t===1},interfaces_:function(){return[ne]},getClass:function(){return lo}}),ne.Mod2BoundaryNodeRule=ao,ne.EndPointBoundaryNodeRule=uo,ne.MultiValentEndPointBoundaryNodeRule=ho,ne.MonoValentEndPointBoundaryNodeRule=lo,ne.MOD2_BOUNDARY_RULE=new ao,ne.ENDPOINT_BOUNDARY_RULE=new uo,ne.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new ho,ne.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new lo,ne.OGC_SFS_BOUNDARY_RULE=ne.MOD2_BOUNDARY_RULE,h(Q.prototype,{interfaces_:function(){return[]},getClass:function(){return Q}}),Q.isRing=function(t){return t.length<4?!1:!!t[0].equals2D(t[t.length-1])},Q.ptNotInList=function(t,e){for(var r=0;r<t.length;r++){var o=t[r];if(Q.indexOf(o,e)<0)return o}return null},Q.scroll=function(t,e){var r=Q.indexOf(e,t);if(0>r)return null;var o=new Array(t.length).fill(null);Et.arraycopy(t,r,o,0,t.length-r),Et.arraycopy(t,0,o,t.length-r,r),Et.arraycopy(o,0,t,0,t.length)},Q.equals=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(t===null||e===null||t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!t[r].equals(e[r]))return!1;return!0}if(arguments.length===3){var o=arguments[0],l=arguments[1],f=arguments[2];if(o===l)return!0;if(o===null||l===null||o.length!==l.length)return!1;for(var r=0;r<o.length;r++)if(f.compare(o[r],l[r])!==0)return!1;return!0}},Q.intersection=function(t,e){for(var r=new O,o=0;o<t.length;o++)e.intersects(t[o])&&r.add(t[o],!0);return r.toCoordinateArray()},Q.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Q.removeRepeatedPoints=function(t){if(!Q.hasRepeatedPoints(t))return t;var e=new O(t,!1);return e.toCoordinateArray()},Q.reverse=function(t){for(var e=t.length-1,r=Math.trunc(e/2),o=0;r>=o;o++){var l=t[o];t[o]=t[e-o],t[e-o]=l}},Q.removeNull=function(t){for(var e=0,r=0;r<t.length;r++)t[r]!==null&&e++;var o=new Array(e).fill(null);if(e===0)return o;for(var l=0,r=0;r<t.length;r++)t[r]!==null&&(o[l++]=t[r]);return o},Q.copyDeep=function(){if(arguments.length===1){for(var t=arguments[0],e=new Array(t.length).fill(null),r=0;r<t.length;r++)e[r]=new C(t[r]);return e}if(arguments.length===5)for(var o=arguments[0],l=arguments[1],f=arguments[2],d=arguments[3],m=arguments[4],r=0;m>r;r++)f[d+r]=new C(o[l+r])},Q.isEqualReversed=function(t,e){for(var r=0;r<t.length;r++){var o=t[r],l=e[t.length-r-1];if(o.compareTo(l)!==0)return!1}return!0},Q.envelope=function(t){for(var e=new M,r=0;r<t.length;r++)e.expandToInclude(t[r]);return e},Q.toCoordinateArray=function(t){return t.toArray(Q.coordArrayType)},Q.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Q.indexOf=function(t,e){for(var r=0;r<e.length;r++)if(t.equals(e[r]))return r;return-1},Q.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var r=t.length-1-e,o=t[e].compareTo(t[r]);if(o!==0)return o}return 1},Q.compare=function(t,e){for(var r=0;r<t.length&&r<e.length;){var o=t[r].compareTo(e[r]);if(o!==0)return o;r++}return r<e.length?-1:r<t.length?1:0},Q.minCoordinate=function(t){for(var e=null,r=0;r<t.length;r++)(e===null||e.compareTo(t[r])>0)&&(e=t[r]);return e},Q.extract=function(t,e,r){e=rt.clamp(e,0,t.length),r=rt.clamp(r,-1,t.length);var o=r-e+1;0>r&&(o=0),e>=t.length&&(o=0),e>r&&(o=0);var l=new Array(o).fill(null);if(o===0)return l;for(var f=0,d=e;r>=d;d++)l[f++]=t[d];return l},h(iu.prototype,{compare:function(t,e){var r=t,o=e;return Q.compare(r,o)},interfaces_:function(){return[y]},getClass:function(){return iu}}),h(ru.prototype,{compare:function(t,e){var r=t,o=e;if(r.length<o.length)return-1;if(r.length>o.length)return 1;if(r.length===0)return 0;var l=Q.compare(r,o),f=Q.isEqualReversed(r,o);return f?0:l},OLDcompare:function(t,e){var r=t,o=e;if(r.length<o.length)return-1;if(r.length>o.length)return 1;if(r.length===0)return 0;for(var l=Q.increasingDirection(r),f=Q.increasingDirection(o),d=l>0?0:r.length-1,m=f>0?0:r.length-1,E=0;E<r.length;E++){var S=r[d].compareTo(o[m]);if(S!==0)return S;d+=l,m+=f}return 0},interfaces_:function(){return[y]},getClass:function(){return ru}}),Q.ForwardComparator=iu,Q.BidirectionalComparator=ru,Q.coordArrayType=new Array(0).fill(null),Ai.prototype.get=function(){},Ai.prototype.put=function(){},Ai.prototype.size=function(){},Ai.prototype.values=function(){},Ai.prototype.entrySet=function(){},rl.prototype=new Ai,co.prototype=new X,co.prototype.contains=function(){},oe.prototype=new co,oe.prototype.contains=function(t){for(var e=0,r=this.array_.length;r>e;e++){var o=this.array_[e];if(o===t)return!0}return!1},oe.prototype.add=function(t){return this.contains(t)?!1:(this.array_.push(t),!0)},oe.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},oe.prototype.remove=function(t){throw new javascript.util.OperationNotSupported},oe.prototype.size=function(){return this.array_.length},oe.prototype.isEmpty=function(){return this.array_.length===0},oe.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;r>e;e++)t.push(this.array_[e]);return t},oe.prototype.iterator=function(){return new ca(this)};var ca=function(t){this.hashSet_=t,this.position_=0};ca.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new F;return this.hashSet_.array_[this.position_++]},ca.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},ca.prototype.remove=function(){throw new K};var Bn=0,Ni=1;$t.prototype=new rl,$t.prototype.get=function(t){for(var e=this.root_;e!==null;){var r=t.compareTo(e.key);if(0>r)e=e.left;else{if(!(r>0))return e.value;e=e.right}}return null},$t.prototype.put=function(t,e){if(this.root_===null)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Bn,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var r,o,l=this.root_;do if(r=l,o=t.compareTo(l.key),0>o)l=l.left;else{if(!(o>0)){var f=l.value;return l.value=e,f}l=l.right}while(l!==null);var d={key:t,left:null,right:null,value:e,parent:r,color:Bn,getValue:function(){return this.value},getKey:function(){return this.key}};return 0>o?r.left=d:r.right=d,this.fixAfterInsertion(d),this.size_++,null},$t.prototype.fixAfterInsertion=function(t){for(t.color=Ni;t!=null&&t!=this.root_&&t.parent.color==Ni;)if(St(t)==su(St(St(t)))){var e=al(St(St(t)));sl(e)==Ni?(Sn(St(t),Bn),Sn(e,Bn),Sn(St(St(t)),Ni),t=St(St(t))):(t==al(St(t))&&(t=St(t),this.rotateLeft(t)),Sn(St(t),Bn),Sn(St(St(t)),Ni),this.rotateRight(St(St(t))))}else{var e=su(St(St(t)));sl(e)==Ni?(Sn(St(t),Bn),Sn(e,Bn),Sn(St(St(t)),Ni),t=St(St(t))):(t==su(St(t))&&(t=St(t),this.rotateRight(t)),Sn(St(t),Bn),Sn(St(St(t)),Ni),this.rotateLeft(St(St(t))))}this.root_.color=Bn},$t.prototype.values=function(){var t=new b,e=this.getFirstEntry();if(e!==null)for(t.add(e.value);(e=$t.successor(e))!==null;)t.add(e.value);return t},$t.prototype.entrySet=function(){var t=new oe,e=this.getFirstEntry();if(e!==null)for(t.add(e);(e=$t.successor(e))!==null;)t.add(e);return t},$t.prototype.rotateLeft=function(t){if(t!=null){var e=t.right;t.right=e.left,e.left!=null&&(e.left.parent=t),e.parent=t.parent,t.parent==null?this.root_=e:t.parent.left==t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},$t.prototype.rotateRight=function(t){if(t!=null){var e=t.left;t.left=e.right,e.right!=null&&(e.right.parent=t),e.parent=t.parent,t.parent==null?this.root_=e:t.parent.right==t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},$t.prototype.getFirstEntry=function(){var t=this.root_;if(t!=null)for(;t.left!=null;)t=t.left;return t},$t.successor=function(t){if(t===null)return null;if(t.right!==null){for(var e=t.right;e.left!==null;)e=e.left;return e}for(var e=t.parent,r=t;e!==null&&r===e.right;)r=e,e=e.parent;return e},$t.prototype.size=function(){return this.size_},h(fo.prototype,{interfaces_:function(){return[]},getClass:function(){return fo}}),ul.prototype=new co,ye.prototype=new ul,ye.prototype.contains=function(t){for(var e=0,r=this.array_.length;r>e;e++){var o=this.array_[e];if(o.compareTo(t)===0)return!0}return!1},ye.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,r=this.array_.length;r>e;e++){var o=this.array_[e];if(o.compareTo(t)===1)return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},ye.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},ye.prototype.remove=function(t){throw new K},ye.prototype.size=function(){return this.array_.length},ye.prototype.isEmpty=function(){return this.array_.length===0},ye.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;r>e;e++)t.push(this.array_[e]);return t},ye.prototype.iterator=function(){return new fa(this)};var fa=function(t){this.treeSet_=t,this.position_=0};fa.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new F;return this.treeSet_.array_[this.position_++]},fa.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},fa.prototype.remove=function(){throw new K},Tn.sort=function(){var t,e,r,o,l=arguments[0];if(arguments.length===1)return o=function(d,m){return d.compareTo(m)},void l.sort(o);if(arguments.length===2)r=arguments[1],o=function(d,m){return r.compare(d,m)},l.sort(o);else{if(arguments.length===3){e=l.slice(arguments[1],arguments[2]),e.sort();var f=l.slice(0,arguments[1]).concat(e,l.slice(arguments[2],l.length));for(l.splice(0,l.length),t=0;t<f.length;t++)l.push(f[t]);return}if(arguments.length===4){for(e=l.slice(arguments[1],arguments[2]),r=arguments[3],o=function(d,m){return r.compare(d,m)},e.sort(o),f=l.slice(0,arguments[1]).concat(e,l.slice(arguments[2],l.length)),l.splice(0,l.length),t=0;t<f.length;t++)l.push(f[t]);return}}},Tn.asList=function(t){for(var e=new b,r=0,o=t.length;o>r;r++)e.add(t[r]);return e},h(q.prototype,{interfaces_:function(){return[]},getClass:function(){return q}}),q.toDimensionSymbol=function(t){switch(t){case q.FALSE:return q.SYM_FALSE;case q.TRUE:return q.SYM_TRUE;case q.DONTCARE:return q.SYM_DONTCARE;case q.P:return q.SYM_P;case q.L:return q.SYM_L;case q.A:return q.SYM_A}throw new c},q.toDimensionValue=function(t){switch(ee.toUpperCase(t)){case q.SYM_FALSE:return q.FALSE;case q.SYM_TRUE:return q.TRUE;case q.SYM_DONTCARE:return q.DONTCARE;case q.SYM_P:return q.P;case q.SYM_L:return q.L;case q.SYM_A:return q.A}throw new c},q.P=0,q.L=1,q.A=2,q.FALSE=-1,q.TRUE=-2,q.DONTCARE=-3,q.SYM_FALSE="F",q.SYM_TRUE="T",q.SYM_DONTCARE="*",q.SYM_P="0",q.SYM_L="1",q.SYM_A="2",h(Pn.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return Pn}}),h(ki.prototype,{filter:function(t,e){},isDone:function(){},isGeometryChanged:function(){},interfaces_:function(){return[]},getClass:function(){return ki}}),w(ht,W),h(ht.prototype,{computeEnvelopeInternal:function(){for(var t=new M,e=0;e<this.geometries.length;e++)t.expandToInclude(this.geometries[e].getEnvelopeInternal());return t},getGeometryN:function(t){return this.geometries[t]},getSortIndex:function(){return W.SORTINDEX_GEOMETRYCOLLECTION},getCoordinates:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,r=0;r<this.geometries.length;r++)for(var o=this.geometries[r].getCoordinates(),l=0;l<o.length;l++)e++,t[e]=o[l];return t},getArea:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getArea();return t},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var r=t;if(this.geometries.length!==r.geometries.length)return!1;for(var o=0;o<this.geometries.length;o++)if(!this.geometries[o].equalsExact(r.geometries[o],e))return!1;return!0}return W.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<this.geometries.length;t++)this.geometries[t].normalize();Tn.sort(this.geometries)},getCoordinate:function(){return this.isEmpty()?null:this.geometries[0].getCoordinate()},getBoundaryDimension:function(){for(var t=q.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getBoundaryDimension());return t},getDimension:function(){for(var t=q.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getDimension());return t},getLength:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getLength();return t},getNumPoints:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getNumPoints();return t},getNumGeometries:function(){return this.geometries.length},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),r=0;r<this.geometries.length;r++)e[r]=this.geometries[r].reverse();return this.getFactory().createGeometryCollection(e)},compareToSameClass:function(){if(arguments.length===1){var t=arguments[0],e=new ye(Tn.asList(this.geometries)),r=new ye(Tn.asList(t.geometries));return this.compare(e,r)}if(arguments.length===2){for(var o=arguments[0],l=arguments[1],f=o,d=this.getNumGeometries(),m=f.getNumGeometries(),E=0;d>E&&m>E;){var S=this.getGeometryN(E),R=f.getGeometryN(E),k=S.compareToSameClass(R,l);if(k!==0)return k;E++}return d>E?1:m>E?-1:0}},apply:function(){if(V(arguments[0],hi))for(var t=arguments[0],e=0;e<this.geometries.length;e++)this.geometries[e].apply(t);else if(V(arguments[0],ki)){var r=arguments[0];if(this.geometries.length===0)return null;for(var e=0;e<this.geometries.length&&(this.geometries[e].apply(r),!r.isDone());e++);r.isGeometryChanged()&&this.geometryChanged()}else if(V(arguments[0],Pn)){var o=arguments[0];o.filter(this);for(var e=0;e<this.geometries.length;e++)this.geometries[e].apply(o)}else if(V(arguments[0],De)){var l=arguments[0];l.filter(this);for(var e=0;e<this.geometries.length;e++)this.geometries[e].apply(l)}},getBoundary:function(){return this.checkNotGeometryCollection(this),P.shouldNeverReachHere(),null},clone:function(){var t=W.prototype.clone.call(this);t.geometries=new Array(this.geometries.length).fill(null);for(var e=0;e<this.geometries.length;e++)t.geometries[e]=this.geometries[e].clone();return t},getGeometryType:function(){return"GeometryCollection"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new ht(t,this.factory)},isEmpty:function(){for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isEmpty())return!1;return!0},interfaces_:function(){return[]},getClass:function(){return ht}}),ht.serialVersionUID=-5694727726395021e3,w(Ne,ht),h(Ne.prototype,{getSortIndex:function(){return W.SORTINDEX_MULTILINESTRING},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.isEquivalentClass(t)?ht.prototype.equalsExact.call(this,t,e):!1}return ht.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return this.isClosed()?q.FALSE:0},isClosed:function(){if(this.isEmpty())return!1;for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isClosed())return!1;return!0},getDimension:function(){return 1},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),r=0;r<this.geometries.length;r++)e[t-1-r]=this.geometries[r].reverse();return this.getFactory().createMultiLineString(e)},getBoundary:function(){return new Jn(this).getBoundary()},getGeometryType:function(){return"MultiLineString"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new Ne(t,this.factory)},interfaces_:function(){return[fo]},getClass:function(){return Ne}}),Ne.serialVersionUID=8166665132445434e3,h(Jn.prototype,{boundaryMultiLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return e.length===1?this.geomFact.createPoint(e[0]):this.geomFact.createMultiPointFromCoords(e)},getBoundary:function(){return this.geom instanceof st?this.boundaryLineString(this.geom):this.geom instanceof Ne?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()},boundaryLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();if(t.isClosed()){var e=this.bnRule.isInBoundary(2);return e?t.getStartPoint():this.geomFact.createMultiPoint()}return this.geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},getEmptyMultiPoint:function(){return this.geomFact.createMultiPoint()},computeBoundaryCoordinates:function(t){var e=new b;this.endpointMap=new $t;for(var r=0;r<t.getNumGeometries();r++){var o=t.getGeometryN(r);o.getNumPoints()!==0&&(this.addEndpoint(o.getCoordinateN(0)),this.addEndpoint(o.getCoordinateN(o.getNumPoints()-1)))}for(var l=this.endpointMap.entrySet().iterator();l.hasNext();){var f=l.next(),d=f.getValue(),m=d.count;this.bnRule.isInBoundary(m)&&e.add(f.getKey())}return Q.toCoordinateArray(e)},addEndpoint:function(t){var e=this.endpointMap.get(t);e===null&&(e=new ou,this.endpointMap.put(t,e)),e.count++},interfaces_:function(){return[]},getClass:function(){return Jn}}),Jn.getBoundary=function(){if(arguments.length===1){var t=arguments[0],e=new Jn(t);return e.getBoundary()}if(arguments.length===2){var r=arguments[0],o=arguments[1],e=new Jn(r,o);return e.getBoundary()}},h(ou.prototype,{interfaces_:function(){return[]},getClass:function(){return ou}}),h(Ae.prototype,{interfaces_:function(){return[]},getClass:function(){return Ae}}),Ae.chars=function(t,e){for(var r=new Array(e).fill(null),o=0;e>o;o++)r[o]=t;return new String(r)},Ae.getStackTrace=function(){if(arguments.length===1){var t=arguments[0],e=new Qf,r=new Kf;return t.printStackTrace(r),e.toString()}if(arguments.length===2){for(var o=arguments[0],l=arguments[1],f="",d=new jf(Ae.getStackTrace(o)),m=new eg,E=0;l>E;E++)try{f+=m.readLine()+Ae.NEWLINE}catch(S){if(!(S instanceof tg))throw S;P.shouldNeverReachHere()}finally{}return f}},Ae.split=function(t,e){for(var r=e.length,o=new b,l=""+t,f=l.indexOf(e);f>=0;){var d=l.substring(0,f);o.add(d),l=l.substring(f+r),f=l.indexOf(e)}l.length>0&&o.add(l);for(var m=new Array(o.size()).fill(null),E=0;E<m.length;E++)m[E]=o.get(E);return m},Ae.toString=function(){if(arguments.length===1){var t=arguments[0];return Ae.SIMPLE_ORDINATE_FORMAT.format(t)}},Ae.spaces=function(t){return Ae.chars(" ",t)},Ae.NEWLINE=Et.getProperty("line.separator"),Ae.SIMPLE_ORDINATE_FORMAT=new $f,h(Zt.prototype,{interfaces_:function(){return[]},getClass:function(){return Zt}}),Zt.copyCoord=function(t,e,r,o){for(var l=Math.min(t.getDimension(),r.getDimension()),f=0;l>f;f++)r.setOrdinate(o,f,t.getOrdinate(e,f))},Zt.isRing=function(t){var e=t.size();return e===0?!0:3>=e?!1:t.getOrdinate(0,ut.X)===t.getOrdinate(e-1,ut.X)&&t.getOrdinate(0,ut.Y)===t.getOrdinate(e-1,ut.Y)},Zt.isEqual=function(t,e){var r=t.size(),o=e.size();if(r!==o)return!1;for(var l=Math.min(t.getDimension(),e.getDimension()),f=0;r>f;f++)for(var d=0;l>d;d++){var m=t.getOrdinate(f,d),E=e.getOrdinate(f,d);if(!(t.getOrdinate(f,d)===e.getOrdinate(f,d)||g.isNaN(m)&&g.isNaN(E)))return!1}return!0},Zt.extend=function(t,e,r){var o=t.create(r,e.getDimension()),l=e.size();if(Zt.copy(e,0,o,0,l),l>0)for(var f=l;r>f;f++)Zt.copy(e,l-1,o,f,1);return o},Zt.reverse=function(t){for(var e=t.size()-1,r=Math.trunc(e/2),o=0;r>=o;o++)Zt.swap(t,o,e-o)},Zt.swap=function(t,e,r){if(e===r)return null;for(var o=0;o<t.getDimension();o++){var l=t.getOrdinate(e,o);t.setOrdinate(e,o,t.getOrdinate(r,o)),t.setOrdinate(r,o,l)}},Zt.copy=function(t,e,r,o,l){for(var f=0;l>f;f++)Zt.copyCoord(t,e+f,r,o+f)},Zt.toString=function(){if(arguments.length===1){var t=arguments[0],e=t.size();if(e===0)return"()";var r=t.getDimension(),o=new bt;o.append("(");for(var l=0;e>l;l++){l>0&&o.append(" ");for(var f=0;r>f;f++)f>0&&o.append(","),o.append(Ae.toString(t.getOrdinate(l,f)))}return o.append(")"),o.toString()}},Zt.ensureValidRing=function(t,e){var r=e.size();if(r===0)return e;if(3>=r)return Zt.createClosedRing(t,e,4);var o=e.getOrdinate(0,ut.X)===e.getOrdinate(r-1,ut.X)&&e.getOrdinate(0,ut.Y)===e.getOrdinate(r-1,ut.Y);return o?e:Zt.createClosedRing(t,e,r+1)},Zt.createClosedRing=function(t,e,r){var o=t.create(r,e.getDimension()),l=e.size();Zt.copy(e,0,o,0,l);for(var f=l;r>f;f++)Zt.copy(e,0,o,f,1);return o},w(st,W),h(st.prototype,{computeEnvelopeInternal:function(){return this.isEmpty()?new M:this.points.expandEnvelope(new M)},isRing:function(){return this.isClosed()&&this.isSimple()},getSortIndex:function(){return W.SORTINDEX_LINESTRING},getCoordinates:function(){return this.points.toCoordinateArray()},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var r=t;if(this.points.size()!==r.points.size())return!1;for(var o=0;o<this.points.size();o++)if(!this.equal(this.points.getCoordinate(o),r.points.getCoordinate(o),e))return!1;return!0}return W.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<Math.trunc(this.points.size()/2);t++){var e=this.points.size()-1-t;if(!this.points.getCoordinate(t).equals(this.points.getCoordinate(e)))return this.points.getCoordinate(t).compareTo(this.points.getCoordinate(e))>0&&Zt.reverse(this.points),null}},getCoordinate:function(){return this.isEmpty()?null:this.points.getCoordinate(0)},getBoundaryDimension:function(){return this.isClosed()?q.FALSE:0},isClosed:function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},getEndPoint:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},getDimension:function(){return 1},getLength:function(){return H.computeLength(this.points)},getNumPoints:function(){return this.points.size()},reverse:function(){var t=this.points.copy();Zt.reverse(t);var e=this.getFactory().createLineString(t);return e},compareToSameClass:function(){if(arguments.length===1){for(var t=arguments[0],e=t,r=0,o=0;r<this.points.size()&&o<e.points.size();){var l=this.points.getCoordinate(r).compareTo(e.points.getCoordinate(o));if(l!==0)return l;r++,o++}return r<this.points.size()?1:o<e.points.size()?-1:0}if(arguments.length===2){var f=arguments[0],d=arguments[1],e=f;return d.compare(this.points,e.points)}},apply:function(){if(V(arguments[0],hi))for(var t=arguments[0],e=0;e<this.points.size();e++)t.filter(this.points.getCoordinate(e));else if(V(arguments[0],ki)){var r=arguments[0];if(this.points.size()===0)return null;for(var e=0;e<this.points.size()&&(r.filter(this.points,e),!r.isDone());e++);r.isGeometryChanged()&&this.geometryChanged()}else if(V(arguments[0],Pn)){var o=arguments[0];o.filter(this)}else if(V(arguments[0],De)){var l=arguments[0];l.filter(this)}},getBoundary:function(){return new Jn(this).getBoundary()},isEquivalentClass:function(t){return t instanceof st},clone:function(){var t=W.prototype.clone.call(this);return t.points=this.points.clone(),t},getCoordinateN:function(t){return this.points.getCoordinate(t)},getGeometryType:function(){return"LineString"},copy:function(){return new st(this.points.copy(),this.factory)},getCoordinateSequence:function(){return this.points},isEmpty:function(){return this.points.size()===0},init:function(t){if(t===null&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),t.size()===1)throw new c("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this.points=t},isCoordinate:function(t){for(var e=0;e<this.points.size();e++)if(this.points.getCoordinate(e).equals(t))return!0;return!1},getStartPoint:function(){return this.isEmpty()?null:this.getPointN(0)},getPointN:function(t){return this.getFactory().createPoint(this.points.getCoordinate(t))},interfaces_:function(){return[fo]},getClass:function(){return st}}),st.serialVersionUID=0x2b2b51ba435c8e00,h(go.prototype,{interfaces_:function(){return[]},getClass:function(){return go}}),w(Ot,W),h(Ot.prototype,{computeEnvelopeInternal:function(){if(this.isEmpty())return new M;var t=new M;return t.expandToInclude(this.coordinates.getX(0),this.coordinates.getY(0)),t},getSortIndex:function(){return W.SORTINDEX_POINT},getCoordinates:function(){return this.isEmpty()?[]:[this.getCoordinate()]},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.isEquivalentClass(t)?this.isEmpty()&&t.isEmpty()?!0:this.isEmpty()!==t.isEmpty()?!1:this.equal(t.getCoordinate(),this.getCoordinate(),e):!1}return W.prototype.equalsExact.apply(this,arguments)},normalize:function(){},getCoordinate:function(){return this.coordinates.size()!==0?this.coordinates.getCoordinate(0):null},getBoundaryDimension:function(){return q.FALSE},getDimension:function(){return 0},getNumPoints:function(){return this.isEmpty()?0:1},reverse:function(){return this.copy()},getX:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x},compareToSameClass:function(){if(arguments.length===1){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(arguments.length===2){var r=arguments[0],o=arguments[1],e=r;return o.compare(this.coordinates,e.coordinates)}},apply:function(){if(V(arguments[0],hi)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(V(arguments[0],ki)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(V(arguments[0],Pn)){var r=arguments[0];r.filter(this)}else if(V(arguments[0],De)){var o=arguments[0];o.filter(this)}},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},clone:function(){var t=W.prototype.clone.call(this);return t.coordinates=this.coordinates.clone(),t},getGeometryType:function(){return"Point"},copy:function(){return new Ot(this.coordinates.copy(),this.factory)},getCoordinateSequence:function(){return this.coordinates},getY:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y},isEmpty:function(){return this.coordinates.size()===0},init:function(t){t===null&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),P.isTrue(t.size()<=1),this.coordinates=t},isSimple:function(){return!0},interfaces_:function(){return[go]},getClass:function(){return Ot}}),Ot.serialVersionUID=4902022702746615e3,h(bn.prototype,{interfaces_:function(){return[]},getClass:function(){return bn}}),w(wt,W),h(wt.prototype,{computeEnvelopeInternal:function(){return this.shell.getEnvelopeInternal()},getSortIndex:function(){return W.SORTINDEX_POLYGON},getCoordinates:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,r=this.shell.getCoordinates(),o=0;o<r.length;o++)e++,t[e]=r[o];for(var l=0;l<this.holes.length;l++)for(var f=this.holes[l].getCoordinates(),d=0;d<f.length;d++)e++,t[e]=f[d];return t},getArea:function(){var t=0;t+=Math.abs(H.signedArea(this.shell.getCoordinateSequence()));for(var e=0;e<this.holes.length;e++)t-=Math.abs(H.signedArea(this.holes[e].getCoordinateSequence()));return t},isRectangle:function(){if(this.getNumInteriorRing()!==0||this.shell===null||this.shell.getNumPoints()!==5)return!1;for(var t=this.shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),r=0;5>r;r++){var o=t.getX(r);if(o!==e.getMinX()&&o!==e.getMaxX())return!1;var l=t.getY(r);if(l!==e.getMinY()&&l!==e.getMaxY())return!1}for(var f=t.getX(0),d=t.getY(0),r=1;4>=r;r++){var o=t.getX(r),l=t.getY(r),m=o!==f,E=l!==d;if(m===E)return!1;f=o,d=l}return!0},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var r=t,o=this.shell,l=r.shell;if(!o.equalsExact(l,e)||this.holes.length!==r.holes.length)return!1;for(var f=0;f<this.holes.length;f++)if(!this.holes[f].equalsExact(r.holes[f],e))return!1;return!0}return W.prototype.equalsExact.apply(this,arguments)},normalize:function(){if(arguments.length===0){this.normalize(this.shell,!0);for(var t=0;t<this.holes.length;t++)this.normalize(this.holes[t],!1);Tn.sort(this.holes)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];if(e.isEmpty())return null;var o=new Array(e.getCoordinates().length-1).fill(null);Et.arraycopy(e.getCoordinates(),0,o,0,o.length);var l=Q.minCoordinate(e.getCoordinates());Q.scroll(o,l),Et.arraycopy(o,0,e.getCoordinates(),0,o.length),e.getCoordinates()[o.length]=o[0],H.isCCW(e.getCoordinates())===r&&Q.reverse(e.getCoordinates())}},getCoordinate:function(){return this.shell.getCoordinate()},getNumInteriorRing:function(){return this.holes.length},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},getLength:function(){var t=0;t+=this.shell.getLength();for(var e=0;e<this.holes.length;e++)t+=this.holes[e].getLength();return t},getNumPoints:function(){for(var t=this.shell.getNumPoints(),e=0;e<this.holes.length;e++)t+=this.holes[e].getNumPoints();return t},reverse:function(){var t=this.copy();t.shell=this.shell.copy().reverse(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].copy().reverse();return t},convexHull:function(){return this.getExteriorRing().convexHull()},compareToSameClass:function(){if(arguments.length===1){var t=arguments[0],e=this.shell,r=t.shell;return e.compareToSameClass(r)}if(arguments.length===2){var o=arguments[0],l=arguments[1],f=o,e=this.shell,r=f.shell,d=e.compareToSameClass(r,l);if(d!==0)return d;for(var m=this.getNumInteriorRing(),E=f.getNumInteriorRing(),S=0;m>S&&E>S;){var R=this.getInteriorRingN(S),k=f.getInteriorRingN(S),G=R.compareToSameClass(k,l);if(G!==0)return G;S++}return m>S?1:E>S?-1:0}},apply:function(){if(V(arguments[0],hi)){var t=arguments[0];this.shell.apply(t);for(var e=0;e<this.holes.length;e++)this.holes[e].apply(t)}else if(V(arguments[0],ki)){var r=arguments[0];if(this.shell.apply(r),!r.isDone())for(var e=0;e<this.holes.length&&(this.holes[e].apply(r),!r.isDone());e++);r.isGeometryChanged()&&this.geometryChanged()}else if(V(arguments[0],Pn)){var o=arguments[0];o.filter(this)}else if(V(arguments[0],De)){var l=arguments[0];l.filter(this),this.shell.apply(l);for(var e=0;e<this.holes.length;e++)this.holes[e].apply(l)}},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this.holes.length+1).fill(null);t[0]=this.shell;for(var e=0;e<this.holes.length;e++)t[e+1]=this.holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},clone:function(){var t=W.prototype.clone.call(this);t.shell=this.shell.clone(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].clone();return t},getGeometryType:function(){return"Polygon"},copy:function(){for(var t=this.shell.copy(),e=new Array(this.holes.length).fill(null),r=0;r<e.length;r++)e[r]=this.holes[r].copy();return new wt(t,e,this.factory)},getExteriorRing:function(){return this.shell},isEmpty:function(){return this.shell.isEmpty()},getInteriorRingN:function(t){return this.holes[t]},interfaces_:function(){return[bn]},getClass:function(){return wt}}),wt.serialVersionUID=-0x307ffefd8dc97200,w(Se,ht),h(Se.prototype,{getSortIndex:function(){return W.SORTINDEX_MULTIPOINT},isValid:function(){return!0},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.isEquivalentClass(t)?ht.prototype.equalsExact.call(this,t,e):!1}return ht.prototype.equalsExact.apply(this,arguments)},getCoordinate:function(){if(arguments.length===1){var t=arguments[0];return this.geometries[t].getCoordinate()}return ht.prototype.getCoordinate.apply(this,arguments)},getBoundaryDimension:function(){return q.FALSE},getDimension:function(){return 0},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},getGeometryType:function(){return"MultiPoint"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new Se(t,this.factory)},interfaces_:function(){return[go]},getClass:function(){return Se}}),Se.serialVersionUID=-8048474874175356e3,w(Ut,st),h(Ut.prototype,{getSortIndex:function(){return W.SORTINDEX_LINEARRING},getBoundaryDimension:function(){return q.FALSE},isClosed:function(){return this.isEmpty()?!0:st.prototype.isClosed.call(this)},reverse:function(){var t=this.points.copy();Zt.reverse(t);var e=this.getFactory().createLinearRing(t);return e},validateConstruction:function(){if(!this.isEmpty()&&!st.prototype.isClosed.call(this))throw new c;if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<Ut.MINIMUM_VALID_SIZE)throw new c("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},getGeometryType:function(){return"LinearRing"},copy:function(){return new Ut(this.points.copy(),this.factory)},interfaces_:function(){return[]},getClass:function(){return Ut}}),Ut.MINIMUM_VALID_SIZE=4,Ut.serialVersionUID=-0x3b229e262367a600,w(ae,ht),h(ae.prototype,{getSortIndex:function(){return W.SORTINDEX_MULTIPOLYGON},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.isEquivalentClass(t)?ht.prototype.equalsExact.call(this,t,e):!1}return ht.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),r=0;r<this.geometries.length;r++)e[r]=this.geometries[r].reverse();return this.getFactory().createMultiPolygon(e)},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new b,e=0;e<this.geometries.length;e++)for(var r=this.geometries[e],o=r.getBoundary(),l=0;l<o.getNumGeometries();l++)t.add(o.getGeometryN(l));var f=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(f))},getGeometryType:function(){return"MultiPolygon"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new ae(t,this.factory)},interfaces_:function(){return[bn]},getClass:function(){return ae}}),ae.serialVersionUID=-0x7a5aa1369171980,h(ke.prototype,{setCopyUserData:function(t){this.isUserDataCopied=t},edit:function(t,e){if(t===null)return null;var r=this.editInternal(t,e);return this.isUserDataCopied&&r.setUserData(t.getUserData()),r},editInternal:function(t,e){return this.factory===null&&(this.factory=t.getFactory()),t instanceof ht?this.editGeometryCollection(t,e):t instanceof wt?this.editPolygon(t,e):t instanceof Ot?e.edit(t,this.factory):t instanceof st?e.edit(t,this.factory):(P.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},editGeometryCollection:function(t,e){for(var r=e.edit(t,this.factory),o=new b,l=0;l<r.getNumGeometries();l++){var f=this.edit(r.getGeometryN(l),e);f===null||f.isEmpty()||o.add(f)}return r.getClass()===Se?this.factory.createMultiPoint(o.toArray([])):r.getClass()===Ne?this.factory.createMultiLineString(o.toArray([])):r.getClass()===ae?this.factory.createMultiPolygon(o.toArray([])):this.factory.createGeometryCollection(o.toArray([]))},editPolygon:function(t,e){var r=e.edit(t,this.factory);if(r===null&&(r=this.factory.createPolygon(null)),r.isEmpty())return r;var o=this.edit(r.getExteriorRing(),e);if(o===null||o.isEmpty())return this.factory.createPolygon();for(var l=new b,f=0;f<r.getNumInteriorRing();f++){var d=this.edit(r.getInteriorRingN(f),e);d===null||d.isEmpty()||l.add(d)}return this.factory.createPolygon(o,l.toArray([]))},interfaces_:function(){return[]},getClass:function(){return ke}}),ke.GeometryEditorOperation=po,h(au.prototype,{edit:function(t,e){return t},interfaces_:function(){return[po]},getClass:function(){return au}}),h(uu.prototype,{edit:function(t,e){if(t instanceof Ut)return e.createLinearRing(this.editCoordinates(t.getCoordinates(),t));if(t instanceof st)return e.createLineString(this.editCoordinates(t.getCoordinates(),t));if(t instanceof Ot){var r=this.editCoordinates(t.getCoordinates(),t);return r.length>0?e.createPoint(r[0]):e.createPoint()}return t},interfaces_:function(){return[po]},getClass:function(){return uu}}),h(hu.prototype,{edit:function(t,e){return t instanceof Ut?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof st?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Ot?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},interfaces_:function(){return[po]},getClass:function(){return hu}}),ke.NoOpGeometryOperation=au,ke.CoordinateOperation=uu,ke.CoordinateSequenceOperation=hu,h(Fe.prototype,{setOrdinate:function(t,e,r){switch(e){case ut.X:this.coordinates[t].x=r;break;case ut.Y:this.coordinates[t].y=r;break;case ut.Z:this.coordinates[t].z=r;break;default:throw new c}},size:function(){return this.coordinates.length},getOrdinate:function(t,e){switch(e){case ut.X:return this.coordinates[t].x;case ut.Y:return this.coordinates[t].y;case ut.Z:return this.coordinates[t].z}return g.NaN},getCoordinate:function(){if(arguments.length===1){var t=arguments[0];return this.coordinates[t]}if(arguments.length===2){var e=arguments[0],r=arguments[1];r.x=this.coordinates[e].x,r.y=this.coordinates[e].y,r.z=this.coordinates[e].z}},getCoordinateCopy:function(t){return new C(this.coordinates[t])},getDimension:function(){return this.dimension},getX:function(t){return this.coordinates[t].x},clone:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].clone();return new Fe(t,this.dimension)},expandEnvelope:function(t){for(var e=0;e<this.coordinates.length;e++)t.expandToInclude(this.coordinates[e]);return t},copy:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].copy();return new Fe(t,this.dimension)},toString:function(){if(this.coordinates.length>0){var t=new bt(17*this.coordinates.length);t.append("("),t.append(this.coordinates[0]);for(var e=1;e<this.coordinates.length;e++)t.append(", "),t.append(this.coordinates[e]);return t.append(")"),t.toString()}return"()"},getY:function(t){return this.coordinates[t].y},toCoordinateArray:function(){return this.coordinates},interfaces_:function(){return[ut,_]},getClass:function(){return Fe}}),Fe.serialVersionUID=-0xcb44a778db18e00,h(Kn.prototype,{readResolve:function(){return Kn.instance()},create:function(){if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new Fe(t)}if(V(arguments[0],ut)){var e=arguments[0];return new Fe(e)}}else if(arguments.length===2){var r=arguments[0],o=arguments[1];return o>3&&(o=3),2>o?new Fe(r):new Fe(r,o)}},interfaces_:function(){return[ui,_]},getClass:function(){return Kn}}),Kn.instance=function(){return Kn.instanceObject},Kn.serialVersionUID=-0x38e49fa6cf6f2e00,Kn.instanceObject=new Kn;var En,yg=Object.defineProperty,_g=ig({delete:sg,has:ug,get:og,set:hg,keys:cg,values:fg,entries:gg,forEach:pg,clear:lg}),xg=typeof Map<"u"&&Map.prototype.values?Map:_g;Mn.prototype=new Ai,Mn.prototype.get=function(t){return this.map_.get(t)||null},Mn.prototype.put=function(t,e){return this.map_.set(t,e),e},Mn.prototype.values=function(){for(var t=new b,e=this.map_.values(),r=e.next();!r.done;)t.add(r.value),r=e.next();return t},Mn.prototype.entrySet=function(){var t=new oe;return this.map_.entries().forEach(function(e){return t.add(e)}),t},Mn.prototype.size=function(){return this.map_.size()},h(yt.prototype,{equals:function(t){if(!(t instanceof yt))return!1;var e=t;return this.modelType===e.modelType&&this.scale===e.scale},compareTo:function(t){var e=t,r=this.getMaximumSignificantDigits(),o=e.getMaximumSignificantDigits();return new qt(r).compareTo(new qt(o))},getScale:function(){return this.scale},isFloating:function(){return this.modelType===yt.FLOATING||this.modelType===yt.FLOATING_SINGLE},getType:function(){return this.modelType},toString:function(){var t="UNKNOWN";return this.modelType===yt.FLOATING?t="Floating":this.modelType===yt.FLOATING_SINGLE?t="Floating-Single":this.modelType===yt.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},makePrecise:function(){if(typeof arguments[0]=="number"){var t=arguments[0];if(g.isNaN(t))return t;if(this.modelType===yt.FLOATING_SINGLE){var e=t;return e}return this.modelType===yt.FIXED?Math.round(t*this.scale)/this.scale:t}if(arguments[0]instanceof C){var r=arguments[0];if(this.modelType===yt.FLOATING)return null;r.x=this.makePrecise(r.x),r.y=this.makePrecise(r.y)}},getMaximumSignificantDigits:function(){var t=16;return this.modelType===yt.FLOATING?t=16:this.modelType===yt.FLOATING_SINGLE?t=6:this.modelType===yt.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},setScale:function(t){this.scale=Math.abs(t)},interfaces_:function(){return[_,p]},getClass:function(){return yt}}),yt.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},h(dn.prototype,{readResolve:function(){return dn.nameToTypeMap.get(this.name)},toString:function(){return this.name},interfaces_:function(){return[_]},getClass:function(){return dn}}),dn.serialVersionUID=-552860263173159e4,dn.nameToTypeMap=new Mn,yt.Type=dn,yt.serialVersionUID=7777263578777804e3,yt.FIXED=new dn("FIXED"),yt.FLOATING=new dn("FLOATING"),yt.FLOATING_SINGLE=new dn("FLOATING SINGLE"),yt.maximumPreciseValue=9007199254740992,h(at.prototype,{toGeometry:function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new C(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new C(t.getMinX(),t.getMinY()),new C(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new C(t.getMinX(),t.getMinY()),new C(t.getMinX(),t.getMaxY()),new C(t.getMaxX(),t.getMaxY()),new C(t.getMaxX(),t.getMinY()),new C(t.getMinX(),t.getMinY())]),null)},createLineString:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(V(arguments[0],ut)){var e=arguments[0];return new st(e,this)}}},createMultiLineString:function(){if(arguments.length===0)return new Ne(null,this);if(arguments.length===1){var t=arguments[0];return new Ne(t,this)}},buildGeometry:function(t){for(var e=null,r=!1,o=!1,l=t.iterator();l.hasNext();){var f=l.next(),d=f.getClass();e===null&&(e=d),d!==e&&(r=!0),f.isGeometryCollectionOrDerived()&&(o=!0)}if(e===null)return this.createGeometryCollection();if(r||o)return this.createGeometryCollection(at.toGeometryArray(t));var m=t.iterator().next(),E=t.size()>1;if(E){if(m instanceof wt)return this.createMultiPolygon(at.toPolygonArray(t));if(m instanceof st)return this.createMultiLineString(at.toLineStringArray(t));if(m instanceof Ot)return this.createMultiPoint(at.toPointArray(t));P.shouldNeverReachHere("Unhandled class: "+m.getClass().getName())}return m},createMultiPointFromCoords:function(t){return this.createMultiPoint(t!==null?this.getCoordinateSequenceFactory().create(t):null)},createPoint:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof C){var t=arguments[0];return this.createPoint(t!==null?this.getCoordinateSequenceFactory().create([t]):null)}if(V(arguments[0],ut)){var e=arguments[0];return new Ot(e,this)}}},getCoordinateSequenceFactory:function(){return this.coordinateSequenceFactory},createPolygon:function(){if(arguments.length===0)return new wt(null,null,this);if(arguments.length===1){if(V(arguments[0],ut)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Ut){var r=arguments[0];return this.createPolygon(r,null)}}else if(arguments.length===2){var o=arguments[0],l=arguments[1];return new wt(o,l,this)}},getSRID:function(){return this.SRID},createGeometryCollection:function(){if(arguments.length===0)return new ht(null,this);if(arguments.length===1){var t=arguments[0];return new ht(t,this)}},createGeometry:function(t){var e=new ke(this);return e.edit(t,{edit:function(){if(arguments.length===2){var r=arguments[0];return this.coordinateSequenceFactory.create(r)}}})},getPrecisionModel:function(){return this.precisionModel},createLinearRing:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(V(arguments[0],ut)){var e=arguments[0];return new Ut(e,this)}}},createMultiPolygon:function(){if(arguments.length===0)return new ae(null,this);if(arguments.length===1){var t=arguments[0];return new ae(t,this)}},createMultiPoint:function(){if(arguments.length===0)return new Se(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new Se(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(e!==null?this.getCoordinateSequenceFactory().create(e):null)}if(V(arguments[0],ut)){var r=arguments[0];if(r===null)return this.createMultiPoint(new Array(0).fill(null));for(var o=new Array(r.size()).fill(null),l=0;l<r.size();l++){var f=this.getCoordinateSequenceFactory().create(1,r.getDimension());Zt.copy(r,l,f,0,1),o[l]=this.createPoint(f)}return this.createMultiPoint(o)}}},interfaces_:function(){return[_]},getClass:function(){return at}}),at.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},at.toGeometryArray=function(t){if(t===null)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},at.getDefaultCoordinateSequenceFactory=function(){return Kn.instance()},at.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},at.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},at.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},at.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},at.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},at.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},at.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},at.serialVersionUID=-6820524753094096e3;var on={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};h(cu.prototype,{read:function(t){var e,r,o;t=t.replace(/[\n\r]/g," ");var l=on.typeStr.exec(t);if(t.search("EMPTY")!==-1&&(l=on.emptyTypeStr.exec(t),l[2]=void 0),l&&(r=l[1].toLowerCase(),o=l[2],br[r]&&(e=br[r].apply(this,[o]))),e===void 0)throw new Error("Could not parse WKT "+t);return e},write:function(t){return this.extractGeometry(t)},extractGeometry:function(t){var e=t.getGeometryType().toLowerCase();if(!qn[e])return null;var r=e.toUpperCase();return t.isEmpty()?r+" EMPTY":r+"("+qn[e].apply(this,[t])+")"}});var qn={coordinate:function(t){return t.x+" "+t.y},point:function(t){return qn.coordinate.call(this,t.coordinates.coordinates[0])},multipoint:function(t){for(var e=[],r=0,o=t.geometries.length;o>r;++r)e.push("("+qn.point.apply(this,[t.geometries[r]])+")");return e.join(",")},linestring:function(t){for(var e=[],r=0,o=t.points.coordinates.length;o>r;++r)e.push(qn.coordinate.apply(this,[t.points.coordinates[r]]));return e.join(",")},linearring:function(t){for(var e=[],r=0,o=t.points.coordinates.length;o>r;++r)e.push(qn.coordinate.apply(this,[t.points.coordinates[r]]));return e.join(",")},multilinestring:function(t){for(var e=[],r=0,o=t.geometries.length;o>r;++r)e.push("("+qn.linestring.apply(this,[t.geometries[r]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+qn.linestring.apply(this,[t.shell])+")");for(var r=0,o=t.holes.length;o>r;++r)e.push("("+qn.linestring.apply(this,[t.holes[r]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],r=0,o=t.geometries.length;o>r;++r)e.push("("+qn.polygon.apply(this,[t.geometries[r]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],r=0,o=t.geometries.length;o>r;++r)e.push(this.extractGeometry(t.geometries[r]));return e.join(",")}},br={point:function(t){if(t===void 0)return this.geometryFactory.createPoint();var e=t.trim().split(on.spaces);return this.geometryFactory.createPoint(new C(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(t===void 0)return this.geometryFactory.createMultiPoint();for(var e,r=t.trim().split(","),o=[],l=0,f=r.length;f>l;++l)e=r[l].replace(on.trimParens,"$1"),o.push(br.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(o)},linestring:function(t){if(t===void 0)return this.geometryFactory.createLineString();for(var e,r=t.trim().split(","),o=[],l=0,f=r.length;f>l;++l)e=r[l].trim().split(on.spaces),o.push(new C(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(o)},linearring:function(t){if(t===void 0)return this.geometryFactory.createLinearRing();for(var e,r=t.trim().split(","),o=[],l=0,f=r.length;f>l;++l)e=r[l].trim().split(on.spaces),o.push(new C(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(o)},multilinestring:function(t){if(t===void 0)return this.geometryFactory.createMultiLineString();for(var e,r=t.trim().split(on.parenComma),o=[],l=0,f=r.length;f>l;++l)e=r[l].replace(on.trimParens,"$1"),o.push(br.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(o)},polygon:function(t){if(t===void 0)return this.geometryFactory.createPolygon();for(var e,r,o,l,f=t.trim().split(on.parenComma),d=[],m=0,E=f.length;E>m;++m)e=f[m].replace(on.trimParens,"$1"),r=br.linestring.apply(this,[e]),o=this.geometryFactory.createLinearRing(r.points),m===0?l=o:d.push(o);return this.geometryFactory.createPolygon(l,d)},multipolygon:function(t){if(t===void 0)return this.geometryFactory.createMultiPolygon();for(var e,r=t.trim().split(on.doubleParenComma),o=[],l=0,f=r.length;f>l;++l)e=r[l].replace(on.trimParens,"$1"),o.push(br.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(o)},geometrycollection:function(t){if(t===void 0)return this.geometryFactory.createGeometryCollection();t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var e=t.trim().split("|"),r=[],o=0,l=e.length;l>o;++o)r.push(this.read(e[o]));return this.geometryFactory.createGeometryCollection(r)}};h(ge.prototype,{write:function(t){return this.parser.write(t)}}),h(ge,{toLineString:function(t,e){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}),h(It.prototype,{getIndexAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intLineIndex[t][e]},getTopologySummary:function(){var t=new bt;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},computeIntersection:function(t,e,r,o){this.inputLines[0][0]=t,this.inputLines[0][1]=e,this.inputLines[1][0]=r,this.inputLines[1][1]=o,this.result=this.computeIntersect(t,e,r,o)},getIntersectionNum:function(){return this.result},computeIntLineIndex:function(){if(arguments.length===0)this.intLineIndex===null&&(this.intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var t=arguments[0],e=this.getEdgeDistance(t,0),r=this.getEdgeDistance(t,1);e>r?(this.intLineIndex[t][0]=0,this.intLineIndex[t][1]=1):(this.intLineIndex[t][0]=1,this.intLineIndex[t][1]=0)}},isProper:function(){return this.hasIntersection()&&this._isProper},setPrecisionModel:function(t){this.precisionModel=t},isInteriorIntersection:function(){if(arguments.length===0)return this.isInteriorIntersection(0)?!0:!!this.isInteriorIntersection(1);if(arguments.length===1){for(var t=arguments[0],e=0;e<this.result;e++)if(!this.intPt[e].equals2D(this.inputLines[t][0])&&!this.intPt[e].equals2D(this.inputLines[t][1]))return!0;return!1}},getIntersection:function(t){return this.intPt[t]},isEndPoint:function(){return this.hasIntersection()&&!this._isProper},hasIntersection:function(){return this.result!==It.NO_INTERSECTION},getEdgeDistance:function(t,e){var r=It.computeEdgeDistance(this.intPt[e],this.inputLines[t][0],this.inputLines[t][1]);return r},isCollinear:function(){return this.result===It.COLLINEAR_INTERSECTION},toString:function(){return ge.toLineString(this.inputLines[0][0],this.inputLines[0][1])+" - "+ge.toLineString(this.inputLines[1][0],this.inputLines[1][1])+this.getTopologySummary()},getEndpoint:function(t,e){return this.inputLines[t][e]},isIntersection:function(t){for(var e=0;e<this.result;e++)if(this.intPt[e].equals2D(t))return!0;return!1},getIntersectionAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intPt[this.intLineIndex[t][e]]},interfaces_:function(){return[]},getClass:function(){return It}}),It.computeEdgeDistance=function(t,e,r){var o=Math.abs(r.x-e.x),l=Math.abs(r.y-e.y),f=-1;if(t.equals(e))f=0;else if(t.equals(r))f=o>l?o:l;else{var d=Math.abs(t.x-e.x),m=Math.abs(t.y-e.y);f=o>l?d:m,f!==0||t.equals(e)||(f=Math.max(d,m))}return P.isTrue(!(f===0&&!t.equals(e)),"Bad distance calculation"),f},It.nonRobustComputeEdgeDistance=function(t,e,r){var o=t.x-e.x,l=t.y-e.y,f=Math.sqrt(o*o+l*l);return P.isTrue(!(f===0&&!t.equals(e)),"Invalid distance calculation"),f},It.DONT_INTERSECT=0,It.DO_INTERSECT=1,It.COLLINEAR=2,It.NO_INTERSECTION=0,It.POINT_INTERSECTION=1,It.COLLINEAR_INTERSECTION=2,w(ie,It),h(ie.prototype,{isInSegmentEnvelopes:function(t){var e=new M(this.inputLines[0][0],this.inputLines[0][1]),r=new M(this.inputLines[1][0],this.inputLines[1][1]);return e.contains(t)&&r.contains(t)},computeIntersection:function(){if(arguments.length!==3)return It.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],e=arguments[1],r=arguments[2];return this._isProper=!1,M.intersects(e,r,t)&&H.orientationIndex(e,r,t)===0&&H.orientationIndex(r,e,t)===0?(this._isProper=!0,(t.equals(e)||t.equals(r))&&(this._isProper=!1),this.result=It.POINT_INTERSECTION,null):void(this.result=It.NO_INTERSECTION)},normalizeToMinimum:function(t,e,r,o,l){l.x=this.smallestInAbsValue(t.x,e.x,r.x,o.x),l.y=this.smallestInAbsValue(t.y,e.y,r.y,o.y),t.x-=l.x,t.y-=l.y,e.x-=l.x,e.y-=l.y,r.x-=l.x,r.y-=l.y,o.x-=l.x,o.y-=l.y},safeHCoordinateIntersection:function(t,e,r,o){var l=null;try{l=fe.intersection(t,e,r,o)}catch(f){if(!(f instanceof z))throw f;l=ie.nearestEndpoint(t,e,r,o)}finally{}return l},intersection:function(t,e,r,o){var l=this.intersectionWithNormalization(t,e,r,o);return this.isInSegmentEnvelopes(l)||(l=new C(ie.nearestEndpoint(t,e,r,o))),this.precisionModel!==null&&this.precisionModel.makePrecise(l),l},smallestInAbsValue:function(t,e,r,o){var l=t,f=Math.abs(l);return Math.abs(e)<f&&(l=e,f=Math.abs(e)),Math.abs(r)<f&&(l=r,f=Math.abs(r)),Math.abs(o)<f&&(l=o),l},checkDD:function(t,e,r,o,l){var f=At.intersection(t,e,r,o),d=this.isInSegmentEnvelopes(f);Et.out.println("DD in env = "+d+"  --------------------- "+f),l.distance(f)>1e-4&&Et.out.println("Distance = "+l.distance(f))},intersectionWithNormalization:function(t,e,r,o){var l=new C(t),f=new C(e),d=new C(r),m=new C(o),E=new C;this.normalizeToEnvCentre(l,f,d,m,E);var S=this.safeHCoordinateIntersection(l,f,d,m);return S.x+=E.x,S.y+=E.y,S},computeCollinearIntersection:function(t,e,r,o){var l=M.intersects(t,e,r),f=M.intersects(t,e,o),d=M.intersects(r,o,t),m=M.intersects(r,o,e);return l&&f?(this.intPt[0]=r,this.intPt[1]=o,It.COLLINEAR_INTERSECTION):d&&m?(this.intPt[0]=t,this.intPt[1]=e,It.COLLINEAR_INTERSECTION):l&&d?(this.intPt[0]=r,this.intPt[1]=t,!r.equals(t)||f||m?It.COLLINEAR_INTERSECTION:It.POINT_INTERSECTION):l&&m?(this.intPt[0]=r,this.intPt[1]=e,!r.equals(e)||f||d?It.COLLINEAR_INTERSECTION:It.POINT_INTERSECTION):f&&d?(this.intPt[0]=o,this.intPt[1]=t,!o.equals(t)||l||m?It.COLLINEAR_INTERSECTION:It.POINT_INTERSECTION):f&&m?(this.intPt[0]=o,this.intPt[1]=e,!o.equals(e)||l||d?It.COLLINEAR_INTERSECTION:It.POINT_INTERSECTION):It.NO_INTERSECTION},normalizeToEnvCentre:function(t,e,r,o,l){var f=t.x<e.x?t.x:e.x,d=t.y<e.y?t.y:e.y,m=t.x>e.x?t.x:e.x,E=t.y>e.y?t.y:e.y,S=r.x<o.x?r.x:o.x,R=r.y<o.y?r.y:o.y,k=r.x>o.x?r.x:o.x,G=r.y>o.y?r.y:o.y,J=f>S?f:S,$=k>m?m:k,et=d>R?d:R,Pt=G>E?E:G,Xt=(J+$)/2,un=(et+Pt)/2;l.x=Xt,l.y=un,t.x-=l.x,t.y-=l.y,e.x-=l.x,e.y-=l.y,r.x-=l.x,r.y-=l.y,o.x-=l.x,o.y-=l.y},computeIntersect:function(t,e,r,o){if(this._isProper=!1,!M.intersects(t,e,r,o))return It.NO_INTERSECTION;var l=H.orientationIndex(t,e,r),f=H.orientationIndex(t,e,o);if(l>0&&f>0||0>l&&0>f)return It.NO_INTERSECTION;var d=H.orientationIndex(r,o,t),m=H.orientationIndex(r,o,e);if(d>0&&m>0||0>d&&0>m)return It.NO_INTERSECTION;var E=l===0&&f===0&&d===0&&m===0;return E?this.computeCollinearIntersection(t,e,r,o):(l===0||f===0||d===0||m===0?(this._isProper=!1,t.equals2D(r)||t.equals2D(o)?this.intPt[0]=t:e.equals2D(r)||e.equals2D(o)?this.intPt[0]=e:l===0?this.intPt[0]=new C(r):f===0?this.intPt[0]=new C(o):d===0?this.intPt[0]=new C(t):m===0&&(this.intPt[0]=new C(e))):(this._isProper=!0,this.intPt[0]=this.intersection(t,e,r,o)),It.POINT_INTERSECTION)},interfaces_:function(){return[]},getClass:function(){return ie}}),ie.nearestEndpoint=function(t,e,r,o){var l=t,f=H.distancePointLine(t,r,o),d=H.distancePointLine(e,r,o);return f>d&&(f=d,l=e),d=H.distancePointLine(r,t,e),f>d&&(f=d,l=r),d=H.distancePointLine(o,t,e),f>d&&(f=d,l=o),l},h(Fi.prototype,{interfaces_:function(){return[]},getClass:function(){return Fi}}),Fi.orientationIndex=function(t,e,r){var o=e.x-t.x,l=e.y-t.y,f=r.x-e.x,d=r.y-e.y;return Fi.signOfDet2x2(o,l,f,d)},Fi.signOfDet2x2=function(t,e,r,o){var l=null,f=null,d=null;if(l=1,t===0||o===0)return e===0||r===0?0:e>0?r>0?-l:l:r>0?l:-l;if(e===0||r===0)return o>0?t>0?l:-l:t>0?-l:l;if(e>0?o>0?o>=e||(l=-l,f=t,t=r,r=f,f=e,e=o,o=f):-o>=e?(l=-l,r=-r,o=-o):(f=t,t=-r,r=f,f=e,e=-o,o=f):o>0?o>=-e?(l=-l,t=-t,e=-e):(f=-t,t=r,r=f,f=-e,e=o,o=f):e>=o?(t=-t,e=-e,r=-r,o=-o):(l=-l,f=-t,t=-r,r=f,f=-e,e=-o,o=f),t>0){if(!(r>0)||!(r>=t))return l}else{if(r>0||!(t>=r))return-l;l=-l,t=-t,r=-r}for(;;){if(d=Math.floor(r/t),r-=d*t,o-=d*e,0>o)return-l;if(o>e)return l;if(t>r+r){if(o+o>e)return l}else{if(e>o+o)return-l;r=t-r,o=e-o,l=-l}if(o===0)return r===0?0:-l;if(r===0||(d=Math.floor(t/r),t-=d*r,e-=d*o,0>e))return l;if(e>o)return-l;if(r>t+t){if(e+e>o)return-l}else{if(o>e+e)return l;t=r-t,e=o-e,l=-l}if(e===0)return t===0?0:l;if(t===0)return-l}},h(zi.prototype,{countSegment:function(t,e){if(t.x<this.p.x&&e.x<this.p.x)return null;if(this.p.x===e.x&&this.p.y===e.y)return this.isPointOnSegment=!0,null;if(t.y===this.p.y&&e.y===this.p.y){var r=t.x,o=e.x;return r>o&&(r=e.x,o=t.x),this.p.x>=r&&this.p.x<=o&&(this.isPointOnSegment=!0),null}if(t.y>this.p.y&&e.y<=this.p.y||e.y>this.p.y&&t.y<=this.p.y){var l=t.x-this.p.x,f=t.y-this.p.y,d=e.x-this.p.x,m=e.y-this.p.y,E=Fi.signOfDet2x2(l,f,d,m);if(E===0)return this.isPointOnSegment=!0,null;f>m&&(E=-E),E>0&&this.crossingCount++}},isPointInPolygon:function(){return this.getLocation()!==x.EXTERIOR},getLocation:function(){return this.isPointOnSegment?x.BOUNDARY:this.crossingCount%2===1?x.INTERIOR:x.EXTERIOR},isOnSegment:function(){return this.isPointOnSegment},interfaces_:function(){return[]},getClass:function(){return zi}}),zi.locatePointInRing=function(){if(arguments[0]instanceof C&&V(arguments[1],ut)){for(var t=arguments[0],e=arguments[1],r=new zi(t),o=new C,l=new C,f=1;f<e.size();f++)if(e.getCoordinate(f,o),e.getCoordinate(f-1,l),r.countSegment(o,l),r.isOnSegment())return r.getLocation();return r.getLocation()}if(arguments[0]instanceof C&&arguments[1]instanceof Array){for(var d=arguments[0],m=arguments[1],r=new zi(d),f=1;f<m.length;f++){var o=m[f],l=m[f-1];if(r.countSegment(o,l),r.isOnSegment())return r.getLocation()}return r.getLocation()}},h(H.prototype,{interfaces_:function(){return[]},getClass:function(){return H}}),H.orientationIndex=function(t,e,r){return At.orientationIndex(t,e,r)},H.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,r=t[0].x,o=1;o<t.length-1;o++){var l=t[o].x-r,f=t[o+1].y,d=t[o-1].y;e+=l*(d-f)}return e/2}if(V(arguments[0],ut)){var m=arguments[0],E=m.size();if(3>E)return 0;var S=new C,R=new C,k=new C;m.getCoordinate(0,R),m.getCoordinate(1,k);var r=R.x;k.x-=r;for(var e=0,o=1;E-1>o;o++)S.y=R.y,R.x=k.x,R.y=k.y,m.getCoordinate(o+1,k),k.x-=r,e+=R.x*(S.y-k.y);return e/2}},H.distanceLineLine=function(t,e,r,o){if(t.equals(e))return H.distancePointLine(t,r,o);if(r.equals(o))return H.distancePointLine(o,t,e);var l=!1;if(M.intersects(t,e,r,o)){var f=(e.x-t.x)*(o.y-r.y)-(e.y-t.y)*(o.x-r.x);if(f===0)l=!0;else{var d=(t.y-r.y)*(o.x-r.x)-(t.x-r.x)*(o.y-r.y),m=(t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y),E=m/f,S=d/f;(0>S||S>1||0>E||E>1)&&(l=!0)}}else l=!0;return l?rt.min(H.distancePointLine(t,r,o),H.distancePointLine(e,r,o),H.distancePointLine(r,t,e),H.distancePointLine(o,t,e)):0},H.isPointInRing=function(t,e){return H.locatePointInRing(t,e)!==x.EXTERIOR},H.computeLength=function(t){var e=t.size();if(1>=e)return 0;var r=0,o=new C;t.getCoordinate(0,o);for(var l=o.x,f=o.y,d=1;e>d;d++){t.getCoordinate(d,o);var m=o.x,E=o.y,S=m-l,R=E-f;r+=Math.sqrt(S*S+R*R),l=m,f=E}return r},H.isCCW=function(t){var e=t.length-1;if(3>e)throw new c;for(var r=t[0],o=0,l=1;e>=l;l++){var f=t[l];f.y>r.y&&(r=f,o=l)}var d=o;do d-=1,0>d&&(d=e);while(t[d].equals2D(r)&&d!==o);var m=o;do m=(m+1)%e;while(t[m].equals2D(r)&&m!==o);var E=t[d],S=t[m];if(E.equals2D(r)||S.equals2D(r)||E.equals2D(S))return!1;var R=H.computeOrientation(E,r,S);return R===0?E.x>S.x:R>0},H.locatePointInRing=function(t,e){return zi.locatePointInRing(t,e)},H.distancePointLinePerpendicular=function(t,e,r){var o=(r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y),l=((e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y))/o;return Math.abs(l)*Math.sqrt(o)},H.computeOrientation=function(t,e,r){return H.orientationIndex(t,e,r)},H.distancePointLine=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(e.length===0)throw new c;for(var r=t.distance(e[0]),o=0;o<e.length-1;o++){var l=H.distancePointLine(t,e[o],e[o+1]);r>l&&(r=l)}return r}if(arguments.length===3){var f=arguments[0],d=arguments[1],m=arguments[2];if(d.x===m.x&&d.y===m.y)return f.distance(d);var E=(m.x-d.x)*(m.x-d.x)+(m.y-d.y)*(m.y-d.y),S=((f.x-d.x)*(m.x-d.x)+(f.y-d.y)*(m.y-d.y))/E;if(0>=S)return f.distance(d);if(S>=1)return f.distance(m);var R=((d.y-f.y)*(m.x-d.x)-(d.x-f.x)*(m.y-d.y))/E;return Math.abs(R)*Math.sqrt(E)}},H.isOnLine=function(t,e){for(var r=new ie,o=1;o<e.length;o++){var l=e[o-1],f=e[o];if(r.computeIntersection(t,l,f),r.hasIntersection())return!0}return!1},H.CLOCKWISE=-1,H.RIGHT=H.CLOCKWISE,H.COUNTERCLOCKWISE=1,H.LEFT=H.COUNTERCLOCKWISE,H.COLLINEAR=0,H.STRAIGHT=H.COLLINEAR,h(nt.prototype,{minX:function(){return Math.min(this.p0.x,this.p1.x)},orientationIndex:function(){if(arguments[0]instanceof nt){var t=arguments[0],e=H.orientationIndex(this.p0,this.p1,t.p0),r=H.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&r>=0||0>=e&&0>=r?Math.max(e,r):0}if(arguments[0]instanceof C){var o=arguments[0];return H.orientationIndex(this.p0,this.p1,o)}},toGeometry:function(t){return t.createLineString([this.p0,this.p1])},isVertical:function(){return this.p0.x===this.p1.x},equals:function(t){if(!(t instanceof nt))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},intersection:function(t){var e=new ie;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},project:function(){if(arguments[0]instanceof C){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new C(t);var e=this.projectionFactor(t),r=new C;return r.x=this.p0.x+e*(this.p1.x-this.p0.x),r.y=this.p0.y+e*(this.p1.y-this.p0.y),r}if(arguments[0]instanceof nt){var o=arguments[0],l=this.projectionFactor(o.p0),f=this.projectionFactor(o.p1);if(l>=1&&f>=1||0>=l&&0>=f)return null;var d=this.project(o.p0);0>l&&(d=this.p0),l>1&&(d=this.p1);var m=this.project(o.p1);return 0>f&&(m=this.p0),f>1&&(m=this.p1),new nt(d,m)}},normalize:function(){this.p1.compareTo(this.p0)<0&&this.reverse()},angle:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},getCoordinate:function(t){return t===0?this.p0:this.p1},distancePerpendicular:function(t){return H.distancePointLinePerpendicular(t,this.p0,this.p1)},minY:function(){return Math.min(this.p0.y,this.p1.y)},midPoint:function(){return nt.midPoint(this.p0,this.p1)},projectionFactor:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,r=this.p1.y-this.p0.y,o=e*e+r*r;if(0>=o)return g.NaN;var l=((t.x-this.p0.x)*e+(t.y-this.p0.y)*r)/o;return l},closestPoints:function(t){var e=this.intersection(t);if(e!==null)return[e,e];var r=new Array(2).fill(null),o=g.MAX_VALUE,l=null,f=this.closestPoint(t.p0);o=f.distance(t.p0),r[0]=f,r[1]=t.p0;var d=this.closestPoint(t.p1);l=d.distance(t.p1),o>l&&(o=l,r[0]=d,r[1]=t.p1);var m=t.closestPoint(this.p0);l=m.distance(this.p0),o>l&&(o=l,r[0]=this.p0,r[1]=m);var E=t.closestPoint(this.p1);return l=E.distance(this.p1),o>l&&(o=l,r[0]=this.p1,r[1]=E),r},closestPoint:function(t){var e=this.projectionFactor(t);if(e>0&&1>e)return this.project(t);var r=this.p0.distance(t),o=this.p1.distance(t);return o>r?this.p0:this.p1},maxX:function(){return Math.max(this.p0.x,this.p1.x)},getLength:function(){return this.p0.distance(this.p1)},compareTo:function(t){var e=t,r=this.p0.compareTo(e.p0);return r!==0?r:this.p1.compareTo(e.p1)},reverse:function(){var t=this.p0;this.p0=this.p1,this.p1=t},equalsTopo:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)},lineIntersection:function(t){try{var e=fe.intersection(this.p0,this.p1,t.p0,t.p1);return e}catch(r){if(!(r instanceof z))throw r}finally{}return null},maxY:function(){return Math.max(this.p0.y,this.p1.y)},pointAlongOffset:function(t,e){var r=this.p0.x+t*(this.p1.x-this.p0.x),o=this.p0.y+t*(this.p1.y-this.p0.y),l=this.p1.x-this.p0.x,f=this.p1.y-this.p0.y,d=Math.sqrt(l*l+f*f),m=0,E=0;if(e!==0){if(0>=d)throw new IllegalStateException("Cannot compute offset from zero-length line segment");m=e*l/d,E=e*f/d}var S=r-E,R=o+m,k=new C(S,R);return k},setCoordinates:function(){if(arguments.length===1){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=r.x,this.p1.y=r.y}},segmentFraction:function(t){var e=this.projectionFactor(t);return 0>e?e=0:(e>1||g.isNaN(e))&&(e=1),e},toString:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},isHorizontal:function(){return this.p0.y===this.p1.y},distance:function(){if(arguments[0]instanceof nt){var t=arguments[0];return H.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof C){var e=arguments[0];return H.distancePointLine(e,this.p0,this.p1)}},pointAlong:function(t){var e=new C;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},hashCode:function(){var t=java.lang.Double.doubleToLongBits(this.p0.x);t^=31*java.lang.Double.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),r=java.lang.Double.doubleToLongBits(this.p1.x);r^=31*java.lang.Double.doubleToLongBits(this.p1.y);var o=Math.trunc(r)^Math.trunc(r>>32);return e^o},interfaces_:function(){return[p,_]},getClass:function(){return nt}}),nt.midPoint=function(t,e){return new C((t.x+e.x)/2,(t.y+e.y)/2)},nt.serialVersionUID=0x2d2172135f411c00,h(_t.prototype,{isIntersects:function(){return!this.isDisjoint()},isCovers:function(){var t=_t.isTrue(this.matrix[x.INTERIOR][x.INTERIOR])||_t.isTrue(this.matrix[x.INTERIOR][x.BOUNDARY])||_t.isTrue(this.matrix[x.BOUNDARY][x.INTERIOR])||_t.isTrue(this.matrix[x.BOUNDARY][x.BOUNDARY]);return t&&this.matrix[x.EXTERIOR][x.INTERIOR]===q.FALSE&&this.matrix[x.EXTERIOR][x.BOUNDARY]===q.FALSE},isCoveredBy:function(){var t=_t.isTrue(this.matrix[x.INTERIOR][x.INTERIOR])||_t.isTrue(this.matrix[x.INTERIOR][x.BOUNDARY])||_t.isTrue(this.matrix[x.BOUNDARY][x.INTERIOR])||_t.isTrue(this.matrix[x.BOUNDARY][x.BOUNDARY]);return t&&this.matrix[x.INTERIOR][x.EXTERIOR]===q.FALSE&&this.matrix[x.BOUNDARY][x.EXTERIOR]===q.FALSE},set:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<t.length;e++){var r=Math.trunc(e/3),o=e%3;this.matrix[r][o]=q.toDimensionValue(t.charAt(e))}else if(arguments.length===3){var l=arguments[0],f=arguments[1],d=arguments[2];this.matrix[l][f]=d}},isContains:function(){return _t.isTrue(this.matrix[x.INTERIOR][x.INTERIOR])&&this.matrix[x.EXTERIOR][x.INTERIOR]===q.FALSE&&this.matrix[x.EXTERIOR][x.BOUNDARY]===q.FALSE},setAtLeast:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<t.length;e++){var r=Math.trunc(e/3),o=e%3;this.setAtLeast(r,o,q.toDimensionValue(t.charAt(e)))}else if(arguments.length===3){var l=arguments[0],f=arguments[1],d=arguments[2];this.matrix[l][f]<d&&(this.matrix[l][f]=d)}},setAtLeastIfValid:function(t,e,r){t>=0&&e>=0&&this.setAtLeast(t,e,r)},isWithin:function(){return _t.isTrue(this.matrix[x.INTERIOR][x.INTERIOR])&&this.matrix[x.INTERIOR][x.EXTERIOR]===q.FALSE&&this.matrix[x.BOUNDARY][x.EXTERIOR]===q.FALSE},isTouches:function(t,e){return t>e?this.isTouches(e,t):t===q.A&&e===q.A||t===q.L&&e===q.L||t===q.L&&e===q.A||t===q.P&&e===q.A||t===q.P&&e===q.L?this.matrix[x.INTERIOR][x.INTERIOR]===q.FALSE&&(_t.isTrue(this.matrix[x.INTERIOR][x.BOUNDARY])||_t.isTrue(this.matrix[x.BOUNDARY][x.INTERIOR])||_t.isTrue(this.matrix[x.BOUNDARY][x.BOUNDARY])):!1},isOverlaps:function(t,e){return t===q.P&&e===q.P||t===q.A&&e===q.A?_t.isTrue(this.matrix[x.INTERIOR][x.INTERIOR])&&_t.isTrue(this.matrix[x.INTERIOR][x.EXTERIOR])&&_t.isTrue(this.matrix[x.EXTERIOR][x.INTERIOR]):t===q.L&&e===q.L?this.matrix[x.INTERIOR][x.INTERIOR]===1&&_t.isTrue(this.matrix[x.INTERIOR][x.EXTERIOR])&&_t.isTrue(this.matrix[x.EXTERIOR][x.INTERIOR]):!1},isEquals:function(t,e){return t!==e?!1:_t.isTrue(this.matrix[x.INTERIOR][x.INTERIOR])&&this.matrix[x.INTERIOR][x.EXTERIOR]===q.FALSE&&this.matrix[x.BOUNDARY][x.EXTERIOR]===q.FALSE&&this.matrix[x.EXTERIOR][x.INTERIOR]===q.FALSE&&this.matrix[x.EXTERIOR][x.BOUNDARY]===q.FALSE},toString:function(){for(var t=new bt("123456789"),e=0;3>e;e++)for(var r=0;3>r;r++)t.setCharAt(3*e+r,q.toDimensionSymbol(this.matrix[e][r]));return t.toString()},setAll:function(t){for(var e=0;3>e;e++)for(var r=0;3>r;r++)this.matrix[e][r]=t},get:function(t,e){return this.matrix[t][e]},transpose:function(){var t=this.matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=t,t=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=t,t=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=t,this},matches:function(t){if(t.length!==9)throw new c;for(var e=0;3>e;e++)for(var r=0;3>r;r++)if(!_t.matches(this.matrix[e][r],t.charAt(3*e+r)))return!1;return!0},add:function(t){for(var e=0;3>e;e++)for(var r=0;3>r;r++)this.setAtLeast(e,r,t.get(e,r))},isDisjoint:function(){return this.matrix[x.INTERIOR][x.INTERIOR]===q.FALSE&&this.matrix[x.INTERIOR][x.BOUNDARY]===q.FALSE&&this.matrix[x.BOUNDARY][x.INTERIOR]===q.FALSE&&this.matrix[x.BOUNDARY][x.BOUNDARY]===q.FALSE},isCrosses:function(t,e){return t===q.P&&e===q.L||t===q.P&&e===q.A||t===q.L&&e===q.A?_t.isTrue(this.matrix[x.INTERIOR][x.INTERIOR])&&_t.isTrue(this.matrix[x.INTERIOR][x.EXTERIOR]):t===q.L&&e===q.P||t===q.A&&e===q.P||t===q.A&&e===q.L?_t.isTrue(this.matrix[x.INTERIOR][x.INTERIOR])&&_t.isTrue(this.matrix[x.EXTERIOR][x.INTERIOR]):t===q.L&&e===q.L?this.matrix[x.INTERIOR][x.INTERIOR]===0:!1},interfaces_:function(){return[v]},getClass:function(){return _t}}),_t.matches=function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var t=arguments[0],e=arguments[1];return e===q.SYM_DONTCARE||e===q.SYM_TRUE&&(t>=0||t===q.TRUE)||e===q.SYM_FALSE&&t===q.FALSE||e===q.SYM_P&&t===q.P||e===q.SYM_L&&t===q.L?!0:e===q.SYM_A&&t===q.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var r=arguments[0],o=arguments[1],l=new _t(r);return l.matches(o)}},_t.isTrue=function(t){return t>=0||t===q.TRUE};var Lg=Object.freeze({Coordinate:C,CoordinateList:O,Envelope:M,LineSegment:nt,GeometryFactory:at,Geometry:W,Point:Ot,LineString:st,LinearRing:Ut,Polygon:wt,GeometryCollection:ht,MultiPoint:Se,MultiLineString:Ne,MultiPolygon:ae,Dimension:q,IntersectionMatrix:_t});h(On.prototype,{addPoint:function(t){this.ptCount+=1,this.ptCentSum.x+=t.x,this.ptCentSum.y+=t.y},setBasePoint:function(t){this.areaBasePt===null&&(this.areaBasePt=t)},addLineSegments:function(t){for(var e=0,r=0;r<t.length-1;r++){var o=t[r].distance(t[r+1]);if(o!==0){e+=o;var l=(t[r].x+t[r+1].x)/2;this.lineCentSum.x+=o*l;var f=(t[r].y+t[r+1].y)/2;this.lineCentSum.y+=o*f}}this.totalLength+=e,e===0&&t.length>0&&this.addPoint(t[0])},addHole:function(t){for(var e=H.isCCW(t),r=0;r<t.length-1;r++)this.addTriangle(this.areaBasePt,t[r],t[r+1],e);this.addLineSegments(t)},getCentroid:function(){var t=new C;if(Math.abs(this.areasum2)>0)t.x=this.cg3.x/3/this.areasum2,t.y=this.cg3.y/3/this.areasum2;else if(this.totalLength>0)t.x=this.lineCentSum.x/this.totalLength,t.y=this.lineCentSum.y/this.totalLength;else{if(!(this.ptCount>0))return null;t.x=this.ptCentSum.x/this.ptCount,t.y=this.ptCentSum.y/this.ptCount}return t},addShell:function(t){t.length>0&&this.setBasePoint(t[0]);for(var e=!H.isCCW(t),r=0;r<t.length-1;r++)this.addTriangle(this.areaBasePt,t[r],t[r+1],e);this.addLineSegments(t)},addTriangle:function(t,e,r,o){var l=o?1:-1;On.centroid3(t,e,r,this.triangleCent3);var f=On.area2(t,e,r);this.cg3.x+=l*f*this.triangleCent3.x,this.cg3.y+=l*f*this.triangleCent3.y,this.areasum2+=l*f},add:function(){if(arguments[0]instanceof wt){var t=arguments[0];this.addShell(t.getExteriorRing().getCoordinates());for(var e=0;e<t.getNumInteriorRing();e++)this.addHole(t.getInteriorRingN(e).getCoordinates())}else if(arguments[0]instanceof W){var r=arguments[0];if(r.isEmpty())return null;if(r instanceof Ot)this.addPoint(r.getCoordinate());else if(r instanceof st)this.addLineSegments(r.getCoordinates());else if(r instanceof wt){var o=r;this.add(o)}else if(r instanceof ht)for(var l=r,e=0;e<l.getNumGeometries();e++)this.add(l.getGeometryN(e))}},interfaces_:function(){return[]},getClass:function(){return On}}),On.area2=function(t,e,r){return(e.x-t.x)*(r.y-t.y)-(r.x-t.x)*(e.y-t.y)},On.centroid3=function(t,e,r,o){return o.x=t.x+e.x+r.x,o.y=t.y+e.y+r.y,null},On.getCentroid=function(t){var e=new On(t);return e.getCentroid()},mo.prototype=new Error,mo.prototype.name="EmptyStackException",_e.prototype=new N,_e.prototype.add=function(t){return this.array_.push(t),!0},_e.prototype.get=function(t){if(0>t||t>=this.size())throw new IndexOutOfBoundsException;return this.array_[t]},_e.prototype.push=function(t){return this.array_.push(t),t},_e.prototype.pop=function(t){if(this.array_.length===0)throw new mo;return this.array_.pop()},_e.prototype.peek=function(){if(this.array_.length===0)throw new mo;return this.array_[this.array_.length-1]},_e.prototype.empty=function(){return this.array_.length===0},_e.prototype.isEmpty=function(){return this.empty()},_e.prototype.search=function(t){return this.array_.indexOf(t)},_e.prototype.size=function(){return this.array_.length},_e.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;r>e;e++)t.push(this.array_[e]);return t},h(hr.prototype,{filter:function(t){this.treeSet.contains(t)||(this.list.add(t),this.treeSet.add(t))},getCoordinates:function(){var t=new Array(this.list.size()).fill(null);return this.list.toArray(t)},interfaces_:function(){return[hi]},getClass:function(){return hr}}),hr.filterCoordinates=function(t){for(var e=new hr,r=0;r<t.length;r++)e.filter(t[r]);return e.getCoordinates()},h(Rn.prototype,{preSort:function(t){for(var e=null,r=1;r<t.length;r++)(t[r].y<t[0].y||t[r].y===t[0].y&&t[r].x<t[0].x)&&(e=t[0],t[0]=t[r],t[r]=e);return Tn.sort(t,1,t.length,new lr(t[0])),t},computeOctRing:function(t){var e=this.computeOctPts(t),r=new O;return r.add(e,!1),r.size()<3?null:(r.closeRing(),r.toCoordinateArray())},lineOrPolygon:function(t){if(t=this.cleanRing(t),t.length===3)return this.geomFactory.createLineString([t[0],t[1]]);var e=this.geomFactory.createLinearRing(t);return this.geomFactory.createPolygon(e,null)},cleanRing:function(t){P.equals(t[0],t[t.length-1]);for(var e=new b,r=null,o=0;o<=t.length-2;o++){var l=t[o],f=t[o+1];l.equals(f)||r!==null&&this.isBetween(r,l,f)||(e.add(l),r=l)}e.add(t[t.length-1]);var d=new Array(e.size()).fill(null);return e.toArray(d)},isBetween:function(t,e,r){return H.computeOrientation(t,e,r)!==0?!1:t.x!==r.x&&(t.x<=e.x&&e.x<=r.x||r.x<=e.x&&e.x<=t.x)||t.y!==r.y&&(t.y<=e.y&&e.y<=r.y||r.y<=e.y&&e.y<=t.y)},reduce:function(t){var e=this.computeOctRing(t);if(e===null)return t;for(var r=new ye,o=0;o<e.length;o++)r.add(e[o]);for(var o=0;o<t.length;o++)H.isPointInRing(t[o],e)||r.add(t[o]);var l=Q.toCoordinateArray(r);return l.length<3?this.padArray3(l):l},getConvexHull:function(){if(this.inputPts.length===0)return this.geomFactory.createGeometryCollection(null);if(this.inputPts.length===1)return this.geomFactory.createPoint(this.inputPts[0]);if(this.inputPts.length===2)return this.geomFactory.createLineString(this.inputPts);var t=this.inputPts;this.inputPts.length>50&&(t=this.reduce(this.inputPts));var e=this.preSort(t),r=this.grahamScan(e),o=this.toCoordinateArray(r);return this.lineOrPolygon(o)},padArray3:function(t){for(var e=new Array(3).fill(null),r=0;r<e.length;r++)r<t.length?e[r]=t[r]:e[r]=t[0];return e},computeOctPts:function(t){for(var e=new Array(8).fill(null),r=0;r<e.length;r++)e[r]=t[0];for(var o=1;o<t.length;o++)t[o].x<e[0].x&&(e[0]=t[o]),t[o].x-t[o].y<e[1].x-e[1].y&&(e[1]=t[o]),t[o].y>e[2].y&&(e[2]=t[o]),t[o].x+t[o].y>e[3].x+e[3].y&&(e[3]=t[o]),t[o].x>e[4].x&&(e[4]=t[o]),t[o].x-t[o].y>e[5].x-e[5].y&&(e[5]=t[o]),t[o].y<e[6].y&&(e[6]=t[o]),t[o].x+t[o].y<e[7].x+e[7].y&&(e[7]=t[o]);return e},toCoordinateArray:function(t){for(var e=new Array(t.size()).fill(null),r=0;r<t.size();r++){var o=t.get(r);e[r]=o}return e},grahamScan:function(t){var e=null,r=new _e;e=r.push(t[0]),e=r.push(t[1]),e=r.push(t[2]);for(var o=3;o<t.length;o++){for(e=r.pop();!r.empty()&&H.computeOrientation(r.peek(),e,t[o])>0;)e=r.pop();e=r.push(e),e=r.push(t[o])}return e=r.push(t[0]),r},interfaces_:function(){return[]},getClass:function(){return Rn}}),Rn.extractCoordinates=function(t){var e=new hr;return t.apply(e),e.getCoordinates()},h(lr.prototype,{compare:function(t,e){var r=t,o=e;return lr.polarCompare(this.origin,r,o)},interfaces_:function(){return[y]},getClass:function(){return lr}}),lr.polarCompare=function(t,e,r){var o=e.x-t.x,l=e.y-t.y,f=r.x-t.x,d=r.y-t.y,m=H.computeOrientation(t,e,r);if(m===H.COUNTERCLOCKWISE)return 1;if(m===H.CLOCKWISE)return-1;var E=o*o+l*l,S=f*f+d*d;return S>E?-1:E>S?1:0},Rn.RadialComparator=lr,h(we.prototype,{transformPoint:function(t,e){return this.factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},transformPolygon:function(t,e){var r=!0,o=this.transformLinearRing(t.getExteriorRing(),t);o!==null&&o instanceof Ut&&!o.isEmpty()||(r=!1);for(var l=new b,f=0;f<t.getNumInteriorRing();f++){var d=this.transformLinearRing(t.getInteriorRingN(f),t);d===null||d.isEmpty()||(d instanceof Ut||(r=!1),l.add(d))}if(r)return this.factory.createPolygon(o,l.toArray([]));var m=new b;return o!==null&&m.add(o),m.addAll(l),this.factory.buildGeometry(m)},createCoordinateSequence:function(t){return this.factory.getCoordinateSequenceFactory().create(t)},getInputGeometry:function(){return this.inputGeom},transformMultiLineString:function(t,e){for(var r=new b,o=0;o<t.getNumGeometries();o++){var l=this.transformLineString(t.getGeometryN(o),t);l!==null&&(l.isEmpty()||r.add(l))}return this.factory.buildGeometry(r)},transformCoordinates:function(t,e){return this.copy(t)},transformLineString:function(t,e){return this.factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},transformMultiPoint:function(t,e){for(var r=new b,o=0;o<t.getNumGeometries();o++){var l=this.transformPoint(t.getGeometryN(o),t);l!==null&&(l.isEmpty()||r.add(l))}return this.factory.buildGeometry(r)},transformMultiPolygon:function(t,e){for(var r=new b,o=0;o<t.getNumGeometries();o++){var l=this.transformPolygon(t.getGeometryN(o),t);l!==null&&(l.isEmpty()||r.add(l))}return this.factory.buildGeometry(r)},copy:function(t){return t.copy()},transformGeometryCollection:function(t,e){for(var r=new b,o=0;o<t.getNumGeometries();o++){var l=this.transform(t.getGeometryN(o));l!==null&&(this.pruneEmptyGeometry&&l.isEmpty()||r.add(l))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(at.toGeometryArray(r)):this.factory.buildGeometry(r)},transform:function(t){if(this.inputGeom=t,this.factory=t.getFactory(),t instanceof Ot)return this.transformPoint(t,null);if(t instanceof Se)return this.transformMultiPoint(t,null);if(t instanceof Ut)return this.transformLinearRing(t,null);if(t instanceof st)return this.transformLineString(t,null);if(t instanceof Ne)return this.transformMultiLineString(t,null);if(t instanceof wt)return this.transformPolygon(t,null);if(t instanceof ae)return this.transformMultiPolygon(t,null);if(t instanceof ht)return this.transformGeometryCollection(t,null);throw new c("Unknown Geometry subtype: "+t.getClass().getName())},transformLinearRing:function(t,e){var r=this.transformCoordinates(t.getCoordinateSequence(),t);if(r===null)return this.factory.createLinearRing(null);var o=r.size();return o>0&&4>o&&!this.preserveType?this.factory.createLineString(r):this.factory.createLinearRing(r)},interfaces_:function(){return[]},getClass:function(){return we}}),h(cr.prototype,{snapVertices:function(t,e){for(var r=this._isClosed?t.size()-1:t.size(),o=0;r>o;o++){var l=t.get(o),f=this.findSnapForVertex(l,e);f!==null&&(t.set(o,new C(f)),o===0&&this._isClosed&&t.set(t.size()-1,new C(f)))}},findSnapForVertex:function(t,e){for(var r=0;r<e.length;r++){if(t.equals2D(e[r]))return null;if(t.distance(e[r])<this.snapTolerance)return e[r]}return null},snapTo:function(t){var e=new O(this.srcPts);this.snapVertices(e,t),this.snapSegments(e,t);var r=e.toCoordinateArray();return r},snapSegments:function(t,e){if(e.length===0)return null;var r=e.length;e[0].equals2D(e[e.length-1])&&(r=e.length-1);for(var o=0;r>o;o++){var l=e[o],f=this.findSegmentIndexToSnap(l,t);f>=0&&t.add(f+1,new C(l),!1)}},findSegmentIndexToSnap:function(t,e){for(var r=g.MAX_VALUE,o=-1,l=0;l<e.size()-1;l++){if(this.seg.p0=e.get(l),this.seg.p1=e.get(l+1),this.seg.p0.equals2D(t)||this.seg.p1.equals2D(t)){if(this.allowSnappingToSourceVertices)continue;return-1}var f=this.seg.distance(t);f<this.snapTolerance&&r>f&&(r=f,o=l)}return o},setAllowSnappingToSourceVertices:function(t){this.allowSnappingToSourceVertices=t},interfaces_:function(){return[]},getClass:function(){return cr}}),cr.isClosed=function(t){return t.length<=1?!1:t[0].equals2D(t[t.length-1])},h(xe.prototype,{snapTo:function(t,e){var r=this.extractTargetCoordinates(t),o=new Xr(e,r);return o.transform(this.srcGeom)},snapToSelf:function(t,e){var r=this.extractTargetCoordinates(this.srcGeom),o=new Xr(t,r,!0),l=o.transform(this.srcGeom),f=l;return e&&V(f,bn)&&(f=l.buffer(0)),f},computeSnapTolerance:function(t){var e=this.computeMinimumSegmentLength(t),r=e/10;return r},extractTargetCoordinates:function(t){for(var e=new ye,r=t.getCoordinates(),o=0;o<r.length;o++)e.add(r[o]);return e.toArray(new Array(0).fill(null))},computeMinimumSegmentLength:function(t){for(var e=g.MAX_VALUE,r=0;r<t.length-1;r++){var o=t[r].distance(t[r+1]);e>o&&(e=o)}return e},interfaces_:function(){return[]},getClass:function(){return xe}}),xe.snap=function(t,e,r){var o=new Array(2).fill(null),l=new xe(t);o[0]=l.snapTo(e,r);var f=new xe(e);return o[1]=f.snapTo(o[0],r),o},xe.computeOverlaySnapTolerance=function(){if(arguments.length===1){var t=arguments[0],e=xe.computeSizeBasedSnapTolerance(t),r=t.getPrecisionModel();if(r.getType()===yt.FIXED){var o=1/r.getScale()*2/1.415;o>e&&(e=o)}return e}if(arguments.length===2){var l=arguments[0],f=arguments[1];return Math.min(xe.computeOverlaySnapTolerance(l),xe.computeOverlaySnapTolerance(f))}},xe.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal(),r=Math.min(e.getHeight(),e.getWidth()),o=r*xe.SNAP_PRECISION_FACTOR;return o},xe.snapToSelf=function(t,e,r){var o=new xe(t);return o.snapToSelf(e,r)},xe.SNAP_PRECISION_FACTOR=1e-9,w(Xr,we),h(Xr.prototype,{snapLine:function(t,e){var r=new cr(t,this.snapTolerance);return r.setAllowSnappingToSourceVertices(this.isSelfSnap),r.snapTo(e)},transformCoordinates:function(t,e){var r=t.toCoordinateArray(),o=this.snapLine(r,this.snapPts);return this.factory.getCoordinateSequenceFactory().create(o)},interfaces_:function(){return[]},getClass:function(){return Xr}}),h(ze.prototype,{getCommon:function(){return g.longBitsToDouble(this.commonBits)},add:function(t){var e=g.doubleToLongBits(t);if(this.isFirst)return this.commonBits=e,this.commonSignExp=ze.signExpBits(this.commonBits),this.isFirst=!1,null;var r=ze.signExpBits(e);return r!==this.commonSignExp?(this.commonBits=0,null):(this.commonMantissaBitsCount=ze.numCommonMostSigMantissaBits(this.commonBits,e),void(this.commonBits=ze.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))))},toString:function(){if(arguments.length===1){var t=arguments[0],e=g.longBitsToDouble(t),r=Long.toBinaryString(t),o="0000000000000000000000000000000000000000000000000000000000000000"+r,l=o.substring(o.length-64),f=l.substring(0,1)+"  "+l.substring(1,12)+"(exp) "+l.substring(12)+" [ "+e+" ]";return f}},interfaces_:function(){return[]},getClass:function(){return ze}}),ze.getBit=function(t,e){var r=1<<e;return(t&r)!==0?1:0},ze.signExpBits=function(t){return t>>52},ze.zeroLowerBits=function(t,e){var r=(1<<e)-1,o=~r,l=t&o;return l},ze.numCommonMostSigMantissaBits=function(t,e){for(var r=0,o=52;o>=0;o--){if(ze.getBit(t,o)!==ze.getBit(e,o))return r;r++}return 52},h(Yr.prototype,{addCommonBits:function(t){var e=new Wr(this.commonCoord);t.apply(e),t.geometryChanged()},removeCommonBits:function(t){if(this.commonCoord.x===0&&this.commonCoord.y===0)return t;var e=new C(this.commonCoord);e.x=-e.x,e.y=-e.y;var r=new Wr(e);return t.apply(r),t.geometryChanged(),t},getCommonCoordinate:function(){return this.commonCoord},add:function(t){t.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate()},interfaces_:function(){return[]},getClass:function(){return Yr}}),h(vo.prototype,{filter:function(t){this.commonBitsX.add(t.x),this.commonBitsY.add(t.y)},getCommonCoordinate:function(){return new C(this.commonBitsX.getCommon(),this.commonBitsY.getCommon())},interfaces_:function(){return[hi]},getClass:function(){return vo}}),h(Wr.prototype,{filter:function(t,e){var r=t.getOrdinate(e,0)+this.trans.x,o=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,r),t.setOrdinate(e,1,o)},isDone:function(){return!1},isGeometryChanged:function(){return!0},interfaces_:function(){return[ki]},getClass:function(){return Wr}}),Yr.CommonCoordinateFilter=vo,Yr.Translater=Wr,h(Gi.prototype,{next:function(){if(this.atStart)return this.atStart=!1,Gi.isAtomic(this.parent)&&this.index++,this.parent;if(this.subcollectionIterator!==null){if(this.subcollectionIterator.hasNext())return this.subcollectionIterator.next();this.subcollectionIterator=null}if(this.index>=this.max)throw new F;var t=this.parent.getGeometryN(this.index++);return t instanceof ht?(this.subcollectionIterator=new Gi(t),this.subcollectionIterator.next()):t},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){if(this.atStart)return!0;if(this.subcollectionIterator!==null){if(this.subcollectionIterator.hasNext())return!0;this.subcollectionIterator=null}return!(this.index>=this.max)},interfaces_:function(){return[Y]},getClass:function(){return Gi}}),Gi.isAtomic=function(t){return!(t instanceof ht)},h(Bi.prototype,{locateInternal:function(){if(arguments[0]instanceof C&&arguments[1]instanceof wt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return x.EXTERIOR;var r=e.getExteriorRing(),o=this.locateInPolygonRing(t,r);if(o===x.EXTERIOR)return x.EXTERIOR;if(o===x.BOUNDARY)return x.BOUNDARY;for(var l=0;l<e.getNumInteriorRing();l++){var f=e.getInteriorRingN(l),d=this.locateInPolygonRing(t,f);if(d===x.INTERIOR)return x.EXTERIOR;if(d===x.BOUNDARY)return x.BOUNDARY}return x.INTERIOR}if(arguments[0]instanceof C&&arguments[1]instanceof st){var m=arguments[0],E=arguments[1];if(!E.getEnvelopeInternal().intersects(m))return x.EXTERIOR;var S=E.getCoordinates();return E.isClosed()||!m.equals(S[0])&&!m.equals(S[S.length-1])?H.isOnLine(m,S)?x.INTERIOR:x.EXTERIOR:x.BOUNDARY}if(arguments[0]instanceof C&&arguments[1]instanceof Ot){var R=arguments[0],k=arguments[1],G=k.getCoordinate();return G.equals2D(R)?x.INTERIOR:x.EXTERIOR}},locateInPolygonRing:function(t,e){return e.getEnvelopeInternal().intersects(t)?H.locatePointInRing(t,e.getCoordinates()):x.EXTERIOR},intersects:function(t,e){return this.locate(t,e)!==x.EXTERIOR},updateLocationInfo:function(t){t===x.INTERIOR&&(this.isIn=!0),t===x.BOUNDARY&&this.numBoundaries++},computeLocation:function(t,e){if(e instanceof Ot&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof st)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof wt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Ne)for(var r=e,o=0;o<r.getNumGeometries();o++){var l=r.getGeometryN(o);this.updateLocationInfo(this.locateInternal(t,l))}else if(e instanceof ae)for(var f=e,o=0;o<f.getNumGeometries();o++){var d=f.getGeometryN(o);this.updateLocationInfo(this.locateInternal(t,d))}else if(e instanceof ht)for(var m=new Gi(e);m.hasNext();){var E=m.next();E!==e&&this.computeLocation(t,E)}},locate:function(t,e){return e.isEmpty()?x.EXTERIOR:e instanceof st?this.locateInternal(t,e):e instanceof wt?this.locateInternal(t,e):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(t,e),this.boundaryRule.isInBoundary(this.numBoundaries)?x.BOUNDARY:this.numBoundaries>0||this.isIn?x.INTERIOR:x.EXTERIOR)},interfaces_:function(){return[]},getClass:function(){return Bi}}),h(fr.prototype,{interfaces_:function(){return[]},getClass:function(){return fr}}),fr.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new c;var r=Math.abs(t),o=Math.abs(e);return t>=0?e>=0?r>=o?0:1:r>=o?7:6:e>=0?r>=o?3:2:r>=o?4:5}if(arguments[0]instanceof C&&arguments[1]instanceof C){var l=arguments[0],f=arguments[1],d=f.x-l.x,m=f.y-l.y;if(d===0&&m===0)throw new c;return fr.octant(d,m)}},h(Jr.prototype,{getCoordinates:function(){},size:function(){},getCoordinate:function(t){},isClosed:function(){},setData:function(t){},getData:function(){},interfaces_:function(){return[]},getClass:function(){return Jr}}),h(fu.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:fr.octant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},getData:function(){return this.data},toString:function(){return ge.toLineString(new Fe(this.pts))},interfaces_:function(){return[Jr]},getClass:function(){return fu}}),h(yo.prototype,{getBounds:function(){},interfaces_:function(){return[]},getClass:function(){return yo}}),h(Dn.prototype,{getItem:function(){return this.item},getBounds:function(){return this.bounds},interfaces_:function(){return[yo,_]},getClass:function(){return Dn}}),h(gu.prototype,{poll:function(){if(this.isEmpty())return null;var t=this.items.get(1);return this.items.set(1,this.items.get(this._size)),this._size-=1,this.reorder(1),t},size:function(){return this._size},reorder:function(t){for(var e=null,r=this.items.get(t);2*t<=this._size&&(e=2*t,e!==this._size&&this.items.get(e+1).compareTo(this.items.get(e))<0&&e++,this.items.get(e).compareTo(r)<0);t=e)this.items.set(t,this.items.get(e));this.items.set(t,r)},clear:function(){this._size=0,this.items.clear()},isEmpty:function(){return this._size===0},add:function(t){this.items.add(null),this._size+=1;var e=this._size;for(this.items.set(0,t);t.compareTo(this.items.get(Math.trunc(e/2)))<0;e/=2)this.items.set(e,this.items.get(Math.trunc(e/2)));this.items.set(e,t)},interfaces_:function(){return[]},getClass:function(){return gu}}),h(li.prototype,{visitItem:function(t){},interfaces_:function(){return[]},getClass:function(){return li}}),h(_o.prototype,{insert:function(t,e){},remove:function(t,e){},query:function(){},interfaces_:function(){return[]},getClass:function(){return _o}}),h(Le.prototype,{getLevel:function(){return this.level},size:function(){return this.childBoundables.size()},getChildBoundables:function(){return this.childBoundables},addChildBoundable:function(t){P.isTrue(this.bounds===null),this.childBoundables.add(t)},isEmpty:function(){return this.childBoundables.isEmpty()},getBounds:function(){return this.bounds===null&&(this.bounds=this.computeBounds()),this.bounds},interfaces_:function(){return[yo,_]},getClass:function(){return Le}}),Le.serialVersionUID=6493722185909574e3;var wn={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return wn.sort(t),t.get(0)},sort:function(t,e){var r=t.toArray();e?Tn.sort(r,e):Tn.sort(r);for(var o=t.iterator(),l=0,f=r.length;f>l;l++)o.next(),o.set(r[l])},singletonList:function(t){var e=new b;return e.add(t),e}};h(Ie.prototype,{expandToQueue:function(t,e){var r=Ie.isComposite(this.boundable1),o=Ie.isComposite(this.boundable2);if(r&&o)return Ie.area(this.boundable1)>Ie.area(this.boundable2)?(this.expand(this.boundable1,this.boundable2,t,e),null):(this.expand(this.boundable2,this.boundable1,t,e),null);if(r)return this.expand(this.boundable1,this.boundable2,t,e),null;if(o)return this.expand(this.boundable2,this.boundable1,t,e),null;throw new c},isLeaves:function(){return!(Ie.isComposite(this.boundable1)||Ie.isComposite(this.boundable2))},compareTo:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},expand:function(t,e,r,o){for(var l=t.getChildBoundables(),f=l.iterator();f.hasNext();){var d=f.next(),m=new Ie(d,e,this.itemDistance);m.getDistance()<o&&r.add(m)}},getBoundable:function(t){return t===0?this.boundable1:this.boundable2},getDistance:function(){return this._distance},distance:function(){return this.isLeaves()?this.itemDistance.distance(this.boundable1,this.boundable2):this.boundable1.getBounds().distance(this.boundable2.getBounds())},interfaces_:function(){return[p]},getClass:function(){return Ie}}),Ie.area=function(t){return t.getBounds().getArea()},Ie.isComposite=function(t){return t instanceof Le},h(Vt.prototype,{getNodeCapacity:function(){return this.nodeCapacity},lastNode:function(t){return t.get(t.size()-1)},size:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this.root));if(arguments.length===1){for(var e=arguments[0],r=0,o=e.getChildBoundables().iterator();o.hasNext();){var l=o.next();l instanceof Le?r+=this.size(l):l instanceof Dn&&(r+=1)}return r}},removeItem:function(t,e){for(var r=null,o=t.getChildBoundables().iterator();o.hasNext();){var l=o.next();l instanceof Dn&&l.getItem()===e&&(r=l)}return r!==null?(t.getChildBoundables().remove(r),!0):!1},itemsTree:function(){if(arguments.length===0){this.build();var t=this.itemsTree(this.root);return t===null?new b:t}if(arguments.length===1){for(var e=arguments[0],r=new b,o=e.getChildBoundables().iterator();o.hasNext();){var l=o.next();if(l instanceof Le){var f=this.itemsTree(l);f!==null&&r.add(f)}else l instanceof Dn?r.add(l.getItem()):P.shouldNeverReachHere()}return r.size()<=0?null:r}},insert:function(t,e){P.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.add(new Dn(t,e))},boundablesAtLevel:function(){if(arguments.length===1){var t=arguments[0],e=new b;return this.boundablesAtLevel(t,this.root,e),e}if(arguments.length===3){var r=arguments[0],o=arguments[1],l=arguments[2];if(P.isTrue(r>-2),o.getLevel()===r)return l.add(o),null;for(var f=o.getChildBoundables().iterator();f.hasNext();){var d=f.next();d instanceof Le?this.boundablesAtLevel(r,d,l):(P.isTrue(d instanceof Dn),r===-1&&l.add(d))}return null}},query:function(){if(arguments.length===1){var t=arguments[0];this.build();var e=new b;return this.isEmpty()||this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.query(t,this.root,e),e}if(arguments.length===2){var r=arguments[0],o=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this.root.getBounds(),r)&&this.query(r,this.root,o)}else if(arguments.length===3){if(V(arguments[2],li)&&arguments[0]instanceof Object&&arguments[1]instanceof Le)for(var l=arguments[0],f=arguments[1],d=arguments[2],m=f.getChildBoundables(),E=0;E<m.size();E++){var S=m.get(E);this.getIntersectsOp().intersects(S.getBounds(),l)&&(S instanceof Le?this.query(l,S,d):S instanceof Dn?d.visitItem(S.getItem()):P.shouldNeverReachHere())}else if(V(arguments[2],N)&&arguments[0]instanceof Object&&arguments[1]instanceof Le)for(var R=arguments[0],k=arguments[1],G=arguments[2],m=k.getChildBoundables(),E=0;E<m.size();E++){var S=m.get(E);this.getIntersectsOp().intersects(S.getBounds(),R)&&(S instanceof Le?this.query(R,S,G):S instanceof Dn?G.add(S.getItem()):P.shouldNeverReachHere())}}},build:function(){return this.built?null:(this.root=this.itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.itemBoundables=null,void(this.built=!0))},getRoot:function(){return this.build(),this.root},remove:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.build(),this.getIntersectsOp().intersects(this.root.getBounds(),t)?this.remove(t,this.root,e):!1}if(arguments.length===3){var r=arguments[0],o=arguments[1],l=arguments[2],f=this.removeItem(o,l);if(f)return!0;for(var d=null,m=o.getChildBoundables().iterator();m.hasNext();){var E=m.next();if(this.getIntersectsOp().intersects(E.getBounds(),r)&&E instanceof Le&&(f=this.remove(r,E,l))){d=E;break}}return d!==null&&d.getChildBoundables().isEmpty()&&o.getChildBoundables().remove(d),f}},createHigherLevels:function(t,e){P.isTrue(!t.isEmpty());var r=this.createParentBoundables(t,e+1);return r.size()===1?r.get(0):this.createHigherLevels(r,e+1)},depth:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this.root));if(arguments.length===1){for(var t=arguments[0],e=0,r=t.getChildBoundables().iterator();r.hasNext();){var o=r.next();if(o instanceof Le){var l=this.depth(o);l>e&&(e=l)}}return e+1}},createParentBoundables:function(t,e){P.isTrue(!t.isEmpty());var r=new b;r.add(this.createNode(e));var o=new b(t);wn.sort(o,this.getComparator());for(var l=o.iterator();l.hasNext();){var f=l.next();this.lastNode(r).getChildBoundables().size()===this.getNodeCapacity()&&r.add(this.createNode(e)),this.lastNode(r).addChildBoundable(f)}return r},isEmpty:function(){return this.built?this.root.isEmpty():this.itemBoundables.isEmpty()},interfaces_:function(){return[_]},getClass:function(){return Vt}}),Vt.compareDoubles=function(t,e){return t>e?1:e>t?-1:0},Vt.IntersectsOp=mg,Vt.serialVersionUID=-3886435814360241e3,Vt.DEFAULT_NODE_CAPACITY=10,h(xo.prototype,{distance:function(t,e){},interfaces_:function(){return[]},getClass:function(){return xo}}),w(Rt,Vt),h(Rt.prototype,{createParentBoundablesFromVerticalSlices:function(t,e){P.isTrue(t.length>0);for(var r=new b,o=0;o<t.length;o++)r.addAll(this.createParentBoundablesFromVerticalSlice(t[o],e));return r},createNode:function(t){return new Kr(t)},size:function(){return arguments.length===0?Vt.prototype.size.call(this):Vt.prototype.size.apply(this,arguments)},insert:function(){if(arguments.length!==2)return Vt.prototype.insert.apply(this,arguments);var t=arguments[0],e=arguments[1];return t.isNull()?null:void Vt.prototype.insert.call(this,t,e)},getIntersectsOp:function(){return Rt.intersectsOp},verticalSlices:function(t,e){for(var r=Math.trunc(Math.ceil(t.size()/e)),o=new Array(e).fill(null),l=t.iterator(),f=0;e>f;f++){o[f]=new b;for(var d=0;l.hasNext()&&r>d;){var m=l.next();o[f].add(m),d++}}return o},query:function(){if(arguments.length===1){var t=arguments[0];return Vt.prototype.query.call(this,t)}if(arguments.length===2){var e=arguments[0],r=arguments[1];Vt.prototype.query.call(this,e,r)}else if(arguments.length===3){if(V(arguments[2],li)&&arguments[0]instanceof Object&&arguments[1]instanceof Le){var o=arguments[0],l=arguments[1],f=arguments[2];Vt.prototype.query.call(this,o,l,f)}else if(V(arguments[2],N)&&arguments[0]instanceof Object&&arguments[1]instanceof Le){var d=arguments[0],m=arguments[1],E=arguments[2];Vt.prototype.query.call(this,d,m,E)}}},getComparator:function(){return Rt.yComparator},createParentBoundablesFromVerticalSlice:function(t,e){return Vt.prototype.createParentBoundables.call(this,t,e)},remove:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return Vt.prototype.remove.call(this,t,e)}return Vt.prototype.remove.apply(this,arguments)},depth:function(){return arguments.length===0?Vt.prototype.depth.call(this):Vt.prototype.depth.apply(this,arguments)},createParentBoundables:function(t,e){P.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),o=new b(t);wn.sort(o,Rt.xComparator);var l=this.verticalSlices(o,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(l,e)},nearestNeighbour:function(){if(arguments.length===1){if(V(arguments[0],xo)){var t=arguments[0],e=new Ie(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof Ie){var r=arguments[0];return this.nearestNeighbour(r,g.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof Rt&&V(arguments[1],xo)){var o=arguments[0],l=arguments[1],e=new Ie(this.getRoot(),o.getRoot(),l);return this.nearestNeighbour(e)}if(arguments[0]instanceof Ie&&typeof arguments[1]=="number"){var f=arguments[0],d=arguments[1],m=d,E=null,S=new gu;for(S.add(f);!S.isEmpty()&&m>0;){var R=S.poll(),k=R.getDistance();if(k>=m)break;R.isLeaves()?(m=k,E=R):R.expandToQueue(S,m)}return[E.getBoundable(0).getItem(),E.getBoundable(1).getItem()]}}else if(arguments.length===3){var G=arguments[0],J=arguments[1],$=arguments[2],et=new Dn(G,J),e=new Ie(this.getRoot(),et,$);return this.nearestNeighbour(e)[0]}},interfaces_:function(){return[_o,_]},getClass:function(){return Rt}}),Rt.centreX=function(t){return Rt.avg(t.getMinX(),t.getMaxX())},Rt.avg=function(t,e){return(t+e)/2},Rt.centreY=function(t){return Rt.avg(t.getMinY(),t.getMaxY())},w(Kr,Le),h(Kr.prototype,{computeBounds:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var r=e.next();t===null?t=new M(r.getBounds()):t.expandToInclude(r.getBounds())}return t},interfaces_:function(){return[]},getClass:function(){return Kr}}),Rt.STRtreeNode=Kr,Rt.serialVersionUID=0x39920f7d5f261e0,Rt.xComparator={interfaces_:function(){return[y]},compare:function(t,e){return Vt.compareDoubles(Rt.centreX(t.getBounds()),Rt.centreX(e.getBounds()))}},Rt.yComparator={interfaces_:function(){return[y]},compare:function(t,e){return Vt.compareDoubles(Rt.centreY(t.getBounds()),Rt.centreY(e.getBounds()))}},Rt.intersectsOp={interfaces_:function(){return[IntersectsOp]},intersects:function(t,e){return t.intersects(e)}},Rt.DEFAULT_NODE_CAPACITY=10,h(Ce.prototype,{interfaces_:function(){return[]},getClass:function(){return Ce}}),Ce.relativeSign=function(t,e){return e>t?-1:t>e?1:0},Ce.compare=function(t,e,r){if(e.equals2D(r))return 0;var o=Ce.relativeSign(e.x,r.x),l=Ce.relativeSign(e.y,r.y);switch(t){case 0:return Ce.compareValue(o,l);case 1:return Ce.compareValue(l,o);case 2:return Ce.compareValue(l,-o);case 3:return Ce.compareValue(-o,l);case 4:return Ce.compareValue(-o,-l);case 5:return Ce.compareValue(-l,-o);case 6:return Ce.compareValue(-l,o);case 7:return Ce.compareValue(o,-l)}return P.shouldNeverReachHere("invalid octant value"),0},Ce.compareValue=function(t,e){return 0>t?-1:t>0?1:0>e?-1:e>0?1:0},h(du.prototype,{getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},compareTo:function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Ce.compare(this.segmentOctant,this.coord,e.coord)},isEndPoint:function(t){return this.segmentIndex!==0||this._isInterior?this.segmentIndex===t:!0},isInterior:function(){return this._isInterior},interfaces_:function(){return[p]},getClass:function(){return du}}),h(pu.prototype,{getSplitCoordinates:function(){var t=new O;this.addEndpoints();for(var e=this.iterator(),r=e.next();e.hasNext();){var o=e.next();this.addEdgeCoordinates(r,o,t),r=o}return t.toCoordinateArray()},addCollapsedNodes:function(){var t=new b;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var r=e.next().intValue();this.add(this.edge.getCoordinate(r),r)}},print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){var r=e.next();r.print(t)}},findCollapsesFromExistingVertices:function(t){for(var e=0;e<this.edge.size()-2;e++){var r=this.edge.getCoordinate(e),o=(this.edge.getCoordinate(e+1),this.edge.getCoordinate(e+2));r.equals2D(o)&&t.add(new qt(e+1))}},addEdgeCoordinates:function(t,e,r){e.segmentIndex-t.segmentIndex+2;var o=this.edge.getCoordinate(e.segmentIndex),l=e.isInterior()||!e.coord.equals2D(o);r.add(new C(t.coord),!1);for(var f=t.segmentIndex+1;f<=e.segmentIndex;f++)r.add(this.edge.getCoordinate(f));l&&r.add(new C(e.coord))},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),r=e.next();e.hasNext();){var o=e.next(),l=this.createSplitEdge(r,o);t.add(l),r=o}},findCollapseIndex:function(t,e,r){if(!t.coord.equals2D(e.coord))return!1;var o=e.segmentIndex-t.segmentIndex;return e.isInterior()||o--,o===1?(r[0]=t.segmentIndex+1,!0):!1},findCollapsesFromInsertedNodes:function(t){for(var e=new Array(1).fill(null),r=this.iterator(),o=r.next();r.hasNext();){var l=r.next(),f=this.findCollapseIndex(o,l,e);f&&t.add(new qt(e[0])),o=l}},getEdge:function(){return this.edge},addEndpoints:function(){var t=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(t),t)},createSplitEdge:function(t,e){var r=e.segmentIndex-t.segmentIndex+2,o=this.edge.getCoordinate(e.segmentIndex),l=e.isInterior()||!e.coord.equals2D(o);l||r--;var f=new Array(r).fill(null),d=0;f[d++]=new C(t.coord);for(var m=t.segmentIndex+1;m<=e.segmentIndex;m++)f[d++]=this.edge.getCoordinate(m);return l&&(f[d]=new C(e.coord)),new pn(f,this.edge.getData())},add:function(t,e){var r=new du(this.edge,t,e,this.edge.getSegmentOctant(e)),o=this.nodeMap.get(r);return o!==null?(P.isTrue(o.coord.equals2D(t),"Found equal nodes with different coordinates"),o):(this.nodeMap.put(r,r),r)},checkSplitEdgesCorrectness:function(t){var e=this.edge.getCoordinates(),r=t.get(0),o=r.getCoordinate(0);if(!o.equals2D(e[0]))throw new I("bad split edge start point at "+o);var l=t.get(t.size()-1),f=l.getCoordinates(),d=f[f.length-1];if(!d.equals2D(e[e.length-1]))throw new I("bad split edge end point at "+d)},interfaces_:function(){return[]},getClass:function(){return pu}}),h(hl.prototype,{next:function(){return this.currNode===null?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):this.nextNode===null?null:this.nextNode.segmentIndex===this.currNode.segmentIndex?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):(this.nextNode.segmentIndex>this.currNode.segmentIndex,null)},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){return this.nextNode!==null},readNextNode:function(){this.nodeIt.hasNext()?this.nextNode=this.nodeIt.next():this.nextNode=null},interfaces_:function(){return[Y]},getClass:function(){return hl}}),h(mu.prototype,{addIntersection:function(t,e){},interfaces_:function(){return[Jr]},getClass:function(){return mu}}),h(pn.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},safeOctant:function(t,e){return t.equals2D(e)?0:fr.octant(t,e)},getData:function(){return this.data},addIntersection:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(arguments.length===4){var r=arguments[0],o=arguments[1],l=arguments[3],f=new C(r.getIntersection(l));this.addIntersection(f,o)}},toString:function(){return ge.toLineString(new Fe(this.pts))},getNodeList:function(){return this.nodeList},addIntersectionNode:function(t,e){var r=e,o=r+1;if(o<this.pts.length){var l=this.pts[o];t.equals2D(l)&&(r=o)}var f=this.nodeList.add(t,r);return f},addIntersections:function(t,e,r){for(var o=0;o<t.getIntersectionNum();o++)this.addIntersection(t,e,r,o)},interfaces_:function(){return[mu]},getClass:function(){return pn}}),pn.getNodedSubstrings=function(){if(arguments.length===1){var t=arguments[0],e=new b;return pn.getNodedSubstrings(t,e),e}if(arguments.length===2)for(var r=arguments[0],o=arguments[1],l=r.iterator();l.hasNext();){var f=l.next();f.getNodeList().addSplitEdges(o)}},h(jr.prototype,{overlap:function(){if(arguments.length!==2){if(arguments.length===4){var t=arguments[0],e=arguments[1],r=arguments[2],o=arguments[3];t.getLineSegment(e,this.overlapSeg1),r.getLineSegment(o,this.overlapSeg2),this.overlap(this.overlapSeg1,this.overlapSeg2)}}},interfaces_:function(){return[]},getClass:function(){return jr}}),h(vu.prototype,{getLineSegment:function(t,e){e.p0=this.pts[t],e.p1=this.pts[t+1]},computeSelect:function(t,e,r,o){var l=this.pts[e],f=this.pts[r];if(o.tempEnv1.init(l,f),r-e===1)return o.select(this,e),null;if(!t.intersects(o.tempEnv1))return null;var d=Math.trunc((e+r)/2);d>e&&this.computeSelect(t,e,d,o),r>d&&this.computeSelect(t,d,r,o)},getCoordinates:function(){for(var t=new Array(this.end-this.start+1).fill(null),e=0,r=this.start;r<=this.end;r++)t[e++]=this.pts[r];return t},computeOverlaps:function(t,e){this.computeOverlapsInternal(this.start,this.end,t,t.start,t.end,e)},setId:function(t){this.id=t},select:function(t,e){this.computeSelect(t,this.start,this.end,e)},getEnvelope:function(){if(this.env===null){var t=this.pts[this.start],e=this.pts[this.end];this.env=new M(t,e)}return this.env},getEndIndex:function(){return this.end},getStartIndex:function(){return this.start},getContext:function(){return this.context},getId:function(){return this.id},computeOverlapsInternal:function(t,e,r,o,l,f){var d=this.pts[t],m=this.pts[e],E=r.pts[o],S=r.pts[l];if(e-t===1&&l-o===1)return f.overlap(this,t,r,o),null;if(f.tempEnv1.init(d,m),f.tempEnv2.init(E,S),!f.tempEnv1.intersects(f.tempEnv2))return null;var R=Math.trunc((t+e)/2),k=Math.trunc((o+l)/2);R>t&&(k>o&&this.computeOverlapsInternal(t,R,r,o,k,f),l>k&&this.computeOverlapsInternal(t,R,r,k,l,f)),e>R&&(k>o&&this.computeOverlapsInternal(R,e,r,o,k,f),l>k&&this.computeOverlapsInternal(R,e,r,k,l,f))},interfaces_:function(){return[]},getClass:function(){return vu}}),h(pt.prototype,{interfaces_:function(){return[]},getClass:function(){return pt}}),pt.isNorthern=function(t){return t===pt.NE||t===pt.NW},pt.isOpposite=function(t,e){if(t===e)return!1;var r=(t-e+4)%4;return r===2},pt.commonHalfPlane=function(t,e){if(t===e)return t;var r=(t-e+4)%4;if(r===2)return-1;var o=e>t?t:e,l=t>e?t:e;return o===0&&l===3?3:o},pt.isInHalfPlane=function(t,e){return e===pt.SE?t===pt.SE||t===pt.SW:t===e||t===e+1},pt.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new c;return t>=0?e>=0?pt.NE:pt.SE:e>=0?pt.NW:pt.SW}if(arguments[0]instanceof C&&arguments[1]instanceof C){var r=arguments[0],o=arguments[1];if(o.x===r.x&&o.y===r.y)throw new c;return o.x>=r.x?o.y>=r.y?pt.NE:pt.SE:o.y>=r.y?pt.NW:pt.SW}},pt.NE=0,pt.NW=1,pt.SW=2,pt.SE=3,h(tn.prototype,{interfaces_:function(){return[]},getClass:function(){return tn}}),tn.getChainStartIndices=function(t){var e=0,r=new b;r.add(new qt(e));do{var o=tn.findChainEnd(t,e);r.add(new qt(o)),e=o}while(e<t.length-1);var l=tn.toIntArray(r);return l},tn.findChainEnd=function(t,e){for(var r=e;r<t.length-1&&t[r].equals2D(t[r+1]);)r++;if(r>=t.length-1)return t.length-1;for(var o=pt.quadrant(t[r],t[r+1]),l=e+1;l<t.length;){if(!t[l-1].equals2D(t[l])){var f=pt.quadrant(t[l-1],t[l]);if(f!==o)break}l++}return l-1},tn.getChains=function(){if(arguments.length===1){var t=arguments[0];return tn.getChains(t,null)}if(arguments.length===2){for(var e=arguments[0],r=arguments[1],o=new b,l=tn.getChainStartIndices(e),f=0;f<l.length-1;f++){var d=new vu(e,l[f],l[f+1],r);o.add(d)}return o}},tn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),r=0;r<e.length;r++)e[r]=t.get(r).intValue();return e},h($r.prototype,{computeNodes:function(t){},getNodedSubstrings:function(){},interfaces_:function(){return[]},getClass:function(){return $r}}),h(Lo.prototype,{setSegmentIntersector:function(t){this.segInt=t},interfaces_:function(){return[$r]},getClass:function(){return Lo}}),w(ci,Lo),h(ci.prototype,{getMonotoneChains:function(){return this.monoChains},getNodedSubstrings:function(){return pn.getNodedSubstrings(this.nodedSegStrings)},getIndex:function(){return this.index},add:function(t){for(var e=tn.getChains(t.getCoordinates(),t),r=e.iterator();r.hasNext();){var o=r.next();o.setId(this.idCounter++),this.index.insert(o.getEnvelope(),o),this.monoChains.add(o)}},computeNodes:function(t){this.nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},intersectChains:function(){for(var t=new Qr(this.segInt),e=this.monoChains.iterator();e.hasNext();)for(var r=e.next(),o=this.index.query(r.getEnvelope()),l=o.iterator();l.hasNext();){var f=l.next();if(f.getId()>r.getId()&&(r.computeOverlaps(f,t),this.nOverlaps++),this.segInt.isDone())return null}},interfaces_:function(){return[]},getClass:function(){return ci}}),w(Qr,jr),h(Qr.prototype,{overlap:function(){if(arguments.length!==4)return jr.prototype.overlap.apply(this,arguments);var t=arguments[0],e=arguments[1],r=arguments[2],o=arguments[3],l=t.getContext(),f=r.getContext();this.si.processIntersections(l,e,f,o)},interfaces_:function(){return[]},getClass:function(){return Qr}}),ci.SegmentOverlapAction=Qr,w(Te,I),h(Te.prototype,{getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Te}}),Te.msgWithCoord=function(t,e){return e!==null?t+" [ "+e+" ]":t},h(ts.prototype,{processIntersections:function(t,e,r,o){},isDone:function(){},interfaces_:function(){return[]},getClass:function(){return ts}}),h(jn.prototype,{getInteriorIntersection:function(){return this.interiorIntersection},setCheckEndSegmentsOnly:function(t){this.isCheckEndSegmentsOnly=t},getIntersectionSegments:function(){return this.intSegments},count:function(){return this.intersectionCount},getIntersections:function(){return this.intersections},setFindAllIntersections:function(t){this.findAllIntersections=t},setKeepIntersections:function(t){this.keepIntersections=t},processIntersections:function(t,e,r,o){if(!this.findAllIntersections&&this.hasIntersection()||t===r&&e===o)return null;if(this.isCheckEndSegmentsOnly){var l=this.isEndSegment(t,e)||this.isEndSegment(r,o);if(!l)return null}var f=t.getCoordinates()[e],d=t.getCoordinates()[e+1],m=r.getCoordinates()[o],E=r.getCoordinates()[o+1];this.li.computeIntersection(f,d,m,E),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=new Array(4).fill(null),this.intSegments[0]=f,this.intSegments[1]=d,this.intSegments[2]=m,this.intSegments[3]=E,this.interiorIntersection=this.li.getIntersection(0),this.keepIntersections&&this.intersections.add(this.interiorIntersection),this.intersectionCount++)},isEndSegment:function(t,e){return e===0?!0:e>=t.size()-2},hasIntersection:function(){return this.interiorIntersection!==null},isDone:function(){return this.findAllIntersections?!1:this.interiorIntersection!==null},interfaces_:function(){return[ts]},getClass:function(){return jn}}),jn.createAllIntersectionsFinder=function(t){var e=new jn(t);return e.setFindAllIntersections(!0),e},jn.createAnyIntersectionFinder=function(t){return new jn(t)},jn.createIntersectionCounter=function(t){var e=new jn(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e},h(es.prototype,{execute:function(){return this.segInt!==null?null:void this.checkInteriorIntersections()},getIntersections:function(){return this.segInt.getIntersections()},isValid:function(){return this.execute(),this._isValid},setFindAllIntersections:function(t){this.findAllIntersections=t},checkInteriorIntersections:function(){this._isValid=!0,this.segInt=new jn(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var t=new ci;return t.setSegmentIntersector(this.segInt),t.computeNodes(this.segStrings),this.segInt.hasIntersection()?(this._isValid=!1,null):void 0},checkValid:function(){if(this.execute(),!this._isValid)throw new Te(this.getErrorMessage(),this.segInt.getInteriorIntersection())},getErrorMessage:function(){if(this._isValid)return"no intersections found";var t=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+ge.toLineString(t[0],t[1])+" and "+ge.toLineString(t[2],t[3])},interfaces_:function(){return[]},getClass:function(){return es}}),es.computeIntersections=function(t){var e=new es(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()},h(qi.prototype,{checkValid:function(){this.nv.checkValid()},interfaces_:function(){return[]},getClass:function(){return qi}}),qi.toSegmentStrings=function(t){for(var e=new b,r=t.iterator();r.hasNext();){var o=r.next();e.add(new fu(o.getCoordinates(),o))}return e},qi.checkValid=function(t){var e=new qi(t);e.checkValid()},h(gr.prototype,{map:function(t){for(var e=new b,r=0;r<t.getNumGeometries();r++){var o=this.mapOp.map(t.getGeometryN(r));o.isEmpty()||e.add(o)}return t.getFactory().createGeometryCollection(at.toGeometryArray(e))},interfaces_:function(){return[]},getClass:function(){return gr}}),gr.map=function(t,e){var r=new gr(e);return r.map(t)},h(U.prototype,{interfaces_:function(){return[]},getClass:function(){return U}}),U.opposite=function(t){return t===U.LEFT?U.RIGHT:t===U.RIGHT?U.LEFT:t},U.ON=0,U.LEFT=1,U.RIGHT=2,h(Pe.prototype,{setAllLocations:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},isNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==x.NONE)return!1;return!0},setAllLocationsIfNull:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===x.NONE&&(this.location[e]=t)},isLine:function(){return this.location.length===1},merge:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[U.ON]=this.location[U.ON],e[U.LEFT]=x.NONE,e[U.RIGHT]=x.NONE,this.location=e}for(var r=0;r<this.location.length;r++)this.location[r]===x.NONE&&r<t.location.length&&(this.location[r]=t.location[r])},getLocations:function(){return this.location},flip:function(){if(this.location.length<=1)return null;var t=this.location[U.LEFT];this.location[U.LEFT]=this.location[U.RIGHT],this.location[U.RIGHT]=t},toString:function(){var t=new bt;return this.location.length>1&&t.append(x.toLocationSymbol(this.location[U.LEFT])),t.append(x.toLocationSymbol(this.location[U.ON])),this.location.length>1&&t.append(x.toLocationSymbol(this.location[U.RIGHT])),t.toString()},setLocations:function(t,e,r){this.location[U.ON]=t,this.location[U.LEFT]=e,this.location[U.RIGHT]=r},get:function(t){return t<this.location.length?this.location[t]:x.NONE},isArea:function(){return this.location.length>1},isAnyNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===x.NONE)return!0;return!1},setLocation:function(){if(arguments.length===1){var t=arguments[0];this.setLocation(U.ON,t)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];this.location[e]=r}},init:function(t){this.location=new Array(t).fill(null),this.setAllLocations(x.NONE)},isEqualOnSide:function(t,e){return this.location[e]===t.location[e]},allPositionsEqual:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},interfaces_:function(){return[]},getClass:function(){return Pe}}),h(Ht.prototype,{getGeometryCount:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},setAllLocations:function(t,e){this.elt[t].setAllLocations(e)},isNull:function(t){return this.elt[t].isNull()},setAllLocationsIfNull:function(){if(arguments.length===1){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(arguments.length===2){var e=arguments[0],r=arguments[1];this.elt[e].setAllLocationsIfNull(r)}},isLine:function(t){return this.elt[t].isLine()},merge:function(t){for(var e=0;2>e;e++)this.elt[e]===null&&t.elt[e]!==null?this.elt[e]=new Pe(t.elt[e]):this.elt[e].merge(t.elt[e])},flip:function(){this.elt[0].flip(),this.elt[1].flip()},getLocation:function(){if(arguments.length===1){var t=arguments[0];return this.elt[t].get(U.ON)}if(arguments.length===2){var e=arguments[0],r=arguments[1];return this.elt[e].get(r)}},toString:function(){var t=new bt;return this.elt[0]!==null&&(t.append("A:"),t.append(this.elt[0].toString())),this.elt[1]!==null&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},isArea:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var t=arguments[0];return this.elt[t].isArea()}},isAnyNull:function(t){return this.elt[t].isAnyNull()},setLocation:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(U.ON,e)}else if(arguments.length===3){var r=arguments[0],o=arguments[1],l=arguments[2];this.elt[r].setLocation(o,l)}},isEqualOnSide:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},allPositionsEqual:function(t,e){return this.elt[t].allPositionsEqual(e)},toLine:function(t){this.elt[t].isArea()&&(this.elt[t]=new Pe(this.elt[t].location[0]))},interfaces_:function(){return[]},getClass:function(){return Ht}}),Ht.toLineLabel=function(t){for(var e=new Ht(x.NONE),r=0;2>r;r++)e.setLocation(r,t.getLocation(r));return e},h(dr.prototype,{computeRing:function(){if(this.ring!==null)return null;for(var t=new Array(this.pts.size()).fill(null),e=0;e<this.pts.size();e++)t[e]=this.pts.get(e);this.ring=this.geometryFactory.createLinearRing(t),this._isHole=H.isCCW(this.ring.getCoordinates())},isIsolated:function(){return this.label.getGeometryCount()===1},computePoints:function(t){this.startDe=t;var e=t,r=!0;do{if(e===null)throw new Te("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Te("Directed Edge visited twice during ring-building at "+e.getCoordinate());this.edges.add(e);var o=e.getLabel();P.isTrue(o.isArea()),this.mergeLabel(o),this.addPoints(e.getEdge(),e.isForward(),r),r=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this.startDe)},getLinearRing:function(){return this.ring},getCoordinate:function(t){return this.pts.get(t)},computeMaxNodeDegree:function(){this.maxNodeDegree=0;var t=this.startDe;do{var e=t.getNode(),r=e.getEdges().getOutgoingDegree(this);r>this.maxNodeDegree&&(this.maxNodeDegree=r),t=this.getNext(t)}while(t!==this.startDe);this.maxNodeDegree*=2},addPoints:function(t,e,r){var o=t.getCoordinates();if(e){var l=1;r&&(l=0);for(var f=l;f<o.length;f++)this.pts.add(o[f])}else{var l=o.length-2;r&&(l=o.length-1);for(var f=l;f>=0;f--)this.pts.add(o[f])}},isHole:function(){return this._isHole},setInResult:function(){var t=this.startDe;do t.getEdge().setInResult(!0),t=t.getNext();while(t!==this.startDe)},containsPoint:function(t){var e=this.getLinearRing(),r=e.getEnvelopeInternal();if(!r.contains(t)||!H.isPointInRing(t,e.getCoordinates()))return!1;for(var o=this.holes.iterator();o.hasNext();){var l=o.next();if(l.containsPoint(t))return!1}return!0},addHole:function(t){this.holes.add(t)},isShell:function(){return this.shell===null},getLabel:function(){return this.label},getEdges:function(){return this.edges},getMaxNodeDegree:function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree},getShell:function(){return this.shell},mergeLabel:function(){if(arguments.length===1){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(arguments.length===2){var e=arguments[0],r=arguments[1],o=e.getLocation(r,U.RIGHT);if(o===x.NONE)return null;if(this.label.getLocation(r)===x.NONE)return this.label.setLocation(r,o),null}},setShell:function(t){this.shell=t,t!==null&&t.addHole(this)},toPolygon:function(t){for(var e=new Array(this.holes.size()).fill(null),r=0;r<this.holes.size();r++)e[r]=this.holes.get(r).getLinearRing();var o=t.createPolygon(this.getLinearRing(),e);return o},interfaces_:function(){return[]},getClass:function(){return dr}}),w(Eo,dr),h(Eo.prototype,{setEdgeRing:function(t,e){t.setMinEdgeRing(e)},getNext:function(t){return t.getNextMin()},interfaces_:function(){return[]},getClass:function(){return Eo}}),w(ns,dr),h(ns.prototype,{buildMinimalRings:function(){var t=new b,e=this.startDe;do{if(e.getMinEdgeRing()===null){var r=new Eo(e,this.geometryFactory);t.add(r)}e=e.getNext()}while(e!==this.startDe);return t},setEdgeRing:function(t,e){t.setEdgeRing(e)},linkDirectedEdgesForMinimalEdgeRings:function(){var t=this.startDe;do{var e=t.getNode();e.getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this.startDe)},getNext:function(t){return t.getNext()},interfaces_:function(){return[]},getClass:function(){return ns}}),h(fi.prototype,{setVisited:function(t){this._isVisited=t},setInResult:function(t){this._isInResult=t},isCovered:function(){return this._isCovered},isCoveredSet:function(){return this._isCoveredSet},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setCovered:function(t){this._isCovered=t,this._isCoveredSet=!0},updateIM:function(t){P.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},isInResult:function(){return this._isInResult},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return fi}}),w(An,fi),h(An.prototype,{isIncidentEdgeInResult:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){var e=t.next();if(e.getEdge().isInResult())return!0}return!1},isIsolated:function(){return this.label.getGeometryCount()===1},getCoordinate:function(){return this.coord},print:function(t){t.println("node "+this.coord+" lbl: "+this.label)},computeIM:function(t){},computeMergedLocation:function(t,e){var r=x.NONE;if(r=this.label.getLocation(e),!t.isNull(e)){var o=t.getLocation(e);r!==x.BOUNDARY&&(r=o)}return r},setLabel:function(){if(arguments.length!==2)return fi.prototype.setLabel.apply(this,arguments);var t=arguments[0],e=arguments[1];this.label===null?this.label=new Ht(t,e):this.label.setLocation(t,e)},getEdges:function(){return this.edges},mergeLabel:function(){if(arguments[0]instanceof An){var t=arguments[0];this.mergeLabel(t.label)}else if(arguments[0]instanceof Ht)for(var e=arguments[0],r=0;2>r;r++){var o=this.computeMergedLocation(e,r),l=this.label.getLocation(r);l===x.NONE&&this.label.setLocation(r,o)}},add:function(t){this.edges.insert(t),t.setNode(this)},setLabelBoundary:function(t){if(this.label===null)return null;var e=x.NONE;this.label!==null&&(e=this.label.getLocation(t));var r=null;switch(e){case x.BOUNDARY:r=x.INTERIOR;break;case x.INTERIOR:r=x.BOUNDARY;break;default:r=x.BOUNDARY}this.label.setLocation(t,r)},interfaces_:function(){return[]},getClass:function(){return An}}),h(pr.prototype,{find:function(t){return this.nodeMap.get(t)},addNode:function(){if(arguments[0]instanceof C){var t=arguments[0],e=this.nodeMap.get(t);return e===null&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof An){var r=arguments[0],e=this.nodeMap.get(r.getCoordinate());return e===null?(this.nodeMap.put(r.getCoordinate(),r),r):(e.mergeLabel(r),e)}},print:function(t){for(var e=this.iterator();e.hasNext();){var r=e.next();r.print(t)}},iterator:function(){return this.nodeMap.values().iterator()},values:function(){return this.nodeMap.values()},getBoundaryNodes:function(t){for(var e=new b,r=this.iterator();r.hasNext();){var o=r.next();o.getLabel().getLocation(t)===x.BOUNDARY&&e.add(o)}return e},add:function(t){var e=t.getCoordinate(),r=this.addNode(e);r.add(t)},interfaces_:function(){return[]},getClass:function(){return pr}}),h(mn.prototype,{compareDirection:function(t){return this.dx===t.dx&&this.dy===t.dy?0:this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:H.computeOrientation(t.p0,t.p1,this.p1)},getDy:function(){return this.dy},getCoordinate:function(){return this.p0},setNode:function(t){this.node=t},print:function(t){var e=Math.atan2(this.dy,this.dx),r=this.getClass().getName(),o=r.lastIndexOf("."),l=r.substring(o+1);t.print("  "+l+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+e+"   "+this.label)},compareTo:function(t){var e=t;return this.compareDirection(e)},getDirectedCoordinate:function(){return this.p1},getDx:function(){return this.dx},getLabel:function(){return this.label},getEdge:function(){return this.edge},getQuadrant:function(){return this.quadrant},getNode:function(){return this.node},toString:function(){var t=Math.atan2(this.dy,this.dx),e=this.getClass().getName(),r=e.lastIndexOf("."),o=e.substring(r+1);return"  "+o+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+t+"   "+this.label},computeLabel:function(t){},init:function(t,e){this.p0=t,this.p1=e,this.dx=e.x-t.x,this.dy=e.y-t.y,this.quadrant=pt.quadrant(this.dx,this.dy),P.isTrue(!(this.dx===0&&this.dy===0),"EdgeEnd with identical endpoints found")},interfaces_:function(){return[p]},getClass:function(){return mn}}),w(Ui,mn),h(Ui.prototype,{getNextMin:function(){return this.nextMin},getDepth:function(t){return this.depth[t]},setVisited:function(t){this._isVisited=t},computeDirectedLabel:function(){this.label=new Ht(this.edge.getLabel()),this._isForward||this.label.flip()},getNext:function(){return this.next},setDepth:function(t,e){if(this.depth[t]!==-999&&this.depth[t]!==e)throw new Te("assigned depths do not match",this.getCoordinate());this.depth[t]=e},isInteriorAreaEdge:function(){for(var e=!0,r=0;2>r;r++)this.label.isArea(r)&&this.label.getLocation(r,U.LEFT)===x.INTERIOR&&this.label.getLocation(r,U.RIGHT)===x.INTERIOR||(e=!1);return e},setNextMin:function(t){this.nextMin=t},print:function(t){mn.prototype.print.call(this,t),t.print(" "+this.depth[U.LEFT]+"/"+this.depth[U.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},setMinEdgeRing:function(t){this.minEdgeRing=t},isLineEdge:function(){var t=this.label.isLine(0)||this.label.isLine(1),e=!this.label.isArea(0)||this.label.allPositionsEqual(0,x.EXTERIOR),r=!this.label.isArea(1)||this.label.allPositionsEqual(1,x.EXTERIOR);return t&&e&&r},setEdgeRing:function(t){this.edgeRing=t},getMinEdgeRing:function(){return this.minEdgeRing},getDepthDelta:function(){var t=this.edge.getDepthDelta();return this._isForward||(t=-t),t},setInResult:function(t){this._isInResult=t},getSym:function(){return this.sym},isForward:function(){return this._isForward},getEdge:function(){return this.edge},printEdge:function(t){this.print(t),t.print(" "),this._isForward?this.edge.print(t):this.edge.printReverse(t)},setSym:function(t){this.sym=t},setVisitedEdge:function(t){this.setVisited(t),this.sym.setVisited(t)},setEdgeDepths:function(t,e){var r=this.getEdge().getDepthDelta();this._isForward||(r=-r);var o=1;t===U.LEFT&&(o=-1);var l=U.opposite(t),f=r*o,d=e+f;this.setDepth(t,e),this.setDepth(l,d)},getEdgeRing:function(){return this.edgeRing},isInResult:function(){return this._isInResult},setNext:function(t){this.next=t},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return Ui}}),Ui.depthFactor=function(t,e){return t===x.EXTERIOR&&e===x.INTERIOR?1:t===x.INTERIOR&&e===x.EXTERIOR?-1:0},h(Vi.prototype,{createNode:function(t){return new An(t,null)},interfaces_:function(){return[]},getClass:function(){return Vi}}),h(vn.prototype,{printEdges:function(t){t.println("Edges:");for(var e=0;e<this.edges.size();e++){t.println("edge "+e+":");var r=this.edges.get(e);r.print(t),r.eiList.print(t)}},find:function(t){return this.nodes.find(t)},addNode:function(){if(arguments[0]instanceof An){var t=arguments[0];return this.nodes.addNode(t)}if(arguments[0]instanceof C){var e=arguments[0];return this.nodes.addNode(e)}},getNodeIterator:function(){return this.nodes.iterator()},linkResultDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkResultDirectedEdges()}},debugPrintln:function(t){Et.out.println(t)},isBoundaryNode:function(t,e){var r=this.nodes.find(e);if(r===null)return!1;var o=r.getLabel();return o!==null&&o.getLocation(t)===x.BOUNDARY},linkAllDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkAllDirectedEdges()}},matchInSameDirection:function(t,e,r,o){return t.equals(r)?H.computeOrientation(t,e,o)===H.COLLINEAR&&pt.quadrant(t,e)===pt.quadrant(r,o):!1},getEdgeEnds:function(){return this.edgeEndList},debugPrint:function(t){Et.out.print(t)},getEdgeIterator:function(){return this.edges.iterator()},findEdgeInSameDirection:function(t,e){for(var r=0;r<this.edges.size();r++){var o=this.edges.get(r),l=o.getCoordinates();if(this.matchInSameDirection(t,e,l[0],l[1])||this.matchInSameDirection(t,e,l[l.length-1],l[l.length-2]))return o}return null},insertEdge:function(t){this.edges.add(t)},findEdgeEnd:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var r=e.next();if(r.getEdge()===t)return r}return null},addEdges:function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this.edges.add(r);var o=new Ui(r,!0),l=new Ui(r,!1);o.setSym(l),l.setSym(o),this.add(o),this.add(l)}},add:function(t){this.nodes.add(t),this.edgeEndList.add(t)},getNodes:function(){return this.nodes.values()},findEdge:function(t,e){for(var r=0;r<this.edges.size();r++){var o=this.edges.get(r),l=o.getCoordinates();if(t.equals(l[0])&&e.equals(l[1]))return o}return null},interfaces_:function(){return[]},getClass:function(){return vn}}),vn.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();r.getEdges().linkResultDirectedEdges()}},h(wo.prototype,{sortShellsAndHoles:function(t,e,r){for(var o=t.iterator();o.hasNext();){var l=o.next();l.isHole()?r.add(l):e.add(l)}},computePolygons:function(t){for(var e=new b,r=t.iterator();r.hasNext();){var o=r.next(),l=o.toPolygon(this.geometryFactory);e.add(l)}return e},placeFreeHoles:function(t,e){for(var r=e.iterator();r.hasNext();){var o=r.next();if(o.getShell()===null){var l=this.findEdgeRingContaining(o,t);if(l===null)throw new Te("unable to assign hole to a shell",o.getCoordinate(0));o.setShell(l)}}},buildMinimalEdgeRings:function(t,e,r){for(var o=new b,l=t.iterator();l.hasNext();){var f=l.next();if(f.getMaxNodeDegree()>2){f.linkDirectedEdgesForMinimalEdgeRings();var d=f.buildMinimalRings(),m=this.findShell(d);m!==null?(this.placePolygonHoles(m,d),e.add(m)):r.addAll(d)}else o.add(f)}return o},containsPoint:function(t){for(var e=this.shellList.iterator();e.hasNext();){var r=e.next();if(r.containsPoint(t))return!0}return!1},buildMaximalEdgeRings:function(t){for(var e=new b,r=t.iterator();r.hasNext();){var o=r.next();if(o.isInResult()&&o.getLabel().isArea()&&o.getEdgeRing()===null){var l=new ns(o,this.geometryFactory);e.add(l),l.setInResult()}}return e},placePolygonHoles:function(t,e){for(var r=e.iterator();r.hasNext();){var o=r.next();o.isHole()&&o.setShell(t)}},getPolygons:function(){var t=this.computePolygons(this.shellList);return t},findEdgeRingContaining:function(t,e){for(var r=t.getLinearRing(),o=r.getEnvelopeInternal(),l=r.getCoordinateN(0),f=null,d=null,m=e.iterator();m.hasNext();){var E=m.next(),S=E.getLinearRing(),R=S.getEnvelopeInternal();f!==null&&(d=f.getLinearRing().getEnvelopeInternal());var k=!1;R.contains(o)&&H.isPointInRing(l,S.getCoordinates())&&(k=!0),k&&(f===null||d.contains(R))&&(f=E)}return f},findShell:function(t){for(var e=0,r=null,o=t.iterator();o.hasNext();){var l=o.next();l.isHole()||(r=l,e++)}return P.isTrue(1>=e,"found two shells in MinimalEdgeRing list"),r},add:function(){if(arguments.length===1){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(arguments.length===2){var e=arguments[0],r=arguments[1];vn.linkResultDirectedEdges(r);var o=this.buildMaximalEdgeRings(e),l=new b,f=this.buildMinimalEdgeRings(o,this.shellList,l);this.sortShellsAndHoles(f,this.shellList,l),this.placeFreeHoles(this.shellList,l)}},interfaces_:function(){return[]},getClass:function(){return wo}}),h(yu.prototype,{collectLines:function(t){for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var r=e.next();this.collectLineEdge(r,t,this.lineEdgesList),this.collectBoundaryTouchEdge(r,t,this.lineEdgesList)}},labelIsolatedLine:function(t,e){var r=this.ptLocator.locate(t.getCoordinate(),this.op.getArgGeometry(e));t.getLabel().setLocation(e,r)},build:function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this.resultLineList},collectLineEdge:function(t,e,r){var o=t.getLabel(),l=t.getEdge();t.isLineEdge()&&(t.isVisited()||!j.isResultOfOp(o,e)||l.isCovered()||(r.add(l),t.setVisitedEdge(!0)))},findCoveredLineEdges:function(){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().findCoveredLineEdges()}for(var r=this.op.getGraph().getEdgeEnds().iterator();r.hasNext();){var o=r.next(),l=o.getEdge();if(o.isLineEdge()&&!l.isCoveredSet()){var f=this.op.isCoveredByA(o.getCoordinate());l.setCovered(f)}}},labelIsolatedLines:function(t){for(var e=t.iterator();e.hasNext();){var r=e.next(),o=r.getLabel();r.isIsolated()&&(o.isNull(0)?this.labelIsolatedLine(r,0):this.labelIsolatedLine(r,1))}},buildLines:function(t){for(var e=this.lineEdgesList.iterator();e.hasNext();){var r=e.next(),o=(r.getLabel(),this.geometryFactory.createLineString(r.getCoordinates()));this.resultLineList.add(o),r.setInResult(!0)}},collectBoundaryTouchEdge:function(t,e,r){var o=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(P.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(j.isResultOfOp(o,e)&&e===j.INTERSECTION&&(r.add(t.getEdge()),t.setVisitedEdge(!0))))},interfaces_:function(){return[]},getClass:function(){return yu}}),h(_u.prototype,{filterCoveredNodeToPoint:function(t){var e=t.getCoordinate();if(!this.op.isCoveredByLA(e)){var r=this.geometryFactory.createPoint(e);this.resultPointList.add(r)}},extractNonCoveredResultNodes:function(t){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var r=e.next();if(!(r.isInResult()||r.isIncidentEdgeInResult()||r.getEdges().getDegree()!==0&&t!==j.INTERSECTION)){var o=r.getLabel();j.isResultOfOp(o,t)&&this.filterCoveredNodeToPoint(r)}}},build:function(t){return this.extractNonCoveredResultNodes(t),this.resultPointList},interfaces_:function(){return[]},getClass:function(){return _u}}),h(Io.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return Io}}),h(Ge.prototype,{locate:function(t){return Ge.locate(t,this.geom)},interfaces_:function(){return[Io]},getClass:function(){return Ge}}),Ge.isPointInRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?H.isPointInRing(t,e.getCoordinates()):!1},Ge.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var r=e.getExteriorRing();if(!Ge.isPointInRing(t,r))return!1;for(var o=0;o<e.getNumInteriorRing();o++){var l=e.getInteriorRingN(o);if(Ge.isPointInRing(t,l))return!1}return!0},Ge.containsPoint=function(t,e){if(e instanceof wt)return Ge.containsPointInPolygon(t,e);if(e instanceof ht)for(var r=new Gi(e);r.hasNext();){var o=r.next();if(o!==e&&Ge.containsPoint(t,o))return!0}return!1},Ge.locate=function(t,e){return e.isEmpty()?x.EXTERIOR:Ge.containsPoint(t,e)?x.INTERIOR:x.EXTERIOR},h(Hi.prototype,{getNextCW:function(t){this.getEdges();var e=this.edgeList.indexOf(t),r=e-1;return e===0&&(r=this.edgeList.size()-1),this.edgeList.get(r)},propagateSideLabels:function(t){for(var e=x.NONE,r=this.iterator();r.hasNext();){var o=r.next(),l=o.getLabel();l.isArea(t)&&l.getLocation(t,U.LEFT)!==x.NONE&&(e=l.getLocation(t,U.LEFT))}if(e===x.NONE)return null;for(var f=e,r=this.iterator();r.hasNext();){var o=r.next(),l=o.getLabel();if(l.getLocation(t,U.ON)===x.NONE&&l.setLocation(t,U.ON,f),l.isArea(t)){var d=l.getLocation(t,U.LEFT),m=l.getLocation(t,U.RIGHT);if(m!==x.NONE){if(m!==f)throw new Te("side location conflict",o.getCoordinate());d===x.NONE&&P.shouldNeverReachHere("found single null side (at "+o.getCoordinate()+")"),f=d}else P.isTrue(l.getLocation(t,U.LEFT)===x.NONE,"found single null side"),l.setLocation(t,U.RIGHT,f),l.setLocation(t,U.LEFT,f)}}},getCoordinate:function(){var t=this.iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},print:function(t){Et.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var r=e.next();r.print(t)}},isAreaLabelsConsistent:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},checkAreaLabelsConsistent:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var r=e.size()-1,o=e.get(r).getLabel(),l=o.getLocation(t,U.LEFT);P.isTrue(l!==x.NONE,"Found unlabelled area edge");for(var f=l,d=this.iterator();d.hasNext();){var m=d.next(),E=m.getLabel();P.isTrue(E.isArea(t),"Found non-area edge");var S=E.getLocation(t,U.LEFT),R=E.getLocation(t,U.RIGHT);if(S===R||R!==f)return!1;f=S}return!0},findIndex:function(t){this.iterator();for(var e=0;e<this.edgeList.size();e++){var r=this.edgeList.get(e);if(r===t)return e}return-1},iterator:function(){return this.getEdges().iterator()},getEdges:function(){return this.edgeList===null&&(this.edgeList=new b(this.edgeMap.values())),this.edgeList},getLocation:function(t,e,r){return this.ptInAreaLocation[t]===x.NONE&&(this.ptInAreaLocation[t]=Ge.locate(e,r[t].getGeometry())),this.ptInAreaLocation[t]},toString:function(){var t=new bt;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append(`
`);for(var e=this.iterator();e.hasNext();){var r=e.next();t.append(r),t.append(`
`)}return t.toString()},computeEdgeEndLabels:function(t){for(var e=this.iterator();e.hasNext();){var r=e.next();r.computeLabel(t)}},computeLabelling:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],r=this.iterator();r.hasNext();)for(var o=r.next(),l=o.getLabel(),f=0;2>f;f++)l.isLine(f)&&l.getLocation(f)===x.BOUNDARY&&(e[f]=!0);for(var r=this.iterator();r.hasNext();)for(var o=r.next(),l=o.getLabel(),f=0;2>f;f++)if(l.isAnyNull(f)){var d=x.NONE;if(e[f])d=x.EXTERIOR;else{var m=o.getCoordinate();d=this.getLocation(f,m,t)}l.setAllLocationsIfNull(f,d)}},getDegree:function(){return this.edgeMap.size()},insertEdgeEnd:function(t,e){this.edgeMap.put(t,e),this.edgeList=null},interfaces_:function(){return[]},getClass:function(){return Hi}}),w(Co,Hi),h(Co.prototype,{linkResultDirectedEdges:function(){this.getResultAreaEdges();for(var t=null,e=null,r=this.SCANNING_FOR_INCOMING,o=0;o<this.resultAreaEdgeList.size();o++){var l=this.resultAreaEdgeList.get(o),f=l.getSym();if(l.getLabel().isArea())switch(t===null&&l.isInResult()&&(t=l),r){case this.SCANNING_FOR_INCOMING:if(!f.isInResult())continue;e=f,r=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!l.isInResult())continue;e.setNext(l),r=this.SCANNING_FOR_INCOMING}}if(r===this.LINKING_TO_OUTGOING){if(t===null)throw new Te("no outgoing dirEdge found",this.getCoordinate());P.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},insert:function(t){var e=t;this.insertEdgeEnd(e,e)},getRightmostEdge:function(){var t=this.getEdges(),e=t.size();if(1>e)return null;var r=t.get(0);if(e===1)return r;var o=t.get(e-1),l=r.getQuadrant(),f=o.getQuadrant();return pt.isNorthern(l)&&pt.isNorthern(f)?r:!pt.isNorthern(l)&&!pt.isNorthern(f)?o:r.getDy()!==0?r:o.getDy()!==0?o:(P.shouldNeverReachHere("found two horizontal edges incident on node"),null)},print:function(t){Et.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var r=e.next();t.print("out "),r.print(t),t.println(),t.print("in "),r.getSym().print(t),t.println()}},getResultAreaEdges:function(){if(this.resultAreaEdgeList!==null)return this.resultAreaEdgeList;this.resultAreaEdgeList=new b;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this.resultAreaEdgeList.add(e)}return this.resultAreaEdgeList},updateLabelling:function(t){for(var e=this.iterator();e.hasNext();){var r=e.next(),o=r.getLabel();o.setAllLocationsIfNull(0,t.getLocation(0)),o.setAllLocationsIfNull(1,t.getLocation(1))}},linkAllDirectedEdges:function(){this.getEdges();for(var t=null,e=null,r=this.edgeList.size()-1;r>=0;r--){var o=this.edgeList.get(r),l=o.getSym();e===null&&(e=l),t!==null&&l.setNext(t),t=o}e.setNext(t)},computeDepths:function(){if(arguments.length===1){var t=arguments[0],e=this.findIndex(t),r=(t.getLabel(),t.getDepth(U.LEFT)),o=t.getDepth(U.RIGHT),l=this.computeDepths(e+1,this.edgeList.size(),r),f=this.computeDepths(0,e,l);if(f!==o)throw new Te("depth mismatch at "+t.getCoordinate())}else if(arguments.length===3){for(var d=arguments[0],m=arguments[1],E=arguments[2],S=E,R=d;m>R;R++){var k=this.edgeList.get(R);k.getLabel(),k.setEdgeDepths(U.RIGHT,S),S=k.getDepth(U.LEFT)}return S}},mergeSymLabels:function(){for(var t=this.iterator();t.hasNext();){var e=t.next(),r=e.getLabel();r.merge(e.getSym().getLabel())}},linkMinimalDirectedEdges:function(t){for(var e=null,r=null,o=this.SCANNING_FOR_INCOMING,l=this.resultAreaEdgeList.size()-1;l>=0;l--){var f=this.resultAreaEdgeList.get(l),d=f.getSym();switch(e===null&&f.getEdgeRing()===t&&(e=f),o){case this.SCANNING_FOR_INCOMING:if(d.getEdgeRing()!==t)continue;r=d,o=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(f.getEdgeRing()!==t)continue;r.setNextMin(f),o=this.SCANNING_FOR_INCOMING}}o===this.LINKING_TO_OUTGOING&&(P.isTrue(e!==null,"found null for first outgoing dirEdge"),P.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),r.setNextMin(e))},getOutgoingDegree:function(){if(arguments.length===0){for(var t=0,e=this.iterator();e.hasNext();){var r=e.next();r.isInResult()&&t++}return t}if(arguments.length===1){for(var o=arguments[0],t=0,e=this.iterator();e.hasNext();){var r=e.next();r.getEdgeRing()===o&&t++}return t}},getLabel:function(){return this.label},findCoveredLineEdges:function(){for(var t=x.NONE,e=this.iterator();e.hasNext();){var r=e.next(),o=r.getSym();if(!r.isLineEdge()){if(r.isInResult()){t=x.INTERIOR;break}if(o.isInResult()){t=x.EXTERIOR;break}}}if(t===x.NONE)return null;for(var l=t,e=this.iterator();e.hasNext();){var r=e.next(),o=r.getSym();r.isLineEdge()?r.getEdge().setCovered(l===x.INTERIOR):(r.isInResult()&&(l=x.EXTERIOR),o.isInResult()&&(l=x.INTERIOR))}},computeLabelling:function(t){Hi.prototype.computeLabelling.call(this,t),this.label=new Ht(x.NONE);for(var e=this.iterator();e.hasNext();)for(var r=e.next(),o=r.getEdge(),l=o.getLabel(),f=0;2>f;f++){var d=l.getLocation(f);d!==x.INTERIOR&&d!==x.BOUNDARY||this.label.setLocation(f,x.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return Co}}),w(mr,Vi),h(mr.prototype,{createNode:function(t){return new An(t,new Co)},interfaces_:function(){return[]},getClass:function(){return mr}}),h(xu.prototype,{computeIntersections:function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},interfaces_:function(){return[]},getClass:function(){return xu}}),h(kn.prototype,{isDelete:function(){return this.eventType===kn.DELETE},setDeleteEventIndex:function(t){this.deleteEventIndex=t},getObject:function(){return this.obj},compareTo:function(t){var e=t;return this.xValue<e.xValue?-1:this.xValue>e.xValue?1:this.eventType<e.eventType?-1:this.eventType>e.eventType?1:0},getInsertEvent:function(){return this.insertEvent},isInsert:function(){return this.eventType===kn.INSERT},isSameLabel:function(t){return this.label===null?!1:this.label===t.label},getDeleteEventIndex:function(){return this.deleteEventIndex},interfaces_:function(){return[p]},getClass:function(){return kn}}),kn.INSERT=1,kn.DELETE=2,h(No.prototype,{interfaces_:function(){return[]},getClass:function(){return No}}),h(gi.prototype,{isTrivialIntersection:function(t,e,r,o){if(t===r&&this.li.getIntersectionNum()===1){if(gi.isAdjacentSegments(e,o))return!0;if(t.isClosed()){var l=t.getNumPoints()-1;if(e===0&&o===l||o===0&&e===l)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},setIsDoneIfProperInt:function(t){this.isDoneWhenProperInt=t},hasProperInteriorIntersection:function(){return this.hasProperInterior},isBoundaryPointInternal:function(t,e){for(var r=e.iterator();r.hasNext();){var o=r.next(),l=o.getCoordinate();if(t.isIntersection(l))return!0}return!1},hasProperIntersection:function(){return this.hasProper},hasIntersection:function(){return this._hasIntersection},isDone:function(){return this._isDone},isBoundaryPoint:function(t,e){return e===null?!1:this.isBoundaryPointInternal(t,e[0])?!0:!!this.isBoundaryPointInternal(t,e[1])},setBoundaryNodes:function(t,e){this.bdyNodes=new Array(2).fill(null),this.bdyNodes[0]=t,this.bdyNodes[1]=e},addIntersections:function(t,e,r,o){if(t===r&&e===o)return null;this.numTests++;var l=t.getCoordinates()[e],f=t.getCoordinates()[e+1],d=r.getCoordinates()[o],m=r.getCoordinates()[o+1];this.li.computeIntersection(l,f,d,m),this.li.hasIntersection()&&(this.recordIsolated&&(t.setIsolated(!1),r.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(t,e,r,o)||(this._hasIntersection=!0,!this.includeProper&&this.li.isProper()||(t.addIntersections(this.li,e,0),r.addIntersections(this.li,o,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).copy(),this.hasProper=!0,this.isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))},interfaces_:function(){return[]},getClass:function(){return gi}}),gi.isAdjacentSegments=function(t,e){return Math.abs(t-e)===1},w(So,No),h(So.prototype,{prepareEvents:function(){wn.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},computeIntersections:function(){if(arguments.length===1){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var r=this.events.get(e);if(r.isInsert()&&this.processOverlaps(e,r.getDeleteEventIndex(),r,t),t.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof gi&&V(arguments[0],N)&&V(arguments[1],N)){var o=arguments[0],l=arguments[1],f=arguments[2];this.addEdges(o,o),this.addEdges(l,l),this.computeIntersections(f)}else if(typeof arguments[2]=="boolean"&&V(arguments[0],N)&&arguments[1]instanceof gi){var d=arguments[0],m=arguments[1],E=arguments[2];E?this.addEdges(d,null):this.addEdges(d),this.computeIntersections(m)}}},addEdge:function(t,e){for(var r=t.getMonotoneChainEdge(),o=r.getStartIndexes(),l=0;l<o.length-1;l++){var f=new xu(r,l),d=new kn(e,r.getMinX(l),f);this.events.add(d),this.events.add(new kn(r.getMaxX(l),d))}},processOverlaps:function(t,e,r,o){for(var l=r.getObject(),f=t;e>f;f++){var d=this.events.get(f);if(d.isInsert()){var m=d.getObject();r.isSameLabel(d)||(l.computeIntersections(m,o),this.nOverlaps++)}}},addEdges:function(){if(arguments.length===1)for(var t=arguments[0],e=t.iterator();e.hasNext();){var r=e.next();this.addEdge(r,r)}else if(arguments.length===2)for(var o=arguments[0],l=arguments[1],e=o.iterator();e.hasNext();){var r=e.next();this.addEdge(r,l)}},interfaces_:function(){return[]},getClass:function(){return So}}),h(Zi.prototype,{getMin:function(){return this.min},intersects:function(t,e){return!(this.min>e||this.max<t)},getMax:function(){return this.max},toString:function(){return ge.toLineString(new C(this.min,0),new C(this.max,0))},interfaces_:function(){return[]},getClass:function(){return Zi}}),h(Lu.prototype,{compare:function(t,e){var r=t,o=e,l=(r.min+r.max)/2,f=(o.min+o.max)/2;return f>l?-1:l>f?1:0},interfaces_:function(){return[y]},getClass:function(){return Lu}}),Zi.NodeComparator=Lu,w(To,Zi),h(To.prototype,{query:function(t,e,r){return this.intersects(t,e)?void r.visitItem(this.item):null},interfaces_:function(){return[]},getClass:function(){return To}}),w(Po,Zi),h(Po.prototype,{buildExtent:function(t,e){this.min=Math.min(t.min,e.min),this.max=Math.max(t.max,e.max)},query:function(t,e,r){return this.intersects(t,e)?(this.node1!==null&&this.node1.query(t,e,r),void(this.node2!==null&&this.node2.query(t,e,r))):null},interfaces_:function(){return[]},getClass:function(){return Po}}),h(Eu.prototype,{buildTree:function(){wn.sort(this.leaves,new IntervalRTreeNode.NodeComparator);for(var t=this.leaves,e=null,r=new b;;){if(this.buildLevel(t,r),r.size()===1)return r.get(0);e=t,t=r,r=e}},insert:function(t,e,r){if(this.root!==null)throw new IllegalStateException("Index cannot be added to once it has been queried");this.leaves.add(new To(t,e,r))},query:function(t,e,r){this.init(),this.root.query(t,e,r)},buildRoot:function(){return this.root!==null?null:void(this.root=this.buildTree())},printNode:function(t){Et.out.println(ge.toLineString(new C(t.min,this.level),new C(t.max,this.level)))},init:function(){return this.root!==null?null:void this.buildRoot()},buildLevel:function(t,e){this.level++,e.clear();for(var r=0;r<t.size();r+=2){var o=t.get(r),l=r+1<t.size()?t.get(r):null;if(l===null)e.add(o);else{var f=new Po(t.get(r),t.get(r+1));e.add(f)}}},interfaces_:function(){return[]},getClass:function(){return Eu}}),h(de.prototype,{filter:function(t){if(this.isForcedToLineString&&t instanceof Ut){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this.lines.add(e),null}t instanceof st&&this.lines.add(t)},setForceToLineString:function(t){this.isForcedToLineString=t},interfaces_:function(){return[De]},getClass:function(){return de}}),de.getGeometry=function(){if(arguments.length===1){var t=arguments[0];return t.getFactory().buildGeometry(de.getLines(t))}if(arguments.length===2){var e=arguments[0],r=arguments[1];return e.getFactory().buildGeometry(de.getLines(e,r))}},de.getLines=function(){if(arguments.length===1){var t=arguments[0];return de.getLines(t,!1)}if(arguments.length===2){if(V(arguments[0],X)&&V(arguments[1],X)){for(var e=arguments[0],r=arguments[1],o=e.iterator();o.hasNext();){var l=o.next();de.getLines(l,r)}return r}if(arguments[0]instanceof W&&typeof arguments[1]=="boolean"){var f=arguments[0],d=arguments[1],m=new b;return f.apply(new de(m,d)),m}if(arguments[0]instanceof W&&V(arguments[1],X)){var E=arguments[0],S=arguments[1];return E instanceof st?S.add(E):E.apply(new de(S)),S}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&V(arguments[0],X)&&V(arguments[1],X)){for(var R=arguments[0],k=arguments[1],G=arguments[2],o=R.iterator();o.hasNext();){var l=o.next();de.getLines(l,k,G)}return k}if(typeof arguments[2]=="boolean"&&arguments[0]instanceof W&&V(arguments[1],X)){var J=arguments[0],$=arguments[1],et=arguments[2];return J.apply(new de($,et)),$}}},h(bo.prototype,{visitItem:function(t){this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[li]},getClass:function(){return bo}}),h(is.prototype,{locate:function(t){var e=new zi(t),r=new Mo(e);return this.index.query(t.y,t.y,r),e.getLocation()},interfaces_:function(){return[Io]},getClass:function(){return is}}),h(Mo.prototype,{visitItem:function(t){var e=t;this.counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},interfaces_:function(){return[li]},getClass:function(){return Mo}}),h(Oo.prototype,{init:function(t){for(var e=de.getLines(t),r=e.iterator();r.hasNext();){var o=r.next(),l=o.getCoordinates();this.addLine(l)}},addLine:function(t){for(var e=1;e<t.length;e++){var r=new nt(t[e-1],t[e]),o=Math.min(r.p0.y,r.p1.y),l=Math.max(r.p0.y,r.p1.y);this.index.insert(o,l,r)}},query:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],r=new bo;return this.index.query(t,e,r),r.getItems()}if(arguments.length===3){var o=arguments[0],l=arguments[1],f=arguments[2];this.index.query(o,l,f)}},interfaces_:function(){return[]},getClass:function(){return Oo}}),is.SegmentVisitor=Mo,is.IntervalIndexedGeometry=Oo,h(wu.prototype,{getSegmentIndex:function(){return this.segmentIndex},getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},compareTo:function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},isEndPoint:function(t){return this.segmentIndex===0&&this.dist===0?!0:this.segmentIndex===t},toString:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},getDistance:function(){return this.dist},compare:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},interfaces_:function(){return[p]},getClass:function(){return wu}}),h(Iu.prototype,{print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){var r=e.next();r.print(t)}},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints();for(var e=this.iterator(),r=e.next();e.hasNext();){var o=e.next(),l=this.createSplitEdge(r,o);t.add(l),r=o}},addEndpoints:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},createSplitEdge:function(t,e){var r=e.segmentIndex-t.segmentIndex+2,o=this.edge.pts[e.segmentIndex],l=e.dist>0||!e.coord.equals2D(o);l||r--;var f=new Array(r).fill(null),d=0;f[d++]=new C(t.coord);for(var m=t.segmentIndex+1;m<=e.segmentIndex;m++)f[d++]=this.edge.pts[m];return l&&(f[d]=e.coord),new Ye(f,new Ht(this.edge.label))},add:function(t,e,r){var o=new wu(t,e,r),l=this.nodeMap.get(o);return l!==null?l:(this.nodeMap.put(o,o),o)},isIntersection:function(t){for(var e=this.iterator();e.hasNext();){var r=e.next();if(r.coord.equals(t))return!0}return!1},interfaces_:function(){return[]},getClass:function(){return Iu}}),h(rs.prototype,{getChainStartIndices:function(t){var e=0,r=new b;r.add(new qt(e));do{var o=this.findChainEnd(t,e);r.add(new qt(o)),e=o}while(e<t.length-1);var l=rs.toIntArray(r);return l},findChainEnd:function(t,e){for(var r=pt.quadrant(t[e],t[e+1]),o=e+1;o<t.length;){var l=pt.quadrant(t[o-1],t[o]);if(l!==r)break;o++}return o-1},interfaces_:function(){return[]},getClass:function(){return rs}}),rs.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),r=0;r<e.length;r++)e[r]=t.get(r).intValue();return e},h(Cu.prototype,{getCoordinates:function(){return this.pts},getMaxX:function(t){var e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e>r?e:r},getMinX:function(t){var e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return r>e?e:r},computeIntersectsForChain:function(){if(arguments.length===4){var t=arguments[0],e=arguments[1],r=arguments[2],o=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[r],e.startIndex[r+1],o)}else if(arguments.length===6){var l=arguments[0],f=arguments[1],d=arguments[2],m=arguments[3],E=arguments[4],S=arguments[5],R=this.pts[l],k=this.pts[f],G=d.pts[m],J=d.pts[E];if(f-l===1&&E-m===1)return S.addIntersections(this.e,l,d.e,m),null;if(this.env1.init(R,k),this.env2.init(G,J),!this.env1.intersects(this.env2))return null;var $=Math.trunc((l+f)/2),et=Math.trunc((m+E)/2);$>l&&(et>m&&this.computeIntersectsForChain(l,$,d,m,et,S),E>et&&this.computeIntersectsForChain(l,$,d,et,E,S)),f>$&&(et>m&&this.computeIntersectsForChain($,f,d,m,et,S),E>et&&this.computeIntersectsForChain($,f,d,et,E,S))}},getStartIndexes:function(){return this.startIndex},computeIntersects:function(t,e){for(var r=0;r<this.startIndex.length-1;r++)for(var o=0;o<t.startIndex.length-1;o++)this.computeIntersectsForChain(r,t,o,e)},interfaces_:function(){return[]},getClass:function(){return Cu}}),h(en.prototype,{getDepth:function(t,e){return this.depth[t][e]},setDepth:function(t,e,r){this.depth[t][e]=r},isNull:function(){if(arguments.length===0){for(var t=0;2>t;t++)for(var e=0;3>e;e++)if(this.depth[t][e]!==en.NULL_VALUE)return!1;return!0}if(arguments.length===1){var r=arguments[0];return this.depth[r][1]===en.NULL_VALUE}if(arguments.length===2){var o=arguments[0],l=arguments[1];return this.depth[o][l]===en.NULL_VALUE}},normalize:function(){for(var t=0;2>t;t++)if(!this.isNull(t)){var e=this.depth[t][1];this.depth[t][2]<e&&(e=this.depth[t][2]),0>e&&(e=0);for(var r=1;3>r;r++){var o=0;this.depth[t][r]>e&&(o=1),this.depth[t][r]=o}}},getDelta:function(t){return this.depth[t][U.RIGHT]-this.depth[t][U.LEFT]},getLocation:function(t,e){return this.depth[t][e]<=0?x.EXTERIOR:x.INTERIOR},toString:function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]},add:function(){if(arguments.length===1)for(var t=arguments[0],e=0;2>e;e++)for(var r=1;3>r;r++){var o=t.getLocation(e,r);o!==x.EXTERIOR&&o!==x.INTERIOR||(this.isNull(e,r)?this.depth[e][r]=en.depthAtLocation(o):this.depth[e][r]+=en.depthAtLocation(o))}else if(arguments.length===3){var l=arguments[0],f=arguments[1],d=arguments[2];d===x.INTERIOR&&this.depth[l][f]++}},interfaces_:function(){return[]},getClass:function(){return en}}),en.depthAtLocation=function(t){return t===x.EXTERIOR?0:t===x.INTERIOR?1:en.NULL_VALUE},en.NULL_VALUE=-1,w(Ye,fi),h(Ye.prototype,{getDepth:function(){return this.depth},getCollapsedEdge:function(){var t=new Array(2).fill(null);t[0]=this.pts[0],t[1]=this.pts[1];var e=new Ye(t,Ht.toLineLabel(this.label));return e},isIsolated:function(){return this._isIsolated},getCoordinates:function(){return this.pts},setIsolated:function(t){this._isIsolated=t},setName:function(t){this.name=t},equals:function(t){if(!(t instanceof Ye))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var r=!0,o=!0,l=this.pts.length,f=0;f<this.pts.length;f++)if(this.pts[f].equals2D(e.pts[f])||(r=!1),this.pts[f].equals2D(e.pts[--l])||(o=!1),!r&&!o)return!1;return!0},getCoordinate:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var t=arguments[0];return this.pts[t]}},print:function(t){t.print("edge "+this.name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this.label+" "+this.depthDelta)},computeIM:function(t){Ye.updateIM(this.label,t)},isCollapsed:function(){return this.label.isArea()?this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2]):!1},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getMaximumSegmentIndex:function(){return this.pts.length-1},getDepthDelta:function(){return this.depthDelta},getNumPoints:function(){return this.pts.length},printReverse:function(t){t.print("edge "+this.name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},getMonotoneChainEdge:function(){return this.mce===null&&(this.mce=new Cu(this)),this.mce},getEnvelope:function(){if(this.env===null){this.env=new M;for(var t=0;t<this.pts.length;t++)this.env.expandToInclude(this.pts[t])}return this.env},addIntersection:function(t,e,r,o){var l=new C(t.getIntersection(o)),f=e,d=t.getEdgeDistance(r,o),m=f+1;if(m<this.pts.length){var E=this.pts[m];l.equals2D(E)&&(f=m,d=0)}this.eiList.add(l,f,d)},toString:function(){var t=new bt;t.append("edge "+this.name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this.label+" "+this.depthDelta),t.toString()},isPointwiseEqual:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},setDepthDelta:function(t){this.depthDelta=t},getEdgeIntersectionList:function(){return this.eiList},addIntersections:function(t,e,r){for(var o=0;o<t.getIntersectionNum();o++)this.addIntersection(t,e,r,o)},interfaces_:function(){return[]},getClass:function(){return Ye}}),Ye.updateIM=function(){if(arguments.length!==2)return fi.prototype.updateIM.apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,U.ON),t.getLocation(1,U.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,U.LEFT),t.getLocation(1,U.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,U.RIGHT),t.getLocation(1,U.RIGHT),2))},w(be,vn),h(be.prototype,{insertBoundaryPoint:function(t,e){var r=this.nodes.addNode(e),o=r.getLabel(),l=1,f=x.NONE;f=o.getLocation(t,U.ON),f===x.BOUNDARY&&l++;var d=be.determineBoundary(this.boundaryNodeRule,l);o.setLocation(t,d)},computeSelfNodes:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(arguments.length===3){var r=arguments[0],o=arguments[1],l=arguments[2],f=new gi(r,!0,!1);f.setIsDoneIfProperInt(l);var d=this.createEdgeSetIntersector(),m=this.parentGeom instanceof Ut||this.parentGeom instanceof wt||this.parentGeom instanceof ae,E=o||!m;return d.computeIntersections(this.edges,f,E),this.addSelfIntersectionNodes(this.argIndex),f}},computeSplitEdges:function(t){for(var e=this.edges.iterator();e.hasNext();){var r=e.next();r.eiList.addSplitEdges(t)}},computeEdgeIntersections:function(t,e,r){var o=new gi(e,r,!0);o.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes());var l=this.createEdgeSetIntersector();return l.computeIntersections(this.edges,t.edges,o),o},getGeometry:function(){return this.parentGeom},getBoundaryNodeRule:function(){return this.boundaryNodeRule},hasTooFewPoints:function(){return this._hasTooFewPoints},addPoint:function(){if(arguments[0]instanceof Ot){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this.argIndex,e,x.INTERIOR)}else if(arguments[0]instanceof C){var r=arguments[0];this.insertPoint(this.argIndex,r,x.INTERIOR)}},addPolygon:function(t){this.addPolygonRing(t.getExteriorRing(),x.EXTERIOR,x.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var r=t.getInteriorRingN(e);this.addPolygonRing(r,x.INTERIOR,x.EXTERIOR)}},addEdge:function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this.argIndex,e[0],x.BOUNDARY),this.insertPoint(this.argIndex,e[e.length-1],x.BOUNDARY)},addLineString:function(t){var e=Q.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this.invalidPoint=e[0],null;var r=new Ye(e,new Ht(this.argIndex,x.INTERIOR));this.lineEdgeMap.put(t,r),this.insertEdge(r),P.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,e[0]),this.insertBoundaryPoint(this.argIndex,e[e.length-1])},getInvalidPoint:function(){return this.invalidPoint},getBoundaryPoints:function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),r=0,o=t.iterator();o.hasNext();){var l=o.next();e[r++]=l.getCoordinate().copy()}return e},getBoundaryNodes:function(){return this.boundaryNodes===null&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes},addSelfIntersectionNode:function(t,e,r){return this.isBoundaryNode(t,e)?null:void(r===x.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,r))},addPolygonRing:function(t,e,r){if(t.isEmpty())return null;var o=Q.removeRepeatedPoints(t.getCoordinates());if(o.length<4)return this._hasTooFewPoints=!0,this.invalidPoint=o[0],null;var l=e,f=r;H.isCCW(o)&&(l=r,f=e);var d=new Ye(o,new Ht(this.argIndex,x.BOUNDARY,l,f));this.lineEdgeMap.put(t,d),this.insertEdge(d),this.insertPoint(this.argIndex,o[0],x.BOUNDARY)},insertPoint:function(t,e,r){var o=this.nodes.addNode(e),l=o.getLabel();l===null?o.label=new Ht(t,r):l.setLocation(t,r)},createEdgeSetIntersector:function(){return new So},addSelfIntersectionNodes:function(t){for(var e=this.edges.iterator();e.hasNext();)for(var r=e.next(),o=r.getLabel().getLocation(t),l=r.eiList.iterator();l.hasNext();){var f=l.next();this.addSelfIntersectionNode(t,f.coord,o)}},add:function(){if(arguments.length!==1)return vn.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof ae&&(this.useBoundaryDeterminationRule=!1),t instanceof wt)this.addPolygon(t);else if(t instanceof st)this.addLineString(t);else if(t instanceof Ot)this.addPoint(t);else if(t instanceof Se)this.addCollection(t);else if(t instanceof Ne)this.addCollection(t);else if(t instanceof ae)this.addCollection(t);else{if(!(t instanceof ht))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);this.add(r)}},locate:function(t){return V(this.parentGeom,bn)&&this.parentGeom.getNumGeometries()>50?(this.areaPtLocator===null&&(this.areaPtLocator=new is(this.parentGeom)),this.areaPtLocator.locate(t)):this.ptLocator.locate(t,this.parentGeom)},findEdge:function(){if(arguments.length===1){var t=arguments[0];return this.lineEdgeMap.get(t)}return vn.prototype.findEdge.apply(this,arguments)},interfaces_:function(){return[]},getClass:function(){return be}}),be.determineBoundary=function(t,e){return t.isInBoundary(e)?x.BOUNDARY:x.INTERIOR},h(di.prototype,{getArgGeometry:function(t){return this.arg[t].getGeometry()},setComputationPrecision:function(t){this.resultPrecisionModel=t,this.li.setPrecisionModel(this.resultPrecisionModel)},interfaces_:function(){return[]},getClass:function(){return di}}),h(pi.prototype,{compareTo:function(t){var e=t,r=pi.compareOriented(this.pts,this._orientation,e.pts,e._orientation);return r},interfaces_:function(){return[p]},getClass:function(){return pi}}),pi.orientation=function(t){return Q.increasingDirection(t)===1},pi.compareOriented=function(t,e,r,o){for(var l=e?1:-1,f=o?1:-1,d=e?t.length:-1,m=o?r.length:-1,E=e?0:t.length-1,S=o?0:r.length-1;;){var R=t[E].compareTo(r[S]);if(R!==0)return R;E+=l,S+=f;var k=E===d,G=S===m;if(k&&!G)return-1;if(!k&&G)return 1;if(k&&G)return 0}},h(Ro.prototype,{print:function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this.edges.size();e++){var r=this.edges.get(e);e>0&&t.print(","),t.print("(");for(var o=r.getCoordinates(),l=0;l<o.length;l++)l>0&&t.print(","),t.print(o[l].x+" "+o[l].y);t.println(")")}t.print(")  ")},addAll:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},findEdgeIndex:function(t){for(var e=0;e<this.edges.size();e++)if(this.edges.get(e).equals(t))return e;return-1},iterator:function(){return this.edges.iterator()},getEdges:function(){return this.edges},get:function(t){return this.edges.get(t)},findEqualEdge:function(t){var e=new pi(t.getCoordinates()),r=this.ocaMap.get(e);return r},add:function(t){this.edges.add(t);var e=new pi(t.getCoordinates());this.ocaMap.put(e,t)},interfaces_:function(){return[]},getClass:function(){return Ro}}),w(j,di),h(j.prototype,{insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(e!==null){var r=e.getLabel(),o=t.getLabel();e.isPointwiseEqual(t)||(o=new Ht(t.getLabel()),o.flip());var l=e.getDepth();l.isNull()&&l.add(r),l.add(o),r.merge(o)}else this.edgeList.add(t)},getGraph:function(){return this.graph},cancelDuplicateResultEdges:function(){for(var t=this.graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),r=e.getSym();e.isInResult()&&r.isInResult()&&(e.setInResult(!1),r.setInResult(!1))}},isCoveredByLA:function(t){return this.isCovered(t,this.resultLineList)?!0:!!this.isCovered(t,this.resultPolyList)},computeGeometry:function(t,e,r,o){var l=new b;return l.addAll(t),l.addAll(e),l.addAll(r),l.isEmpty()?j.createEmptyResult(o,this.arg[0].getGeometry(),this.arg[1].getGeometry(),this.geomFact):this.geomFact.buildGeometry(l)},mergeSymLabels:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().mergeSymLabels()}},isCovered:function(t,e){for(var r=e.iterator();r.hasNext();){var o=r.next(),l=this.ptLocator.locate(t,o);if(l!==x.EXTERIOR)return!0}return!1},replaceCollapsedEdges:function(){for(var t=new b,e=this.edgeList.iterator();e.hasNext();){var r=e.next();r.isCollapsed()&&(e.remove(),t.add(r.getCollapsedEdge()))}this.edgeList.addAll(t)},updateNodeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),r=e.getEdges().getLabel();e.getLabel().merge(r)}},getResultGeometry:function(t){return this.computeOverlay(t),this.resultGeom},insertUniqueEdges:function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this.insertUniqueEdge(r)}},computeOverlay:function(t){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var e=new b;this.arg[0].computeSplitEdges(e),this.arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),qi.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var r=new wo(this.geomFact);r.add(this.graph),this.resultPolyList=r.getPolygons();var o=new yu(this,this.geomFact,this.ptLocator);this.resultLineList=o.build(t);var l=new _u(this,this.geomFact,this.ptLocator);this.resultPointList=l.build(t),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,t)},labelIncompleteNode:function(t,e){var r=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setLocation(e,r)},copyPoints:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var r=e.next(),o=this.graph.addNode(r.getCoordinate());o.setLabel(t,r.getLabel().getLocation(t))}},findResultAreaEdges:function(t){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var r=e.next(),o=r.getLabel();o.isArea()&&!r.isInteriorAreaEdge()&&j.isResultOfOp(o.getLocation(0,U.RIGHT),o.getLocation(1,U.RIGHT),t)&&r.setInResult(!0)}},computeLabelsFromDepths:function(){for(var t=this.edgeList.iterator();t.hasNext();){var e=t.next(),r=e.getLabel(),o=e.getDepth();if(!o.isNull()){o.normalize();for(var l=0;2>l;l++)r.isNull(l)||!r.isArea()||o.isNull(l)||(o.getDelta(l)===0?r.toLine(l):(P.isTrue(!o.isNull(l,U.LEFT),"depth of LEFT side has not been initialized"),r.setLocation(l,U.LEFT,o.getLocation(l,U.LEFT)),P.isTrue(!o.isNull(l,U.RIGHT),"depth of RIGHT side has not been initialized"),r.setLocation(l,U.RIGHT,o.getLocation(l,U.RIGHT))))}}},computeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()},labelIncompleteNodes:function(){for(var t=0,e=this.graph.getNodes().iterator();e.hasNext();){var r=e.next(),o=r.getLabel();r.isIsolated()&&(t++,o.isNull(0)?this.labelIncompleteNode(r,0):this.labelIncompleteNode(r,1)),r.getEdges().updateLabelling(o)}},isCoveredByA:function(t){return!!this.isCovered(t,this.resultPolyList)},interfaces_:function(){return[]},getClass:function(){return j}}),j.overlayOp=function(t,e,r){var o=new j(t,e),l=o.getResultGeometry(r);return l},j.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return j.createEmptyResult(j.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var r=e;return gr.map(t,{interfaces_:function(){return[MapOp]},map:function(o){return o.intersection(r)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),re.overlayOp(t,e,j.INTERSECTION)},j.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return j.createEmptyResult(j.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),re.overlayOp(t,e,j.SYMDIFFERENCE)},j.resultDimension=function(t,e,r){var o=e.getDimension(),l=r.getDimension(),f=-1;switch(t){case j.INTERSECTION:f=Math.min(o,l);break;case j.UNION:f=Math.max(o,l);break;case j.DIFFERENCE:f=o;break;case j.SYMDIFFERENCE:f=Math.max(o,l)}return f},j.createEmptyResult=function(t,e,r,o){var l=null;switch(j.resultDimension(t,e,r)){case-1:l=o.createGeometryCollection(new Array(0).fill(null));break;case 0:l=o.createPoint();break;case 1:l=o.createLineString();break;case 2:l=o.createPolygon()}return l},j.difference=function(t,e){return t.isEmpty()?j.createEmptyResult(j.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),re.overlayOp(t,e,j.DIFFERENCE))},j.isResultOfOp=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],r=t.getLocation(0),o=t.getLocation(1);return j.isResultOfOp(r,o,e)}if(arguments.length===3){var l=arguments[0],f=arguments[1],d=arguments[2];switch(l===x.BOUNDARY&&(l=x.INTERIOR),f===x.BOUNDARY&&(f=x.INTERIOR),d){case j.INTERSECTION:return l===x.INTERIOR&&f===x.INTERIOR;case j.UNION:return l===x.INTERIOR||f===x.INTERIOR;case j.DIFFERENCE:return l===x.INTERIOR&&f!==x.INTERIOR;case j.SYMDIFFERENCE:return l===x.INTERIOR&&f!==x.INTERIOR||l!==x.INTERIOR&&f===x.INTERIOR}return!1}},j.INTERSECTION=1,j.UNION=2,j.DIFFERENCE=3,j.SYMDIFFERENCE=4,h(We.prototype,{selfSnap:function(t){var e=new xe(t),r=e.snapTo(t,this.snapTolerance);return r},removeCommonBits:function(t){this.cbr=new Yr,this.cbr.add(t[0]),this.cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this.cbr.removeCommonBits(t[0].copy()),e[1]=this.cbr.removeCommonBits(t[1].copy()),e},prepareResult:function(t){return this.cbr.addCommonBits(t),t},getResultGeometry:function(t){var e=this.snap(this.geom),r=j.overlayOp(e[0],e[1],t);return this.prepareResult(r)},checkValid:function(t){t.isValid()||Et.out.println("Snapped geometry is invalid")},computeSnapTolerance:function(){this.snapTolerance=xe.computeOverlaySnapTolerance(this.geom[0],this.geom[1])},snap:function(t){var e=this.removeCommonBits(t),r=xe.snap(e[0],e[1],this.snapTolerance);return r},interfaces_:function(){return[]},getClass:function(){return We}}),We.overlayOp=function(t,e,r){var o=new We(t,e);return o.getResultGeometry(r)},We.union=function(t,e){return We.overlayOp(t,e,j.UNION)},We.intersection=function(t,e){return We.overlayOp(t,e,j.INTERSECTION)},We.symDifference=function(t,e){return We.overlayOp(t,e,j.SYMDIFFERENCE)},We.difference=function(t,e){return We.overlayOp(t,e,j.DIFFERENCE)},h(re.prototype,{getResultGeometry:function(t){var e=null,r=!1,o=null;try{e=j.overlayOp(this.geom[0],this.geom[1],t);var l=!0;l&&(r=!0)}catch(f){if(!(f instanceof I))throw f;o=f}finally{}if(!r)try{e=We.overlayOp(this.geom[0],this.geom[1],t)}catch(f){throw f instanceof I?o:f}finally{}return e},interfaces_:function(){return[]},getClass:function(){return re}}),re.overlayOp=function(t,e,r){var o=new re(t,e);return o.getResultGeometry(r)},re.union=function(t,e){return re.overlayOp(t,e,j.UNION)},re.intersection=function(t,e){return re.overlayOp(t,e,j.INTERSECTION)},re.symDifference=function(t,e){return re.overlayOp(t,e,j.SYMDIFFERENCE)},re.difference=function(t,e){return re.overlayOp(t,e,j.DIFFERENCE)},h(nn.prototype,{addPolygon:function(t){if(t.isEmpty())return null;var e=null,r=0,o=this.horizontalBisector(t);if(o.getLength()===0)r=0,e=o.getCoordinate();else{var l=re.overlayOp(o,t,j.INTERSECTION),f=this.widestGeometry(l);r=f.getEnvelopeInternal().getWidth(),e=nn.centre(f.getEnvelopeInternal())}(this.interiorPoint===null||r>this.maxWidth)&&(this.interiorPoint=e,this.maxWidth=r)},getInteriorPoint:function(){return this.interiorPoint},widestGeometry:function(){if(arguments[0]instanceof ht){var e=arguments[0];if(e.isEmpty())return e;for(var r=e.getGeometryN(0),o=1;o<e.getNumGeometries();o++)e.getGeometryN(o).getEnvelopeInternal().getWidth()>r.getEnvelopeInternal().getWidth()&&(r=e.getGeometryN(o));return r}if(arguments[0]instanceof W){var l=arguments[0];return l instanceof ht?this.widestGeometry(l):l}},horizontalBisector:function(t){var e=t.getEnvelopeInternal(),r=vr.getBisectorY(t);return this.factory.createLineString([new C(e.getMinX(),r),new C(e.getMaxX(),r)])},add:function(t){if(t instanceof wt)this.addPolygon(t);else if(t instanceof ht)for(var e=t,r=0;r<e.getNumGeometries();r++)this.add(e.getGeometryN(r))},interfaces_:function(){return[]},getClass:function(){return nn}}),nn.centre=function(t){return new C(nn.avg(t.getMinX(),t.getMaxX()),nn.avg(t.getMinY(),t.getMaxY()))},nn.avg=function(t,e){return(t+e)/2},h(vr.prototype,{updateInterval:function(t){t<=this.centreY?t>this.loY&&(this.loY=t):t>this.centreY&&t<this.hiY&&(this.hiY=t)},getBisectorY:function(){this.process(this.poly.getExteriorRing());for(var t=0;t<this.poly.getNumInteriorRing();t++)this.process(this.poly.getInteriorRingN(t));var e=nn.avg(this.hiY,this.loY);return e},process:function(t){for(var e=t.getCoordinateSequence(),r=0;r<e.size();r++){var o=e.getY(r);this.updateInterval(o)}},interfaces_:function(){return[]},getClass:function(){return vr}}),vr.getBisectorY=function(t){var e=new vr(t);return e.getBisectorY()},nn.SafeBisectorFinder=vr,h(Do.prototype,{addEndpoints:function(){if(arguments[0]instanceof W){var t=arguments[0];if(t instanceof st)this.addEndpoints(t.getCoordinates());else if(t instanceof ht)for(var e=t,r=0;r<e.getNumGeometries();r++)this.addEndpoints(e.getGeometryN(r))}else if(arguments[0]instanceof Array){var o=arguments[0];this.add(o[0]),this.add(o[o.length-1])}},getInteriorPoint:function(){return this.interiorPoint},addInterior:function(){if(arguments[0]instanceof W){var t=arguments[0];if(t instanceof st)this.addInterior(t.getCoordinates());else if(t instanceof ht)for(var e=t,r=0;r<e.getNumGeometries();r++)this.addInterior(e.getGeometryN(r))}else if(arguments[0]instanceof Array)for(var o=arguments[0],r=1;r<o.length-1;r++)this.add(o[r])},add:function(t){var e=t.distance(this.centroid);e<this.minDistance&&(this.interiorPoint=new C(t),this.minDistance=e)},interfaces_:function(){return[]},getClass:function(){return Do}}),h(Ao.prototype,{getInteriorPoint:function(){return this.interiorPoint},add:function(){if(arguments[0]instanceof W){var t=arguments[0];if(t instanceof Ot)this.add(t.getCoordinate());else if(t instanceof ht)for(var e=t,r=0;r<e.getNumGeometries();r++)this.add(e.getGeometryN(r))}else if(arguments[0]instanceof C){var o=arguments[0],l=o.distance(this.centroid);l<this.minDistance&&(this.interiorPoint=new C(o),this.minDistance=l)}},interfaces_:function(){return[]},getClass:function(){return Ao}}),h(it.prototype,{interfaces_:function(){return[]},getClass:function(){return it}}),it.toDegrees=function(t){return 180*t/Math.PI},it.normalize=function(t){for(;t>Math.PI;)t-=it.PI_TIMES_2;for(;t<=-Math.PI;)t+=it.PI_TIMES_2;return t},it.angle=function(){if(arguments.length===1){var t=arguments[0];return Math.atan2(t.y,t.x)}if(arguments.length===2){var e=arguments[0],r=arguments[1],o=r.x-e.x,l=r.y-e.y;return Math.atan2(l,o)}},it.isAcute=function(t,e,r){var o=t.x-e.x,l=t.y-e.y,f=r.x-e.x,d=r.y-e.y,m=o*f+l*d;return m>0},it.isObtuse=function(t,e,r){var o=t.x-e.x,l=t.y-e.y,f=r.x-e.x,d=r.y-e.y,m=o*f+l*d;return 0>m},it.interiorAngle=function(t,e,r){var o=it.angle(e,t),l=it.angle(e,r);return Math.abs(l-o)},it.normalizePositive=function(t){if(0>t){for(;0>t;)t+=it.PI_TIMES_2;t>=it.PI_TIMES_2&&(t=0)}else{for(;t>=it.PI_TIMES_2;)t-=it.PI_TIMES_2;0>t&&(t=0)}return t},it.angleBetween=function(t,e,r){var o=it.angle(e,t),l=it.angle(e,r);return it.diff(o,l)},it.diff=function(t,e){var r=null;return r=e>t?e-t:t-e,r>Math.PI&&(r=2*Math.PI-r),r},it.toRadians=function(t){return t*Math.PI/180},it.getTurn=function(t,e){var r=Math.sin(e-t);return r>0?it.COUNTERCLOCKWISE:0>r?it.CLOCKWISE:it.NONE},it.angleBetweenOriented=function(t,e,r){var o=it.angle(e,t),l=it.angle(e,r),f=l-o;return f<=-Math.PI?f+it.PI_TIMES_2:f>Math.PI?f-it.PI_TIMES_2:f},it.PI_TIMES_2=2*Math.PI,it.PI_OVER_2=Math.PI/2,it.PI_OVER_4=Math.PI/4,it.COUNTERCLOCKWISE=H.COUNTERCLOCKWISE,it.CLOCKWISE=H.CLOCKWISE,it.NONE=H.COLLINEAR,h(Tt.prototype,{area:function(){return Tt.area(this.p0,this.p1,this.p2)},signedArea:function(){return Tt.signedArea(this.p0,this.p1,this.p2)},interpolateZ:function(t){if(t===null)throw new c;return Tt.interpolateZ(t,this.p0,this.p1,this.p2)},longestSideLength:function(){return Tt.longestSideLength(this.p0,this.p1,this.p2)},isAcute:function(){return Tt.isAcute(this.p0,this.p1,this.p2)},circumcentre:function(){return Tt.circumcentre(this.p0,this.p1,this.p2)},area3D:function(){return Tt.area3D(this.p0,this.p1,this.p2)},centroid:function(){return Tt.centroid(this.p0,this.p1,this.p2)},inCentre:function(){return Tt.inCentre(this.p0,this.p1,this.p2)},interfaces_:function(){return[]},getClass:function(){return Tt}}),Tt.area=function(t,e,r){return Math.abs(((r.x-t.x)*(e.y-t.y)-(e.x-t.x)*(r.y-t.y))/2)},Tt.signedArea=function(t,e,r){return((r.x-t.x)*(e.y-t.y)-(e.x-t.x)*(r.y-t.y))/2},Tt.det=function(t,e,r,o){return t*o-e*r},Tt.interpolateZ=function(t,e,r,o){var l=e.x,f=e.y,d=r.x-l,m=o.x-l,E=r.y-f,S=o.y-f,R=d*S-m*E,k=t.x-l,G=t.y-f,J=(S*k-m*G)/R,$=(-E*k+d*G)/R,et=e.z+J*(r.z-e.z)+$*(o.z-e.z);return et},Tt.longestSideLength=function(t,e,r){var o=t.distance(e),l=e.distance(r),f=r.distance(t),d=o;return l>d&&(d=l),f>d&&(d=f),d},Tt.isAcute=function(t,e,r){return it.isAcute(t,e,r)&&it.isAcute(e,r,t)?!!it.isAcute(r,t,e):!1},Tt.circumcentre=function(t,e,r){var o=r.x,l=r.y,f=t.x-o,d=t.y-l,m=e.x-o,E=e.y-l,S=2*Tt.det(f,d,m,E),R=Tt.det(d,f*f+d*d,E,m*m+E*E),k=Tt.det(f,f*f+d*d,m,m*m+E*E),G=o-R/S,J=l+k/S;return new C(G,J)},Tt.perpendicularBisector=function(t,e){var r=e.x-t.x,o=e.y-t.y,l=new fe(t.x+r/2,t.y+o/2,1),f=new fe(t.x-o+r/2,t.y+r+o/2,1);return new fe(l,f)},Tt.angleBisector=function(t,e,r){var o=e.distance(t),l=e.distance(r),f=o/(o+l),d=r.x-t.x,m=r.y-t.y,E=new C(t.x+f*d,t.y+f*m);return E},Tt.area3D=function(t,e,r){var o=e.x-t.x,l=e.y-t.y,f=e.z-t.z,d=r.x-t.x,m=r.y-t.y,E=r.z-t.z,S=l*E-f*m,R=f*d-o*E,k=o*m-l*d,G=S*S+R*R+k*k,J=Math.sqrt(G)/2;return J},Tt.centroid=function(t,e,r){var o=(t.x+e.x+r.x)/3,l=(t.y+e.y+r.y)/3;return new C(o,l)},Tt.inCentre=function(t,e,r){var o=e.distance(r),l=t.distance(r),f=t.distance(e),d=o+l+f,m=(o*t.x+l*e.x+f*r.x)/d,E=(o*t.y+l*e.y+f*r.y)/d;return new C(m,E)},h($n.prototype,{getRadius:function(){return this.compute(),this.radius},getDiameter:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[1];return this.input.getFactory().createLineString([t,e])},getExtremalPoints:function(){return this.compute(),this.extremalPts},computeCirclePoints:function(){if(this.input.isEmpty())return this.extremalPts=new Array(0).fill(null),null;if(this.input.getNumPoints()===1){var r=this.input.getCoordinates();return this.extremalPts=[new C(r[0])],null}var t=this.input.convexHull(),e=t.getCoordinates(),r=e;if(e[0].equals2D(e[e.length-1])&&(r=new Array(e.length-1).fill(null),Q.copyDeep(e,0,r,0,e.length-1)),r.length<=2)return this.extremalPts=Q.copyDeep(r),null;for(var o=$n.lowestPoint(r),l=$n.pointWitMinAngleWithX(r,o),f=0;f<r.length;f++){var d=$n.pointWithMinAngleWithSegment(r,o,l);if(it.isObtuse(o,d,l))return this.extremalPts=[new C(o),new C(l)],null;if(it.isObtuse(d,o,l))o=d;else{if(!it.isObtuse(d,l,o))return this.extremalPts=[new C(o),new C(l),new C(d)],null;l=d}}P.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")},compute:function(){return this.extremalPts!==null?null:(this.computeCirclePoints(),this.computeCentre(),void(this.centre!==null&&(this.radius=this.centre.distance(this.extremalPts[0]))))},getFarthestPoints:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[this.extremalPts.length-1];return this.input.getFactory().createLineString([t,e])},getCircle:function(){if(this.compute(),this.centre===null)return this.input.getFactory().createPolygon();var t=this.input.getFactory().createPoint(this.centre);return this.radius===0?t:t.buffer(this.radius)},getCentre:function(){return this.compute(),this.centre},computeCentre:function(){switch(this.extremalPts.length){case 0:this.centre=null;break;case 1:this.centre=this.extremalPts[0];break;case 2:this.centre=new C((this.extremalPts[0].x+this.extremalPts[1].x)/2,(this.extremalPts[0].y+this.extremalPts[1].y)/2);break;case 3:this.centre=Tt.circumcentre(this.extremalPts[0],this.extremalPts[1],this.extremalPts[2])}},interfaces_:function(){return[]},getClass:function(){return $n}}),$n.pointWitMinAngleWithX=function(t,e){for(var r=g.MAX_VALUE,o=null,l=0;l<t.length;l++){var f=t[l];if(f!==e){var d=f.x-e.x,m=f.y-e.y;0>m&&(m=-m);var E=Math.sqrt(d*d+m*m),S=m/E;r>S&&(r=S,o=f)}}return o},$n.lowestPoint=function(t){for(var e=t[0],r=1;r<t.length;r++)t[r].y<e.y&&(e=t[r]);return e},$n.pointWithMinAngleWithSegment=function(t,e,r){for(var o=g.MAX_VALUE,l=null,f=0;f<t.length;f++){var d=t[f];if(d!==e&&d!==r){var m=it.angleBetween(e,d,r);o>m&&(o=m,l=d)}}return l},h(pe.prototype,{getWidthCoordinate:function(){return this.computeMinimumDiameter(),this.minWidthPt},getSupportingSegment:function(){return this.computeMinimumDiameter(),this.inputGeom.getFactory().createLineString([this.minBaseSeg.p0,this.minBaseSeg.p1])},getDiameter:function(){if(this.computeMinimumDiameter(),this.minWidthPt===null)return this.inputGeom.getFactory().createLineString(null);var t=this.minBaseSeg.project(this.minWidthPt);return this.inputGeom.getFactory().createLineString([t,this.minWidthPt])},computeWidthConvex:function(t){t instanceof wt?this.convexHullPts=t.getExteriorRing().getCoordinates():this.convexHullPts=t.getCoordinates(),this.convexHullPts.length===0?(this.minWidth=0,this.minWidthPt=null,this.minBaseSeg=null):this.convexHullPts.length===1?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[0]):this.convexHullPts.length===2||this.convexHullPts.length===3?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[1]):this.computeConvexRingMinDiameter(this.convexHullPts)},computeConvexRingMinDiameter:function(t){this.minWidth=g.MAX_VALUE;for(var e=1,r=new nt,o=0;o<t.length-1;o++)r.p0=t[o],r.p1=t[o+1],e=this.findMaxPerpDistance(t,r,e)},computeMinimumDiameter:function(){if(this.minWidthPt!==null)return null;if(this.isConvex)this.computeWidthConvex(this.inputGeom);else{var t=new Rn(this.inputGeom).getConvexHull();this.computeWidthConvex(t)}},getLength:function(){return this.computeMinimumDiameter(),this.minWidth},findMaxPerpDistance:function(t,e,r){for(var o=e.distancePerpendicular(t[r]),l=o,f=r,d=f;l>=o;)o=l,f=d,d=pe.nextIndex(t,f),l=e.distancePerpendicular(t[d]);return o<this.minWidth&&(this.minPtIndex=f,this.minWidth=o,this.minWidthPt=t[this.minPtIndex],this.minBaseSeg=new nt(e)),f},getMinimumRectangle:function(){if(this.computeMinimumDiameter(),this.minWidth===0)return this.minBaseSeg.p0.equals2D(this.minBaseSeg.p1)?this.inputGeom.getFactory().createPoint(this.minBaseSeg.p0):this.minBaseSeg.toGeometry(this.inputGeom.getFactory());for(var t=this.minBaseSeg.p1.x-this.minBaseSeg.p0.x,e=this.minBaseSeg.p1.y-this.minBaseSeg.p0.y,r=g.MAX_VALUE,o=-g.MAX_VALUE,l=g.MAX_VALUE,f=-g.MAX_VALUE,d=0;d<this.convexHullPts.length;d++){var m=pe.computeC(t,e,this.convexHullPts[d]);m>o&&(o=m),r>m&&(r=m);var E=pe.computeC(-e,t,this.convexHullPts[d]);E>f&&(f=E),l>E&&(l=E)}var S=pe.computeSegmentForLine(-t,-e,f),R=pe.computeSegmentForLine(-t,-e,l),k=pe.computeSegmentForLine(-e,t,o),G=pe.computeSegmentForLine(-e,t,r),J=k.lineIntersection(S),$=G.lineIntersection(S),et=G.lineIntersection(R),Pt=k.lineIntersection(R),Xt=this.inputGeom.getFactory().createLinearRing([J,$,et,Pt,J]);return this.inputGeom.getFactory().createPolygon(Xt,null)},interfaces_:function(){return[]},getClass:function(){return pe}}),pe.nextIndex=function(t,e){return e++,e>=t.length&&(e=0),e},pe.computeC=function(t,e,r){return t*r.y-e*r.x},pe.getMinimumDiameter=function(t){return new pe(t).getDiameter()},pe.getMinimumRectangle=function(t){return new pe(t).getMinimumRectangle()},pe.computeSegmentForLine=function(t,e,r){var o=null,l=null;return Math.abs(e)>Math.abs(t)?(o=new C(0,r/e),l=new C(1,r/e-t/e)):(o=new C(r/t,0),l=new C(r/t-e/t,1)),new nt(o,l)};var Eg=Object.freeze({Centroid:On,CGAlgorithms:H,ConvexHull:Rn,InteriorPointArea:nn,InteriorPointLine:Do,InteriorPointPoint:Ao,RobustLineIntersector:ie,MinimumBoundingCircle:$n,MinimumDiameter:pe});h(mi.prototype,{getResultGeometry:function(){return new ss(this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(0>=t)throw new c;this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return mi}}),mi.densifyPoints=function(t,e,r){for(var o=new nt,l=new O,f=0;f<t.length-1;f++){o.p0=t[f],o.p1=t[f+1],l.add(o.p0,!1);var d=o.getLength(),m=Math.trunc(d/e)+1;if(m>1)for(var E=d/m,S=1;m>S;S++){var R=S*E/d,k=o.pointAlong(R);r.makePrecise(k),l.add(k,!1)}}return l.add(t[t.length-1],!1),l.toCoordinateArray()},mi.densify=function(t,e){var r=new mi(t);return r.setDistanceTolerance(e),r.getResultGeometry()},w(ss,we),h(ss.prototype,{transformMultiPolygon:function(t,e){var r=we.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(r)},transformPolygon:function(t,e){var r=we.prototype.transformPolygon.call(this,t,e);return e instanceof ae?r:this.createValidArea(r)},transformCoordinates:function(t,e){var r=t.toCoordinateArray(),o=mi.densifyPoints(r,this.distanceTolerance,e.getPrecisionModel());return e instanceof st&&o.length===1&&(o=new Array(0).fill(null)),this.factory.getCoordinateSequenceFactory().create(o)},createValidArea:function(t){return t.buffer(0)},interfaces_:function(){return[]},getClass:function(){return ss}}),mi.DensifyTransformer=ss;var wg=Object.freeze({Densifier:mi});h(Fn.prototype,{find:function(t){var e=this;do{if(e===null)return null;if(e.dest().equals2D(t))return e;e=e.oNext()}while(e!==this);return null},dest:function(){return this._sym._orig},oNext:function(){return this._sym._next},insert:function(t){if(this.oNext()===this)return this.insertAfter(t),null;var e=this.compareTo(t),r=this;do{var o=r.oNext(),l=o.compareTo(t);if(l!==e||o===this)return r.insertAfter(t),null;r=o}while(r!==this);P.shouldNeverReachHere()},insertAfter:function(t){P.equals(this._orig,t.orig());var e=this.oNext();this._sym.setNext(t),t.sym().setNext(e)},degree:function(){var e=0,r=this;do e++,r=r.oNext();while(r!==this);return e},equals:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this._orig.equals2D(t)&&this._sym._orig.equals(e)}},deltaY:function(){return this._sym._orig.y-this._orig.y},sym:function(){return this._sym},prev:function(){return this._sym.next()._sym},compareAngularDirection:function(t){var e=this.deltaX(),r=this.deltaY(),o=t.deltaX(),l=t.deltaY();if(e===o&&r===l)return 0;var f=pt.quadrant(e,r),d=pt.quadrant(o,l);return f>d?1:d>f?-1:H.computeOrientation(t._orig,t.dest(),this.dest())},prevNode:function(){for(var t=this;t.degree()===2;)if(t=t.prev(),t===this)return null;return t},compareTo:function(t){var e=t,r=this.compareAngularDirection(e);return r},next:function(){return this._next},setSym:function(t){this._sym=t},orig:function(){return this._orig},toString:function(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"},setNext:function(t){this._next=t},init:function(t){this.setSym(t),t.setSym(this),this.setNext(t),t.setNext(this)},deltaX:function(){return this._sym._orig.x-this._orig.x},interfaces_:function(){return[]},getClass:function(){return Fn}}),Fn.init=function(t,e){if(t._sym!==null||e._sym!==null||t._next!==null||e._next!==null)throw new IllegalStateException("Edges are already initialized");return t.init(e),t},Fn.create=function(t,e){var r=new Fn(t),o=new Fn(e);return r.init(o),r},w(Me,Fn),h(Me.prototype,{mark:function(){this._isMarked=!0},setMark:function(t){this._isMarked=t},isMarked:function(){return this._isMarked},interfaces_:function(){return[]},getClass:function(){return Me}}),Me.setMarkBoth=function(t,e){t.setMark(e),t.sym().setMark(e)},Me.isMarked=function(t){return t.isMarked()},Me.setMark=function(t,e){t.setMark(e)},Me.markBoth=function(t){t.mark(),t.sym().mark()},Me.mark=function(t){t.mark()},h(yr.prototype,{insert:function(t,e,r){var o=this.create(t,e);r!==null?r.insert(o):this.vertexMap.put(t,o);var l=this.vertexMap.get(e);return l!==null?l.insert(o.sym()):this.vertexMap.put(e,o.sym()),o},create:function(t,e){var r=this.createEdge(t),o=this.createEdge(e);return Fn.init(r,o),r},createEdge:function(t){return new Fn(t)},addEdge:function(t,e){if(!yr.isValidEdge(t,e))return null;var r=this.vertexMap.get(t),o=null;if(r!==null&&(o=r.find(e)),o!==null)return o;var l=this.insert(t,e,r);return l},getVertexEdges:function(){return this.vertexMap.values()},findEdge:function(t,e){var r=this.vertexMap.get(t);return r===null?null:r.find(e)},interfaces_:function(){return[]},getClass:function(){return yr}}),yr.isValidEdge=function(t,e){var r=e.compareTo(t);return r!==0},w(ko,Me),h(ko.prototype,{setStart:function(){this._isStart=!0},isStart:function(){return this._isStart},interfaces_:function(){return[]},getClass:function(){return ko}}),w(Fo,yr),h(Fo.prototype,{createEdge:function(t){return new ko(t)},interfaces_:function(){return[]},getClass:function(){return Fo}}),h(os.prototype,{addLine:function(t){this.lines.add(this.factory.createLineString(t.toCoordinateArray()))},updateRingStartEdge:function(t){return t.isStart()||(t=t.sym(),t.isStart())?this.ringStartEdge===null?(this.ringStartEdge=t,null):void(t.orig().compareTo(this.ringStartEdge.orig())<0&&(this.ringStartEdge=t)):null},getResult:function(){return this.result===null&&this.computeResult(),this.result},process:function(t){var e=t.prevNode();e===null&&(e=t),this.stackEdges(e),this.buildLines()},buildRing:function(t){var e=new O,r=t;for(e.add(r.orig().copy(),!1);r.sym().degree()===2;){var o=r.next();if(o===t)break;e.add(o.orig().copy(),!1),r=o}e.add(r.dest().copy(),!1),this.addLine(e)},buildLine:function(t){var e=new O,r=t;for(this.ringStartEdge=null,Me.markBoth(r),e.add(r.orig().copy(),!1);r.sym().degree()===2;){this.updateRingStartEdge(r);var o=r.next();if(o===t)return this.buildRing(this.ringStartEdge),null;e.add(o.orig().copy(),!1),r=o,Me.markBoth(r)}e.add(r.dest().copy(),!1),this.stackEdges(r.sym()),this.addLine(e)},stackEdges:function(t){var e=t;do Me.isMarked(e)||this.nodeEdgeStack.add(e),e=e.oNext();while(e!==t)},computeResult:function(){for(var t=this.graph.getVertexEdges(),e=t.iterator();e.hasNext();){var r=e.next();Me.isMarked(r)||this.process(r)}this.result=this.factory.buildGeometry(this.lines)},buildLines:function(){for(;!this.nodeEdgeStack.empty();){var t=this.nodeEdgeStack.pop();Me.isMarked(t)||this.buildLine(t)}},add:function(){if(arguments[0]instanceof W){var t=arguments[0];t.apply({interfaces_:function(){return[De]},filter:function(E){E instanceof st&&this.add(E)}})}else if(V(arguments[0],X))for(var e=arguments[0],r=e.iterator();r.hasNext();){var o=r.next();this.add(o)}else if(arguments[0]instanceof st){var l=arguments[0];this.factory===null&&(this.factory=l.getFactory());for(var f=l.getCoordinateSequence(),d=!1,r=1;r<f.size();r++){var m=this.graph.addEdge(f.getCoordinate(r-1),f.getCoordinate(r));m!==null&&(d||(m.setStart(),d=!0))}}},interfaces_:function(){return[]},getClass:function(){return os}}),os.dissolve=function(t){var e=new os;return e.add(t),e.getResult()};var Ig=Object.freeze({LineDissolver:os});h(yn.prototype,{hasChildren:function(){for(var t=0;4>t;t++)if(this.subnode[t]!==null)return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;4>e;e++)this.subnode[e]!==null&&this.subnode[e].addAllItems(t);return t},getNodeCount:function(){for(var t=0,e=0;4>e;e++)this.subnode[e]!==null&&(t+=this.subnode[e].size());return t+1},size:function(){for(var t=0,e=0;4>e;e++)this.subnode[e]!==null&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){if(!this.isSearchMatch(t))return null;e.addAll(this.items);for(var r=0;4>r;r++)this.subnode[r]!==null&&this.subnode[r].addAllItemsFromOverlapping(t,e)},visitItems:function(t,e){for(var r=this.items.iterator();r.hasNext();)e.visitItem(r.next())},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var r=!1,o=0;4>o;o++)if(this.subnode[o]!==null&&(r=this.subnode[o].remove(t,e))){this.subnode[o].isPrunable()&&(this.subnode[o]=null);break}return r||(r=this.items.remove(e))},visit:function(t,e){if(!this.isSearchMatch(t))return null;this.visitItems(t,e);for(var r=0;4>r;r++)this.subnode[r]!==null&&this.subnode[r].visit(t,e)},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;4>e;e++)if(this.subnode[e]!==null){var r=this.subnode[e].depth();r>t&&(t=r)}return t+1},isEmpty:function(){var e=!0;this.items.isEmpty()||(e=!1);for(var r=0;4>r;r++)this.subnode[r]!==null&&(this.subnode[r].isEmpty()||(e=!1));return e},add:function(t){this.items.add(t)},interfaces_:function(){return[_]},getClass:function(){return yn}}),yn.getSubnodeIndex=function(t,e,r){var o=-1;return t.getMinX()>=e&&(t.getMinY()>=r&&(o=3),t.getMaxY()<=r&&(o=1)),t.getMaxX()<=e&&(t.getMinY()>=r&&(o=2),t.getMaxY()<=r&&(o=0)),o},Xi.exponent=function(t){return vg(64,t)-1023},Xi.powerOf2=function(t){return Math.pow(2,t)},h(as.prototype,{getLevel:function(){return this.level},computeKey:function(){if(arguments.length===1){var t=arguments[0];for(this.level=as.computeQuadLevel(t),this.env=new M,this.computeKey(this.level,t);!this.env.contains(t);)this.level+=1,this.computeKey(this.level,t)}else if(arguments.length===2){var e=arguments[0],r=arguments[1],o=Xi.powerOf2(e);this.pt.x=Math.floor(r.getMinX()/o)*o,this.pt.y=Math.floor(r.getMinY()/o)*o,this.env.init(this.pt.x,this.pt.x+o,this.pt.y,this.pt.y+o)}},getEnvelope:function(){return this.env},getCentre:function(){return new C((this.env.getMinX()+this.env.getMaxX())/2,(this.env.getMinY()+this.env.getMaxY())/2)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return as}}),as.computeQuadLevel=function(t){var e=t.getWidth(),r=t.getHeight(),o=e>r?e:r,l=Xi.exponent(o)+1;return l},w(Qn,yn),h(Qn.prototype,{find:function(t){var e=yn.getSubnodeIndex(t,this.centrex,this.centrey);if(e===-1)return this;if(this.subnode[e]!==null){var r=this.subnode[e];return r.find(t)}return this},isSearchMatch:function(t){return this.env.intersects(t)},getSubnode:function(t){return this.subnode[t]===null&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getEnvelope:function(){return this.env},getNode:function(t){var e=yn.getSubnodeIndex(t,this.centrex,this.centrey);if(e!==-1){var r=this.getSubnode(e);return r.getNode(t)}return this},createSubnode:function(t){var e=0,r=0,o=0,l=0;switch(t){case 0:e=this.env.getMinX(),r=this.centrex,o=this.env.getMinY(),l=this.centrey;break;case 1:e=this.centrex,r=this.env.getMaxX(),o=this.env.getMinY(),l=this.centrey;break;case 2:e=this.env.getMinX(),r=this.centrex,o=this.centrey,l=this.env.getMaxY();break;case 3:e=this.centrex,r=this.env.getMaxX(),o=this.centrey,l=this.env.getMaxY()}var f=new M(e,r,o,l),d=new Qn(f,this.level-1);return d},insertNode:function(t){P.isTrue(this.env===null||this.env.contains(t.env));var e=yn.getSubnodeIndex(t.env,this.centrex,this.centrey);if(t.level===this.level-1)this.subnode[e]=t;else{var r=this.createSubnode(e);r.insertNode(t),this.subnode[e]=r}},interfaces_:function(){return[]},getClass:function(){return Qn}}),Qn.createNode=function(t){var e=new as(t),r=new Qn(e.getEnvelope(),e.getLevel());return r},Qn.createExpanded=function(t,e){var r=new M(e);t!==null&&r.expandToInclude(t.env);var o=Qn.createNode(r);return t!==null&&o.insertNode(t),o},h(vi.prototype,{interfaces_:function(){return[]},getClass:function(){return vi}}),vi.isZeroWidth=function(t,e){var r=e-t;if(r===0)return!0;var o=Math.max(Math.abs(t),Math.abs(e)),l=r/o,f=Xi.exponent(l);return f<=vi.MIN_BINARY_EXPONENT},vi.MIN_BINARY_EXPONENT=-50,w(Yi,yn),h(Yi.prototype,{insert:function(t,e){var r=yn.getSubnodeIndex(t,Yi.origin.x,Yi.origin.y);if(r===-1)return this.add(e),null;var o=this.subnode[r];if(o===null||!o.getEnvelope().contains(t)){var l=Qn.createExpanded(o,t);this.subnode[r]=l}this.insertContained(this.subnode[r],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,r){P.isTrue(t.getEnvelope().contains(e));var o=vi.isZeroWidth(e.getMinX(),e.getMaxX()),l=vi.isZeroWidth(e.getMinY(),e.getMaxY()),f=null;f=o||l?t.find(e):t.getNode(e),f.add(r)},interfaces_:function(){return[]},getClass:function(){return Yi}}),Yi.origin=new C(0,0),h(yi.prototype,{size:function(){return this.root!==null?this.root.size():0},insert:function(t,e){this.collectStats(t);var r=yi.ensureExtent(t,this.minExtent);this.root.insert(r,e)},query:function(){if(arguments.length===1){var t=arguments[0],e=new bo;return this.query(t,e),e.getItems()}if(arguments.length===2){var r=arguments[0],o=arguments[1];this.root.visit(r,o)}},queryAll:function(){var t=new b;return this.root.addAllItems(t),t},remove:function(t,e){var r=yi.ensureExtent(t,this.minExtent);return this.root.remove(r,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e);var r=t.getHeight();r<this.minExtent&&r>0&&(this.minExtent=r)},depth:function(){return this.root!==null?this.root.depth():0},isEmpty:function(){return this.root===null},interfaces_:function(){return[_o,_]},getClass:function(){return yi}}),yi.ensureExtent=function(t,e){var r=t.getMinX(),o=t.getMaxX(),l=t.getMinY(),f=t.getMaxY();return r!==o&&l!==f?t:(r===o&&(r-=e/2,o=r+e/2),l===f&&(l-=e/2,f=l+e/2),new M(r,o,l,f))},yi.serialVersionUID=-7461163625812743e3;var Cg=Object.freeze({Quadtree:yi}),Ng=Object.freeze({STRtree:Rt}),Sg=Object.freeze({quadtree:Cg,strtree:Ng}),Tg=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];h(Nu.prototype,{read:function(t){var e=void 0;e=typeof t=="string"?JSON.parse(t):t;var r=e.type;if(!an[r])throw new Error("Unknown GeoJSON type: "+e.type);return Tg.indexOf(r)!==-1?an[r].apply(this,[e.coordinates]):r==="GeometryCollection"?an[r].apply(this,[e.geometries]):an[r].apply(this,[e])},write:function(t){var e=t.getGeometryType();if(!Un[e])throw new Error("Geometry is not supported");return Un[e].apply(this,[t])}});var an={Feature:function(t){var e={};for(var r in t)e[r]=t[r];if(t.geometry){var o=t.geometry.type;if(!an[o])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=an.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var r=0;r<t.features.length;++r)e.features.push(this.read(t.features[r]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(e){for(var r=[],o=0;o<e.length;++o){var l=e[o];r.push(new C(l[0],l[1]))}return r},bbox:function(t){return this.geometryFactory.createLinearRing([new C(t[0],t[1]),new C(t[2],t[1]),new C(t[2],t[3]),new C(t[0],t[3]),new C(t[0],t[1])])},Point:function(t){var e=new C(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],r=0;r<t.length;++r)e.push(an.Point.apply(this,[t[r]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=an.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],r=0;r<t.length;++r)e.push(an.LineString.apply(this,[t[r]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=an.coordinates.apply(this,[t[0]]),r=this.geometryFactory.createLinearRing(e),o=[],l=1;l<t.length;++l){var f=t[l],d=an.coordinates.apply(this,[f]),m=this.geometryFactory.createLinearRing(d);o.push(m)}return this.geometryFactory.createPolygon(r,o)},MultiPolygon:function(t){for(var e=[],r=0;r<t.length;++r){var o=t[r];e.push(an.Polygon.apply(this,[o]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],r=0;r<t.length;++r){var o=t[r];e.push(this.read(o))}return this.geometryFactory.createGeometryCollection(e)}},Un={coordinate:function(t){return[t.x,t.y]},Point:function(t){var e=Un.coordinate.apply(this,[t.getCoordinate()]);return{type:"Point",coordinates:e}},MultiPoint:function(t){for(var e=[],r=0;r<t.geometries.length;++r){var o=t.geometries[r],l=Un.Point.apply(this,[o]);e.push(l.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],r=t.getCoordinates(),o=0;o<r.length;++o){var l=r[o];e.push(Un.coordinate.apply(this,[l]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],r=0;r<t.geometries.length;++r){var o=t.geometries[r],l=Un.LineString.apply(this,[o]);e.push(l.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],r=Un.LineString.apply(this,[t.shell]);e.push(r.coordinates);for(var o=0;o<t.holes.length;++o){var l=t.holes[o],f=Un.LineString.apply(this,[l]);e.push(f.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],r=0;r<t.geometries.length;++r){var o=t.geometries[r],l=Un.Polygon.apply(this,[o]);e.push(l.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],r=0;r<t.geometries.length;++r){var o=t.geometries[r],l=o.getGeometryType();e.push(Un[l].apply(this,[o]))}return{type:"GeometryCollection",geometries:e}}};h(ll.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===yt.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){var e,r;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,r=t.points.length;r>e;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,r=t.geometries.length;r>e;e++)this.reducePrecision(t.geometries[e])}}),h(cl.prototype,{write:function(t){return this.parser.write(t)}}),h(fl.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===yt.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(var e=0,r=t.points.coordinates.length;r>e;e++)this.precisionModel.makePrecise(t.points.coordinates[e]);else if(t.geometries)for(var o=0,l=t.geometries.length;l>o;o++)this.reducePrecision(t.geometries[o])}}),h(gl.prototype,{read:function(t){return t instanceof ol.geom.Point?this.convertFromPoint(t):t instanceof ol.geom.LineString?this.convertFromLineString(t):t instanceof ol.geom.LinearRing?this.convertFromLinearRing(t):t instanceof ol.geom.Polygon?this.convertFromPolygon(t):t instanceof ol.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof ol.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof ol.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof ol.geom.GeometryCollection?this.convertFromCollection(t):void 0},convertFromPoint:function(t){var e=t.getCoordinates();return this.geometryFactory.createPoint(new C(e[0],e[1]))},convertFromLineString:function(t){return this.geometryFactory.createLineString(t.getCoordinates().map(function(e){return new C(e[0],e[1])}))},convertFromLinearRing:function(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map(function(e){return new C(e[0],e[1])}))},convertFromPolygon:function(t){for(var e=t.getLinearRings(),r=null,o=[],l=0;l<e.length;l++){var f=this.convertFromLinearRing(e[l]);l===0?r=f:o.push(f)}return this.geometryFactory.createPolygon(r,o)},convertFromMultiPoint:function(t){var e=t.getPoints().map(function(r){return this.convertFromPoint(r)},this);return this.geometryFactory.createMultiPoint(e)},convertFromMultiLineString:function(t){var e=t.getLineStrings().map(function(r){return this.convertFromLineString(r)},this);return this.geometryFactory.createMultiLineString(e)},convertFromMultiPolygon:function(t){var e=t.getPolygons().map(function(r){return this.convertFromPolygon(r)},this);return this.geometryFactory.createMultiPolygon(e)},convertFromCollection:function(t){var e=t.getGeometries().map(function(r){return this.read(r)},this);return this.geometryFactory.createGeometryCollection(e)},write:function(t){return t.getGeometryType()==="Point"?this.convertToPoint(t.getCoordinate()):t.getGeometryType()==="LineString"?this.convertToLineString(t):t.getGeometryType()==="LinearRing"?this.convertToLinearRing(t):t.getGeometryType()==="Polygon"?this.convertToPolygon(t):t.getGeometryType()==="MultiPoint"?this.convertToMultiPoint(t):t.getGeometryType()==="MultiLineString"?this.convertToMultiLineString(t):t.getGeometryType()==="MultiPolygon"?this.convertToMultiPolygon(t):t.getGeometryType()==="GeometryCollection"?this.convertToCollection(t):void 0},convertToPoint:function(t){return new ol.geom.Point([t.x,t.y])},convertToLineString:function(t){var e=t.points.coordinates.map(us);return new ol.geom.LineString(e)},convertToLinearRing:function(t){var e=t.points.coordinates.map(us);return new ol.geom.LinearRing(e)},convertToPolygon:function(t){for(var e=[t.shell.points.coordinates.map(us)],r=0;r<t.holes.length;r++)e.push(t.holes[r].points.coordinates.map(us));return new ol.geom.Polygon(e)},convertToMultiPoint:function(t){return new ol.geom.MultiPoint(t.getCoordinates().map(us))},convertToMultiLineString:function(t){for(var e=[],r=0;r<t.geometries.length;r++)e.push(this.convertToLineString(t.geometries[r]).getCoordinates());return new ol.geom.MultiLineString(e)},convertToMultiPolygon:function(t){for(var e=[],r=0;r<t.geometries.length;r++)e.push(this.convertToPolygon(t.geometries[r]).getCoordinates());return new ol.geom.MultiPolygon(e)},convertToCollection:function(t){for(var e=[],r=0;r<t.geometries.length;r++){var o=t.geometries[r];e.push(this.write(o))}return new ol.geom.GeometryCollection(e)}});var Pg=Object.freeze({GeoJSONReader:ll,GeoJSONWriter:cl,OL3Parser:gl,WKTReader:fl,WKTWriter:ge});h(hs.prototype,{rescale:function(){if(V(arguments[0],X))for(var t=arguments[0],e=t.iterator();e.hasNext();){var r=e.next();this.rescale(r.getCoordinates())}else if(arguments[0]instanceof Array){var o=arguments[0];o.length===2&&(new C(o[0]),new C(o[1]));for(var e=0;e<o.length;e++)o[e].x=o[e].x/this.scaleFactor+this.offsetX,o[e].y=o[e].y/this.scaleFactor+this.offsetY;o.length===2&&o[0].equals2D(o[1])&&Et.out.println(o)}},scale:function(){if(V(arguments[0],X)){for(var t=arguments[0],e=new b,r=t.iterator();r.hasNext();){var o=r.next();e.add(new pn(this.scale(o.getCoordinates()),o.getData()))}return e}if(arguments[0]instanceof Array){for(var l=arguments[0],f=new Array(l.length).fill(null),r=0;r<l.length;r++)f[r]=new C(Math.round((l[r].x-this.offsetX)*this.scaleFactor),Math.round((l[r].y-this.offsetY)*this.scaleFactor),l[r].z);var d=Q.removeRepeatedPoints(f);return d}},isIntegerPrecision:function(){return this.scaleFactor===1},getNodedSubstrings:function(){var t=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(t),t},computeNodes:function(t){var e=t;this.isScaled&&(e=this.scale(t)),this.noder.computeNodes(e)},interfaces_:function(){return[$r]},getClass:function(){return hs}});var bg=Object.freeze({MCIndexNoder:ci,ScaledNoder:hs,SegmentString:Jr});h(ls.prototype,{isSimpleMultiPoint:function(t){if(t.isEmpty())return!0;for(var e=new ye,r=0;r<t.getNumGeometries();r++){var o=t.getGeometryN(r),l=o.getCoordinate();if(e.contains(l))return this.nonSimpleLocation=l,!1;e.add(l)}return!0},isSimplePolygonal:function(t){for(var e=de.getLines(t),r=e.iterator();r.hasNext();){var o=r.next();if(!this.isSimpleLinearGeometry(o))return!1}return!0},hasClosedEndpointIntersection:function(t){for(var e=new $t,r=t.getEdgeIterator();r.hasNext();){var o=r.next(),l=(o.getMaximumSegmentIndex(),o.isClosed()),f=o.getCoordinate(0);this.addEndpoint(e,f,l);var d=o.getCoordinate(o.getNumPoints()-1);this.addEndpoint(e,d,l)}for(var r=e.values().iterator();r.hasNext();){var m=r.next();if(m.isClosed&&m.degree!==2)return this.nonSimpleLocation=m.getCoordinate(),!0}return!1},getNonSimpleLocation:function(){return this.nonSimpleLocation},isSimpleLinearGeometry:function(t){if(t.isEmpty())return!0;var e=new be(0,t),r=new ie,o=e.computeSelfNodes(r,!0);return o.hasIntersection()?o.hasProperIntersection()?(this.nonSimpleLocation=o.getProperIntersectionPoint(),!1):this.hasNonEndpointIntersection(e)?!1:!this.isClosedEndpointsInInterior||!this.hasClosedEndpointIntersection(e):!0},hasNonEndpointIntersection:function(t){for(var e=t.getEdgeIterator();e.hasNext();)for(var r=e.next(),o=r.getMaximumSegmentIndex(),l=r.getEdgeIntersectionList().iterator();l.hasNext();){var f=l.next();if(!f.isEndPoint(o))return this.nonSimpleLocation=f.getCoordinate(),!0}return!1},addEndpoint:function(t,e,r){var o=t.get(e);o===null&&(o=new zo(e),t.put(e,o)),o.addEndpoint(r)},computeSimple:function(t){return this.nonSimpleLocation=null,t.isEmpty()?!0:t instanceof st?this.isSimpleLinearGeometry(t):t instanceof Ne?this.isSimpleLinearGeometry(t):t instanceof Se?this.isSimpleMultiPoint(t):V(t,bn)?this.isSimplePolygonal(t):t instanceof ht?this.isSimpleGeometryCollection(t):!0},isSimple:function(){return this.nonSimpleLocation=null,this.computeSimple(this.inputGeom)},isSimpleGeometryCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);if(!this.computeSimple(r))return!1}return!0},interfaces_:function(){return[]},getClass:function(){return ls}}),h(zo.prototype,{addEndpoint:function(t){this.degree++,this.isClosed|=t},getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return zo}}),ls.EndpointInfo=zo,h(mt.prototype,{getEndCapStyle:function(){return this.endCapStyle},isSingleSided:function(){return this._isSingleSided},setQuadrantSegments:function(t){this.quadrantSegments=t,this.quadrantSegments===0&&(this.joinStyle=mt.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=mt.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),0>=t&&(this.quadrantSegments=1),this.joinStyle!==mt.JOIN_ROUND&&(this.quadrantSegments=mt.DEFAULT_QUADRANT_SEGMENTS)},getJoinStyle:function(){return this.joinStyle},setJoinStyle:function(t){this.joinStyle=t},setSimplifyFactor:function(t){this.simplifyFactor=0>t?0:t},getSimplifyFactor:function(){return this.simplifyFactor},getQuadrantSegments:function(){return this.quadrantSegments},setEndCapStyle:function(t){this.endCapStyle=t},getMitreLimit:function(){return this.mitreLimit},setMitreLimit:function(t){this.mitreLimit=t},setSingleSided:function(t){this._isSingleSided=t},interfaces_:function(){return[]},getClass:function(){return mt}}),mt.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},mt.CAP_ROUND=1,mt.CAP_FLAT=2,mt.CAP_SQUARE=3,mt.JOIN_ROUND=1,mt.JOIN_MITRE=2,mt.JOIN_BEVEL=3,mt.DEFAULT_QUADRANT_SEGMENTS=8,mt.DEFAULT_MITRE_LIMIT=5,mt.DEFAULT_SIMPLIFY_FACTOR=.01,h(Su.prototype,{getCoordinate:function(){return this.minCoord},getRightmostSide:function(t,e){var r=this.getRightmostSideOfSegment(t,e);return 0>r&&(r=this.getRightmostSideOfSegment(t,e-1)),0>r&&(this.minCoord=null,this.checkForRightmostCoordinate(t)),r},findRightmostEdgeAtVertex:function(){var t=this.minDe.getEdge().getCoordinates();P.isTrue(this.minIndex>0&&this.minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this.minIndex-1],r=t[this.minIndex+1],o=H.computeOrientation(this.minCoord,r,e),l=!1;(e.y<this.minCoord.y&&r.y<this.minCoord.y&&o===H.COUNTERCLOCKWISE||e.y>this.minCoord.y&&r.y>this.minCoord.y&&o===H.CLOCKWISE)&&(l=!0),l&&(this.minIndex=this.minIndex-1)},getRightmostSideOfSegment:function(t,e){var r=t.getEdge(),o=r.getCoordinates();if(0>e||e+1>=o.length||o[e].y===o[e+1].y)return-1;var l=U.LEFT;return o[e].y<o[e+1].y&&(l=U.RIGHT),l},getEdge:function(){return this.orientedDe},checkForRightmostCoordinate:function(t){for(var e=t.getEdge().getCoordinates(),r=0;r<e.length-1;r++)(this.minCoord===null||e[r].x>this.minCoord.x)&&(this.minDe=t,this.minIndex=r,this.minCoord=e[r])},findRightmostEdgeAtNode:function(){var t=this.minDe.getNode(),e=t.getEdges();this.minDe=e.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)},findEdge:function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();r.isForward()&&this.checkForRightmostCoordinate(r)}P.isTrue(this.minIndex!==0||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),this.minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe;var o=this.getRightmostSide(this.minDe,this.minIndex);o===U.LEFT&&(this.orientedDe=this.minDe.getSym())},interfaces_:function(){return[]},getClass:function(){return Su}}),Go.prototype.addLast=function(t){this.array_.push(t)},Go.prototype.removeFirst=function(){return this.array_.shift()},Go.prototype.isEmpty=function(){return this.array_.length===0},h(Tu.prototype,{clearVisitedEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.setVisited(!1)}},getRightmostCoordinate:function(){return this.rightMostCoord},computeNodeDepth:function(t){for(var e=null,r=t.getEdges().iterator();r.hasNext();){var o=r.next();if(o.isVisited()||o.getSym().isVisited()){e=o;break}}if(e===null)throw new Te("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var r=t.getEdges().iterator();r.hasNext();){var o=r.next();o.setVisited(!0),this.copySymDepths(o)}},computeDepth:function(t){this.clearVisitedEdges();var e=this.finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(U.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},create:function(t){this.addReachable(t),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()},findResultEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(U.RIGHT)>=1&&e.getDepth(U.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},computeDepths:function(t){var e=new oe,r=new Go,o=t.getNode();for(r.addLast(o),e.add(o),t.setVisited(!0);!r.isEmpty();){var l=r.removeFirst();e.add(l),this.computeNodeDepth(l);for(var f=l.getEdges().iterator();f.hasNext();){var d=f.next(),m=d.getSym();if(!m.isVisited()){var E=m.getNode();e.contains(E)||(r.addLast(E),e.add(E))}}}},compareTo:function(t){var e=t;return this.rightMostCoord.x<e.rightMostCoord.x?-1:this.rightMostCoord.x>e.rightMostCoord.x?1:0},getEnvelope:function(){if(this.env===null){for(var t=new M,e=this.dirEdgeList.iterator();e.hasNext();)for(var r=e.next(),o=r.getEdge().getCoordinates(),l=0;l<o.length-1;l++)t.expandToInclude(o[l]);this.env=t}return this.env},addReachable:function(t){var e=new _e;for(e.add(t);!e.empty();){var r=e.pop();this.add(r,e)}},copySymDepths:function(t){var e=t.getSym();e.setDepth(U.LEFT,t.getDepth(U.RIGHT)),e.setDepth(U.RIGHT,t.getDepth(U.LEFT))},add:function(t,e){t.setVisited(!0),this.nodes.add(t);for(var r=t.getEdges().iterator();r.hasNext();){var o=r.next();this.dirEdgeList.add(o);var l=o.getSym(),f=l.getNode();f.isVisited()||e.push(f)}},getNodes:function(){return this.nodes},getDirectedEdges:function(){return this.dirEdgeList},interfaces_:function(){return[p]},getClass:function(){return Tu}}),h(le.prototype,{isDeletable:function(t,e,r,o){var l=this.inputLine[t],f=this.inputLine[e],d=this.inputLine[r];return this.isConcave(l,f,d)&&this.isShallow(l,f,d,o)?this.isShallowSampled(l,f,t,r,o):!1},deleteShallowConcavities:function(){for(var t=1,e=(this.inputLine.length-1,this.findNextNonDeletedIndex(t)),r=this.findNextNonDeletedIndex(e),o=!1;r<this.inputLine.length;){var l=!1;this.isDeletable(t,e,r,this.distanceTol)&&(this.isDeleted[e]=le.DELETE,l=!0,o=!0),t=l?r:e,e=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(e)}return o},isShallowConcavity:function(t,e,r,o){var l=H.computeOrientation(t,e,r),f=l===this.angleOrientation;if(!f)return!1;var d=H.distancePointLine(e,t,r);return o>d},isShallowSampled:function(t,e,r,o,l){var f=Math.trunc((o-r)/le.NUM_PTS_TO_CHECK);0>=f&&(f=1);for(var d=r;o>d;d+=f)if(!this.isShallow(t,e,this.inputLine[d],l))return!1;return!0},isConcave:function(e,r,o){var l=H.computeOrientation(e,r,o),f=l===this.angleOrientation;return f},simplify:function(t){this.distanceTol=Math.abs(t),0>t&&(this.angleOrientation=H.CLOCKWISE),this.isDeleted=new Array(this.inputLine.length).fill(null);var e=!1;do e=this.deleteShallowConcavities();while(e);return this.collapseLine()},findNextNonDeletedIndex:function(t){for(var e=t+1;e<this.inputLine.length&&this.isDeleted[e]===le.DELETE;)e++;return e},isShallow:function(t,e,r,o){var l=H.distancePointLine(e,t,r);return o>l},collapseLine:function(){for(var t=new O,e=0;e<this.inputLine.length;e++)this.isDeleted[e]!==le.DELETE&&t.add(this.inputLine[e]);return t.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return le}}),le.simplify=function(t,e){var r=new le(t);return r.simplify(e)},le.INIT=0,le.DELETE=1,le.KEEP=1,le.NUM_PTS_TO_CHECK=10,h(cs.prototype,{getCoordinates:function(){var t=this.ptList.toArray(cs.COORDINATE_ARRAY_TYPE);return t},setPrecisionModel:function(t){this.precisionModel=t},addPt:function(t){var e=new C(t);return this.precisionModel.makePrecise(e),this.isRedundant(e)?null:void this.ptList.add(e)},reverse:function(){},addPts:function(t,e){if(e)for(var r=0;r<t.length;r++)this.addPt(t[r]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},isRedundant:function(t){if(this.ptList.size()<1)return!1;var e=this.ptList.get(this.ptList.size()-1),r=t.distance(e);return r<this.minimimVertexDistance},toString:function(){var t=new at,e=t.createLineString(this.getCoordinates());return e.toString()},closeRing:function(){if(this.ptList.size()<1)return null;var t=new C(this.ptList.get(0)),e=this.ptList.get(this.ptList.size()-1);return this.ptList.size()>=2&&this.ptList.get(this.ptList.size()-2),t.equals(e)?null:void this.ptList.add(t)},setMinimumVertexDistance:function(t){this.minimimVertexDistance=t},interfaces_:function(){return[]},getClass:function(){return cs}}),cs.COORDINATE_ARRAY_TYPE=new Array(0).fill(null),h(_n.prototype,{addNextSegment:function(t,e){if(this.s0=this.s1,this.s1=this.s2,this.s2=t,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),this.s1.equals(this.s2))return null;var r=H.computeOrientation(this.s0,this.s1,this.s2),o=r===H.CLOCKWISE&&this.side===U.LEFT||r===H.COUNTERCLOCKWISE&&this.side===U.RIGHT;r===0?this.addCollinear(e):o?this.addOutsideTurn(r,e):this.addInsideTurn(r,e)},addLineEndCap:function(t,e){var r=new nt(t,e),o=new nt;this.computeOffsetSegment(r,U.LEFT,this.distance,o);var l=new nt;this.computeOffsetSegment(r,U.RIGHT,this.distance,l);var f=e.x-t.x,d=e.y-t.y,m=Math.atan2(d,f);switch(this.bufParams.getEndCapStyle()){case mt.CAP_ROUND:this.segList.addPt(o.p1),this.addFilletArc(e,m+Math.PI/2,m-Math.PI/2,H.CLOCKWISE,this.distance),this.segList.addPt(l.p1);break;case mt.CAP_FLAT:this.segList.addPt(o.p1),this.segList.addPt(l.p1);break;case mt.CAP_SQUARE:var E=new C;E.x=Math.abs(this.distance)*Math.cos(m),E.y=Math.abs(this.distance)*Math.sin(m);var S=new C(o.p1.x+E.x,o.p1.y+E.y),R=new C(l.p1.x+E.x,l.p1.y+E.y);this.segList.addPt(S),this.segList.addPt(R)}},getCoordinates:function(){var t=this.segList.getCoordinates();return t},addMitreJoin:function(t,e,r,o){var l=!0,f=null;try{f=fe.intersection(e.p0,e.p1,r.p0,r.p1);var d=0>=o?1:f.distance(t)/Math.abs(o);d>this.bufParams.getMitreLimit()&&(l=!1)}catch(m){if(!(m instanceof z))throw m;f=new C(0,0),l=!1}finally{}l?this.segList.addPt(f):this.addLimitedMitreJoin(e,r,o,this.bufParams.getMitreLimit())},addFilletCorner:function(t,e,r,o,l){var f=e.x-t.x,d=e.y-t.y,m=Math.atan2(d,f),E=r.x-t.x,S=r.y-t.y,R=Math.atan2(S,E);o===H.CLOCKWISE?R>=m&&(m+=2*Math.PI):m>=R&&(m-=2*Math.PI),this.segList.addPt(e),this.addFilletArc(t,m,R,o,l),this.segList.addPt(r)},addOutsideTurn:function(t,e){return this.offset0.p1.distance(this.offset1.p0)<this.distance*_n.OFFSET_SEGMENT_SEPARATION_FACTOR?(this.segList.addPt(this.offset0.p1),null):void(this.bufParams.getJoinStyle()===mt.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===mt.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(e&&this.segList.addPt(this.offset0.p1),this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,t,this.distance),this.segList.addPt(this.offset1.p0)))},createSquare:function(t){this.segList.addPt(new C(t.x+this.distance,t.y+this.distance)),this.segList.addPt(new C(t.x+this.distance,t.y-this.distance)),this.segList.addPt(new C(t.x-this.distance,t.y-this.distance)),this.segList.addPt(new C(t.x-this.distance,t.y+this.distance)),this.segList.closeRing()},addSegments:function(t,e){this.segList.addPts(t,e)},addFirstSegment:function(){this.segList.addPt(this.offset1.p0)},addLastSegment:function(){this.segList.addPt(this.offset1.p1)},initSideSegments:function(t,e,r){this.s1=t,this.s2=e,this.side=r,this.seg1.setCoordinates(t,e),this.computeOffsetSegment(this.seg1,r,this.distance,this.offset1)},addLimitedMitreJoin:function(t,e,r,o){var l=this.seg0.p1,f=it.angle(l,this.seg0.p0),d=(it.angle(l,this.seg1.p1),it.angleBetweenOriented(this.seg0.p0,l,this.seg1.p1)),m=d/2,E=it.normalize(f+m),S=it.normalize(E+Math.PI),R=o*r,k=R*Math.abs(Math.sin(m)),G=r-k,J=l.x+R*Math.cos(S),$=l.y+R*Math.sin(S),et=new C(J,$),Pt=new nt(l,et),Xt=Pt.pointAlongOffset(1,G),un=Pt.pointAlongOffset(1,-G);this.side===U.LEFT?(this.segList.addPt(Xt),this.segList.addPt(un)):(this.segList.addPt(un),this.segList.addPt(Xt))},computeOffsetSegment:function(t,e,r,o){var l=e===U.LEFT?1:-1,f=t.p1.x-t.p0.x,d=t.p1.y-t.p0.y,m=Math.sqrt(f*f+d*d),E=l*r*f/m,S=l*r*d/m;o.p0.x=t.p0.x-S,o.p0.y=t.p0.y+E,o.p1.x=t.p1.x-S,o.p1.y=t.p1.y+E},addFilletArc:function(t,e,r,o,l){var f=o===H.CLOCKWISE?-1:1,d=Math.abs(e-r),m=Math.trunc(d/this.filletAngleQuantum+.5);if(1>m)return null;var E=null,S=null;E=0,S=d/m;for(var R=E,k=new C;d>R;){var G=e+f*R;k.x=t.x+l*Math.cos(G),k.y=t.y+l*Math.sin(G),this.segList.addPt(k),R+=S}},addInsideTurn:function(t,e){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*_n.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var r=new C((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(r);var o=new C((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(o)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}},createCircle:function(t){var e=new C(t.x+this.distance,t.y);this.segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this.distance),this.segList.closeRing()},addBevelJoin:function(t,e){this.segList.addPt(t.p1),this.segList.addPt(e.p0)},init:function(t){this.distance=t,this.maxCurveSegmentError=t*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new cs,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(t*_n.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},addCollinear:function(t){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2);var e=this.li.getIntersectionNum();e>=2&&(this.bufParams.getJoinStyle()===mt.JOIN_BEVEL||this.bufParams.getJoinStyle()===mt.JOIN_MITRE?(t&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,H.CLOCKWISE,this.distance))},closeRing:function(){this.segList.closeRing()},hasNarrowConcaveAngle:function(){return this._hasNarrowConcaveAngle},interfaces_:function(){return[]},getClass:function(){return _n}}),_n.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,_n.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,_n.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,_n.MAX_CLOSING_SEG_LEN_FACTOR=80,h(fs.prototype,{getOffsetCurve:function(t,e){if(this.distance=e,e===0)return null;var r=0>e,o=Math.abs(e),l=this.getSegGen(o);t.length<=1?this.computePointCurve(t[0],l):this.computeOffsetCurve(t,r,l);var f=l.getCoordinates();return r&&Q.reverse(f),f},computeSingleSidedBufferCurve:function(t,e,r){var o=this.simplifyTolerance(this.distance);if(e){r.addSegments(t,!0);var l=le.simplify(t,-o),f=l.length-1;r.initSideSegments(l[f],l[f-1],U.LEFT),r.addFirstSegment();for(var d=f-2;d>=0;d--)r.addNextSegment(l[d],!0)}else{r.addSegments(t,!1);var m=le.simplify(t,o),E=m.length-1;r.initSideSegments(m[0],m[1],U.LEFT),r.addFirstSegment();for(var d=2;E>=d;d++)r.addNextSegment(m[d],!0)}r.addLastSegment(),r.closeRing()},computeRingBufferCurve:function(t,e,r){var o=this.simplifyTolerance(this.distance);e===U.RIGHT&&(o=-o);var l=le.simplify(t,o),f=l.length-1;r.initSideSegments(l[f-1],l[0],e);for(var d=1;f>=d;d++){var m=d!==1;r.addNextSegment(l[d],m)}r.closeRing()},computeLineBufferCurve:function(t,e){var r=this.simplifyTolerance(this.distance),o=le.simplify(t,r),l=o.length-1;e.initSideSegments(o[0],o[1],U.LEFT);for(var f=2;l>=f;f++)e.addNextSegment(o[f],!0);e.addLastSegment(),e.addLineEndCap(o[l-1],o[l]);var d=le.simplify(t,-r),m=d.length-1;e.initSideSegments(d[m],d[m-1],U.LEFT);for(var f=m-2;f>=0;f--)e.addNextSegment(d[f],!0);e.addLastSegment(),e.addLineEndCap(d[1],d[0]),e.closeRing()},computePointCurve:function(t,e){switch(this.bufParams.getEndCapStyle()){case mt.CAP_ROUND:e.createCircle(t);break;case mt.CAP_SQUARE:e.createSquare(t)}},getLineCurve:function(t,e){if(this.distance=e,0>e&&!this.bufParams.isSingleSided()||e===0)return null;var r=Math.abs(e),o=this.getSegGen(r);if(t.length<=1)this.computePointCurve(t[0],o);else if(this.bufParams.isSingleSided()){var l=0>e;this.computeSingleSidedBufferCurve(t,l,o)}else this.computeLineBufferCurve(t,o);var f=o.getCoordinates();return f},getBufferParameters:function(){return this.bufParams},simplifyTolerance:function(t){return t*this.bufParams.getSimplifyFactor()},getRingCurve:function(t,e,r){if(this.distance=r,t.length<=2)return this.getLineCurve(t,r);if(r===0)return fs.copyCoordinates(t);var o=this.getSegGen(r);return this.computeRingBufferCurve(t,e,o),o.getCoordinates()},computeOffsetCurve:function(t,e,r){var o=this.simplifyTolerance(this.distance);if(e){var l=le.simplify(t,-o),f=l.length-1;r.initSideSegments(l[f],l[f-1],U.LEFT),r.addFirstSegment();for(var d=f-2;d>=0;d--)r.addNextSegment(l[d],!0)}else{var m=le.simplify(t,o),E=m.length-1;r.initSideSegments(m[0],m[1],U.LEFT),r.addFirstSegment();for(var d=2;E>=d;d++)r.addNextSegment(m[d],!0)}r.addLastSegment()},getSegGen:function(t){return new _n(this.precisionModel,this.bufParams,t)},interfaces_:function(){return[]},getClass:function(){return fs}}),fs.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),r=0;r<e.length;r++)e[r]=new C(t[r]);return e},h(Bo.prototype,{findStabbedSegments:function(){if(arguments.length===1){for(var t=arguments[0],e=new b,r=this.subgraphs.iterator();r.hasNext();){var o=r.next(),l=o.getEnvelope();t.y<l.getMinY()||t.y>l.getMaxY()||this.findStabbedSegments(t,o.getDirectedEdges(),e)}return e}if(arguments.length===3){if(V(arguments[2],N)&&arguments[0]instanceof C&&arguments[1]instanceof Ui)for(var f=arguments[0],d=arguments[1],m=arguments[2],E=d.getEdge().getCoordinates(),r=0;r<E.length-1;r++){this.seg.p0=E[r],this.seg.p1=E[r+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse();var S=Math.max(this.seg.p0.x,this.seg.p1.x);if(!(S<f.x||this.seg.isHorizontal()||f.y<this.seg.p0.y||f.y>this.seg.p1.y||H.computeOrientation(this.seg.p0,this.seg.p1,f)===H.RIGHT)){var R=d.getDepth(U.LEFT);this.seg.p0.equals(E[r])||(R=d.getDepth(U.RIGHT));var k=new qo(this.seg,R);m.add(k)}}else if(V(arguments[2],N)&&arguments[0]instanceof C&&V(arguments[1],N))for(var G=arguments[0],J=arguments[1],$=arguments[2],r=J.iterator();r.hasNext();){var et=r.next();et.isForward()&&this.findStabbedSegments(G,et,$)}}},getDepth:function(t){var e=this.findStabbedSegments(t);if(e.size()===0)return 0;var r=wn.min(e);return r.leftDepth},interfaces_:function(){return[]},getClass:function(){return Bo}}),h(qo.prototype,{compareTo:function(t){var e=t;if(this.upwardSeg.minX()>=e.upwardSeg.maxX())return 1;if(this.upwardSeg.maxX()<=e.upwardSeg.minX())return-1;var r=this.upwardSeg.orientationIndex(e.upwardSeg);return r!==0?r:(r=-1*e.upwardSeg.orientationIndex(this.upwardSeg),r!==0?r:this.upwardSeg.compareTo(e.upwardSeg))},compareX:function(t,e){var r=t.p0.compareTo(e.p0);return r!==0?r:t.p1.compareTo(e.p1)},toString:function(){return this.upwardSeg.toString()},interfaces_:function(){return[p]},getClass:function(){return qo}}),Bo.DepthSegment=qo,h(Pu.prototype,{addPoint:function(t){if(this.distance<=0)return null;var e=t.getCoordinates(),r=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(r,x.EXTERIOR,x.INTERIOR)},addPolygon:function(t){var e=this.distance,r=U.LEFT;this.distance<0&&(e=-this.distance,r=U.RIGHT);var o=t.getExteriorRing(),l=Q.removeRepeatedPoints(o.getCoordinates());if(this.distance<0&&this.isErodedCompletely(o,this.distance)||this.distance<=0&&l.length<3)return null;this.addPolygonRing(l,e,r,x.EXTERIOR,x.INTERIOR);for(var f=0;f<t.getNumInteriorRing();f++){var d=t.getInteriorRingN(f),m=Q.removeRepeatedPoints(d.getCoordinates());this.distance>0&&this.isErodedCompletely(d,-this.distance)||this.addPolygonRing(m,e,U.opposite(r),x.INTERIOR,x.EXTERIOR)}},isTriangleErodedCompletely:function(t,e){var r=new Tt(t[0],t[1],t[2]),o=r.inCentre(),l=H.distancePointLine(o,r.p0,r.p1);return l<Math.abs(e)},addLineString:function(t){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return null;var e=Q.removeRepeatedPoints(t.getCoordinates()),r=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(r,x.EXTERIOR,x.INTERIOR)},addCurve:function(t,e,r){if(t===null||t.length<2)return null;var o=new pn(t,new Ht(0,x.BOUNDARY,e,r));this.curveList.add(o)},getCurves:function(){return this.add(this.inputGeom),this.curveList},addPolygonRing:function(t,e,r,o,l){if(e===0&&t.length<Ut.MINIMUM_VALID_SIZE)return null;var f=o,d=l;t.length>=Ut.MINIMUM_VALID_SIZE&&H.isCCW(t)&&(f=l,d=o,r=U.opposite(r));var m=this.curveBuilder.getRingCurve(t,r,e);this.addCurve(m,f,d)},add:function(t){if(t.isEmpty())return null;if(t instanceof wt)this.addPolygon(t);else if(t instanceof st)this.addLineString(t);else if(t instanceof Ot)this.addPoint(t);else if(t instanceof Se)this.addCollection(t);else if(t instanceof Ne)this.addCollection(t);else if(t instanceof ae)this.addCollection(t);else{if(!(t instanceof ht))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},isErodedCompletely:function(t,e){var r=t.getCoordinates();if(r.length<4)return 0>e;if(r.length===4)return this.isTriangleErodedCompletely(r,e);var o=t.getEnvelopeInternal(),l=Math.min(o.getHeight(),o.getWidth());return 0>e&&2*Math.abs(e)>l},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);this.add(r)}},interfaces_:function(){return[]},getClass:function(){return Pu}}),h(gs.prototype,{isTrivialIntersection:function(t,e,r,o){if(t===r&&this.li.getIntersectionNum()===1){if(gs.isAdjacentSegments(e,o))return!0;if(t.isClosed()){var l=t.size()-1;if(e===0&&o===l||o===0&&e===l)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},hasProperInteriorIntersection:function(){return this.hasProperInterior},getLineIntersector:function(){return this.li},hasProperIntersection:function(){return this.hasProper},processIntersections:function(t,e,r,o){if(t===r&&e===o)return null;this.numTests++;var l=t.getCoordinates()[e],f=t.getCoordinates()[e+1],d=r.getCoordinates()[o],m=r.getCoordinates()[o+1];this.li.computeIntersection(l,f,d,m),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(t,e,r,o)||(this._hasIntersection=!0,t.addIntersections(this.li,e,0),r.addIntersections(this.li,o,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))},hasIntersection:function(){return this._hasIntersection},isDone:function(){return!1},hasInteriorIntersection:function(){return this.hasInterior},interfaces_:function(){return[ts]},getClass:function(){return gs}}),gs.isAdjacentSegments=function(t,e){return Math.abs(t-e)===1},h(_i.prototype,{setWorkingPrecisionModel:function(t){this.workingPrecisionModel=t},insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(e!==null){var r=e.getLabel(),o=t.getLabel();e.isPointwiseEqual(t)||(o=new Ht(t.getLabel()),o.flip()),r.merge(o);var l=_i.depthDelta(o),f=e.getDepthDelta(),d=f+l;e.setDepthDelta(d)}else this.edgeList.add(t),t.setDepthDelta(_i.depthDelta(t.getLabel()))},buildSubgraphs:function(t,e){for(var r=new b,o=t.iterator();o.hasNext();){var l=o.next(),f=l.getRightmostCoordinate(),d=new Bo(r),m=d.getDepth(f);l.computeDepth(m),l.findResultEdges(),r.add(l),e.add(l.getDirectedEdges(),l.getNodes())}},createSubgraphs:function(t){for(var e=new b,r=t.getNodes().iterator();r.hasNext();){var o=r.next();if(!o.isVisited()){var l=new Tu;l.create(o),e.add(l)}}return wn.sort(e,wn.reverseOrder()),e},createEmptyResultGeometry:function(){var t=this.geomFact.createPolygon();return t},getNoder:function(t){if(this.workingNoder!==null)return this.workingNoder;var e=new ci,r=new ie;return r.setPrecisionModel(t),e.setSegmentIntersector(new gs(r)),e},buffer:function(t,e){var r=this.workingPrecisionModel;r===null&&(r=t.getPrecisionModel()),this.geomFact=t.getFactory();var o=new fs(r,this.bufParams),l=new Pu(t,e,o),f=l.getCurves();if(f.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(f,r),this.graph=new vn(new mr),this.graph.addEdges(this.edgeList.getEdges());var d=this.createSubgraphs(this.graph),m=new wo(this.geomFact);this.buildSubgraphs(d,m);var E=m.getPolygons();if(E.size()<=0)return this.createEmptyResultGeometry();var S=this.geomFact.buildGeometry(E);return S},computeNodedEdges:function(t,e){var r=this.getNoder(e);r.computeNodes(t);for(var o=r.getNodedSubstrings(),l=o.iterator();l.hasNext();){var f=l.next(),d=f.getCoordinates();if(d.length!==2||!d[0].equals2D(d[1])){var m=f.getData(),E=new Ye(f.getCoordinates(),new Ht(m));this.insertUniqueEdge(E)}}},setNoder:function(t){this.workingNoder=t},interfaces_:function(){return[]},getClass:function(){return _i}}),_i.depthDelta=function(t){var e=t.getLocation(0,U.LEFT),r=t.getLocation(0,U.RIGHT);return e===x.INTERIOR&&r===x.EXTERIOR?1:e===x.EXTERIOR&&r===x.INTERIOR?-1:0},_i.convertSegStrings=function(t){for(var e=new at,r=new b;t.hasNext();){var o=t.next(),l=e.createLineString(o.getCoordinates());r.add(l)}return e.buildGeometry(r)},h(ds.prototype,{checkEndPtVertexIntersections:function(){if(arguments.length===0)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next(),r=e.getCoordinates();this.checkEndPtVertexIntersections(r[0],this.segStrings),this.checkEndPtVertexIntersections(r[r.length-1],this.segStrings)}else if(arguments.length===2){for(var o=arguments[0],l=arguments[1],t=l.iterator();t.hasNext();)for(var e=t.next(),r=e.getCoordinates(),f=1;f<r.length-1;f++)if(r[f].equals(o))throw new I("found endpt/interior pt intersection at index "+f+" :pt "+o)}},checkInteriorIntersections:function(){if(arguments.length===0)for(var t=this.segStrings.iterator();t.hasNext();)for(var e=t.next(),r=this.segStrings.iterator();r.hasNext();){var o=r.next();this.checkInteriorIntersections(e,o)}else if(arguments.length===2)for(var l=arguments[0],f=arguments[1],d=l.getCoordinates(),m=f.getCoordinates(),E=0;E<d.length-1;E++)for(var S=0;S<m.length-1;S++)this.checkInteriorIntersections(l,E,f,S);else if(arguments.length===4){var R=arguments[0],k=arguments[1],G=arguments[2],J=arguments[3];if(R===G&&k===J)return null;var $=R.getCoordinates()[k],et=R.getCoordinates()[k+1],Pt=G.getCoordinates()[J],Xt=G.getCoordinates()[J+1];if(this.li.computeIntersection($,et,Pt,Xt),this.li.hasIntersection()&&(this.li.isProper()||this.hasInteriorIntersection(this.li,$,et)||this.hasInteriorIntersection(this.li,Pt,Xt)))throw new I("found non-noded intersection at "+$+"-"+et+" and "+Pt+"-"+Xt)}},checkValid:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},checkCollapses:function(){if(arguments.length===0)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(arguments.length===1)for(var r=arguments[0],o=r.getCoordinates(),t=0;t<o.length-2;t++)this.checkCollapse(o[t],o[t+1],o[t+2])},hasInteriorIntersection:function(t,e,r){for(var o=0;o<t.getIntersectionNum();o++){var l=t.getIntersection(o);if(!l.equals(e)&&!l.equals(r))return!0}return!1},checkCollapse:function(t,e,r){if(t.equals(r))throw new I("found non-noded collapse at "+ds.fact.createLineString([t,e,r]))},interfaces_:function(){return[]},getClass:function(){return ds}}),ds.fact=new at,h(_r.prototype,{intersectsScaled:function(t,e){var r=Math.min(t.x,e.x),o=Math.max(t.x,e.x),l=Math.min(t.y,e.y),f=Math.max(t.y,e.y),d=this.maxx<r||this.minx>o||this.maxy<l||this.miny>f;if(d)return!1;var m=this.intersectsToleranceSquare(t,e);return P.isTrue(!(d&&m),"Found bad envelope test"),m},initCorners:function(t){var e=.5;this.minx=t.x-e,this.maxx=t.x+e,this.miny=t.y-e,this.maxy=t.y+e,this.corner[0]=new C(this.maxx,this.maxy),this.corner[1]=new C(this.minx,this.maxy),this.corner[2]=new C(this.minx,this.miny),this.corner[3]=new C(this.maxx,this.miny)},intersects:function(t,e){return this.scaleFactor===1?this.intersectsScaled(t,e):(this.copyScaled(t,this.p0Scaled),this.copyScaled(e,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))},scale:function(t){return Math.round(t*this.scaleFactor)},getCoordinate:function(){return this.originalPt},copyScaled:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},getSafeEnvelope:function(){if(this.safeEnv===null){var t=_r.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new M(this.originalPt.x-t,this.originalPt.x+t,this.originalPt.y-t,this.originalPt.y+t)}return this.safeEnv},intersectsPixelClosure:function(t,e){return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),this.li.hasIntersection()?!0:(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.hasIntersection()?!0:(this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.hasIntersection()?!0:(this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),!!this.li.hasIntersection())))},intersectsToleranceSquare:function(t,e){var r=!1,o=!1;return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),this.li.isProper()?!0:(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.isProper()?!0:(this.li.hasIntersection()&&(r=!0),this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.isProper()?!0:(this.li.hasIntersection()&&(o=!0),this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),this.li.isProper()||r&&o||t.equals(this.pt)?!0:!!e.equals(this.pt))))},addSnappedNode:function(t,e){var r=t.getCoordinate(e),o=t.getCoordinate(e+1);return this.intersects(r,o)?(t.addIntersection(this.getCoordinate(),e),!0):!1},interfaces_:function(){return[]},getClass:function(){return _r}}),_r.SAFE_ENV_EXPANSION_FACTOR=.75,h(xi.prototype,{select:function(){if(arguments.length!==1){if(arguments.length===2){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}}},interfaces_:function(){return[]},getClass:function(){return xi}}),h(Uo.prototype,{snap:function(){if(arguments.length===1){var t=arguments[0];return this.snap(t,null,-1)}if(arguments.length===3){var e=arguments[0],r=arguments[1],o=arguments[2],l=e.getSafeEnvelope(),f=new ps(e,r,o);return this.index.query(l,{interfaces_:function(){return[li]},visitItem:function(d){var m=d;m.select(l,f)}}),f.isNodeAdded()}},interfaces_:function(){return[]},getClass:function(){return Uo}}),w(ps,xi),h(ps.prototype,{isNodeAdded:function(){return this._isNodeAdded},select:function(){if(arguments.length!==2)return xi.prototype.select.apply(this,arguments);var t=arguments[0],e=arguments[1],r=t.getContext();return this.parentEdge!==null&&r===this.parentEdge&&e===this.hotPixelVertexIndex?null:void(this._isNodeAdded=this.hotPixel.addSnappedNode(r,e))},interfaces_:function(){return[]},getClass:function(){return ps}}),Uo.HotPixelSnapAction=ps,h(bu.prototype,{processIntersections:function(t,e,r,o){if(t===r&&e===o)return null;var l=t.getCoordinates()[e],f=t.getCoordinates()[e+1],d=r.getCoordinates()[o],m=r.getCoordinates()[o+1];if(this.li.computeIntersection(l,f,d,m),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var E=0;E<this.li.getIntersectionNum();E++)this.interiorIntersections.add(this.li.getIntersection(E));t.addIntersections(this.li,e,0),r.addIntersections(this.li,o,1)}},isDone:function(){return!1},getInteriorIntersections:function(){return this.interiorIntersections},interfaces_:function(){return[ts]},getClass:function(){return bu}}),h(Mu.prototype,{checkCorrectness:function(t){var e=pn.getNodedSubstrings(t),r=new ds(e);try{r.checkValid()}catch(o){if(!(o instanceof B))throw o;o.printStackTrace()}finally{}},getNodedSubstrings:function(){return pn.getNodedSubstrings(this.nodedSegStrings)},snapRound:function(t,e){var r=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(r),this.computeVertexSnaps(t)},findInteriorIntersections:function(t,e){var r=new bu(e);return this.noder.setSegmentIntersector(r),this.noder.computeNodes(t),r.getInteriorIntersections()},computeVertexSnaps:function(){if(V(arguments[0],X))for(var t=arguments[0],e=t.iterator();e.hasNext();){var r=e.next();this.computeVertexSnaps(r)}else if(arguments[0]instanceof pn)for(var o=arguments[0],l=o.getCoordinates(),f=0;f<l.length;f++){var d=new _r(l[f],this.scaleFactor,this.li),m=this.pointSnapper.snap(d,o,f);m&&o.addIntersection(l[f],f)}},computeNodes:function(t){this.nodedSegStrings=t,this.noder=new ci,this.pointSnapper=new Uo(this.noder.getIndex()),this.snapRound(t,this.li)},computeIntersectionSnaps:function(t){for(var e=t.iterator();e.hasNext();){var r=e.next(),o=new _r(r,this.scaleFactor,this.li);this.pointSnapper.snap(o)}},interfaces_:function(){return[$r]},getClass:function(){return Mu}}),h(ce.prototype,{bufferFixedPrecision:function(t){var e=new hs(new Mu(new yt(1)),t.getScale()),r=new _i(this.bufParams);r.setWorkingPrecisionModel(t),r.setNoder(e),this.resultGeometry=r.buffer(this.argGeom,this.distance)},bufferReducedPrecision:function(){if(arguments.length===0){for(var t=ce.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(l){if(!(l instanceof Te))throw l;this.saveException=l}finally{}if(this.resultGeometry!==null)return null}throw this.saveException}if(arguments.length===1){var e=arguments[0],r=ce.precisionScaleFactor(this.argGeom,this.distance,e),o=new yt(r);this.bufferFixedPrecision(o)}},computeGeometry:function(){if(this.bufferOriginalPrecision(),this.resultGeometry!==null)return null;var t=this.argGeom.getFactory().getPrecisionModel();t.getType()===yt.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},setQuadrantSegments:function(t){this.bufParams.setQuadrantSegments(t)},bufferOriginalPrecision:function(){try{var t=new _i(this.bufParams);this.resultGeometry=t.buffer(this.argGeom,this.distance)}catch(e){if(!(e instanceof I))throw e;this.saveException=e}finally{}},getResultGeometry:function(t){return this.distance=t,this.computeGeometry(),this.resultGeometry},setEndCapStyle:function(t){this.bufParams.setEndCapStyle(t)},interfaces_:function(){return[]},getClass:function(){return ce}}),ce.bufferOp=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],r=new ce(t),o=r.getResultGeometry(e);return o}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof W&&typeof arguments[1]=="number"){var l=arguments[0],f=arguments[1],d=arguments[2],m=new ce(l);m.setQuadrantSegments(d);var o=m.getResultGeometry(f);return o}if(arguments[2]instanceof mt&&arguments[0]instanceof W&&typeof arguments[1]=="number"){var E=arguments[0],S=arguments[1],R=arguments[2],m=new ce(E,R),o=m.getResultGeometry(S);return o}}else if(arguments.length===4){var k=arguments[0],G=arguments[1],J=arguments[2],$=arguments[3],m=new ce(k);m.setQuadrantSegments(J),m.setEndCapStyle($);var o=m.getResultGeometry(G);return o}},ce.precisionScaleFactor=function(t,e,r){var o=t.getEnvelopeInternal(),l=rt.max(Math.abs(o.getMaxX()),Math.abs(o.getMaxY()),Math.abs(o.getMinX()),Math.abs(o.getMinY())),f=e>0?e:0,d=l+2*f,m=Math.trunc(Math.log(d)/Math.log(10)+1),E=r-m,S=Math.pow(10,E);return S},ce.CAP_ROUND=mt.CAP_ROUND,ce.CAP_BUTT=mt.CAP_FLAT,ce.CAP_FLAT=mt.CAP_FLAT,ce.CAP_SQUARE=mt.CAP_SQUARE,ce.MAX_PRECISION_DIGITS=12;var Mg=Object.freeze({BufferOp:ce,BufferParameters:mt});h(Wi.prototype,{filter:function(t){t instanceof wt&&this.comps.add(t)},interfaces_:function(){return[Pn]},getClass:function(){return Wi}}),Wi.getPolygons=function(){if(arguments.length===1){var t=arguments[0];return Wi.getPolygons(t,new b)}if(arguments.length===2){var e=arguments[0],r=arguments[1];return e instanceof wt?r.add(e):e instanceof ht&&e.apply(new Wi(r)),r}},h(Oe.prototype,{isInsideArea:function(){return this.segIndex===Oe.INSIDE_AREA},getCoordinate:function(){return this.pt},getGeometryComponent:function(){return this.component},getSegmentIndex:function(){return this.segIndex},interfaces_:function(){return[]},getClass:function(){return Oe}}),Oe.INSIDE_AREA=-1,h(Ji.prototype,{filter:function(t){t instanceof Ot&&this.pts.add(t)},interfaces_:function(){return[Pn]},getClass:function(){return Ji}}),Ji.getPoints=function(){if(arguments.length===1){var t=arguments[0];return t instanceof Ot?wn.singletonList(t):Ji.getPoints(t,new b)}if(arguments.length===2){var e=arguments[0],r=arguments[1];return e instanceof Ot?r.add(e):e instanceof ht&&e.apply(new Ji(r)),r}},h(ms.prototype,{filter:function(t){(t instanceof Ot||t instanceof st||t instanceof wt)&&this.locations.add(new Oe(t,0,t.getCoordinate()))},interfaces_:function(){return[Pn]},getClass:function(){return ms}}),ms.getLocations=function(t){var e=new b;return t.apply(new ms(e)),e},h(rn.prototype,{computeContainmentDistance:function(){if(arguments.length===0){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this.minDistance<=this.terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(arguments.length===2){var e=arguments[0],r=arguments[1],o=1-e,l=Wi.getPolygons(this.geom[e]);if(l.size()>0){var f=ms.getLocations(this.geom[o]);if(this.computeContainmentDistance(f,l,r),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[o]=r[0],this.minDistanceLocation[e]=r[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&V(arguments[0],N)&&V(arguments[1],N)){for(var d=arguments[0],m=arguments[1],E=arguments[2],S=0;S<d.size();S++)for(var R=d.get(S),k=0;k<m.size();k++)if(this.computeContainmentDistance(R,m.get(k),E),this.minDistance<=this.terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Oe&&arguments[1]instanceof wt){var G=arguments[0],J=arguments[1],$=arguments[2],et=G.getCoordinate();if(x.EXTERIOR!==this.ptLocator.locate(et,J))return this.minDistance=0,$[0]=G,$[1]=new Oe(J,et),null}}},computeMinDistanceLinesPoints:function(t,e,r){for(var o=0;o<t.size();o++)for(var l=t.get(o),f=0;f<e.size();f++){var d=e.get(f);if(this.computeMinDistance(l,d,r),this.minDistance<=this.terminateDistance)return null}},computeFacetDistance:function(){var t=new Array(2).fill(null),e=de.getLines(this.geom[0]),r=de.getLines(this.geom[1]),o=Ji.getPoints(this.geom[0]),l=Ji.getPoints(this.geom[1]);return this.computeMinDistanceLines(e,r,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,l,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(r,o,t),this.updateMinDistance(t,!0),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(o,l,t),void this.updateMinDistance(t,!1))))},nearestLocations:function(){return this.computeMinDistance(),this.minDistanceLocation},updateMinDistance:function(t,e){return t[0]===null?null:void(e?(this.minDistanceLocation[0]=t[1],this.minDistanceLocation[1]=t[0]):(this.minDistanceLocation[0]=t[0],this.minDistanceLocation[1]=t[1]))},nearestPoints:function(){this.computeMinDistance();var t=[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];return t},computeMinDistance:function(){if(arguments.length===0){if(this.minDistanceLocation!==null||(this.minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this.minDistance<=this.terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof st&&arguments[1]instanceof Ot){var t=arguments[0],e=arguments[1],r=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this.minDistance)return null;for(var o=t.getCoordinates(),l=e.getCoordinate(),f=0;f<o.length-1;f++){var d=H.distancePointLine(l,o[f],o[f+1]);if(d<this.minDistance){this.minDistance=d;var m=new nt(o[f],o[f+1]),E=m.closestPoint(l);r[0]=new Oe(t,f,E),r[1]=new Oe(e,0,l)}if(this.minDistance<=this.terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof st&&arguments[1]instanceof st){var S=arguments[0],R=arguments[1],k=arguments[2];if(S.getEnvelopeInternal().distance(R.getEnvelopeInternal())>this.minDistance)return null;for(var o=S.getCoordinates(),G=R.getCoordinates(),f=0;f<o.length-1;f++)for(var J=0;J<G.length-1;J++){var d=H.distanceLineLine(o[f],o[f+1],G[J],G[J+1]);if(d<this.minDistance){this.minDistance=d;var $=new nt(o[f],o[f+1]),et=new nt(G[J],G[J+1]),Pt=$.closestPoints(et);k[0]=new Oe(S,f,Pt[0]),k[1]=new Oe(R,J,Pt[1])}if(this.minDistance<=this.terminateDistance)return null}}}},computeMinDistancePoints:function(t,e,r){for(var o=0;o<t.size();o++)for(var l=t.get(o),f=0;f<e.size();f++){var d=e.get(f),m=l.getCoordinate().distance(d.getCoordinate());if(m<this.minDistance&&(this.minDistance=m,r[0]=new Oe(l,0,l.getCoordinate()),r[1]=new Oe(d,0,d.getCoordinate())),this.minDistance<=this.terminateDistance)return null}},distance:function(){if(this.geom[0]===null||this.geom[1]===null)throw new c;return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)},computeMinDistanceLines:function(t,e,r){for(var o=0;o<t.size();o++)for(var l=t.get(o),f=0;f<e.size();f++){var d=e.get(f);if(this.computeMinDistance(l,d,r),this.minDistance<=this.terminateDistance)return null}},interfaces_:function(){return[]},getClass:function(){return rn}}),rn.distance=function(t,e){var r=new rn(t,e);return r.distance()},rn.isWithinDistance=function(t,e,r){var o=new rn(t,e,r);return o.distance()<=r},rn.nearestPoints=function(t,e){var r=new rn(t,e);return r.nearestPoints()};var Og=Object.freeze({DistanceOp:rn});h(Ou.prototype,{getCoordinates:function(){if(this.coordinates===null){for(var t=0,e=0,r=new O,o=this.directedEdges.iterator();o.hasNext();){var l=o.next();l.getEdgeDirection()?t++:e++,r.add(l.getEdge().getLine().getCoordinates(),!1,l.getEdgeDirection())}this.coordinates=r.toCoordinateArray(),e>t&&Q.reverse(this.coordinates)}return this.coordinates},toLineString:function(){return this.factory.createLineString(this.getCoordinates())},add:function(t){this.directedEdges.add(t)},interfaces_:function(){return[]},getClass:function(){return Ou}}),h(Je.prototype,{setVisited:function(t){this._isVisited=t},isMarked:function(){return this._isMarked},setData:function(t){this.data=t},getData:function(){return this.data},setMarked:function(t){this._isMarked=t},getContext:function(){return this.data},isVisited:function(){return this._isVisited},setContext:function(t){this.data=t},interfaces_:function(){return[]},getClass:function(){return Je}}),Je.getComponentWithVisitedState=function(t,e){for(;t.hasNext();){var r=t.next();if(r.isVisited()===e)return r}return null},Je.setVisited=function(t,e){for(;t.hasNext();){var r=t.next();r.setVisited(e)}},Je.setMarked=function(t,e){for(;t.hasNext();){var r=t.next();r.setMarked(e)}},w(Be,Je),h(Be.prototype,{isRemoved:function(){return this.parentEdge===null},compareDirection:function(t){return this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:H.computeOrientation(t.p0,t.p1,this.p1)},getCoordinate:function(){return this.from.getCoordinate()},print:function(t){var e=this.getClass().getName(),r=e.lastIndexOf("."),o=e.substring(r+1);t.print("  "+o+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+this.angle)},getDirectionPt:function(){return this.p1},getAngle:function(){return this.angle},compareTo:function(t){var e=t;return this.compareDirection(e)},getFromNode:function(){return this.from},getSym:function(){return this.sym},setEdge:function(t){this.parentEdge=t},remove:function(){this.sym=null,this.parentEdge=null},getEdge:function(){return this.parentEdge},getQuadrant:function(){return this.quadrant},setSym:function(t){this.sym=t},getToNode:function(){return this.to},getEdgeDirection:function(){return this.edgeDirection},interfaces_:function(){return[p]},getClass:function(){return Be}}),Be.toEdges=function(t){for(var e=new b,r=t.iterator();r.hasNext();)e.add(r.next().parentEdge);return e},w(vs,Be),h(vs.prototype,{getNext:function(){return this.getToNode().getDegree()!==2?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(P.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))},interfaces_:function(){return[]},getClass:function(){return vs}}),w(xn,Je),h(xn.prototype,{isRemoved:function(){return this.dirEdge===null},setDirectedEdges:function(t,e){this.dirEdge=[t,e],t.setEdge(this),e.setEdge(this),t.setSym(e),e.setSym(t),t.getFromNode().addOutEdge(t),e.getFromNode().addOutEdge(e)},getDirEdge:function(){if(Number.isInteger(arguments[0])){var t=arguments[0];return this.dirEdge[t]}if(arguments[0]instanceof zn){var e=arguments[0];return this.dirEdge[0].getFromNode()===e?this.dirEdge[0]:this.dirEdge[1].getFromNode()===e?this.dirEdge[1]:null}},remove:function(){this.dirEdge=null},getOppositeNode:function(t){return this.dirEdge[0].getFromNode()===t?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()===t?this.dirEdge[1].getToNode():null},interfaces_:function(){return[]},getClass:function(){return xn}}),h(Ru.prototype,{getNextEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e+1))},getCoordinate:function(){var t=this.iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},iterator:function(){return this.sortEdges(),this.outEdges.iterator()},sortEdges:function(){this.sorted||(wn.sort(this.outEdges),this.sorted=!0)},remove:function(t){this.outEdges.remove(t)},getEdges:function(){return this.sortEdges(),this.outEdges},getNextCWEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e-1))},getIndex:function(){if(arguments[0]instanceof xn){var t=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var r=this.outEdges.get(e);if(r.getEdge()===t)return e}return-1}if(arguments[0]instanceof Be){var o=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var r=this.outEdges.get(e);if(r===o)return e}return-1}if(Number.isInteger(arguments[0])){var l=arguments[0],f=l%this.outEdges.size();return 0>f&&(f+=this.outEdges.size()),f}},add:function(t){this.outEdges.add(t),this.sorted=!1},getDegree:function(){return this.outEdges.size()},interfaces_:function(){return[]},getClass:function(){return Ru}}),w(zn,Je),h(zn.prototype,{isRemoved:function(){return this.pt===null},addOutEdge:function(t){this.deStar.add(t)},getCoordinate:function(){return this.pt},getOutEdges:function(){return this.deStar},remove:function(){if(arguments.length===0)this.pt=null;else if(arguments.length===1){var t=arguments[0];this.deStar.remove(t)}},getIndex:function(t){return this.deStar.getIndex(t)},getDegree:function(){return this.deStar.getDegree()},interfaces_:function(){return[]},getClass:function(){return zn}}),zn.getEdgesBetween=function(t,e){var r=Be.toEdges(t.getOutEdges().getEdges()),o=new oe(r),l=Be.toEdges(e.getOutEdges().getEdges());return o.retainAll(l),o},w(Vo,xn),h(Vo.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return Vo}}),h(Du.prototype,{find:function(t){return this.nodeMap.get(t)},iterator:function(){return this.nodeMap.values().iterator()},remove:function(t){return this.nodeMap.remove(t)},values:function(){return this.nodeMap.values()},add:function(t){return this.nodeMap.put(t.getCoordinate(),t),t},interfaces_:function(){return[]},getClass:function(){return Du}}),h(xr.prototype,{findNodesOfDegree:function(t){for(var e=new b,r=this.nodeIterator();r.hasNext();){var o=r.next();o.getDegree()===t&&e.add(o)}return e},dirEdgeIterator:function(){return this.dirEdges.iterator()},edgeIterator:function(){return this.edges.iterator()},remove:function(){if(arguments[0]instanceof xn){var t=arguments[0];this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this.edges.remove(t),t.remove()}else if(arguments[0]instanceof Be){var e=arguments[0],r=e.getSym();r!==null&&r.setSym(null),e.getFromNode().remove(e),e.remove(),this.dirEdges.remove(e)}else if(arguments[0]instanceof zn){for(var o=arguments[0],l=o.getOutEdges().getEdges(),f=l.iterator();f.hasNext();){var d=f.next(),r=d.getSym();r!==null&&this.remove(r),this.dirEdges.remove(d);var m=d.getEdge();m!==null&&this.edges.remove(m)}this.nodeMap.remove(o.getCoordinate()),o.remove()}},findNode:function(t){return this.nodeMap.find(t)},getEdges:function(){return this.edges},nodeIterator:function(){return this.nodeMap.iterator()},contains:function(){if(arguments[0]instanceof xn){var t=arguments[0];return this.edges.contains(t)}if(arguments[0]instanceof Be){var e=arguments[0];return this.dirEdges.contains(e)}},add:function(){if(arguments[0]instanceof zn){var t=arguments[0];this.nodeMap.add(t)}else if(arguments[0]instanceof xn){var e=arguments[0];this.edges.add(e),this.add(e.getDirEdge(0)),this.add(e.getDirEdge(1))}else if(arguments[0]instanceof Be){var r=arguments[0];this.dirEdges.add(r)}},getNodes:function(){return this.nodeMap.values()},interfaces_:function(){return[]},getClass:function(){return xr}}),w(Ho,xr),h(Ho.prototype,{addEdge:function(t){if(t.isEmpty())return null;var e=Q.removeRepeatedPoints(t.getCoordinates());if(e.length<=1)return null;var r=e[0],o=e[e.length-1],l=this.getNode(r),f=this.getNode(o),d=new vs(l,f,e[1],!0),m=new vs(f,l,e[e.length-2],!1),E=new Vo(t);E.setDirectedEdges(d,m),this.add(E)},getNode:function(t){var e=this.findNode(t);return e===null&&(e=new zn(t),this.add(e)),e},interfaces_:function(){return[]},getClass:function(){return Ho}}),h(Au.prototype,{buildEdgeStringsForUnprocessedNodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.isMarked()||(P.isTrue(e.getDegree()===2),this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForNonDegree2Nodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getDegree()!==2&&(this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForObviousStartNodes:function(){this.buildEdgeStringsForNonDegree2Nodes()},getMergedLineStrings:function(){return this.merge(),this.mergedLineStrings},buildEdgeStringsStartingAt:function(t){for(var e=t.getOutEdges().iterator();e.hasNext();){var r=e.next();r.getEdge().isMarked()||this.edgeStrings.add(this.buildEdgeStringStartingWith(r))}},merge:function(){if(this.mergedLineStrings!==null)return null;Je.setMarked(this.graph.nodeIterator(),!1),Je.setMarked(this.graph.edgeIterator(),!1),this.edgeStrings=new b,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this.mergedLineStrings=new b;for(var t=this.edgeStrings.iterator();t.hasNext();){var e=t.next();this.mergedLineStrings.add(e.toLineString())}},buildEdgeStringStartingWith:function(t){var e=new Ou(this.factory),r=t;do e.add(r),r.getEdge().setMarked(!0),r=r.getNext();while(r!==null&&r!==t);return e},add:function(){if(arguments[0]instanceof W){var t=arguments[0];t.apply({interfaces_:function(){return[De]},filter:function(f){f instanceof st&&this.add(f)}})}else if(V(arguments[0],X)){var e=arguments[0];this.mergedLineStrings=null;for(var r=e.iterator();r.hasNext();){var o=r.next();this.add(o)}}else if(arguments[0]instanceof st){var l=arguments[0];this.factory===null&&(this.factory=l.getFactory()),this.graph.addEdge(l)}},buildEdgeStringsForIsolatedLoops:function(){this.buildEdgeStringsForUnprocessedNodes()},interfaces_:function(){return[]},getClass:function(){return Au}});var Rg=Object.freeze({LineMerger:Au}),Dg=Object.freeze({OverlayOp:j});w(ys,Be),h(ys.prototype,{getNext:function(){return this.next},isInRing:function(){return this.edgeRing!==null},setRing:function(t){this.edgeRing=t},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setNext:function(t){this.next=t},getRing:function(){return this.edgeRing},interfaces_:function(){return[]},getClass:function(){return ys}}),w(Zo,xn),h(Zo.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return Zo}}),h(sn.prototype,{isIncluded:function(){return this._isIncluded},getCoordinates:function(){if(this.ringPts===null){for(var t=new O,e=this.deList.iterator();e.hasNext();){var r=e.next(),o=r.getEdge();sn.addEdge(o.getLine().getCoordinates(),r.getEdgeDirection(),t)}this.ringPts=t.toCoordinateArray()}return this.ringPts},isIncludedSet:function(){return this._isIncludedSet},isValid:function(){return this.getCoordinates(),this.ringPts.length<=3?!1:(this.getRing(),this.ring.isValid())},build:function(t){var e=t;do this.add(e),e.setRing(this),e=e.getNext(),P.isTrue(e!==null,"found null DE in ring"),P.isTrue(e===t||!e.isInRing(),"found DE already in ring");while(e!==t)},isOuterHole:function(){return this._isHole?!this.hasShell():!1},getPolygon:function(){var t=null;if(this.holes!==null){t=new Array(this.holes.size()).fill(null);for(var e=0;e<this.holes.size();e++)t[e]=this.holes.get(e)}var r=this.factory.createPolygon(this.ring,t);return r},isHole:function(){return this._isHole},isProcessed:function(){return this._isProcessed},addHole:function(){if(arguments[0]instanceof Ut){var t=arguments[0];this.holes===null&&(this.holes=new b),this.holes.add(t)}else if(arguments[0]instanceof sn){var e=arguments[0];e.setShell(this);var r=e.getRing();this.holes===null&&(this.holes=new b),this.holes.add(r)}},setIncluded:function(t){this._isIncluded=t,this._isIncludedSet=!0},getOuterHole:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t),r=e.getSym().getRing();if(r.isOuterHole())return r}return null},computeHole:function(){var t=this.getRing();this._isHole=H.isCCW(t.getCoordinates())},hasShell:function(){return this.shell!==null},isOuterShell:function(){return this.getOuterHole()!==null},getLineString:function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)},toString:function(){return ge.toLineString(new Fe(this.getCoordinates()))},getShell:function(){return this.isHole()?this.shell:this},add:function(t){this.deList.add(t)},getRing:function(){if(this.ring!==null)return this.ring;this.getCoordinates(),this.ringPts.length<3&&Et.out.println(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(t){if(!(t instanceof B))throw t;Et.out.println(this.ringPts)}finally{}return this.ring},updateIncluded:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t),r=e.getSym().getRing().getShell();if(r!==null&&r.isIncludedSet())return this.setIncluded(!r.isIncluded()),null}},setShell:function(t){this.shell=t},setProcessed:function(t){this._isProcessed=t},interfaces_:function(){return[]},getClass:function(){return sn}}),sn.findDirEdgesInRing=function(t){var e=t,r=new b;do r.add(e),e=e.getNext(),P.isTrue(e!==null,"found null DE in ring"),P.isTrue(e===t||!e.isInRing(),"found DE already in ring");while(e!==t);return r},sn.addEdge=function(t,e,r){if(e)for(var o=0;o<t.length;o++)r.add(t[o],!1);else for(var o=t.length-1;o>=0;o--)r.add(t[o],!1)},sn.findEdgeRingContaining=function(t,e){for(var r=t.getRing(),o=r.getEnvelopeInternal(),l=r.getCoordinateN(0),f=null,d=null,m=e.iterator();m.hasNext();){var E=m.next(),S=E.getRing(),R=S.getEnvelopeInternal();if(!R.equals(o)&&R.contains(o)){l=Q.ptNotInList(r.getCoordinates(),S.getCoordinates());var k=!1;H.isPointInRing(l,S.getCoordinates())&&(k=!0),k&&(f===null||d.contains(R))&&(f=E,d=f.getRing().getEnvelopeInternal())}}return f},h(ku.prototype,{compare:function(t,e){var r=t,o=e;return r.getRing().getEnvelope().compareTo(o.getRing().getEnvelope())},interfaces_:function(){return[y]},getClass:function(){return ku}}),sn.EnvelopeComparator=ku,w(Qt,xr),h(Qt.prototype,{findEdgeRing:function(t){var e=new sn(this.factory);return e.build(t),e},computeDepthParity:function(){if(arguments.length===0)for(;;){var t=null;if(t===null)return null;this.computeDepthParity(t)}},computeNextCWEdges:function(){for(var t=this.nodeIterator();t.hasNext();){var e=t.next();Qt.computeNextCWEdges(e)}},addEdge:function(t){if(t.isEmpty())return null;var e=Q.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return null;var r=e[0],o=e[e.length-1],l=this.getNode(r),f=this.getNode(o),d=new ys(l,f,e[1],!0),m=new ys(f,l,e[e.length-2],!1),E=new Zo(t);E.setDirectedEdges(d,m),this.add(E)},deleteCutEdges:function(){this.computeNextCWEdges(),Qt.findLabeledEdgeRings(this.dirEdges);for(var t=new b,e=this.dirEdges.iterator();e.hasNext();){var r=e.next();if(!r.isMarked()){var o=r.getSym();if(r.getLabel()===o.getLabel()){r.setMarked(!0),o.setMarked(!0);var l=r.getEdge();t.add(l.getLine())}}}return t},getEdgeRings:function(){this.computeNextCWEdges(),Qt.label(this.dirEdges,-1);var t=Qt.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(t);for(var e=new b,r=this.dirEdges.iterator();r.hasNext();){var o=r.next();if(!o.isMarked()&&!o.isInRing()){var l=this.findEdgeRing(o);e.add(l)}}return e},getNode:function(t){var e=this.findNode(t);return e===null&&(e=new zn(t),this.add(e)),e},convertMaximalToMinimalEdgeRings:function(t){for(var e=t.iterator();e.hasNext();){var r=e.next(),o=r.getLabel(),l=Qt.findIntersectionNodes(r,o);if(l!==null)for(var f=l.iterator();f.hasNext();){var d=f.next();Qt.computeNextCCWEdges(d,o)}}},deleteDangles:function(){for(var t=this.findNodesOfDegree(1),e=new oe,r=new _e,o=t.iterator();o.hasNext();)r.push(o.next());for(;!r.isEmpty();){var l=r.pop();Qt.deleteAllEdges(l);for(var f=l.getOutEdges().getEdges(),o=f.iterator();o.hasNext();){var d=o.next();d.setMarked(!0);var m=d.getSym();m!==null&&m.setMarked(!0);var E=d.getEdge();e.add(E.getLine());var S=d.getToNode();Qt.getDegreeNonDeleted(S)===1&&r.push(S)}}return e},interfaces_:function(){return[]},getClass:function(){return Qt}}),Qt.findLabeledEdgeRings=function(t){for(var e=new b,r=1,o=t.iterator();o.hasNext();){var l=o.next();if(!(l.isMarked()||l.getLabel()>=0)){e.add(l);var f=sn.findDirEdgesInRing(l);Qt.label(f,r),r++}}return e},Qt.getDegreeNonDeleted=function(t){for(var e=t.getOutEdges().getEdges(),r=0,o=e.iterator();o.hasNext();){var l=o.next();l.isMarked()||r++}return r},Qt.deleteAllEdges=function(t){for(var e=t.getOutEdges().getEdges(),r=e.iterator();r.hasNext();){var o=r.next();o.setMarked(!0);var l=o.getSym();l!==null&&l.setMarked(!0)}},Qt.label=function(t,e){for(var r=t.iterator();r.hasNext();){var o=r.next();o.setLabel(e)}},Qt.computeNextCWEdges=function(t){for(var e=t.getOutEdges(),r=null,o=null,l=e.getEdges().iterator();l.hasNext();){var f=l.next();if(!f.isMarked()){if(r===null&&(r=f),o!==null){var d=o.getSym();d.setNext(f)}o=f}}if(o!==null){var d=o.getSym();d.setNext(r)}},Qt.computeNextCCWEdges=function(t,e){for(var r=t.getOutEdges(),o=null,l=null,f=r.getEdges(),d=f.size()-1;d>=0;d--){var m=f.get(d),E=m.getSym(),S=null;m.getLabel()===e&&(S=m);var R=null;E.getLabel()===e&&(R=E),S===null&&R===null||(R!==null&&(l=R),S!==null&&(l!==null&&(l.setNext(S),l=null),o===null&&(o=S)))}l!==null&&(P.isTrue(o!==null),l.setNext(o))},Qt.getDegree=function(t,e){for(var r=t.getOutEdges().getEdges(),o=0,l=r.iterator();l.hasNext();){var f=l.next();f.getLabel()===e&&o++}return o},Qt.findIntersectionNodes=function(t,e){var r=t,o=null;do{var l=r.getFromNode();Qt.getDegree(l,e)>1&&(o===null&&(o=new b),o.add(l)),r=r.getNext(),P.isTrue(r!==null,"found null DE in ring"),P.isTrue(r===t||!r.isInRing(),"found DE already in ring")}while(r!==t);return o},h(Re.prototype,{getGeometry:function(){return this.geomFactory===null&&(this.geomFactory=new at),this.polygonize(),this.extractOnlyPolygonal?this.geomFactory.buildGeometry(this.polyList):this.geomFactory.createGeometryCollection(at.toGeometryArray(this.polyList))},getInvalidRingLines:function(){return this.polygonize(),this.invalidRingLines},findValidRings:function(t,e,r){for(var o=t.iterator();o.hasNext();){var l=o.next();l.isValid()?e.add(l):r.add(l.getLineString())}},polygonize:function(){if(this.polyList!==null||(this.polyList=new b,this.graph===null))return null;this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var t=this.graph.getEdgeRings(),e=new b;this.invalidRingLines=new b,this.isCheckingRingsValid?this.findValidRings(t,e,this.invalidRingLines):e=t,this.findShellsAndHoles(e),Re.assignHolesToShells(this.holeList,this.shellList),wn.sort(this.shellList,new sn.EnvelopeComparator);var r=!0;this.extractOnlyPolygonal&&(Re.findDisjointShells(this.shellList),r=!1),this.polyList=Re.extractPolygons(this.shellList,r)},getDangles:function(){return this.polygonize(),this.dangles},getCutEdges:function(){return this.polygonize(),this.cutEdges},getPolygons:function(){return this.polygonize(),this.polyList},add:function(){if(V(arguments[0],X))for(var t=arguments[0],e=t.iterator();e.hasNext();){var r=e.next();this.add(r)}else if(arguments[0]instanceof st){var o=arguments[0];this.geomFactory=o.getFactory(),this.graph===null&&(this.graph=new Qt(this.geomFactory)),this.graph.addEdge(o)}else if(arguments[0]instanceof W){var l=arguments[0];l.apply(this.lineStringAdder)}},setCheckRingsValid:function(t){this.isCheckingRingsValid=t},findShellsAndHoles:function(t){this.holeList=new b,this.shellList=new b;for(var e=t.iterator();e.hasNext();){var r=e.next();r.computeHole(),r.isHole()?this.holeList.add(r):this.shellList.add(r)}},interfaces_:function(){return[]},getClass:function(){return Re}}),Re.findOuterShells=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next(),o=r.getOuterHole();o===null||o.isProcessed()||(r.setIncluded(!0),o.setProcessed(!0))}},Re.extractPolygons=function(t,e){for(var r=new b,o=t.iterator();o.hasNext();){var l=o.next();(e||l.isIncluded())&&r.add(l.getPolygon())}return r},Re.assignHolesToShells=function(t,e){for(var r=t.iterator();r.hasNext();){var o=r.next();Re.assignHoleToShell(o,e)}},Re.assignHoleToShell=function(t,e){var r=sn.findEdgeRingContaining(t,e);r!==null&&r.addHole(t)},Re.findDisjointShells=function(t){Re.findOuterShells(t);var e=null;do{e=!1;for(var r=t.iterator();r.hasNext();){var o=r.next();o.isIncludedSet()||(o.updateIncluded(),o.isIncludedSet()||(e=!0))}}while(e)},h(Xo.prototype,{filter:function(t){t instanceof st&&this.p.add(t)},interfaces_:function(){return[De]},getClass:function(){return Xo}}),Re.LineStringAdder=Xo;var Ag=Object.freeze({Polygonizer:Re});h(Yo.prototype,{createEdgeEndForNext:function(t,e,r,o){var l=r.segmentIndex+1;if(l>=t.getNumPoints()&&o===null)return null;var f=t.getCoordinate(l);o!==null&&o.segmentIndex===r.segmentIndex&&(f=o.coord);var d=new mn(t,r.coord,f,new Ht(t.getLabel()));e.add(d)},createEdgeEndForPrev:function(t,e,r,o){var l=r.segmentIndex;if(r.dist===0){if(l===0)return null;l--}var f=t.getCoordinate(l);o!==null&&o.segmentIndex>=l&&(f=o.coord);var d=new Ht(t.getLabel());d.flip();var m=new mn(t,r.coord,f,d);e.add(m)},computeEdgeEnds:function(){if(arguments.length===1){for(var t=arguments[0],e=new b,r=t;r.hasNext();){var o=r.next();this.computeEdgeEnds(o,e)}return e}if(arguments.length===2){var l=arguments[0],f=arguments[1],d=l.getEdgeIntersectionList();d.addEndpoints();var m=d.iterator(),E=null,S=null;if(!m.hasNext())return null;var R=m.next();do E=S,S=R,R=null,m.hasNext()&&(R=m.next()),S!==null&&(this.createEdgeEndForPrev(l,f,S,E),this.createEdgeEndForNext(l,f,S,R));while(S!==null)}},interfaces_:function(){return[]},getClass:function(){return Yo}}),w(_s,mn),h(_s.prototype,{insert:function(t){this.edgeEnds.add(t)},print:function(t){t.println("EdgeEndBundle--> Label: "+this.label);for(var e=this.iterator();e.hasNext();){var r=e.next();r.print(t),t.println()}},iterator:function(){return this.edgeEnds.iterator()},getEdgeEnds:function(){return this.edgeEnds},computeLabelOn:function(t,e){for(var r=0,o=!1,l=this.iterator();l.hasNext();){var f=l.next(),d=f.getLabel().getLocation(t);d===x.BOUNDARY&&r++,d===x.INTERIOR&&(o=!0)}var d=x.NONE;o&&(d=x.INTERIOR),r>0&&(d=be.determineBoundary(e,r)),this.label.setLocation(t,d)},computeLabelSide:function(t,e){for(var r=this.iterator();r.hasNext();){var o=r.next();if(o.getLabel().isArea()){var l=o.getLabel().getLocation(t,e);if(l===x.INTERIOR)return this.label.setLocation(t,e,x.INTERIOR),null;l===x.EXTERIOR&&this.label.setLocation(t,e,x.EXTERIOR)}}},getLabel:function(){return this.label},computeLabelSides:function(t){this.computeLabelSide(t,U.LEFT),this.computeLabelSide(t,U.RIGHT)},updateIM:function(t){Ye.updateIM(this.label,t)},computeLabel:function(t){for(var e=!1,r=this.iterator();r.hasNext();){var o=r.next();o.getLabel().isArea()&&(e=!0)}e?this.label=new Ht(x.NONE,x.NONE,x.NONE):this.label=new Ht(x.NONE);for(var l=0;2>l;l++)this.computeLabelOn(l,t),e&&this.computeLabelSides(l)},interfaces_:function(){return[]},getClass:function(){return _s}}),w(Wo,Hi),h(Wo.prototype,{updateIM:function(t){for(var e=this.iterator();e.hasNext();){var r=e.next();r.updateIM(t)}},insert:function(t){var e=this.edgeMap.get(t);e===null?(e=new _s(t),this.insertEdgeEnd(t,e)):e.insert(t)},interfaces_:function(){return[]},getClass:function(){return Wo}}),w(Jo,An),h(Jo.prototype,{updateIMFromEdges:function(t){this.edges.updateIM(t)},computeIM:function(t){t.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)},interfaces_:function(){return[]},getClass:function(){return Jo}}),w(xs,Vi),h(xs.prototype,{createNode:function(t){return new Jo(t,new Wo)},interfaces_:function(){return[]},getClass:function(){return xs}}),h(Ko.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this.nodes.add(r)}},computeProperIntersectionIM:function(t,e){var r=this.arg[0].getGeometry().getDimension(),o=this.arg[1].getGeometry().getDimension(),l=t.hasProperIntersection(),f=t.hasProperInteriorIntersection();r===2&&o===2?l&&e.setAtLeast("212101212"):r===2&&o===1?(l&&e.setAtLeast("FFF0FFFF2"),f&&e.setAtLeast("1FFFFF1FF")):r===1&&o===2?(l&&e.setAtLeast("F0FFFFFF2"),f&&e.setAtLeast("1F1FFFFFF")):r===1&&o===1&&f&&e.setAtLeast("0FFFFFFFF")},labelIsolatedEdges:function(t,e){for(var r=this.arg[t].getEdgeIterator();r.hasNext();){var o=r.next();o.isIsolated()&&(this.labelIsolatedEdge(o,e,this.arg[e].getGeometry()),this.isolatedEdges.add(o))}},labelIsolatedEdge:function(t,e,r){if(r.getDimension()>0){var o=this.ptLocator.locate(t.getCoordinate(),r);t.getLabel().setAllLocations(e,o)}else t.getLabel().setAllLocations(e,x.EXTERIOR)},computeIM:function(){var t=new _t;if(t.set(x.EXTERIOR,x.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var e=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);var r=new Yo,o=r.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(o);var l=r.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(l),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t},labelNodeEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().computeLabelling(this.arg)}},copyNodesAndLabels:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var r=e.next(),o=this.nodes.addNode(r.getCoordinate());o.setLabel(t,r.getLabel().getLocation(t))}},labelIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var r=e.next(),o=r.getLabel().getLocation(t),l=r.getEdgeIntersectionList().iterator();l.hasNext();){var f=l.next(),d=this.nodes.find(f.coord);d.getLabel().isNull(t)&&(o===x.BOUNDARY?d.setLabelBoundary(t):d.setLabel(t,x.INTERIOR))}},labelIsolatedNode:function(t,e){var r=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setAllLocations(e,r)},computeIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var r=e.next(),o=r.getLabel().getLocation(t),l=r.getEdgeIntersectionList().iterator();l.hasNext();){var f=l.next(),d=this.nodes.addNode(f.coord);o===x.BOUNDARY?d.setLabelBoundary(t):d.getLabel().isNull(t)&&d.setLabel(t,x.INTERIOR)}},labelIsolatedNodes:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next(),r=e.getLabel();P.isTrue(r.getGeometryCount()>0,"node with empty label found"),e.isIsolated()&&(r.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}},updateIM:function(t){for(var e=this.isolatedEdges.iterator();e.hasNext();){var r=e.next();r.updateIM(t)}for(var o=this.nodes.iterator();o.hasNext();){var l=o.next();l.updateIM(t),l.updateIMFromEdges(t)}},computeDisjointIM:function(t){var e=this.arg[0].getGeometry();e.isEmpty()||(t.set(x.INTERIOR,x.EXTERIOR,e.getDimension()),t.set(x.BOUNDARY,x.EXTERIOR,e.getBoundaryDimension()));var r=this.arg[1].getGeometry();r.isEmpty()||(t.set(x.EXTERIOR,x.INTERIOR,r.getDimension()),t.set(x.EXTERIOR,x.BOUNDARY,r.getBoundaryDimension()))},interfaces_:function(){return[]},getClass:function(){return Ko}}),h(Ls.prototype,{isContainedInBoundary:function(t){if(t instanceof wt)return!1;if(t instanceof Ot)return this.isPointContainedInBoundary(t);if(t instanceof st)return this.isLineStringContainedInBoundary(t);for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);if(!this.isContainedInBoundary(r))return!1}return!0},isLineSegmentContainedInBoundary:function(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this.rectEnv.getMinX()||t.x===this.rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this.rectEnv.getMinY()||t.y===this.rectEnv.getMaxY()))return!0;return!1},isLineStringContainedInBoundary:function(t){for(var e=t.getCoordinateSequence(),r=new C,o=new C,l=0;l<e.size()-1;l++)if(e.getCoordinate(l,r),e.getCoordinate(l+1,o),!this.isLineSegmentContainedInBoundary(r,o))return!1;return!0},isPointContainedInBoundary:function(){if(arguments[0]instanceof Ot){var t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof C){var e=arguments[0];return e.x===this.rectEnv.getMinX()||e.x===this.rectEnv.getMaxX()||e.y===this.rectEnv.getMinY()||e.y===this.rectEnv.getMaxY()}},contains:function(t){return this.rectEnv.contains(t.getEnvelopeInternal())?!this.isContainedInBoundary(t):!1},interfaces_:function(){return[]},getClass:function(){return Ls}}),Ls.contains=function(t,e){var r=new Ls(t);return r.contains(e)},h(Fu.prototype,{intersects:function(t,e){var r=new M(t,e);if(!this.rectEnv.intersects(r))return!1;if(this.rectEnv.intersects(t)||this.rectEnv.intersects(e))return!0;if(t.compareTo(e)>0){var o=t;t=e,e=o}var l=!1;return e.y>t.y&&(l=!0),l?this.li.computeIntersection(t,e,this.diagDown0,this.diagDown1):this.li.computeIntersection(t,e,this.diagUp0,this.diagUp1),!!this.li.hasIntersection()},interfaces_:function(){return[]},getClass:function(){return Fu}}),h(Li.prototype,{applyTo:function(t){for(var e=0;e<t.getNumGeometries()&&!this._isDone;e++){var r=t.getGeometryN(e);if(r instanceof ht)this.applyTo(r);else if(this.visit(r),this.isDone())return this._isDone=!0,null}},interfaces_:function(){return[]},getClass:function(){return Li}}),h(Lr.prototype,{intersects:function(t){if(!this.rectEnv.intersects(t.getEnvelopeInternal()))return!1;var e=new jo(this.rectEnv);if(e.applyTo(t),e.intersects())return!0;var r=new $o(this.rectangle);if(r.applyTo(t),r.containsPoint())return!0;var o=new Qo(this.rectangle);return o.applyTo(t),!!o.intersects()},interfaces_:function(){return[]},getClass:function(){return Lr}}),Lr.intersects=function(t,e){var r=new Lr(t);return r.intersects(e)},w(jo,Li),h(jo.prototype,{isDone:function(){return this._intersects===!0},visit:function(t){var e=t.getEnvelopeInternal();return this.rectEnv.intersects(e)?this.rectEnv.contains(e)?(this._intersects=!0,null):e.getMinX()>=this.rectEnv.getMinX()&&e.getMaxX()<=this.rectEnv.getMaxX()?(this._intersects=!0,null):e.getMinY()>=this.rectEnv.getMinY()&&e.getMaxY()<=this.rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null},intersects:function(){return this._intersects},interfaces_:function(){return[]},getClass:function(){return jo}}),w($o,Li),h($o.prototype,{isDone:function(){return this._containsPoint===!0},visit:function(t){if(!(t instanceof wt))return null;var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;for(var r=new C,o=0;4>o;o++)if(this.rectSeq.getCoordinate(o,r),e.contains(r)&&Ge.containsPointInPolygon(r,t))return this._containsPoint=!0,null},containsPoint:function(){return this._containsPoint},interfaces_:function(){return[]},getClass:function(){return $o}}),w(Qo,Li),h(Qo.prototype,{intersects:function(){return this.hasIntersection},isDone:function(){return this.hasIntersection===!0},visit:function(t){var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;var r=de.getLines(t);this.checkIntersectionWithLineStrings(r)},checkIntersectionWithLineStrings:function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();if(this.checkIntersectionWithSegments(r),this.hasIntersection)return null}},checkIntersectionWithSegments:function(t){for(var e=t.getCoordinateSequence(),r=1;r<e.size();r++)if(e.getCoordinate(r-1,this.p0),e.getCoordinate(r,this.p1),this.rectIntersector.intersects(this.p0,this.p1))return this.hasIntersection=!0,null},interfaces_:function(){return[]},getClass:function(){return Qo}}),w(vt,di),h(vt.prototype,{getIntersectionMatrix:function(){return this._relate.computeIM()},interfaces_:function(){return[]},getClass:function(){return vt}}),vt.covers=function(t,e){return t.getEnvelopeInternal().covers(e.getEnvelopeInternal())?t.isRectangle()?!0:vt.relate(t,e).isCovers():!1},vt.intersects=function(t,e){return t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?t.isRectangle()?Lr.intersects(t,e):e.isRectangle()?Lr.intersects(e,t):vt.relate(t,e).isIntersects():!1},vt.touches=function(t,e){return t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?vt.relate(t,e).isTouches(t.getDimension(),e.getDimension()):!1},vt.within=function(t,e){return e.contains(t)},vt.coveredBy=function(t,e){return vt.covers(e,t)},vt.relate=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],r=new vt(t,e),o=r.getIntersectionMatrix();return o}if(arguments.length===3){if(typeof arguments[2]=="string"&&arguments[0]instanceof W&&arguments[1]instanceof W){var l=arguments[0],f=arguments[1],d=arguments[2];return vt.relateWithCheck(l,f).matches(d)}if(V(arguments[2],ne)&&arguments[0]instanceof W&&arguments[1]instanceof W){var m=arguments[0],E=arguments[1],S=arguments[2],r=new vt(m,E,S),o=r.getIntersectionMatrix();return o}}},vt.overlaps=function(t,e){return t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?vt.relate(t,e).isOverlaps(t.getDimension(),e.getDimension()):!1},vt.disjoint=function(t,e){return!t.intersects(e)},vt.relateWithCheck=function(t,e){return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),vt.relate(t,e)},vt.crosses=function(t,e){return t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?vt.relate(t,e).isCrosses(t.getDimension(),e.getDimension()):!1},vt.contains=function(t,e){return t.getEnvelopeInternal().contains(e.getEnvelopeInternal())?t.isRectangle()?Ls.contains(t,e):vt.relate(t,e).isContains():!1};var kg=Object.freeze({RelateOp:vt});h(qe.prototype,{extractElements:function(t,e){if(t===null)return null;for(var r=0;r<t.getNumGeometries();r++){var o=t.getGeometryN(r);this.skipEmpty&&o.isEmpty()||e.add(o)}},combine:function(){for(var t=new b,e=this.inputGeoms.iterator();e.hasNext();){var r=e.next();this.extractElements(r,t)}return t.size()===0?this.geomFactory!==null?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(t)},interfaces_:function(){return[]},getClass:function(){return qe}}),qe.combine=function(){if(arguments.length===1){var t=arguments[0],e=new qe(t);return e.combine()}if(arguments.length===2){var r=arguments[0],o=arguments[1],e=new qe(qe.createList(r,o));return e.combine()}if(arguments.length===3){var l=arguments[0],f=arguments[1],d=arguments[2],e=new qe(qe.createList(l,f,d));return e.combine()}},qe.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},qe.createList=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],r=new b;return r.add(t),r.add(e),r}if(arguments.length===3){var o=arguments[0],l=arguments[1],f=arguments[2],r=new b;return r.add(o),r.add(l),r.add(f),r}},h(Es.prototype,{union:function(){for(var t=new Bi,e=new ye,r=0;r<this.pointGeom.getNumGeometries();r++){var o=this.pointGeom.getGeometryN(r),l=o.getCoordinate(),f=t.locate(l,this.otherGeom);f===x.EXTERIOR&&e.add(l)}if(e.size()===0)return this.otherGeom;var d=null,m=Q.toCoordinateArray(e);return d=m.length===1?this.geomFact.createPoint(m[0]):this.geomFact.createMultiPointFromCoords(m),qe.combine(d,this.otherGeom)},interfaces_:function(){return[]},getClass:function(){return Es}}),Es.union=function(t,e){var r=new Es(t,e);return r.union()},h(Ei.prototype,{filter:function(t){this.sortIndex!==-1&&t.getSortIndex()!==this.sortIndex||this.comps.add(t)},interfaces_:function(){return[Pn]},getClass:function(){return Ei}}),Ei.extract=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return Ei.extract(t,e,new b)}if(arguments.length===3){var r=arguments[0],o=arguments[1],l=arguments[2];return r.getSortIndex()===o?l.add(r):r instanceof ht&&r.apply(new Ei(o,l)),l}},h(Ke.prototype,{reduceToGeometries:function(t){for(var e=new b,r=t.iterator();r.hasNext();){var o=r.next(),l=null;V(o,N)?l=this.unionTree(o):o instanceof W&&(l=o),e.add(l)}return e},extractByEnvelope:function(t,e,r){for(var o=new b,l=0;l<e.getNumGeometries();l++){var f=e.getGeometryN(l);f.getEnvelopeInternal().intersects(t)?o.add(f):r.add(f)}return this.geomFactory.buildGeometry(o)},unionOptimized:function(t,e){var r=t.getEnvelopeInternal(),o=e.getEnvelopeInternal();if(!r.intersects(o)){var l=qe.combine(t,e);return l}if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var f=r.intersection(o);return this.unionUsingEnvelopeIntersection(t,e,f)},union:function(){if(this.inputPolys===null)throw new IllegalStateException("union() method cannot be called twice");if(this.inputPolys.isEmpty())return null;this.geomFactory=this.inputPolys.iterator().next().getFactory();for(var t=new Rt(Ke.STRTREE_NODE_CAPACITY),e=this.inputPolys.iterator();e.hasNext();){var r=e.next();t.insert(r.getEnvelopeInternal(),r)}this.inputPolys=null;var o=t.itemsTree(),l=this.unionTree(o);return l},binaryUnion:function(){if(arguments.length===1){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(arguments.length===3){var e=arguments[0],r=arguments[1],o=arguments[2];if(1>=o-r){var f=Ke.getGeometry(e,r);return this.unionSafe(f,null)}if(o-r===2)return this.unionSafe(Ke.getGeometry(e,r),Ke.getGeometry(e,r+1));var l=Math.trunc((o+r)/2),f=this.binaryUnion(e,r,l),d=this.binaryUnion(e,l,o);return this.unionSafe(f,d)}},repeatedUnion:function(t){for(var e=null,r=t.iterator();r.hasNext();){var o=r.next();e=e===null?o.copy():e.union(o)}return e},unionSafe:function(t,e){return t===null&&e===null?null:t===null?e.copy():e===null?t.copy():this.unionOptimized(t,e)},unionActual:function(t,e){return Ke.restrictToPolygons(t.union(e))},unionTree:function(t){var e=this.reduceToGeometries(t),r=this.binaryUnion(e);return r},unionUsingEnvelopeIntersection:function(t,e,r){var o=new b,l=this.extractByEnvelope(r,t,o),f=this.extractByEnvelope(r,e,o),d=this.unionActual(l,f);o.add(d);var m=qe.combine(o);return m},bufferUnion:function(){if(arguments.length===1){var t=arguments[0],e=t.get(0).getFactory(),r=e.buildGeometry(t),o=r.buffer(0);return o}if(arguments.length===2){var l=arguments[0],f=arguments[1],e=l.getFactory(),r=e.createGeometryCollection([l,f]),o=r.buffer(0);return o}},interfaces_:function(){return[]},getClass:function(){return Ke}}),Ke.restrictToPolygons=function(t){if(V(t,bn))return t;var e=Wi.getPolygons(t);return e.size()===1?e.get(0):t.getFactory().createMultiPolygon(at.toPolygonArray(e))},Ke.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Ke.union=function(t){var e=new Ke(t);return e.union()},Ke.STRTREE_NODE_CAPACITY=4,h(wi.prototype,{unionNoOpt:function(t){var e=this.geomFact.createPoint();return re.overlayOp(t,e,j.UNION)},unionWithNull:function(t,e){return t===null&&e===null?null:e===null?t:t===null?e:t.union(e)},extract:function(){if(V(arguments[0],X))for(var t=arguments[0],e=t.iterator();e.hasNext();){var r=e.next();this.extract(r)}else if(arguments[0]instanceof W){var o=arguments[0];this.geomFact===null&&(this.geomFact=o.getFactory()),Ei.extract(o,W.SORTINDEX_POLYGON,this.polygons),Ei.extract(o,W.SORTINDEX_LINESTRING,this.lines),Ei.extract(o,W.SORTINDEX_POINT,this.points)}},union:function(){if(this.geomFact===null)return null;var e=null;if(this.points.size()>0){var r=this.geomFact.buildGeometry(this.points);e=this.unionNoOpt(r)}var o=null;if(this.lines.size()>0){var l=this.geomFact.buildGeometry(this.lines);o=this.unionNoOpt(l)}var f=null;this.polygons.size()>0&&(f=Ke.union(this.polygons));var d=this.unionWithNull(o,f),m=null;return m=e===null?d:d===null?e:Es.union(e,d),m===null?this.geomFact.createGeometryCollection():m},interfaces_:function(){return[]},getClass:function(){return wi}}),wi.union=function(){if(arguments.length===1){if(V(arguments[0],X)){var t=arguments[0],e=new wi(t);return e.union()}if(arguments[0]instanceof W){var r=arguments[0],e=new wi(r);return e.union()}}else if(arguments.length===2){var o=arguments[0],l=arguments[1],e=new wi(o,l);return e.union()}};var Fg=Object.freeze({UnaryUnionOp:wi});h(ws.prototype,{visitInteriorRing:function(t,e){var r=t.getCoordinates(),o=r[0],l=ws.findDifferentPoint(r,o),f=e.findEdgeInSameDirection(o,l),d=e.findEdgeEnd(f),m=null;d.getLabel().getLocation(0,U.RIGHT)===x.INTERIOR?m=d:d.getSym().getLabel().getLocation(0,U.RIGHT)===x.INTERIOR&&(m=d.getSym()),P.isTrue(m!==null,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(m)},visitShellInteriors:function(t,e){if(t instanceof wt){var r=t;this.visitInteriorRing(r.getExteriorRing(),e)}if(t instanceof ae)for(var o=t,l=0;l<o.getNumGeometries();l++){var r=o.getGeometryN(l);this.visitInteriorRing(r.getExteriorRing(),e)}},getCoordinate:function(){return this.disconnectedRingcoord},setInteriorEdgesInResult:function(t){for(var e=t.getEdgeEnds().iterator();e.hasNext();){var r=e.next();r.getLabel().getLocation(0,U.RIGHT)===x.INTERIOR&&r.setInResult(!0)}},visitLinkedDirectedEdges:function(t){var e=t,r=t;do P.isTrue(r!==null,"found null Directed Edge"),r.setVisited(!0),r=r.getNext();while(r!==e)},buildEdgeRings:function(t){for(var e=new b,r=t.iterator();r.hasNext();){var o=r.next();if(o.isInResult()&&o.getEdgeRing()===null){var l=new ns(o,this.geometryFactory);l.linkDirectedEdgesForMinimalEdgeRings();var f=l.buildMinimalRings();e.addAll(f)}}return e},hasUnvisitedShellEdge:function(t){for(var e=0;e<t.size();e++){var r=t.get(e);if(!r.isHole()){var o=r.getEdges(),l=o.get(0);if(l.getLabel().getLocation(0,U.RIGHT)===x.INTERIOR){for(var f=0;f<o.size();f++)if(l=o.get(f),!l.isVisited())return this.disconnectedRingcoord=l.getCoordinate(),!0}}}return!1},isInteriorsConnected:function(){var t=new b;this.geomGraph.computeSplitEdges(t);var e=new vn(new mr);e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();var r=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(r)},interfaces_:function(){return[]},getClass:function(){return ws}}),ws.findDifferentPoint=function(t,e){for(var r=0;r<t.length;r++)if(!t[r].equals(e))return t[r];return null},h(Ln.prototype,{hasChildren:function(){for(var t=0;2>t;t++)if(this.subnode[t]!==null)return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;2>e;e++)this.subnode[e]!==null&&this.subnode[e].addAllItems(t);return t},size:function(){for(var t=0,e=0;2>e;e++)this.subnode[e]!==null&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){return t===null||this.isSearchMatch(t)?(e.addAll(this.items),this.subnode[0]!==null&&this.subnode[0].addAllItemsFromOverlapping(t,e),void(this.subnode[1]!==null&&this.subnode[1].addAllItemsFromOverlapping(t,e))):null},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var r=!1,o=0;2>o;o++)if(this.subnode[o]!==null&&(r=this.subnode[o].remove(t,e))){this.subnode[o].isPrunable()&&(this.subnode[o]=null);break}return r||(r=this.items.remove(e))},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;2>e;e++)if(this.subnode[e]!==null){var r=this.subnode[e].depth();r>t&&(t=r)}return t+1},nodeSize:function(){for(var t=0,e=0;2>e;e++)this.subnode[e]!==null&&(t+=this.subnode[e].nodeSize());return t+1},add:function(t){this.items.add(t)},interfaces_:function(){return[]},getClass:function(){return Ln}}),Ln.getSubnodeIndex=function(t,e){var r=-1;return t.min>=e&&(r=1),t.max<=e&&(r=0),r},h(Gn.prototype,{expandToInclude:function(t){t.max>this.max&&(this.max=t.max),t.min<this.min&&(this.min=t.min)},getWidth:function(){return this.max-this.min},overlaps:function(){if(arguments.length===1){var t=arguments[0];return this.overlaps(t.min,t.max)}if(arguments.length===2){var e=arguments[0],r=arguments[1];return!(this.min>r||this.max<e)}},getMin:function(){return this.min},toString:function(){return"["+this.min+", "+this.max+"]"},contains:function(){if(arguments.length===1){if(arguments[0]instanceof Gn){var t=arguments[0];return this.contains(t.min,t.max)}if(typeof arguments[0]=="number"){var e=arguments[0];return e>=this.min&&e<=this.max}}else if(arguments.length===2){var r=arguments[0],o=arguments[1];return r>=this.min&&o<=this.max}},init:function(t,e){this.min=t,this.max=e,t>e&&(this.min=e,this.max=t)},getMax:function(){return this.max},interfaces_:function(){return[]},getClass:function(){return Gn}}),h(Is.prototype,{getInterval:function(){return this.interval},getLevel:function(){return this.level},computeKey:function(t){for(this.level=Is.computeLevel(t),this.interval=new Gn,this.computeInterval(this.level,t);!this.interval.contains(t);)this.level+=1,this.computeInterval(this.level,t)},computeInterval:function(t,e){var r=Xi.powerOf2(t);this.pt=Math.floor(e.getMin()/r)*r,this.interval.init(this.pt,this.pt+r)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Is}}),Is.computeLevel=function(t){var e=t.getWidth(),r=Xi.exponent(e)+1;return r},w(ti,Ln),h(ti.prototype,{getInterval:function(){return this.interval},find:function(t){var e=Ln.getSubnodeIndex(t,this.centre);if(e===-1)return this;if(this.subnode[e]!==null){var r=this.subnode[e];return r.find(t)}return this},insert:function(t){P.isTrue(this.interval===null||this.interval.contains(t.interval));var e=Ln.getSubnodeIndex(t.interval,this.centre);if(t.level===this.level-1)this.subnode[e]=t;else{var r=this.createSubnode(e);r.insert(t),this.subnode[e]=r}},isSearchMatch:function(t){return t.overlaps(this.interval)},getSubnode:function(t){return this.subnode[t]===null&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getNode:function(t){var e=Ln.getSubnodeIndex(t,this.centre);if(e!==-1){var r=this.getSubnode(e);return r.getNode(t)}return this},createSubnode:function(t){var e=0,r=0;switch(t){case 0:e=this.interval.getMin(),r=this.centre;break;case 1:e=this.centre,r=this.interval.getMax()}var o=new Gn(e,r),l=new ti(o,this.level-1);return l},interfaces_:function(){return[]},getClass:function(){return ti}}),ti.createNode=function(t){var e=new Is(t),r=new ti(e.getInterval(),e.getLevel());return r},ti.createExpanded=function(t,e){var r=new Gn(e);t!==null&&r.expandToInclude(t.interval);var o=ti.createNode(r);return t!==null&&o.insert(t),o},w(Er,Ln),h(Er.prototype,{insert:function(t,e){var r=Ln.getSubnodeIndex(t,Er.origin);if(r===-1)return this.add(e),null;var o=this.subnode[r];if(o===null||!o.getInterval().contains(t)){var l=ti.createExpanded(o,t);this.subnode[r]=l}this.insertContained(this.subnode[r],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,r){P.isTrue(t.getInterval().contains(e));var o=vi.isZeroWidth(e.getMin(),e.getMax()),l=null;l=o?t.find(e):t.getNode(e),l.add(r)},interfaces_:function(){return[]},getClass:function(){return Er}}),Er.origin=0,h(wr.prototype,{size:function(){return this.root!==null?this.root.size():0},insert:function(t,e){this.collectStats(t);var r=wr.ensureExtent(t,this.minExtent);this.root.insert(r,e)},query:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];return this.query(new Gn(t,t))}if(arguments[0]instanceof Gn){var e=arguments[0],r=new b;return this.query(e,r),r}}else if(arguments.length===2){var o=arguments[0],l=arguments[1];this.root.addAllItemsFromOverlapping(o,l)}},iterator:function(){var t=new b;return this.root.addAllItems(t),t.iterator()},remove:function(t,e){var r=wr.ensureExtent(t,this.minExtent);return this.root.remove(r,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e)},depth:function(){return this.root!==null?this.root.depth():0},nodeSize:function(){return this.root!==null?this.root.nodeSize():0},interfaces_:function(){return[]},getClass:function(){return wr}}),wr.ensureExtent=function(t,e){var r=t.getMin(),o=t.getMax();return r!==o?t:(r===o&&(r-=e/2,o=r+e/2),new Gn(r,o))},h(zu.prototype,{isInside:function(t){},interfaces_:function(){return[]},getClass:function(){return zu}}),h(ta.prototype,{testLineSegment:function(t,e){var r=null,o=null,l=null,f=null,d=null,m=e.p0,E=e.p1;o=m.x-t.x,l=m.y-t.y,f=E.x-t.x,d=E.y-t.y,(l>0&&0>=d||d>0&&0>=l)&&(r=Fi.signOfDet2x2(o,l,f,d)/(d-l),r>0&&this.crossings++)},buildIndex:function(){this.tree=new wr;for(var t=Q.removeRepeatedPoints(this.ring.getCoordinates()),e=tn.getChains(t),r=0;r<e.size();r++){var o=e.get(r),l=o.getEnvelope();this.interval.min=l.getMinY(),this.interval.max=l.getMaxY(),this.tree.insert(this.interval,o)}},testMonotoneChain:function(t,e,r){r.select(t,e)},isInside:function(t){this.crossings=0;var e=new M(g.NEGATIVE_INFINITY,g.POSITIVE_INFINITY,t.y,t.y);this.interval.min=t.y,this.interval.max=t.y;for(var r=this.tree.query(this.interval),o=new Cs(this,t),l=r.iterator();l.hasNext();){var f=l.next();this.testMonotoneChain(e,o,f)}return this.crossings%2===1},interfaces_:function(){return[zu]},getClass:function(){return ta}}),w(Cs,xi),h(Cs.prototype,{select:function(){if(arguments.length!==1)return xi.prototype.select.apply(this,arguments);var t=arguments[0];this.mcp.testLineSegment(this.p,t)},interfaces_:function(){return[]},getClass:function(){return Cs}}),ta.MCSelecter=Cs,h(Gu.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this.nodes.add(r)}},getNodeIterator:function(){return this.nodes.iterator()},copyNodesAndLabels:function(t,e){for(var r=t.getNodeIterator();r.hasNext();){var o=r.next(),l=this.nodes.addNode(o.getCoordinate());l.setLabel(e,o.getLabel().getLocation(e))}},build:function(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);var e=new Yo,r=e.computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(r)},computeIntersectionNodes:function(t,e){for(var r=t.getEdgeIterator();r.hasNext();)for(var o=r.next(),l=o.getLabel().getLocation(e),f=o.getEdgeIntersectionList().iterator();f.hasNext();){var d=f.next(),m=this.nodes.addNode(d.coord);l===x.BOUNDARY?m.setLabelBoundary(e):m.getLabel().isNull(e)&&m.setLabel(e,x.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return Gu}}),h(Bu.prototype,{isNodeEdgeAreaLabelsConsistent:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();){var e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=e.getCoordinate().copy(),!1}return!0},getInvalidPoint:function(){return this.invalidPoint},hasDuplicateRings:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();)for(var e=t.next(),r=e.getEdges().iterator();r.hasNext();){var o=r.next();if(o.getEdgeEnds().size()>1)return this.invalidPoint=o.getEdge().getCoordinate(0),!0}return!1},isNodeConsistentArea:function(){var t=this.geomGraph.computeSelfNodes(this.li,!0,!0);return t.hasProperIntersection()?(this.invalidPoint=t.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())},interfaces_:function(){return[]},getClass:function(){return Bu}}),h(qu.prototype,{buildIndex:function(){this.index=new Rt;for(var t=0;t<this.rings.size();t++){var e=this.rings.get(t),r=e.getEnvelopeInternal();this.index.insert(r,e)}},getNestedPoint:function(){return this.nestedPt},isNonNested:function(){this.buildIndex();for(var t=0;t<this.rings.size();t++)for(var e=this.rings.get(t),r=e.getCoordinates(),o=this.index.query(e.getEnvelopeInternal()),l=0;l<o.size();l++){var f=o.get(l),d=f.getCoordinates();if(e!==f&&e.getEnvelopeInternal().intersects(f.getEnvelopeInternal())){var m=je.findPtNotNode(r,f,this.graph);if(m!==null){var E=H.isPointInRing(m,d);if(E)return this.nestedPt=m,!1}}}return!0},add:function(t){this.rings.add(t),this.totalEnv.expandToInclude(t.getEnvelopeInternal())},interfaces_:function(){return[]},getClass:function(){return qu}}),h(dt.prototype,{getErrorType:function(){return this.errorType},getMessage:function(){return dt.errMsg[this.errorType]},getCoordinate:function(){return this.pt},toString:function(){var t="";return this.pt!==null&&(t=" at or near point "+this.pt),this.getMessage()+t},interfaces_:function(){return[]},getClass:function(){return dt}}),dt.ERROR=0,dt.REPEATED_POINT=1,dt.HOLE_OUTSIDE_SHELL=2,dt.NESTED_HOLES=3,dt.DISCONNECTED_INTERIOR=4,dt.SELF_INTERSECTION=5,dt.RING_SELF_INTERSECTION=6,dt.NESTED_SHELLS=7,dt.DUPLICATE_RINGS=8,dt.TOO_FEW_POINTS=9,dt.INVALID_COORDINATE=10,dt.RING_NOT_CLOSED=11,dt.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],h(je.prototype,{checkInvalidCoordinates:function(){if(arguments[0]instanceof Array){for(var t=arguments[0],e=0;e<t.length;e++)if(!je.isValid(t[e]))return this.validErr=new dt(dt.INVALID_COORDINATE,t[e]),null}else if(arguments[0]instanceof wt){var r=arguments[0];if(this.checkInvalidCoordinates(r.getExteriorRing().getCoordinates()),this.validErr!==null)return null;for(var e=0;e<r.getNumInteriorRing();e++)if(this.checkInvalidCoordinates(r.getInteriorRingN(e).getCoordinates()),this.validErr!==null)return null}},checkHolesNotNested:function(t,e){for(var r=new qu(e),o=0;o<t.getNumInteriorRing();o++){var l=t.getInteriorRingN(o);r.add(l)}var f=r.isNonNested();f||(this.validErr=new dt(dt.NESTED_HOLES,r.getNestedPoint()))},checkConsistentArea:function(t){var e=new Bu(t),r=e.isNodeConsistentArea();return r?void(e.hasDuplicateRings()&&(this.validErr=new dt(dt.DUPLICATE_RINGS,e.getInvalidPoint()))):(this.validErr=new dt(dt.SELF_INTERSECTION,e.getInvalidPoint()),null)},isValid:function(){return this.checkValid(this.parentGeometry),this.validErr===null},checkShellInsideHole:function(t,e,r){var o=t.getCoordinates(),l=e.getCoordinates(),f=je.findPtNotNode(o,e,r);if(f!==null){var d=H.isPointInRing(f,l);if(!d)return f}var m=je.findPtNotNode(l,t,r);if(m!==null){var E=H.isPointInRing(m,o);return E?m:null}return P.shouldNeverReachHere("points in shell and hole appear to be equal"),null},checkNoSelfIntersectingRings:function(t){for(var e=t.getEdgeIterator();e.hasNext();){var r=e.next();if(this.checkNoSelfIntersectingRing(r.getEdgeIntersectionList()),this.validErr!==null)return null}},checkConnectedInteriors:function(t){var e=new ws(t);e.isInteriorsConnected()||(this.validErr=new dt(dt.DISCONNECTED_INTERIOR,e.getCoordinate()))},checkNoSelfIntersectingRing:function(t){for(var e=new ye,r=!0,o=t.iterator();o.hasNext();){var l=o.next();if(r)r=!1;else{if(e.contains(l.coord))return this.validErr=new dt(dt.RING_SELF_INTERSECTION,l.coord),null;e.add(l.coord)}}},checkHolesInShell:function(t,e){for(var r=t.getExteriorRing(),o=new ta(r),l=0;l<t.getNumInteriorRing();l++){var f=t.getInteriorRingN(l),d=je.findPtNotNode(f.getCoordinates(),r,e);if(d===null)return null;var m=!o.isInside(d);if(m)return this.validErr=new dt(dt.HOLE_OUTSIDE_SHELL,d),null}},checkTooFewPoints:function(t){return t.hasTooFewPoints()?(this.validErr=new dt(dt.TOO_FEW_POINTS,t.getInvalidPoint()),null):void 0},getValidationError:function(){return this.checkValid(this.parentGeometry),this.validErr},checkValid:function(){if(arguments[0]instanceof Ot){var t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof Se){var e=arguments[0];this.checkInvalidCoordinates(e.getCoordinates())}else if(arguments[0]instanceof Ut){var r=arguments[0];if(this.checkInvalidCoordinates(r.getCoordinates()),this.validErr!==null||(this.checkClosedRing(r),this.validErr!==null))return null;var o=new be(0,r);if(this.checkTooFewPoints(o),this.validErr!==null)return null;var l=new ie;o.computeSelfNodes(l,!0,!0),this.checkNoSelfIntersectingRings(o)}else if(arguments[0]instanceof st){var f=arguments[0];if(this.checkInvalidCoordinates(f.getCoordinates()),this.validErr!==null)return null;var o=new be(0,f);this.checkTooFewPoints(o)}else if(arguments[0]instanceof wt){var d=arguments[0];if(this.checkInvalidCoordinates(d),this.validErr!==null||(this.checkClosedRings(d),this.validErr!==null))return null;var o=new be(0,d);if(this.checkTooFewPoints(o),this.validErr!==null||(this.checkConsistentArea(o),this.validErr!==null)||!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(o),this.validErr!==null)||(this.checkHolesInShell(d,o),this.validErr!==null)||(this.checkHolesNotNested(d,o),this.validErr!==null))return null;this.checkConnectedInteriors(o)}else if(arguments[0]instanceof ae){for(var m=arguments[0],E=0;E<m.getNumGeometries();E++){var S=m.getGeometryN(E);if(this.checkInvalidCoordinates(S),this.validErr!==null||(this.checkClosedRings(S),this.validErr!==null))return null}var o=new be(0,m);if(this.checkTooFewPoints(o),this.validErr!==null||(this.checkConsistentArea(o),this.validErr!==null)||!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(o),this.validErr!==null))return null;for(var E=0;E<m.getNumGeometries();E++){var S=m.getGeometryN(E);if(this.checkHolesInShell(S,o),this.validErr!==null)return null}for(var E=0;E<m.getNumGeometries();E++){var S=m.getGeometryN(E);if(this.checkHolesNotNested(S,o),this.validErr!==null)return null}if(this.checkShellsNotNested(m,o),this.validErr!==null)return null;this.checkConnectedInteriors(o)}else if(arguments[0]instanceof ht)for(var R=arguments[0],E=0;E<R.getNumGeometries();E++){var k=R.getGeometryN(E);if(this.checkValid(k),this.validErr!==null)return null}else if(arguments[0]instanceof W){var G=arguments[0];if(this.validErr=null,G.isEmpty())return null;if(G instanceof Ot)this.checkValid(G);else if(G instanceof Se)this.checkValid(G);else if(G instanceof Ut)this.checkValid(G);else if(G instanceof st)this.checkValid(G);else if(G instanceof wt)this.checkValid(G);else if(G instanceof ae)this.checkValid(G);else{if(!(G instanceof ht))throw new UnsupportedOperationException(G.getClass().getName());this.checkValid(G)}}},setSelfTouchingRingFormingHoleValid:function(t){this.isSelfTouchingRingFormingHoleValid=t},checkShellNotNested:function(t,e,r){var o=t.getCoordinates(),l=e.getExteriorRing(),f=l.getCoordinates(),d=je.findPtNotNode(o,l,r);if(d===null)return null;var m=H.isPointInRing(d,f);if(!m)return null;if(e.getNumInteriorRing()<=0)return this.validErr=new dt(dt.NESTED_SHELLS,d),null;for(var E=null,S=0;S<e.getNumInteriorRing();S++){var R=e.getInteriorRingN(S);if(E=this.checkShellInsideHole(t,R,r),E===null)return null}this.validErr=new dt(dt.NESTED_SHELLS,E)},checkClosedRings:function(t){if(this.checkClosedRing(t.getExteriorRing()),this.validErr!==null)return null;for(var e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),this.validErr!==null)return null},checkClosedRing:function(t){if(!t.isClosed()){var e=null;t.getNumPoints()>=1&&(e=t.getCoordinateN(0)),this.validErr=new dt(dt.RING_NOT_CLOSED,e)}},checkShellsNotNested:function(t,e){for(var r=0;r<t.getNumGeometries();r++)for(var o=t.getGeometryN(r),l=o.getExteriorRing(),f=0;f<t.getNumGeometries();f++)if(r!==f){var d=t.getGeometryN(f);if(this.checkShellNotNested(l,d,e),this.validErr!==null)return null}},interfaces_:function(){return[]},getClass:function(){return je}}),je.findPtNotNode=function(t,e,r){for(var o=r.findEdge(e),l=o.getEdgeIntersectionList(),f=0;f<t.length;f++){var d=t[f];if(!l.isIntersection(d))return d}return null},je.isValid=function(){if(arguments[0]instanceof W){var t=arguments[0],e=new je(t);return e.isValid()}if(arguments[0]instanceof C){var r=arguments[0];return g.isNaN(r.x)||g.isInfinite(r.x)||g.isNaN(r.y)?!1:!g.isInfinite(r.y)}};var zg=Object.freeze({IsValidOp:je}),Gg=Object.freeze({BoundaryOp:Jn,IsSimpleOp:ls,buffer:Mg,distance:Og,linemerge:Rg,overlay:Dg,polygonize:Ag,relate:kg,union:Fg,valid:zg});w(ea,ke.CoordinateOperation),h(ea.prototype,{editCoordinates:function(t,e){if(t.length===0)return null;for(var r=new Array(t.length).fill(null),o=0;o<t.length;o++){var l=new C(t[o]);this.targetPM.makePrecise(l),r[o]=l}var f=new O(r,!1),d=f.toCoordinateArray(),m=0;e instanceof st&&(m=2),e instanceof Ut&&(m=4);var E=r;return this.removeCollapsed&&(E=null),d.length<m?E:d},interfaces_:function(){return[]},getClass:function(){return ea}}),h(Ki.prototype,{fixPolygonalTopology:function(t){var e=t;this.changePrecisionModel||(e=this.changePM(t,this.targetPM));var r=e.buffer(0),o=r;return this.changePrecisionModel||(o=t.getFactory().createGeometry(r)),o},reducePointwise:function(t){var e=null;if(this.changePrecisionModel){var r=this.createFactory(t.getFactory(),this.targetPM);e=new ke(r)}else e=new ke;var o=this.removeCollapsed;t.getDimension()>=2&&(o=!0);var l=e.edit(t,new ea(this.targetPM,o));return l},changePM:function(t,e){var r=this.createEditor(t.getFactory(),e);return r.edit(t,new ke.NoOpGeometryOperation)},setRemoveCollapsedComponents:function(t){this.removeCollapsed=t},createFactory:function(t,e){var r=new at(e,t.getSRID(),t.getCoordinateSequenceFactory());return r},setChangePrecisionModel:function(t){this.changePrecisionModel=t},reduce:function(t){var e=this.reducePointwise(t);return this.isPointwise?e:V(e,bn)?e.isValid()?e:this.fixPolygonalTopology(e):e},setPointwise:function(t){this.isPointwise=t},createEditor:function(t,e){if(t.getPrecisionModel()===e)return new ke;var r=this.createFactory(t,e),o=new ke(r);return o},interfaces_:function(){return[]},getClass:function(){return Ki}}),Ki.reduce=function(t,e){var r=new Ki(e);return r.reduce(t)},Ki.reducePointwise=function(t,e){var r=new Ki(e);return r.setPointwise(!0),r.reduce(t)};var Bg=Object.freeze({GeometryPrecisionReducer:Ki});h(Ns.prototype,{simplifySection:function(t,e){if(t+1===e)return null;this.seg.p0=this.pts[t],this.seg.p1=this.pts[e];for(var r=-1,o=t,l=t+1;e>l;l++){var f=this.seg.distance(this.pts[l]);f>r&&(r=f,o=l)}if(r<=this.distanceTolerance)for(var l=t+1;e>l;l++)this.usePt[l]=!1;else this.simplifySection(t,o),this.simplifySection(o,e)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(){this.usePt=new Array(this.pts.length).fill(null);for(var t=0;t<this.pts.length;t++)this.usePt[t]=!0;this.simplifySection(0,this.pts.length-1);for(var e=new O,t=0;t<this.pts.length;t++)this.usePt[t]&&e.add(new C(this.pts[t]));return e.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return Ns}}),Ns.simplify=function(t,e){var r=new Ns(t);return r.setDistanceTolerance(e),r.simplify()},h(Ir.prototype,{setEnsureValid:function(t){this.isEnsureValidTopology=t},getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():new Ss(this.isEnsureValidTopology,this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(0>t)throw new c;this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return Ir}}),Ir.simplify=function(t,e){var r=new Ir(t);return r.setDistanceTolerance(e),r.getResultGeometry()},w(Ss,we),h(Ss.prototype,{transformPolygon:function(t,e){if(t.isEmpty())return null;var r=we.prototype.transformPolygon.call(this,t,e);return e instanceof ae?r:this.createValidArea(r)},createValidArea:function(t){return this.isEnsureValidTopology?t.buffer(0):t},transformCoordinates:function(t,e){var r=t.toCoordinateArray(),o=null;return o=r.length===0?new Array(0).fill(null):Ns.simplify(r,this.distanceTolerance),this.factory.getCoordinateSequenceFactory().create(o)},transformMultiPolygon:function(t,e){var r=we.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(r)},transformLinearRing:function(t,e){var r=e instanceof wt,o=we.prototype.transformLinearRing.call(this,t,e);return!r||o instanceof Ut?o:null},interfaces_:function(){return[]},getClass:function(){return Ss}}),Ir.DPTransformer=Ss,w(Ts,nt),h(Ts.prototype,{getIndex:function(){return this.index},getParent:function(){return this.parent},interfaces_:function(){return[]},getClass:function(){return Ts}}),h(ei.prototype,{addToResult:function(t){this.resultSegs.add(t)},asLineString:function(){return this.parentLine.getFactory().createLineString(ei.extractCoordinates(this.resultSegs))},getResultSize:function(){var t=this.resultSegs.size();return t===0?0:t+1},getParent:function(){return this.parentLine},getSegment:function(t){return this.segs[t]},getParentCoordinates:function(){return this.parentLine.getCoordinates()},getMinimumSize:function(){return this.minimumSize},asLinearRing:function(){return this.parentLine.getFactory().createLinearRing(ei.extractCoordinates(this.resultSegs))},getSegments:function(){return this.segs},init:function(){var t=this.parentLine.getCoordinates();this.segs=new Array(t.length-1).fill(null);for(var e=0;e<t.length-1;e++){var r=new Ts(t[e],t[e+1],this.parentLine,e);this.segs[e]=r}},getResultCoordinates:function(){return ei.extractCoordinates(this.resultSegs)},interfaces_:function(){return[]},getClass:function(){return ei}}),ei.extractCoordinates=function(t){for(var e=new Array(t.size()+1).fill(null),r=null,o=0;o<t.size();o++)r=t.get(o),e[o]=r.p0;return e[e.length-1]=r.p1,e},h(Cr.prototype,{remove:function(t){this.index.remove(new M(t.p0,t.p1),t)},add:function(){if(arguments[0]instanceof ei)for(var t=arguments[0],e=t.getSegments(),r=0;r<e.length;r++){var o=e[r];this.add(o)}else if(arguments[0]instanceof nt){var l=arguments[0];this.index.insert(new M(l.p0,l.p1),l)}},query:function(t){var e=new M(t.p0,t.p1),r=new Uu(t);this.index.query(e,r);var o=r.getItems();return o},interfaces_:function(){return[]},getClass:function(){return Cr}}),h(Uu.prototype,{visitItem:function(t){var e=t;M.intersects(e.p0,e.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[li]},getClass:function(){return Uu}}),h(Ps.prototype,{flatten:function(t,e){var r=this.linePts[t],o=this.linePts[e],l=new nt(r,o);return this.remove(this.line,t,e),this.outputIndex.add(l),l},hasBadIntersection:function(t,e,r){return this.hasBadOutputIntersection(r)?!0:!!this.hasBadInputIntersection(t,e,r)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplifySection:function(t,e,r){r+=1;var o=new Array(2).fill(null);if(t+1===e){var l=this.line.getSegment(t);return this.line.addToResult(l),null}var f=!0;if(this.line.getResultSize()<this.line.getMinimumSize()){var d=r+1;d<this.line.getMinimumSize()&&(f=!1)}var m=new Array(1).fill(null),E=this.findFurthestPoint(this.linePts,t,e,m);m[0]>this.distanceTolerance&&(f=!1);var S=new nt;if(S.p0=this.linePts[t],S.p1=this.linePts[e],o[0]=t,o[1]=e,this.hasBadIntersection(this.line,o,S)&&(f=!1),f){var l=this.flatten(t,e);return this.line.addToResult(l),null}this.simplifySection(t,E,r),this.simplifySection(E,e,r)},hasBadOutputIntersection:function(t){for(var e=this.outputIndex.query(t),r=e.iterator();r.hasNext();){var o=r.next();if(this.hasInteriorIntersection(o,t))return!0}return!1},findFurthestPoint:function(t,e,r,o){var l=new nt;l.p0=t[e],l.p1=t[r];for(var f=-1,d=e,m=e+1;r>m;m++){var E=t[m],S=l.distance(E);S>f&&(f=S,d=m)}return o[0]=f,d},simplify:function(t){this.line=t,this.linePts=t.getParentCoordinates(),this.simplifySection(0,this.linePts.length-1,0)},remove:function(t,e,r){for(var o=e;r>o;o++){var l=t.getSegment(o);this.inputIndex.remove(l)}},hasInteriorIntersection:function(t,e){return this.li.computeIntersection(t.p0,t.p1,e.p0,e.p1),this.li.isInteriorIntersection()},hasBadInputIntersection:function(t,e,r){for(var o=this.inputIndex.query(r),l=o.iterator();l.hasNext();){var f=l.next();if(this.hasInteriorIntersection(f,r)){if(Ps.isInLineSection(t,e,f))continue;return!0}}return!1},interfaces_:function(){return[]},getClass:function(){return Ps}}),Ps.isInLineSection=function(t,e,r){if(r.getParent()!==t.getParent())return!1;var o=r.getIndex();return o>=e[0]&&o<e[1]},h(Vu.prototype,{setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(t){for(var e=t.iterator();e.hasNext();)this.inputIndex.add(e.next());for(var e=t.iterator();e.hasNext();){var r=new Ps(this.inputIndex,this.outputIndex);r.setDistanceTolerance(this.distanceTolerance),r.simplify(e.next())}},interfaces_:function(){return[]},getClass:function(){return Vu}}),h(ji.prototype,{getResultGeometry:function(){if(this.inputGeom.isEmpty())return this.inputGeom.copy();this.linestringMap=new Mn,this.inputGeom.apply(new na(this)),this.lineSimplifier.simplify(this.linestringMap.values());var t=new bs(this.linestringMap).transform(this.inputGeom);return t},setDistanceTolerance:function(t){if(0>t)throw new c;this.lineSimplifier.setDistanceTolerance(t)},interfaces_:function(){return[]},getClass:function(){return ji}}),ji.simplify=function(t,e){var r=new ji(t);return r.setDistanceTolerance(e),r.getResultGeometry()},w(bs,we),h(bs.prototype,{transformCoordinates:function(t,e){if(t.size()===0)return null;if(e instanceof st){var r=this.linestringMap.get(e);return this.createCoordinateSequence(r.getResultCoordinates())}return we.prototype.transformCoordinates.call(this,t,e)},interfaces_:function(){return[]},getClass:function(){return bs}}),h(na.prototype,{filter:function(t){if(t instanceof st){var e=t;if(e.isEmpty())return null;var r=e.isClosed()?4:2,o=new ei(e,r);this.tps.linestringMap.put(e,o)}},interfaces_:function(){return[De]},getClass:function(){return na}}),ji.LineStringTransformer=bs,ji.LineStringMapBuilderFilter=na;var qg=Object.freeze({DouglasPeuckerSimplifier:Ir,TopologyPreservingSimplifier:ji});h(Nr.prototype,{splitAt:function(){if(arguments.length===1){var t=arguments[0],e=this.minimumLen/this.segLen;if(t.distance(this.seg.p0)<this.minimumLen)return this.splitPt=this.seg.pointAlong(e),null;if(t.distance(this.seg.p1)<this.minimumLen)return this.splitPt=Nr.pointAlongReverse(this.seg,e),null;this.splitPt=t}else if(arguments.length===2){var r=arguments[0],o=arguments[1],l=this.getConstrainedLength(r),f=l/this.segLen;o.equals2D(this.seg.p0)?this.splitPt=this.seg.pointAlong(f):this.splitPt=Nr.pointAlongReverse(this.seg,f)}},setMinimumLength:function(t){this.minimumLen=t},getConstrainedLength:function(t){return t<this.minimumLen?this.minimumLen:t},getSplitPoint:function(){return this.splitPt},interfaces_:function(){return[]},getClass:function(){return Nr}}),Nr.pointAlongReverse=function(t,e){var r=new C;return r.x=t.p1.x-e*(t.p1.x-t.p0.x),r.y=t.p1.y-e*(t.p1.y-t.p0.y),r},h(Hu.prototype,{findSplitPoint:function(t,e){},interfaces_:function(){return[]},getClass:function(){return Hu}}),h(Ms.prototype,{findSplitPoint:function(t,e){var r=t.getLineSegment(),o=r.getLength(),l=o/2,f=new Nr(r),d=Ms.projectedSplitPoint(t,e),m=2*d.distance(e)*.8,E=m;return E>l&&(E=l),f.setMinimumLength(E),f.splitAt(d),f.getSplitPoint()},interfaces_:function(){return[Hu]},getClass:function(){return Ms}}),Ms.projectedSplitPoint=function(t,e){var r=t.getLineSegment(),o=r.project(e);return o},h(Mt.prototype,{interfaces_:function(){return[]},getClass:function(){return Mt}}),Mt.triArea=function(t,e,r){return(e.x-t.x)*(r.y-t.y)-(e.y-t.y)*(r.x-t.x)},Mt.isInCircleDDNormalized=function(t,e,r,o){var l=A.valueOf(t.x).selfSubtract(o.x),f=A.valueOf(t.y).selfSubtract(o.y),d=A.valueOf(e.x).selfSubtract(o.x),m=A.valueOf(e.y).selfSubtract(o.y),E=A.valueOf(r.x).selfSubtract(o.x),S=A.valueOf(r.y).selfSubtract(o.y),R=l.multiply(m).selfSubtract(d.multiply(f)),k=d.multiply(S).selfSubtract(E.multiply(m)),G=E.multiply(f).selfSubtract(l.multiply(S)),J=l.multiply(l).selfAdd(f.multiply(f)),$=d.multiply(d).selfAdd(m.multiply(m)),et=E.multiply(E).selfAdd(S.multiply(S)),Pt=J.selfMultiply(k).selfAdd($.selfMultiply(G)).selfAdd(et.selfMultiply(R)),Xt=Pt.doubleValue()>0;return Xt},Mt.checkRobustInCircle=function(t,e,r,o){var l=Mt.isInCircleNonRobust(t,e,r,o),f=Mt.isInCircleDDSlow(t,e,r,o),d=Mt.isInCircleCC(t,e,r,o),m=Tt.circumcentre(t,e,r);Et.out.println("p radius diff a = "+Math.abs(o.distance(m)-t.distance(m))/t.distance(m)),l===f&&l===d||(Et.out.println("inCircle robustness failure (double result = "+l+", DD result = "+f+", CC result = "+d+")"),Et.out.println(ge.toLineString(new Fe([t,e,r,o]))),Et.out.println("Circumcentre = "+ge.toPoint(m)+" radius = "+t.distance(m)),Et.out.println("p radius diff a = "+Math.abs(o.distance(m)/t.distance(m)-1)),Et.out.println("p radius diff b = "+Math.abs(o.distance(m)/e.distance(m)-1)),Et.out.println("p radius diff c = "+Math.abs(o.distance(m)/r.distance(m)-1)),Et.out.println())},Mt.isInCircleDDFast=function(t,e,r,o){var l=A.sqr(t.x).selfAdd(A.sqr(t.y)).selfMultiply(Mt.triAreaDDFast(e,r,o)),f=A.sqr(e.x).selfAdd(A.sqr(e.y)).selfMultiply(Mt.triAreaDDFast(t,r,o)),d=A.sqr(r.x).selfAdd(A.sqr(r.y)).selfMultiply(Mt.triAreaDDFast(t,e,o)),m=A.sqr(o.x).selfAdd(A.sqr(o.y)).selfMultiply(Mt.triAreaDDFast(t,e,r)),E=l.selfSubtract(f).selfAdd(d).selfSubtract(m),S=E.doubleValue()>0;return S},Mt.isInCircleCC=function(t,e,r,o){var l=Tt.circumcentre(t,e,r),f=t.distance(l),d=o.distance(l)-f;return 0>=d},Mt.isInCircleNormalized=function(t,e,r,o){var l=t.x-o.x,f=t.y-o.y,d=e.x-o.x,m=e.y-o.y,E=r.x-o.x,S=r.y-o.y,R=l*m-d*f,k=d*S-E*m,G=E*f-l*S,J=l*l+f*f,$=d*d+m*m,et=E*E+S*S,Pt=J*k+$*G+et*R;return Pt>0},Mt.isInCircleDDSlow=function(t,e,r,o){var l=A.valueOf(o.x),f=A.valueOf(o.y),d=A.valueOf(t.x),m=A.valueOf(t.y),E=A.valueOf(e.x),S=A.valueOf(e.y),R=A.valueOf(r.x),k=A.valueOf(r.y),G=d.multiply(d).add(m.multiply(m)).multiply(Mt.triAreaDDSlow(E,S,R,k,l,f)),J=E.multiply(E).add(S.multiply(S)).multiply(Mt.triAreaDDSlow(d,m,R,k,l,f)),$=R.multiply(R).add(k.multiply(k)).multiply(Mt.triAreaDDSlow(d,m,E,S,l,f)),et=l.multiply(l).add(f.multiply(f)).multiply(Mt.triAreaDDSlow(d,m,E,S,R,k)),Pt=G.subtract(J).add($).subtract(et),Xt=Pt.doubleValue()>0;return Xt},Mt.isInCircleNonRobust=function(t,e,r,o){var l=(t.x*t.x+t.y*t.y)*Mt.triArea(e,r,o)-(e.x*e.x+e.y*e.y)*Mt.triArea(t,r,o)+(r.x*r.x+r.y*r.y)*Mt.triArea(t,e,o)-(o.x*o.x+o.y*o.y)*Mt.triArea(t,e,r)>0;return l},Mt.isInCircleRobust=function(t,e,r,o){return Mt.isInCircleNormalized(t,e,r,o)},Mt.triAreaDDSlow=function(t,e,r,o,l,f){return r.subtract(t).multiply(f.subtract(e)).subtract(o.subtract(e).multiply(l.subtract(t)))},Mt.triAreaDDFast=function(t,e,r){var o=A.valueOf(e.x).selfSubtract(t.x).selfMultiply(A.valueOf(r.y).selfSubtract(t.y)),l=A.valueOf(e.y).selfSubtract(t.y).selfMultiply(A.valueOf(r.x).selfSubtract(t.x));return o.selfSubtract(l)},h(xt.prototype,{circleCenter:function(t,e){var r=new xt(this.getX(),this.getY()),o=this.bisector(r,t),l=this.bisector(t,e),f=new fe(o,l),d=null;try{d=new xt(f.getX(),f.getY())}catch(m){if(!(m instanceof z))throw m;Et.err.println("a: "+r+"  b: "+t+"  c: "+e),Et.err.println(m)}finally{}return d},dot:function(t){return this.p.x*t.getX()+this.p.y*t.getY()},magn:function(){return Math.sqrt(this.p.x*this.p.x+this.p.y*this.p.y)},getZ:function(){return this.p.z},bisector:function(t,e){var r=e.getX()-t.getX(),o=e.getY()-t.getY(),l=new fe(t.getX()+r/2,t.getY()+o/2,1),f=new fe(t.getX()-o+r/2,t.getY()+r+o/2,1);return new fe(l,f)},equals:function(){if(arguments.length===1){var t=arguments[0];return this.p.x===t.getX()&&this.p.y===t.getY()}if(arguments.length===2){var e=arguments[0],r=arguments[1];return this.p.distance(e.getCoordinate())<r}},getCoordinate:function(){return this.p},isInCircle:function(t,e,r){return Mt.isInCircleRobust(t.p,e.p,r.p,this.p)},interpolateZValue:function(t,e,r){var o=t.getX(),l=t.getY(),f=e.getX()-o,d=r.getX()-o,m=e.getY()-l,E=r.getY()-l,S=f*E-d*m,R=this.getX()-o,k=this.getY()-l,G=(E*R-d*k)/S,J=(-m*R+f*k)/S,$=t.getZ()+G*(e.getZ()-t.getZ())+J*(r.getZ()-t.getZ());return $},midPoint:function(t){var e=(this.p.x+t.getX())/2,r=(this.p.y+t.getY())/2,o=(this.p.z+t.getZ())/2;return new xt(e,r,o)},rightOf:function(t){return this.isCCW(t.dest(),t.orig())},isCCW:function(t,e){return(t.p.x-this.p.x)*(e.p.y-this.p.y)-(t.p.y-this.p.y)*(e.p.x-this.p.x)>0},getX:function(){return this.p.x},crossProduct:function(t){return this.p.x*t.getY()-this.p.y*t.getX()},setZ:function(t){this.p.z=t},times:function(t){return new xt(t*this.p.x,t*this.p.y)},cross:function(){return new xt(this.p.y,-this.p.x)},leftOf:function(t){return this.isCCW(t.orig(),t.dest())},toString:function(){return"POINT ("+this.p.x+" "+this.p.y+")"},sub:function(t){return new xt(this.p.x-t.getX(),this.p.y-t.getY())},getY:function(){return this.p.y},classify:function(t,e){var r=this,o=e.sub(t),l=r.sub(t),f=o.crossProduct(l);return f>0?xt.LEFT:0>f?xt.RIGHT:o.getX()*l.getX()<0||o.getY()*l.getY()<0?xt.BEHIND:o.magn()<l.magn()?xt.BEYOND:t.equals(r)?xt.ORIGIN:e.equals(r)?xt.DESTINATION:xt.BETWEEN},sum:function(t){return new xt(this.p.x+t.getX(),this.p.y+t.getY())},distance:function(t,e){return Math.sqrt(Math.pow(e.getX()-t.getX(),2)+Math.pow(e.getY()-t.getY(),2))},circumRadiusRatio:function(t,e){var r=this.circleCenter(t,e),o=this.distance(r,t),l=this.distance(this,t),f=this.distance(t,e);return l>f&&(l=f),f=this.distance(e,this),l>f&&(l=f),o/l},interfaces_:function(){return[]},getClass:function(){return xt}}),xt.interpolateZ=function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],r=arguments[2],o=e.distance(r),l=t.distance(e),f=r.z-e.z,d=e.z+f*(l/o);return d}if(arguments.length===4){var m=arguments[0],E=arguments[1],S=arguments[2],R=arguments[3],k=E.x,G=E.y,J=S.x-k,$=R.x-k,et=S.y-G,Pt=R.y-G,Xt=J*Pt-$*et,un=m.x-k,tr=m.y-G,ga=(Pt*un-$*tr)/Xt,da=(-et*un+J*tr)/Xt,pa=E.z+ga*(S.z-E.z)+da*(R.z-E.z);return pa}},xt.LEFT=0,xt.RIGHT=1,xt.BEYOND=2,xt.BEHIND=3,xt.BETWEEN=4,xt.ORIGIN=5,xt.DESTINATION=6,w(Ii,xt),h(Ii.prototype,{getConstraint:function(){return this.constraint},setOnConstraint:function(t){this._isOnConstraint=t},merge:function(t){t._isOnConstraint&&(this._isOnConstraint=!0,this.constraint=t.constraint)},isOnConstraint:function(){return this._isOnConstraint},setConstraint:function(t){this._isOnConstraint=!0,this.constraint=t},interfaces_:function(){return[]},getClass:function(){return Ii}}),h(kt.prototype,{equalsNonOriented:function(t){return this.equalsOriented(t)?!0:!!this.equalsOriented(t.sym())},toLineSegment:function(){return new nt(this.vertex.getCoordinate(),this.dest().getCoordinate())},dest:function(){return this.sym().orig()},oNext:function(){return this.next},equalsOriented:function(t){return!(!this.orig().getCoordinate().equals2D(t.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(t.dest().getCoordinate()))},dNext:function(){return this.sym().oNext().sym()},lPrev:function(){return this.next.sym()},rPrev:function(){return this.sym().oNext()},rot:function(){return this._rot},oPrev:function(){return this._rot.next._rot},sym:function(){return this._rot._rot},setOrig:function(t){this.vertex=t},lNext:function(){return this.invRot().oNext().rot()},getLength:function(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())},invRot:function(){return this._rot.sym()},setDest:function(t){this.sym().setOrig(t)},setData:function(t){this.data=t},getData:function(){return this.data},delete:function(){this._rot=null},orig:function(){return this.vertex},rNext:function(){return this._rot.next.invRot()},toString:function(){var t=this.vertex.getCoordinate(),e=this.dest().getCoordinate();return ge.toLineString(t,e)},isLive:function(){return this._rot!==null},getPrimary:function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},dPrev:function(){return this.invRot().oNext().invRot()},setNext:function(t){this.next=t},interfaces_:function(){return[]},getClass:function(){return kt}}),kt.makeEdge=function(t,e){var r=new kt,o=new kt,l=new kt,f=new kt;r._rot=o,o._rot=l,l._rot=f,f._rot=r,r.setNext(r),o.setNext(f),l.setNext(l),f.setNext(o);var d=r;return d.setOrig(t),d.setDest(e),d},kt.swap=function(t){var e=t.oPrev(),r=t.sym().oPrev();kt.splice(t,e),kt.splice(t.sym(),r),kt.splice(t,e.lNext()),kt.splice(t.sym(),r.lNext()),t.setOrig(e.dest()),t.setDest(r.dest())},kt.splice=function(t,e){var r=t.oNext().rot(),o=e.oNext().rot(),l=e.oNext(),f=t.oNext(),d=o.oNext(),m=r.oNext();t.setNext(l),e.setNext(f),r.setNext(d),o.setNext(m)},kt.connect=function(t,e){var r=kt.makeEdge(t.dest(),e.orig());return kt.splice(r,t.lNext()),kt.splice(r.sym(),e),r},h(Os.prototype,{insertSite:function(t){var e=this.subdiv.locate(t);if(this.subdiv.isVertexOfEdge(e,t))return e;this.subdiv.isOnEdge(e,t.getCoordinate())&&(e=e.oPrev(),this.subdiv.delete(e.oNext()));var r=this.subdiv.makeEdge(e.orig(),t);kt.splice(r,e);var o=r;do r=this.subdiv.connect(e,r.sym()),e=r.oPrev();while(e.lNext()!==o);for(;;){var l=e.oPrev();if(l.dest().rightOf(e)&&t.isInCircle(e.orig(),l.dest(),e.dest()))kt.swap(e),e=e.oPrev();else{if(e.oNext()===o)return r;e=e.oNext().lPrev()}}},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this.insertSite(r)}},interfaces_:function(){return[]},getClass:function(){return Os}}),h(Zu.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return Zu}}),h(ia.prototype,{init:function(){this.lastEdge=this.findEdge()},locate:function(t){this.lastEdge.isLive()||this.init();var e=this.subdiv.locateFromEdge(t,this.lastEdge);return this.lastEdge=e,e},findEdge:function(){var t=this.subdiv.getEdges();return t.iterator().next()},interfaces_:function(){return[Zu]},getClass:function(){return ia}}),w(Sr,I),h(Sr.prototype,{getSegment:function(){return this.seg},interfaces_:function(){return[]},getClass:function(){return Sr}}),Sr.msgWithSpatial=function(t,e){return e!==null?t+" [ "+e+" ]":t},h(Tr.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return Tr}}),h(Ue.prototype,{getTriangleVertices:function(t){var e=new oa;return this.visitTriangles(e,t),e.getTriangleVertices()},isFrameVertex:function(t){return t.equals(this.frameVertex[0])||t.equals(this.frameVertex[1])?!0:!!t.equals(this.frameVertex[2])},isVertexOfEdge:function(t,e){return!(!e.equals(t.orig(),this.tolerance)&&!e.equals(t.dest(),this.tolerance))},connect:function(t,e){var r=kt.connect(t,e);return this.quadEdges.add(r),r},getVoronoiCellPolygon:function(t,e){var r=new b,o=t;do{var l=t.rot().orig().getCoordinate();r.add(l),t=t.oPrev()}while(t!==o);var f=new O;f.addAll(r,!1),f.closeRing(),f.size()<4&&(Et.out.println(f),f.add(f.get(f.size()-1),!0));var d=f.toCoordinateArray(),m=e.createPolygon(e.createLinearRing(d),null),E=o.orig();return m.setUserData(E.getCoordinate()),m},setLocator:function(t){this.locator=t},initSubdiv:function(){var t=this.makeEdge(this.frameVertex[0],this.frameVertex[1]),e=this.makeEdge(this.frameVertex[1],this.frameVertex[2]);kt.splice(t.sym(),e);var r=this.makeEdge(this.frameVertex[2],this.frameVertex[0]);return kt.splice(e.sym(),r),kt.splice(r.sym(),t),t},isFrameBorderEdge:function(t){var e=new Array(3).fill(null);Ue.getTriangleEdges(t,e);var r=new Array(3).fill(null);Ue.getTriangleEdges(t.sym(),r);var o=t.lNext().dest();if(this.isFrameVertex(o))return!0;var l=t.sym().lNext().dest();return!!this.isFrameVertex(l)},makeEdge:function(t,e){var r=kt.makeEdge(t,e);return this.quadEdges.add(r),r},visitTriangles:function(t,e){this.visitedKey++;var r=new _e;r.push(this.startingEdge);for(var o=new oe;!r.empty();){var l=r.pop();if(!o.contains(l)){var f=this.fetchTriangleToVisit(l,r,e,o);f!==null&&t.visit(f)}}},isFrameEdge:function(t){return!(!this.isFrameVertex(t.orig())&&!this.isFrameVertex(t.dest()))},isOnEdge:function(t,e){this.seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate());var r=this.seg.distance(e);return r<this.edgeCoincidenceTolerance},getEnvelope:function(){return new M(this.frameEnv)},createFrame:function(t){var e=t.getWidth(),r=t.getHeight(),o=0;o=e>r?10*e:10*r,this.frameVertex[0]=new xt((t.getMaxX()+t.getMinX())/2,t.getMaxY()+o),this.frameVertex[1]=new xt(t.getMinX()-o,t.getMinY()-o),this.frameVertex[2]=new xt(t.getMaxX()+o,t.getMinY()-o),this.frameEnv=new M(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate()),this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())},getTriangleCoordinates:function(t){var e=new aa;return this.visitTriangles(e,t),e.getTriangles()},getVertices:function(t){for(var e=new oe,r=this.quadEdges.iterator();r.hasNext();){var o=r.next(),l=o.orig();!t&&this.isFrameVertex(l)||e.add(l);var f=o.dest();!t&&this.isFrameVertex(f)||e.add(f)}return e},fetchTriangleToVisit:function(t,e,r,o){var l=t,f=0,d=!1;do{this.triEdges[f]=l,this.isFrameEdge(l)&&(d=!0);var m=l.sym();o.contains(m)||e.push(m),o.add(l),f++,l=l.lNext()}while(l!==t);return d&&!r?null:this.triEdges},getEdges:function(){if(arguments.length===0)return this.quadEdges;if(arguments.length===1){for(var t=arguments[0],e=this.getPrimaryEdges(!1),r=new Array(e.size()).fill(null),o=0,l=e.iterator();l.hasNext();){var f=l.next();r[o++]=t.createLineString([f.orig().getCoordinate(),f.dest().getCoordinate()])}return t.createMultiLineString(r)}},getVertexUniqueEdges:function(t){for(var e=new b,r=new oe,o=this.quadEdges.iterator();o.hasNext();){var l=o.next(),f=l.orig();r.contains(f)||(r.add(f),!t&&this.isFrameVertex(f)||e.add(l));var d=l.sym(),m=d.orig();r.contains(m)||(r.add(m),!t&&this.isFrameVertex(m)||e.add(d))}return e},getTriangleEdges:function(t){var e=new sa;return this.visitTriangles(e,t),e.getTriangleEdges()},getPrimaryEdges:function(t){this.visitedKey++;var e=new b,r=new _e;r.push(this.startingEdge);for(var o=new oe;!r.empty();){var l=r.pop();if(!o.contains(l)){var f=l.getPrimary();!t&&this.isFrameEdge(f)||e.add(f),r.push(l.oNext()),r.push(l.sym().oNext()),o.add(l),o.add(l.sym())}}return e},delete:function(t){kt.splice(t,t.oPrev()),kt.splice(t.sym(),t.sym().oPrev());var e=t.sym(),r=t.rot(),o=t.rot().sym();this.quadEdges.remove(t),this.quadEdges.remove(e),this.quadEdges.remove(r),this.quadEdges.remove(o),t.delete(),e.delete(),r.delete(),o.delete()},locateFromEdge:function(t,e){for(var r=0,o=this.quadEdges.size(),l=e;;){if(r++,r>o)throw new Sr(l.toLineSegment());if(t.equals(l.orig())||t.equals(l.dest()))break;if(t.rightOf(l))l=l.sym();else if(t.rightOf(l.oNext())){if(t.rightOf(l.dPrev()))break;l=l.dPrev()}else l=l.oNext()}return l},getTolerance:function(){return this.tolerance},getVoronoiCellPolygons:function(t){this.visitTriangles(new ra,!0);for(var e=new b,r=this.getVertexUniqueEdges(!1),o=r.iterator();o.hasNext();){var l=o.next();e.add(this.getVoronoiCellPolygon(l,t))}return e},getVoronoiDiagram:function(t){var e=this.getVoronoiCellPolygons(t);return t.createGeometryCollection(at.toGeometryArray(e))},getTriangles:function(t){for(var e=this.getTriangleCoordinates(!1),r=new Array(e.size()).fill(null),o=0,l=e.iterator();l.hasNext();){var f=l.next();r[o++]=t.createPolygon(t.createLinearRing(f),null)}return t.createGeometryCollection(r)},insertSite:function(t){var e=this.locate(t);if(t.equals(e.orig(),this.tolerance)||t.equals(e.dest(),this.tolerance))return e;var r=this.makeEdge(e.orig(),t);kt.splice(r,e);var o=r;do r=this.connect(e,r.sym()),e=r.oPrev();while(e.lNext()!==o);return o},locate:function(){if(arguments.length===1){if(arguments[0]instanceof xt){var t=arguments[0];return this.locator.locate(t)}if(arguments[0]instanceof C){var e=arguments[0];return this.locator.locate(new xt(e))}}else if(arguments.length===2){var r=arguments[0],o=arguments[1],l=this.locator.locate(new xt(r));if(l===null)return null;var f=l;l.dest().getCoordinate().equals2D(r)&&(f=l.sym());var d=f;do{if(d.dest().getCoordinate().equals2D(o))return d;d=d.oNext()}while(d!==f);return null}},interfaces_:function(){return[]},getClass:function(){return Ue}}),Ue.getTriangleEdges=function(t,e){if(e[0]=t,e[1]=e[0].lNext(),e[2]=e[1].lNext(),e[2].lNext()!==e[0])throw new c},h(ra.prototype,{visit:function(t){for(var e=t[0].orig().getCoordinate(),r=t[1].orig().getCoordinate(),o=t[2].orig().getCoordinate(),l=Tt.circumcentre(e,r,o),f=new xt(l),d=0;3>d;d++)t[d].rot().setOrig(f)},interfaces_:function(){return[Tr]},getClass:function(){return ra}}),h(sa.prototype,{getTriangleEdges:function(){return this.triList},visit:function(t){this.triList.add(t.clone())},interfaces_:function(){return[Tr]},getClass:function(){return sa}}),h(oa.prototype,{visit:function(t){this.triList.add([t[0].orig(),t[1].orig(),t[2].orig()])},getTriangleVertices:function(){return this.triList},interfaces_:function(){return[Tr]},getClass:function(){return oa}}),h(aa.prototype,{checkTriangleSize:function(t){t.length>=2?ge.toLineString(t[0],t[1]):t.length>=1&&ge.toPoint(t[0])},visit:function(t){this.coordList.clear();for(var e=0;3>e;e++){var r=t[e].orig();this.coordList.add(r.getCoordinate())}if(this.coordList.size()>0){this.coordList.closeRing();var o=this.coordList.toCoordinateArray();if(o.length!==4)return null;this.triCoords.add(o)}},getTriangles:function(){return this.triCoords},interfaces_:function(){return[Tr]},getClass:function(){return aa}}),Ue.TriangleCircumcentreVisitor=ra,Ue.TriangleEdgesListVisitor=sa,Ue.TriangleVertexListVisitor=oa,Ue.TriangleCoordinatesVisitor=aa,Ue.EDGE_COINCIDENCE_TOL_FACTOR=1e3,h($i.prototype,{getLineSegment:function(){return this.ls},getEndZ:function(){var t=this.ls.getCoordinate(1);return t.z},getStartZ:function(){var t=this.ls.getCoordinate(0);return t.z},intersection:function(t){return this.ls.intersection(t.getLineSegment())},getStart:function(){return this.ls.getCoordinate(0)},getEnd:function(){return this.ls.getCoordinate(1)},getEndY:function(){var t=this.ls.getCoordinate(1);return t.y},getStartX:function(){var t=this.ls.getCoordinate(0);return t.x},equalsTopo:function(t){return this.ls.equalsTopo(t.getLineSegment())},getStartY:function(){var t=this.ls.getCoordinate(0);return t.y},setData:function(t){this.data=t},getData:function(){return this.data},getEndX:function(){var t=this.ls.getCoordinate(1);return t.x},toString:function(){return this.ls.toString()},interfaces_:function(){return[]},getClass:function(){return $i}}),h(Rs.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return Rs}}),h(ua.prototype,{isRepeated:function(){return this.count>1},getRight:function(){return this.right},getCoordinate:function(){return this.p},setLeft:function(t){this.left=t},getX:function(){return this.p.x},getData:function(){return this.data},getCount:function(){return this.count},getLeft:function(){return this.left},getY:function(){return this.p.y},increment:function(){this.count=this.count+1},setRight:function(t){this.right=t},interfaces_:function(){return[]},getClass:function(){return ua}}),h(Qi.prototype,{insert:function(){if(arguments.length===1){var t=arguments[0];return this.insert(t,null)}if(arguments.length===2){var e=arguments[0],r=arguments[1];if(this.root===null)return this.root=new ua(e,r),this.root;if(this.tolerance>0){var o=this.findBestMatchNode(e);if(o!==null)return o.increment(),o}return this.insertExact(e,r)}},query:function(){var t=arguments,e=this;if(arguments.length===1){var r=arguments[0],o=new b;return this.query(r,o),o}if(arguments.length===2){if(arguments[0]instanceof M&&V(arguments[1],N))(function(){var d=t[0],m=t[1];e.queryNode(e.root,d,!0,{interfaces_:function(){return[Rs]},visit:function(E){m.add(E)}})})();else if(arguments[0]instanceof M&&V(arguments[1],Rs)){var l=arguments[0],f=arguments[1];this.queryNode(this.root,l,!0,f)}}},queryNode:function(t,e,r,o){if(t===null)return null;var l=null,f=null,d=null;r?(l=e.getMinX(),f=e.getMaxX(),d=t.getX()):(l=e.getMinY(),f=e.getMaxY(),d=t.getY());var m=d>l,E=f>=d;m&&this.queryNode(t.getLeft(),e,!r,o),e.contains(t.getCoordinate())&&o.visit(t),E&&this.queryNode(t.getRight(),e,!r,o)},findBestMatchNode:function(t){var e=new ha(t,this.tolerance);return this.query(e.queryEnvelope(),e),e.getNode()},isEmpty:function(){return this.root===null},insertExact:function(t,e){for(var r=this.root,o=this.root,l=!0,f=!0;r!==null;){if(r!==null){var d=t.distance(r.getCoordinate())<=this.tolerance;if(d)return r.increment(),r}f=l?t.x<r.getX():t.y<r.getY(),o=r,r=f?r.getLeft():r.getRight(),l=!l}this.numberOfNodes=this.numberOfNodes+1;var m=new ua(t,e);return f?o.setLeft(m):o.setRight(m),m},interfaces_:function(){return[]},getClass:function(){return Qi}}),Qi.toCoordinates=function(){if(arguments.length===1){var t=arguments[0];return Qi.toCoordinates(t,!1)}if(arguments.length===2){for(var e=arguments[0],r=arguments[1],o=new O,l=e.iterator();l.hasNext();)for(var f=l.next(),d=r?f.getCount():1,m=0;d>m;m++)o.add(f.getCoordinate(),!0);return o.toCoordinateArray()}},h(ha.prototype,{visit:function(t){var e=this.p.distance(t.getCoordinate()),r=e<=this.tolerance;if(!r)return null;var o=!1;(this.matchNode===null||e<this.matchDist||this.matchNode!==null&&e===this.matchDist&&t.getCoordinate().compareTo(this.matchNode.getCoordinate())<1)&&(o=!0),o&&(this.matchNode=t,this.matchDist=e)},queryEnvelope:function(){var t=new M(this.p);return t.expandBy(this.tolerance),t},getNode:function(){return this.matchNode},interfaces_:function(){return[Rs]},getClass:function(){return ha}}),Qi.BestMatchVisitor=ha,h(Ci.prototype,{getInitialVertices:function(){return this.initialVertices},getKDT:function(){return this.kdt},enforceConstraints:function(){this.addConstraintVertices();var t=0,e=0;do e=this.enforceGabriel(this.segments),t++;while(e>0&&t<Ci.MAX_SPLIT_ITER)},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this.insertSite(r)}},getVertexFactory:function(){return this.vertexFactory},getPointArray:function(){for(var t=new Array(this.initialVertices.size()+this.segVertices.size()).fill(null),e=0,r=this.initialVertices.iterator();r.hasNext();){var o=r.next();t[e++]=o.getCoordinate()}for(var l=this.segVertices.iterator();l.hasNext();){var o=l.next();t[e++]=o.getCoordinate()}return t},setConstraints:function(t,e){this.segments=t,this.segVertices=e},computeConvexHull:function(){var t=new at,e=this.getPointArray(),r=new Rn(e,t);this.convexHull=r.getConvexHull()},addConstraintVertices:function(){this.computeConvexHull(),this.insertSites(this.segVertices)},findNonGabrielPoint:function(t){var e=t.getStart(),r=t.getEnd(),o=new C((e.x+r.x)/2,(e.y+r.y)/2),l=e.distance(o),f=new M(o);f.expandBy(l);for(var d=this.kdt.query(f),m=null,E=g.MAX_VALUE,S=d.iterator();S.hasNext();){var R=S.next(),k=R.getCoordinate();if(!k.equals2D(e)&&!k.equals2D(r)){var G=o.distance(k);if(l>G){var J=G;(m===null||E>J)&&(m=k,E=J)}}}return m},getConstraintSegments:function(){return this.segments},setSplitPointFinder:function(t){this.splitFinder=t},getConvexHull:function(){return this.convexHull},getTolerance:function(){return this.tolerance},enforceGabriel:function(t){for(var e=new b,r=0,o=new b,l=t.iterator();l.hasNext();){var f=l.next(),d=this.findNonGabrielPoint(f);if(d!==null){this.splitPt=this.splitFinder.findSplitPoint(f,d);var m=this.createVertex(this.splitPt,f),E=(this.insertSite(m),new $i(f.getStartX(),f.getStartY(),f.getStartZ(),m.getX(),m.getY(),m.getZ(),f.getData())),S=new $i(m.getX(),m.getY(),m.getZ(),f.getEndX(),f.getEndY(),f.getEndZ(),f.getData());e.add(E),e.add(S),o.add(f),r+=1}}return t.removeAll(o),t.addAll(e),r},createVertex:function(){if(arguments.length===1){var t=arguments[0],e=null;return e=this.vertexFactory!==null?this.vertexFactory.createVertex(t,null):new Ii(t)}if(arguments.length===2){var r=arguments[0],o=arguments[1],e=null;return e=this.vertexFactory!==null?this.vertexFactory.createVertex(r,o):new Ii(r),e.setOnConstraint(!0),e}},getSubdivision:function(){return this.subdiv},computeBoundingBox:function(){var t=Ci.computeVertexEnvelope(this.initialVertices),e=Ci.computeVertexEnvelope(this.segVertices),r=new M(t);r.expandToInclude(e);var o=.2*r.getWidth(),l=.2*r.getHeight(),f=Math.max(o,l);this.computeAreaEnv=new M(r),this.computeAreaEnv.expandBy(f)},setVertexFactory:function(t){this.vertexFactory=t},formInitialDelaunay:function(){this.computeBoundingBox(),this.subdiv=new Ue(this.computeAreaEnv,this.tolerance),this.subdiv.setLocator(new ia(this.subdiv)),this.incDel=new Os(this.subdiv),this.insertSites(this.initialVertices)},insertSite:function(){if(arguments[0]instanceof Ii){var t=arguments[0],e=this.kdt.insert(t.getCoordinate(),t);if(e.isRepeated()){var r=e.getData();return r.merge(t),r}return this.incDel.insertSite(t),t}if(arguments[0]instanceof C){var o=arguments[0];this.insertSite(this.createVertex(o))}},interfaces_:function(){return[]},getClass:function(){return Ci}}),Ci.computeVertexEnvelope=function(t){for(var e=new M,r=t.iterator();r.hasNext();){var o=r.next();e.expandToInclude(o.getCoordinate())}return e},Ci.MAX_SPLIT_ITER=99,h(me.prototype,{create:function(){if(this.subdiv!==null)return null;var t=me.envelope(this.siteCoords),e=me.toVertices(this.siteCoords);this.subdiv=new Ue(t,this.tolerance);var r=new Os(this.subdiv);r.insertSites(e)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof W){var t=arguments[0];this.siteCoords=me.extractUniqueCoordinates(t)}else if(V(arguments[0],X)){var e=arguments[0];this.siteCoords=me.unique(Q.toCoordinateArray(e))}},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},interfaces_:function(){return[]},getClass:function(){return me}}),me.extractUniqueCoordinates=function(t){if(t===null)return new O;var e=t.getCoordinates();return me.unique(e)},me.envelope=function(t){for(var e=new M,r=t.iterator();r.hasNext();){var o=r.next();e.expandToInclude(o)}return e},me.unique=function(t){var e=Q.copyDeep(t);Tn.sort(e);var r=new O(e,!1);return r},me.toVertices=function(t){for(var e=new b,r=t.iterator();r.hasNext();){var o=r.next();e.add(new xt(o))}return e},h(Pr.prototype,{createSiteVertices:function(t){for(var e=new b,r=t.iterator();r.hasNext();){var o=r.next();this.constraintVertexMap.containsKey(o)||e.add(new Ii(o))}return e},create:function(){if(this.subdiv!==null)return null;var t=me.envelope(this.siteCoords),e=new b;this.constraintLines!==null&&(t.expandToInclude(this.constraintLines.getEnvelopeInternal()),this.createVertices(this.constraintLines),e=Pr.createConstraintSegments(this.constraintLines));var r=this.createSiteVertices(this.siteCoords),o=new Ci(r,this.tolerance);o.setConstraints(e,new b(this.constraintVertexMap.values())),o.formInitialDelaunay(),o.enforceConstraints(),this.subdiv=o.getSubdivision()},setTolerance:function(t){this.tolerance=t},setConstraints:function(t){this.constraintLines=t},setSites:function(t){this.siteCoords=me.extractUniqueCoordinates(t)},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},createVertices:function(t){for(var e=t.getCoordinates(),r=0;r<e.length;r++){var o=new Ii(e[r]);this.constraintVertexMap.put(e[r],o)}},interfaces_:function(){return[]},getClass:function(){return Pr}}),Pr.createConstraintSegments=function(){if(arguments.length===1){for(var t=arguments[0],e=de.getLines(t),r=new b,o=e.iterator();o.hasNext();){var l=o.next();Pr.createConstraintSegments(l,r)}return r}if(arguments.length===2)for(var f=arguments[0],d=arguments[1],m=f.getCoordinates(),o=1;o<m.length;o++)d.add(new $i(m[o-1],m[o]))},h(Ds.prototype,{create:function(){if(this.subdiv!==null)return null;var t=me.envelope(this.siteCoords);this.diagramEnv=t;var e=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight());this.diagramEnv.expandBy(e),this.clipEnv!==null&&this.diagramEnv.expandToInclude(this.clipEnv);var r=me.toVertices(this.siteCoords);this.subdiv=new Ue(t,this.tolerance);var o=new Os(this.subdiv);o.insertSites(r)},getDiagram:function(t){this.create();var e=this.subdiv.getVoronoiDiagram(t);return Ds.clipGeometryCollection(e,this.diagramEnv)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof W){var t=arguments[0];this.siteCoords=me.extractUniqueCoordinates(t)}else if(V(arguments[0],X)){var e=arguments[0];this.siteCoords=me.unique(Q.toCoordinateArray(e))}},setClipEnvelope:function(t){this.clipEnv=t},getSubdivision:function(){return this.create(),this.subdiv},interfaces_:function(){return[]},getClass:function(){return Ds}}),Ds.clipGeometryCollection=function(t,e){for(var r=t.getFactory().toGeometry(e),o=new b,l=0;l<t.getNumGeometries();l++){var f=t.getGeometryN(l),d=null;e.contains(f.getEnvelopeInternal())?d=f:e.intersects(f.getEnvelopeInternal())&&(d=r.intersection(f),d.setUserData(f.getUserData())),d===null||d.isEmpty()||o.add(d)}return t.getFactory().createGeometryCollection(at.toGeometryArray(o))};var Ug=Object.freeze({ConformingDelaunayTriangulationBuilder:Pr,DelaunayTriangulationBuilder:me,VoronoiDiagramBuilder:Ds});h(la.prototype,{interfaces_:function(){return[]},getClass:function(){return la}}),la.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return j.createEmptyResult(j.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),re.overlayOp(t,e,j.UNION)},h(W.prototype,{equalsTopo:function(t){return this.getEnvelopeInternal().equals(t.getEnvelopeInternal())?vt.relate(this,t).isEquals(this.getDimension(),t.getDimension()):!1},union:function(){if(arguments.length===0)return wi.union(this);if(arguments.length===1){var t=arguments[0];return la.union(this,t)}},isValid:function(){return je.isValid(this)},intersection:function(t){if(this.isEmpty()||t.isEmpty())return j.createEmptyResult(j.INTERSECTION,this,t,this.factory);if(this.isGeometryCollection()){var e=t;return gr.map(this,{interfaces_:function(){return[MapOp]},map:function(r){return r.intersection(e)}})}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),re.overlayOp(this,t,j.INTERSECTION)},covers:function(t){return vt.covers(this,t)},coveredBy:function(t){return vt.coveredBy(this,t)},touches:function(t){return vt.touches(this,t)},intersects:function(t){return vt.intersects(this,t)},within:function(t){return vt.within(this,t)},overlaps:function(t){return vt.overlaps(this,t)},disjoint:function(t){return vt.disjoint(this,t)},crosses:function(t){return vt.crosses(this,t)},buffer:function(){if(arguments.length===1){var t=arguments[0];return ce.bufferOp(this,t)}if(arguments.length===2){var e=arguments[0],r=arguments[1];return ce.bufferOp(this,e,r)}if(arguments.length===3){var o=arguments[0],l=arguments[1],f=arguments[2];return ce.bufferOp(this,o,l,f)}},convexHull:function(){return new Rn(this).getConvexHull()},relate:function(){for(var t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];return vt.relate.apply(vt,[this].concat(e))},getCentroid:function(){if(this.isEmpty())return this.factory.createPoint();var t=On.getCentroid(this);return this.createPointFromInternalCoord(t,this)},getInteriorPoint:function(){if(this.isEmpty())return this.factory.createPoint();var t=null,e=this.getDimension();if(e===0){var r=new Ao(this);t=r.getInteriorPoint()}else if(e===1){var r=new Do(this);t=r.getInteriorPoint()}else{var r=new nn(this);t=r.getInteriorPoint()}return this.createPointFromInternalCoord(t,this)},symDifference:function(t){if(this.isEmpty()||t.isEmpty()){if(this.isEmpty()&&t.isEmpty())return j.createEmptyResult(j.SYMDIFFERENCE,this,t,this.factory);if(this.isEmpty())return t.copy();if(t.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),re.overlayOp(this,t,j.SYMDIFFERENCE)},createPointFromInternalCoord:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},toText:function(){var t=new ge;return t.write(this)},toString:function(){this.toText()},contains:function(t){return vt.contains(this,t)},difference:function(t){return this.isEmpty()?j.createEmptyResult(j.DIFFERENCE,this,t,this.factory):t.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),re.overlayOp(this,t,j.DIFFERENCE))},isSimple:function(){var t=new ls(this);return t.isSimple()},isWithinDistance:function(t,e){var r=this.getEnvelopeInternal().distance(t.getEnvelopeInternal());return r>e?!1:rn.isWithinDistance(this,t,e)},distance:function(t){return rn.distance(this,t)},isEquivalentClass:function(t){return this.getClass()===t.getClass()}});var Vg="1.1.2 (248dab8)";a.version=Vg,a.algorithm=Eg,a.densify=wg,a.dissolve=Ig,a.geom=Lg,a.index=Sg,a.io=Pg,a.noding=bg,a.operation=Gg,a.precision=Bg,a.simplify=qg,a.triangulate=Ug})})(qr,qr.exports);var Gl=qr.exports,Of=function(n,s){var a=new Gl.io.GeoJSONReader,h=a.read(JSON.stringify(n.geometry)),u=a.read(JSON.stringify(s.geometry)),c=h.union(u),g=new Gl.io.GeoJSONWriter;return c=g.write(c),{type:"Feature",geometry:c,properties:n.properties}},av=Jh,uv=Of,Ku=Qe;function hv(n,s,a){if(typeof s!="number")throw new Error("maxEdge parameter is required");if(typeof a!="string")throw new Error("units parameter is required");var h=av(n),u=h.features.filter(c);h.features=u;function c(g){var p=g.geometry.coordinates[0][0],v=g.geometry.coordinates[0][1],y=g.geometry.coordinates[0][2],_=Ku(p,v,a),I=Ku(v,y,a),w=Ku(p,y,a);return _<=s&&I<=s&&w<=s}return lv(h)}function lv(n){for(var s=JSON.parse(JSON.stringify(n.features[0])),a=n.features,h=0,u=a.length;h<u;h++){var c=a[h];c.geometry&&(s=uv(s,c))}return s}var cv=hv,Bl=qr.exports,fv=function(n,s){var a=JSON.parse(JSON.stringify(n)),h=JSON.parse(JSON.stringify(s));a.type!=="Feature"&&(a={type:"Feature",properties:{},geometry:a}),h.type!=="Feature"&&(h={type:"Feature",properties:{},geometry:h});var u=new Bl.io.GeoJSONReader,c=u.read(JSON.stringify(a.geometry)),g=u.read(JSON.stringify(h.geometry)),p=c.difference(g);if(!p.isEmpty()){var v=new Bl.io.GeoJSONWriter,y=v.write(p);return a.geometry=p,{type:"Feature",properties:a.properties,geometry:y}}},gv=Hr,dv=function(s,a,h,u){return s.features.forEach(function(c){var g=a.features.filter(function(p){return gv(p,c)}).map(function(p){return p.properties[h]});c.properties||(c.properties={}),c.properties[u]=g}),s},pv=gn.coordEach,mv=function(s){return s=JSON.parse(JSON.stringify(s)),pv(s,function(a){a.reverse()}),s},Rf={exports:{}};(function(n){(function(){function s(p,v){var y=p.x-v.x,_=p.y-v.y;return y*y+_*_}function a(p,v,y){var _=v.x,I=v.y,w=y.x-_,D=y.y-I;if(w!==0||D!==0){var P=((p.x-_)*w+(p.y-I)*D)/(w*w+D*D);P>1?(_=y.x,I=y.y):P>0&&(_+=w*P,I+=D*P)}return w=p.x-_,D=p.y-I,w*w+D*D}function h(p,v){for(var y=p[0],_=[y],I,w=1,D=p.length;w<D;w++)I=p[w],s(I,y)>v&&(_.push(I),y=I);return y!==I&&_.push(I),_}function u(p,v,y,_,I){for(var w=_,D,P=v+1;P<y;P++){var C=a(p[P],p[v],p[y]);C>w&&(D=P,w=C)}w>_&&(D-v>1&&u(p,v,D,_,I),I.push(p[D]),y-D>1&&u(p,D,y,_,I))}function c(p,v){var y=p.length-1,_=[p[0]];return u(p,0,y,v,_),_.push(p[y]),_}function g(p,v,y){if(p.length<=2)return p;var _=v!==void 0?v*v:1;return p=y?p:h(p,_),p=c(p,_),p}n.exports=g,n.exports.default=g})()})(Rf);var ph=Rf.exports,ql=["LineString","MultiLineString","Polygon","MultiPolygon"],vv=function(n,s,a){return n.type==="Feature"?Ul(ju(n,s,a),n.properties):n.type==="FeatureCollection"?{type:"FeatureCollection",features:n.features.map(function(h){var u=ju(h,s,a);return ql.indexOf(u.type)>-1?Ul(u,h.properties):u})}:n.type==="GeometryCollection"?{type:"GeometryCollection",geometries:n.geometries.map(function(h){return ql.indexOf(h.type)>-1?ju({type:"Feature",geometry:h},s,a):h})}:n};function ju(n,s,a){return n.geometry.type==="LineString"?{type:"LineString",coordinates:Vl(n.geometry.coordinates,s,a)}:n.geometry.type==="MultiLineString"?{type:"MultiLineString",coordinates:n.geometry.coordinates.map(function(h){return Vl(h,s,a)})}:n.geometry.type==="Polygon"?{type:"Polygon",coordinates:Hl(n.geometry.coordinates,s,a)}:n.geometry.type==="MultiPolygon"?{type:"MultiPolygon",coordinates:n.geometry.coordinates.map(function(h){return Hl(h,s,a)})}:n}function yv(n){return n.length<3?!1:!(n.length===3&&n[2][0]===n[0][0]&&n[2][1]===n[0][1])}function Ul(n,s){return{type:"Feature",geometry:n,properties:s}}function Vl(n,s,a){return ph(n.map(function(h){return{x:h[0],y:h[1]}}),s,a).map(function(h){return[h.x,h.y]})}function Hl(n,s,a){return n.map(function(h){var u=h.map(function(g){return{x:g[0],y:g[1]}});if(u.length<4)throw new Error("Invalid polygon");for(var c=ph(u,s,a).map(function(g){return[g.x,g.y]});!yv(c);)s-=s*.01,c=ph(u,s,a).map(function(g){return[g.x,g.y]});return(c[c.length-1][0]!==c[0][0]||c[c.length-1][1]!==c[0][1])&&c.push(c[0]),c})}var ja=function(n){this.points=n.points||[],this.duration=n.duration||1e4,this.sharpness=n.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=n.stepLength||60,this.length=this.points.length,this.delay=0;for(var s=0;s<this.length;s++)this.points[s].z=this.points[s].z||0;for(var s=0;s<this.length-1;s++){var a=this.points[s],h=this.points[s+1];this.centers.push({x:(a.x+h.x)/2,y:(a.y+h.y)/2,z:(a.z+h.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var s=0;s<this.centers.length-1;s++){var a=this.centers[s],h=this.centers[s+1],u=this.points[s+1].x-(this.centers[s].x+this.centers[s+1].x)/2,c=this.points[s+1].y-(this.centers[s].y+this.centers[s+1].y)/2,g=this.points[s+1].z-(this.centers[s].y+this.centers[s+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[s+1].x+this.sharpness*(this.centers[s].x+u),y:(1-this.sharpness)*this.points[s+1].y+this.sharpness*(this.centers[s].y+c),z:(1-this.sharpness)*this.points[s+1].z+this.sharpness*(this.centers[s].z+g)},{x:(1-this.sharpness)*this.points[s+1].x+this.sharpness*(this.centers[s+1].x+u),y:(1-this.sharpness)*this.points[s+1].y+this.sharpness*(this.centers[s+1].y+c),z:(1-this.sharpness)*this.points[s+1].z+this.sharpness*(this.centers[s+1].z+g)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};ja.prototype.cacheSteps=function(n){var s=[],a=this.pos(0);s.push(0);for(var h=0;h<this.duration;h+=10){var u=this.pos(h),c=Math.sqrt((u.x-a.x)*(u.x-a.x)+(u.y-a.y)*(u.y-a.y)+(u.z-a.z)*(u.z-a.z));c>n&&(s.push(h),a=u)}return s};ja.prototype.vector=function(n){var s=this.pos(n+10),a=this.pos(n-10);return{angle:180*Math.atan2(s.y-a.y,s.x-a.x)/3.14,speed:Math.sqrt((a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y)+(a.z-s.z)*(a.z-s.z))}};ja.prototype.pos=function(n){function s(g,p,v,y,_){var I=function(P){var C=P*P,Z=C*P;return[Z,3*C*(1-P),3*P*(1-P)*(1-P),(1-P)*(1-P)*(1-P)]},w=I(g),D={x:_.x*w[0]+y.x*w[1]+v.x*w[2]+p.x*w[3],y:_.y*w[0]+y.y*w[1]+v.y*w[2]+p.y*w[3],z:_.z*w[0]+y.z*w[1]+v.z*w[2]+p.z*w[3]};return D}var a=n-this.delay;a<0&&(a=0),a>this.duration&&(a=this.duration-1);var h=a/this.duration;if(h>=1)return this.points[this.length-1];var u=Math.floor((this.points.length-1)*h),c=(this.length-1)*h-u;return s(c,this.points[u],this.controls[u][1],this.controls[u+1][0],this.points[u+1])};var _v=ja,xv=ot.lineString,Lv=_v,Ev=function(n,s,a){var h=xv([]);h.properties=n.properties;for(var u=new Lv({points:n.geometry.coordinates.map(function(p){return{x:p[0],y:p[1]}}),duration:s,sharpness:a}),c=0;c<u.duration;c+=10){var g=u.pos(c);Math.floor(c/100)%2===0&&h.geometry.coordinates.push([g.x,g.y])}return h},wv=Hr,Iv=function(n,s,a,h){return n=JSON.parse(JSON.stringify(n)),s=JSON.parse(JSON.stringify(s)),n.features.forEach(function(u){u.properties||(u.properties={}),s.features.forEach(function(c){if(u.properties[h]===void 0){var g=wv(u,c);g&&(u.properties[h]=c.properties[a])}})}),n},Cv=ot.featureCollection,Nv=function(n,s){var a=Cv(Sv(n.features,s));return a};function Sv(n,s){for(var a=n.slice(0),h=n.length,u=h-s,c,g;h-- >u;)g=Math.floor((h+1)*Math.random()),c=a[g],a[g]=a[h],a[h]=c;return a.slice(u)}var Tv=ot.polygon,Df=function(n){var s=[n[0],n[1]],a=[n[0],n[3]],h=[n[2],n[3]],u=[n[2],n[1]];return Tv([[s,u,h,a,s]])},Pv=Wa,bv=Df,Mv=function(n){return bv(Pv(n))},Zl=Di.getCoord,$a=function(n,s){var a=Math.PI/180,h=180/Math.PI,u=Zl(n),c=Zl(s),g=a*u[0],p=a*c[0],v=a*u[1],y=a*c[1],_=Math.sin(p-g)*Math.cos(y),I=Math.cos(v)*Math.sin(y)-Math.sin(v)*Math.cos(y)*Math.cos(p-g),w=h*Math.atan2(_,I);return w},Ov=Di.getCoord,Af=ot,Rv=Af.point,Dv=Af.distanceToRadians,Qa=function(n,s,a,h){var u=Math.PI/180,c=180/Math.PI,g=Ov(n),p=u*g[0],v=u*g[1],y=u*a,_=Dv(s,h),I=Math.asin(Math.sin(v)*Math.cos(_)+Math.cos(v)*Math.sin(_)*Math.cos(y)),w=p+Math.atan2(Math.sin(y)*Math.sin(_)*Math.cos(v),Math.cos(_)-Math.sin(v)*Math.sin(I));return Rv([c*w,c*I])},Av=$a,kv=Qa,Fv=Qe,zv=function(n,s){var a=Fv(n,s,"miles"),h=Av(n,s),u=kv(n,a/2,h,"miles");return u},Gv=qv,Bv={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function qv(n){if(!n||!n.type)return null;var s=Bv[n.type];if(!s)return null;if(s==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:n}]};if(s==="feature")return{type:"FeatureCollection",features:[n]};if(s==="featurecollection")return n}var kf=ot,Uv=kf.featureCollection,Xl=qr.exports,Yl=Gv,Vv=function(n,s,a){var h=kf.distanceToDegrees(s,a),u=Yl(n),c=Yl(Uv(u.features.map(function(g){return Hv(g,h)})));if(c.features.length>1)return c;if(c.features.length===1)return c.features[0]};function Hv(n,s){var a=new Xl.io.GeoJSONReader,h=a.read(n.geometry),u=h.buffer(s),c=new Xl.io.GeoJSONWriter;return u=c.write(u),{type:"Feature",geometry:u,properties:{}}}var Zv=Wa,Xv=ot.point,Ff=function(n){var s=Zv(n),a=(s[0]+s[2])/2,h=(s[1]+s[3])/2;return Xv([a,h])},Yv=gn.coordEach,Wv=ot.point,Jv=function(n){var s=0,a=0,h=0;return Yv(n,function(u){s+=u[0],a+=u[1],h++},!0),Wv([s/h,a/h])},Kv=gn,jv=function(n){var s={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},a=Object.keys(s).reduce(function(u,c){return u[c.replace("Multi","")]=c,u},{});function h(u,c,g){g?s[c].coordinates=s[c].coordinates.concat(u.geometry.coordinates):s[c].coordinates.push(u.geometry.coordinates),s[c].properties.push(u.properties)}return Kv.featureEach(n,function(u){!u.geometry||(s[u.geometry.type]?h(u,u.geometry.type,!0):a[u.geometry.type]&&h(u,a[u.geometry.type],!1))}),{type:"FeatureCollection",features:Object.keys(s).filter(function(u){return s[u].coordinates.length}).sort().map(function(u){return{type:"Feature",properties:{collectedProperties:s[u].properties},geometry:{type:u,coordinates:s[u].coordinates}}})}},$v=ot.featureCollection,Qv=gn.coordEach,ty=ot.point,zf=function(n){var s=[];return Qv(n,function(a){s.push(ty(a))}),$v(s)},el={exports:{}};el.exports=tu;el.exports.default=tu;function tu(n,s,a){a=a||2;var h=s&&s.length,u=h?s[0]*a:n.length,c=Gf(n,0,u,a,!0),g=[];if(!c||c.next===c.prev)return g;var p,v,y,_,I,w,D;if(h&&(c=sy(n,s,c,a)),n.length>80*a){p=y=n[0],v=_=n[1];for(var P=a;P<u;P+=a)I=n[P],w=n[P+1],I<p&&(p=I),w<v&&(v=w),I>y&&(y=I),w>_&&(_=w);D=Math.max(y-p,_-v),D=D!==0?32767/D:0}return Ws(c,g,a,p,v,D,0),g}function Gf(n,s,a,h,u){var c,g;if(u===yh(n,s,a,h)>0)for(c=s;c<a;c+=h)g=Wl(c,n[c],n[c+1],g);else for(c=a-h;c>=s;c-=h)g=Wl(c,n[c],n[c+1],g);return g&&eu(g,g.next)&&(Ks(g),g=g.next),g}function ur(n,s){if(!n)return n;s||(s=n);var a=n,h;do if(h=!1,!a.steiner&&(eu(a,a.next)||Jt(a.prev,a,a.next)===0)){if(Ks(a),a=s=a.prev,a===a.next)break;h=!0}else a=a.next;while(h||a!==s);return s}function Ws(n,s,a,h,u,c,g){if(!!n){!g&&c&&ly(n,h,u,c);for(var p=n,v,y;n.prev!==n.next;){if(v=n.prev,y=n.next,c?ny(n,h,u,c):ey(n)){s.push(v.i/a|0),s.push(n.i/a|0),s.push(y.i/a|0),Ks(n),n=y.next,p=y.next;continue}if(n=y,n===p){g?g===1?(n=iy(ur(n),s,a),Ws(n,s,a,h,u,c,2)):g===2&&ry(n,s,a,h,u,c):Ws(ur(n),s,a,h,u,c,1);break}}}}function ey(n){var s=n.prev,a=n,h=n.next;if(Jt(s,a,h)>=0)return!1;for(var u=s.x,c=a.x,g=h.x,p=s.y,v=a.y,y=h.y,_=u<c?u<g?u:g:c<g?c:g,I=p<v?p<y?p:y:v<y?v:y,w=u>c?u>g?u:g:c>g?c:g,D=p>v?p>y?p:y:v>y?v:y,P=h.next;P!==s;){if(P.x>=_&&P.x<=w&&P.y>=I&&P.y<=D&&Dr(u,p,c,v,g,y,P.x,P.y)&&Jt(P.prev,P,P.next)>=0)return!1;P=P.next}return!0}function ny(n,s,a,h){var u=n.prev,c=n,g=n.next;if(Jt(u,c,g)>=0)return!1;for(var p=u.x,v=c.x,y=g.x,_=u.y,I=c.y,w=g.y,D=p<v?p<y?p:y:v<y?v:y,P=_<I?_<w?_:w:I<w?I:w,C=p>v?p>y?p:y:v>y?v:y,Z=_>I?_>w?_:w:I>w?I:w,Y=mh(D,P,s,a,h),X=mh(C,Z,s,a,h),T=n.prevZ,N=n.nextZ;T&&T.z>=Y&&N&&N.z<=X;){if(T.x>=D&&T.x<=C&&T.y>=P&&T.y<=Z&&T!==u&&T!==g&&Dr(p,_,v,I,y,w,T.x,T.y)&&Jt(T.prev,T,T.next)>=0||(T=T.prevZ,N.x>=D&&N.x<=C&&N.y>=P&&N.y<=Z&&N!==u&&N!==g&&Dr(p,_,v,I,y,w,N.x,N.y)&&Jt(N.prev,N,N.next)>=0))return!1;N=N.nextZ}for(;T&&T.z>=Y;){if(T.x>=D&&T.x<=C&&T.y>=P&&T.y<=Z&&T!==u&&T!==g&&Dr(p,_,v,I,y,w,T.x,T.y)&&Jt(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;N&&N.z<=X;){if(N.x>=D&&N.x<=C&&N.y>=P&&N.y<=Z&&N!==u&&N!==g&&Dr(p,_,v,I,y,w,N.x,N.y)&&Jt(N.prev,N,N.next)>=0)return!1;N=N.nextZ}return!0}function iy(n,s,a){var h=n;do{var u=h.prev,c=h.next.next;!eu(u,c)&&Bf(u,h,h.next,c)&&Js(u,c)&&Js(c,u)&&(s.push(u.i/a|0),s.push(h.i/a|0),s.push(c.i/a|0),Ks(h),Ks(h.next),h=n=c),h=h.next}while(h!==n);return ur(h)}function ry(n,s,a,h,u,c){var g=n;do{for(var p=g.next.next;p!==g.prev;){if(g.i!==p.i&&gy(g,p)){var v=qf(g,p);g=ur(g,g.next),v=ur(v,v.next),Ws(g,s,a,h,u,c,0),Ws(v,s,a,h,u,c,0);return}p=p.next}g=g.next}while(g!==n)}function sy(n,s,a,h){var u=[],c,g,p,v,y;for(c=0,g=s.length;c<g;c++)p=s[c]*h,v=c<g-1?s[c+1]*h:n.length,y=Gf(n,p,v,h,!1),y===y.next&&(y.steiner=!0),u.push(fy(y));for(u.sort(oy),c=0;c<u.length;c++)a=ay(u[c],a);return a}function oy(n,s){return n.x-s.x}function ay(n,s){var a=uy(n,s);if(!a)return s;var h=qf(a,n);return ur(h,h.next),ur(a,a.next)}function uy(n,s){var a=s,h=n.x,u=n.y,c=-1/0,g;do{if(u<=a.y&&u>=a.next.y&&a.next.y!==a.y){var p=a.x+(u-a.y)*(a.next.x-a.x)/(a.next.y-a.y);if(p<=h&&p>c&&(c=p,g=a.x<a.next.x?a:a.next,p===h))return g}a=a.next}while(a!==s);if(!g)return null;var v=g,y=g.x,_=g.y,I=1/0,w;a=g;do h>=a.x&&a.x>=y&&h!==a.x&&Dr(u<_?h:c,u,y,_,u<_?c:h,u,a.x,a.y)&&(w=Math.abs(u-a.y)/(h-a.x),Js(a,n)&&(w<I||w===I&&(a.x>g.x||a.x===g.x&&hy(g,a)))&&(g=a,I=w)),a=a.next;while(a!==v);return g}function hy(n,s){return Jt(n.prev,n,s.prev)<0&&Jt(s.next,n,n.next)<0}function ly(n,s,a,h){var u=n;do u.z===0&&(u.z=mh(u.x,u.y,s,a,h)),u.prevZ=u.prev,u.nextZ=u.next,u=u.next;while(u!==n);u.prevZ.nextZ=null,u.prevZ=null,cy(u)}function cy(n){var s,a,h,u,c,g,p,v,y=1;do{for(a=n,n=null,c=null,g=0;a;){for(g++,h=a,p=0,s=0;s<y&&(p++,h=h.nextZ,!!h);s++);for(v=y;p>0||v>0&&h;)p!==0&&(v===0||!h||a.z<=h.z)?(u=a,a=a.nextZ,p--):(u=h,h=h.nextZ,v--),c?c.nextZ=u:n=u,u.prevZ=c,c=u;a=h}c.nextZ=null,y*=2}while(g>1);return n}function mh(n,s,a,h,u){return n=(n-a)*u|0,s=(s-h)*u|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,s=(s|s<<8)&16711935,s=(s|s<<4)&252645135,s=(s|s<<2)&858993459,s=(s|s<<1)&1431655765,n|s<<1}function fy(n){var s=n,a=n;do(s.x<a.x||s.x===a.x&&s.y<a.y)&&(a=s),s=s.next;while(s!==n);return a}function Dr(n,s,a,h,u,c,g,p){return(u-g)*(s-p)>=(n-g)*(c-p)&&(n-g)*(h-p)>=(a-g)*(s-p)&&(a-g)*(c-p)>=(u-g)*(h-p)}function gy(n,s){return n.next.i!==s.i&&n.prev.i!==s.i&&!dy(n,s)&&(Js(n,s)&&Js(s,n)&&py(n,s)&&(Jt(n.prev,n,s.prev)||Jt(n,s.prev,s))||eu(n,s)&&Jt(n.prev,n,n.next)>0&&Jt(s.prev,s,s.next)>0)}function Jt(n,s,a){return(s.y-n.y)*(a.x-s.x)-(s.x-n.x)*(a.y-s.y)}function eu(n,s){return n.x===s.x&&n.y===s.y}function Bf(n,s,a,h){var u=La(Jt(n,s,a)),c=La(Jt(n,s,h)),g=La(Jt(a,h,n)),p=La(Jt(a,h,s));return!!(u!==c&&g!==p||u===0&&xa(n,a,s)||c===0&&xa(n,h,s)||g===0&&xa(a,n,h)||p===0&&xa(a,s,h))}function xa(n,s,a){return s.x<=Math.max(n.x,a.x)&&s.x>=Math.min(n.x,a.x)&&s.y<=Math.max(n.y,a.y)&&s.y>=Math.min(n.y,a.y)}function La(n){return n>0?1:n<0?-1:0}function dy(n,s){var a=n;do{if(a.i!==n.i&&a.next.i!==n.i&&a.i!==s.i&&a.next.i!==s.i&&Bf(a,a.next,n,s))return!0;a=a.next}while(a!==n);return!1}function Js(n,s){return Jt(n.prev,n,n.next)<0?Jt(n,s,n.next)>=0&&Jt(n,n.prev,s)>=0:Jt(n,s,n.prev)<0||Jt(n,n.next,s)<0}function py(n,s){var a=n,h=!1,u=(n.x+s.x)/2,c=(n.y+s.y)/2;do a.y>c!=a.next.y>c&&a.next.y!==a.y&&u<(a.next.x-a.x)*(c-a.y)/(a.next.y-a.y)+a.x&&(h=!h),a=a.next;while(a!==n);return h}function qf(n,s){var a=new vh(n.i,n.x,n.y),h=new vh(s.i,s.x,s.y),u=n.next,c=s.prev;return n.next=s,s.prev=n,a.next=u,u.prev=a,h.next=a,a.prev=h,c.next=h,h.prev=c,h}function Wl(n,s,a,h){var u=new vh(n,s,a);return h?(u.next=h.next,u.prev=h,h.next.prev=u,h.next=u):(u.prev=u,u.next=u),u}function Ks(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function vh(n,s,a){this.i=n,this.x=s,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}tu.deviation=function(n,s,a,h){var u=s&&s.length,c=u?s[0]*a:n.length,g=Math.abs(yh(n,0,c,a));if(u)for(var p=0,v=s.length;p<v;p++){var y=s[p]*a,_=p<v-1?s[p+1]*a:n.length;g-=Math.abs(yh(n,y,_,a))}var I=0;for(p=0;p<h.length;p+=3){var w=h[p]*a,D=h[p+1]*a,P=h[p+2]*a;I+=Math.abs((n[w]-n[P])*(n[D+1]-n[w+1])-(n[w]-n[D])*(n[P+1]-n[w+1]))}return g===0&&I===0?0:Math.abs((I-g)/g)};function yh(n,s,a,h){for(var u=0,c=s,g=a-h;c<a;c+=h)u+=(n[g]-n[c])*(n[c+1]+n[g+1]),g=c;return u}tu.flatten=function(n){for(var s=n[0][0].length,a={vertices:[],holes:[],dimensions:s},h=0,u=0;u<n.length;u++){for(var c=0;c<n[u].length;c++)for(var g=0;g<s;g++)a.vertices.push(n[u][c][g]);u>0&&(h+=n[u-1].length,a.holes.push(h))}return a};var my=ot.polygon,vy=el.exports,yy=function(n){if(!n.geometry||n.geometry.type!=="Polygon"&&n.geometry.type!=="MultiPolygon")throw new Error("input must be a Polygon or MultiPolygon");var s={type:"FeatureCollection",features:[]};return n.geometry.type==="Polygon"?s.features=Jl(n.geometry.coordinates):n.geometry.coordinates.forEach(function(a){s.features=s.features.concat(Jl(a))}),s};function Jl(n){var s=_y(n),a=2,h=vy(s.vertices,s.holes,a),u=[],c=[];h.forEach(function(v,y){var _=h[y];c.push([s.vertices[_*a],s.vertices[_*a+1]])});for(var g=0;g<c.length;g+=3){var p=c.slice(g,g+3);p.push(c[g]),u.push(my([p]))}return u}function _y(n){for(var s=n[0][0].length,a={vertices:[],holes:[],dimensions:s},h=0,u=0;u<n.length;u++){for(var c=0;c<n[u].length;c++)for(var g=0;g<s;g++)a.vertices.push(n[u][c][g]);u>0&&(h+=n[u-1].length,a.holes.push(h))}return a}var Kl=qr.exports,xy=function(s,a){var h,u;s.type==="Feature"?h=s.geometry:h=s,a.type==="Feature"?u=a.geometry:u=a;var c=new Kl.io.GeoJSONReader,g=c.read(JSON.stringify(h)),p=c.read(JSON.stringify(u)),v=g.intersection(p);if(!v.isEmpty()){var y=new Kl.io.GeoJSONWriter,_=y.write(v);return{type:"Feature",properties:{},geometry:_}}},Ly=Qe,Ey=function(n,s){for(var a,h=1/0,u=0;u<s.features.length;u++){var c=Ly(n,s.features[u],"miles");c<h&&(a=s.features[u],h=c)}return a},oo={exports:{}};oo.exports=function(){throw new Error("call .point() or .polygon() instead")};function nl(n){return n?Iy(n):[Vf(),Hf()]}oo.exports.position=nl;oo.exports.point=function(n,s){var a=[];for(i=0;i<n;i++)a.push(Zf(s?jl(nl(s)):jl()));return Xf(a)};oo.exports.polygon=function(n,s,a,h){typeof s!="number"&&(s=10),typeof a!="number"&&(a=10);var u=[];for(i=0;i<n;i++){var c=[],g=Array.apply(null,new Array(s+1)).map(Math.random);g.forEach(p),g.forEach(v),c[c.length-1]=c[0],c=c.map(wy(nl(h))),u.push(Zf(Cy([c])))}function p(y,_,I){I[_]=_>0?y+I[_-1]:y}function v(y,_){y=y*2*Math.PI/g[g.length-1];var I=Math.random();c.push([I*a*Math.sin(y),I*a*Math.cos(y)])}return Xf(u)};function wy(n){return function(s,a){return[s[0]+n[0],s[1]+n[1]]}}function Uf(){return Math.random()-.5}function Vf(){return Uf()*360}function Hf(){return Uf()*180}function jl(n){return{type:"Point",coordinates:n||[Vf(),Hf()]}}function Iy(n){return[Math.random()*(n[2]-n[0])+n[0],Math.random()*(n[3]-n[1])+n[1]]}function Cy(n){return{type:"Polygon",coordinates:n}}function Zf(n){return{type:"Feature",geometry:n,properties:{}}}function Xf(n){return{type:"FeatureCollection",features:n}}var $l=oo.exports,Ny=function(n,s,a){switch(a=a||{},s=s||1,n){case"point":case"points":case void 0:return $l.point(s,a.bbox);case"polygon":case"polygons":return $l.polygon(s,a.num_vertices,a.max_radial_length,a.bbox);default:throw new Error("Unknown type given: valid options are points and polygons")}},Sy=ot.point,Ty=function(n){var s,a={type:"FeatureCollection",features:[]};return n.type==="Feature"?s=n.geometry:s=n,s.coordinates.forEach(function(h){s.coordinates.forEach(function(u){for(var c=0;c<h.length-1;c++)for(var g=0;g<u.length-1;g++)if(!(h===u&&(Math.abs(c-g)===1||Math.abs(c-g)===h.length-2))){var p=Py(h[c][0],h[c][1],h[c+1][0],h[c+1][1],u[g][0],u[g][1],u[g+1][0],u[g+1][1]);p&&a.features.push(Sy([p[0],p[1]]))}})}),a};function Py(n,s,a,h,u,c,g,p){var v,y,_,I,w,D={x:null,y:null,onLine1:!1,onLine2:!1};return v=(p-c)*(a-n)-(g-u)*(h-s),v===0?D.x!==null&&D.y!==null?D:!1:(y=s-c,_=n-u,I=(g-u)*y-(p-c)*_,w=(a-n)*y-(h-s)*_,y=I/v,_=w/v,D.x=n+y*(a-n),D.y=s+y*(h-s),y>=0&&y<=1&&(D.onLine1=!0),_>=0&&_<=1&&(D.onLine2=!0),D.onLine1&&D.onLine2?[D.x,D.y]:!1)}var Ql=ot.featureCollection,by=Ff,My=Qe,Oy=Hr,Ry=zf;function Dy(n){n.type!=="FeatureCollection"&&(n.type!=="Feature"&&(n={type:"Feature",geometry:n,properties:{}}),n=Ql([n]));for(var s=by(n),a=!1,h=0;!a&&h<n.features.length;){var u=n.features[h].geometry,c,g,p,v,y,_,I,w=!1;if(u.type==="Point")s.geometry.coordinates[0]===u.coordinates[0]&&s.geometry.coordinates[1]===u.coordinates[1]&&(a=!0);else if(u.type==="MultiPoint"){var D=!1;for(I=0;!D&&I<u.coordinates.length;)s.geometry.coordinates[0]===u.coordinates[I][0]&&s.geometry.coordinates[1]===u.coordinates[I][1]&&(a=!0,D=!0),I++}else if(u.type==="LineString")for(I=0;!w&&I<u.coordinates.length-1;)c=s.geometry.coordinates[0],g=s.geometry.coordinates[1],p=u.coordinates[I][0],v=u.coordinates[I][1],y=u.coordinates[I+1][0],_=u.coordinates[I+1][1],tc(c,g,p,v,y,_)&&(w=!0,a=!0),I++;else if(u.type==="MultiLineString")for(var P=0;P<u.coordinates.length;){w=!1,I=0;for(var C=u.coordinates[P];!w&&I<C.length-1;)c=s.geometry.coordinates[0],g=s.geometry.coordinates[1],p=C[I][0],v=C[I][1],y=C[I+1][0],_=C[I+1][1],tc(c,g,p,v,y,_)&&(w=!0,a=!0),I++;P++}else if(u.type==="Polygon"||u.type==="MultiPolygon"){var Z={type:"Feature",geometry:u,properties:{}};Oy(s,Z)&&(a=!0)}h++}if(a)return s;var Y=Ql([]);for(h=0;h<n.features.length;h++)Y.features=Y.features.concat(Ry(n.features[h]).features);var X,T=1/0;for(h=0;h<Y.features.length;h++){var N=My(s,Y.features[h],"miles");N<T&&(T=N,X=Y.features[h])}return X}function tc(n,s,a,h,u,c){var g=Math.sqrt((u-a)*(u-a)+(c-h)*(c-h)),p=Math.sqrt((n-a)*(n-a)+(s-h)*(s-h)),v=Math.sqrt((u-n)*(u-n)+(c-s)*(c-s));if(g===p+v)return!0}var Ay=Dy,il={},nu={};nu.RADIUS=6378137;nu.FLATTENING=1/298.257223563;nu.POLAR_RADIUS=63567523142e-4;var ec=nu;il.geometry=Yf;il.ring=_h;function Yf(n){var s=0,a;switch(n.type){case"Polygon":return nc(n.coordinates);case"MultiPolygon":for(a=0;a<n.coordinates.length;a++)s+=nc(n.coordinates[a]);return s;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(a=0;a<n.geometries.length;a++)s+=Yf(n.geometries[a]);return s}}function nc(n){var s=0;if(n&&n.length>0){s+=Math.abs(_h(n[0]));for(var a=1;a<n.length;a++)s-=Math.abs(_h(n[a]))}return s}function _h(n){var s,a,h,u,c,g,p=0,v=n.length;if(v>2){for(i=0;i<v;i++)i===v-2?(u=v-2,c=v-1,g=0):i===v-1?(u=v-1,c=0,g=1):(u=i,c=i+1,g=i+2),s=n[u],a=n[c],h=n[g],p+=($u(h[0])-$u(s[0]))*Math.sin($u(a[1]));p=p*ec.RADIUS*ec.RADIUS/2}return p}function $u(n){return n*Math.PI/180}var Qu=il.geometry;function ky(n){if(n.type==="FeatureCollection"){for(var s=0,a=0;s<n.features.length;s++)n.features[s].geometry&&(a+=Qu(n.features[s].geometry));return a}else return n.type==="Feature"?Qu(n.geometry):Qu(n)}var Fy=ky,zy=Qe,ic=ot.point,Gy=$a,By=Qa,qy=function(n,s,a){var h;if(n.type==="Feature")h=n.geometry.coordinates;else if(n.type==="LineString")h=n.coordinates;else throw new Error("input must be a LineString Feature or Geometry");for(var u=0,c=0;c<h.length&&!(s>=u&&c===h.length-1);c++)if(u>=s){var g=s-u;if(g){var p=Gy(h[c],h[c-1])-180,v=By(h[c],g,p,a);return v}else return ic(h[c])}else u+=zy(h[c],h[c+1],a);return ic(h[h.length-1])},Uy=Qe,rc=ot.point,Vy=function n(s,a){if(s.type==="FeatureCollection")return s.features.reduce(function(p,v){return p+n(v,a)},0);var h=s.type==="Feature"?s.geometry:s,u,c;if(h.type==="LineString")return th(h.coordinates,a);if(h.type==="Polygon"||h.type==="MultiLineString"){for(u=0,c=0;c<h.coordinates.length;c++)u+=th(h.coordinates[c],a);return u}else if(s.type==="MultiPolygon"){for(u=0,c=0;c<h.coordinates.length;c++)for(var g=0;g<h.coordinates[c].length;g++)u+=th(h.coordinates[c][g],a);return u}else throw new Error("input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry (or a FeatureCollection containing only those types)")};function th(n,s){for(var a=0,h=rc(n[0]),u=rc(n[0]),c,g=1;g<n.length;g++)u.geometry.coordinates=n[g],a+=Uy(h,u,s),c=h,h=u,u=c;return a}var eh=Qe,Ea=ot.point,Hy=$a,sc=Qa,Wf=function(n,s){var a;if(n.type==="Feature")a=n.geometry.coordinates;else if(n.type==="LineString")a=n.coordinates;else throw new Error("input must be a LineString Feature or Geometry");return Zy(s,a)};function Zy(n,s){for(var a="miles",h=Ea([1/0,1/0],{dist:1/0}),u=0;u<s.length-1;u++){var c=Ea(s[u]),g=Ea(s[u+1]);c.properties.dist=eh(n,c,a),g.properties.dist=eh(n,g,a);var p=Math.max(c.properties.dist,g.properties.dist),v=Hy(c,g),y=sc(n,p,v+90,a),_=sc(n,p,v-90,a),I=Xy(y.geometry.coordinates[0],y.geometry.coordinates[1],_.geometry.coordinates[0],_.geometry.coordinates[1],c.geometry.coordinates[0],c.geometry.coordinates[1],g.geometry.coordinates[0],g.geometry.coordinates[1]),w;I&&(w=Ea(I),w.properties.dist=eh(n,w,a)),c.properties.dist<h.properties.dist&&(h=c,h.properties.index=u),g.properties.dist<h.properties.dist&&(h=g,h.properties.index=u),w&&w.properties.dist<h.properties.dist&&(h=w,h.properties.index=u)}return h}function Xy(n,s,a,h,u,c,g,p){var v,y,_,I,w,D={x:null,y:null,onLine1:!1,onLine2:!1};return v=(p-c)*(a-n)-(g-u)*(h-s),v===0?D.x!==null&&D.y!==null?D:!1:(y=s-c,_=n-u,I=(g-u)*y-(p-c)*_,w=(a-n)*y-(h-s)*_,y=I/v,_=w/v,D.x=n+y*(a-n),D.y=s+y*(h-s),y>0&&y<1&&(D.onLine1=!0),_>0&&_<1&&(D.onLine2=!0),D.onLine1&&D.onLine2?[D.x,D.y]:!1)}var Yy=ot.lineString,oc=Wf,Wy=function(s,a,h){var u;if(h.type==="Feature")u=h.geometry.coordinates;else if(h.type==="LineString")u=h.coordinates;else throw new Error("input must be a LineString Feature or Geometry");var c=oc(h,s),g=oc(h,a),p;c.properties.index<=g.properties.index?p=[c,g]:p=[g,c];for(var v=Yy([p[0].geometry.coordinates],{}),y=p[0].properties.index+1;y<p[1].properties.index+1;y++)v.geometry.coordinates.push(u[y]);return v.geometry.coordinates.push(p[1].geometry.coordinates),v},Fs=ot.point,Jy=ot.featureCollection,ac=Qe,Ky=function(s,a,h){for(var u=Jy([]),c=a/ac(Fs([s[0],s[1]]),Fs([s[2],s[1]]),h),g=c*(s[2]-s[0]),p=a/ac(Fs([s[0],s[1]]),Fs([s[0],s[3]]),h),v=p*(s[3]-s[1]),y=s[0];y<=s[2];){for(var _=s[1];_<=s[3];)u.features.push(Fs([y,_])),_+=v;y+=g}return u},jy=ot.featureCollection,wa=ot.point,$y=ot.polygon,uc=Qe,Qy=function(s,a,h){for(var u=jy([]),c=a/uc(wa([s[0],s[1]]),wa([s[2],s[1]]),h),g=c*(s[2]-s[0]),p=a/uc(wa([s[0],s[1]]),wa([s[0],s[3]]),h),v=p*(s[3]-s[1]),y=s[0];y<=s[2];){for(var _=s[1];_<=s[3];){var I=$y([[[y,_],[y,_+v],[y+g,_+v],[y+g,_],[y,_]]]);u.features.push(I),_+=v}y+=g}return u},t_=ot.featureCollection,Pi=ot.polygon,hc=Qe,e_=function(n,s,a){for(var h=t_([]),u=s/hc([n[0],n[1]],[n[2],n[1]],a),c=u*(n[2]-n[0]),g=s/hc([n[0],n[1]],[n[0],n[3]],a),p=g*(n[3]-n[1]),v=0,y=n[0];y<=n[2];){for(var _=0,I=n[1];I<=n[3];)v%2===0&&_%2===0?h.features.push(Pi([[[y,I],[y,I+p],[y+c,I],[y,I]]]),Pi([[[y,I+p],[y+c,I+p],[y+c,I],[y,I+p]]])):v%2===0&&_%2===1?h.features.push(Pi([[[y,I],[y+c,I+p],[y+c,I],[y,I]]]),Pi([[[y,I],[y,I+p],[y+c,I+p],[y,I]]])):_%2===0&&v%2===1?h.features.push(Pi([[[y,I],[y,I+p],[y+c,I+p],[y,I]]]),Pi([[[y,I],[y+c,I+p],[y+c,I],[y,I]]])):_%2===1&&v%2===1&&h.features.push(Pi([[[y,I],[y,I+p],[y+c,I],[y,I]]]),Pi([[[y,I+p],[y+c,I+p],[y+c,I],[y,I+p]]])),I+=p,_++;v++,y+=c}return h},Ia=ot.point,Jf=ot.polygon,lc=Qe,n_=ot.featureCollection,ka=[],Fa=[];for(var nh=0;nh<6;nh++){var cc=2*Math.PI/6*nh;ka.push(Math.cos(cc)),Fa.push(Math.sin(cc))}var i_=function(s,a,h,u){var c=a/lc(Ia([s[0],s[1]]),Ia([s[2],s[1]]),h),g=c*(s[2]-s[0]),p=a/lc(Ia([s[0],s[1]]),Ia([s[0],s[3]]),h),v=p*(s[3]-s[1]),y=g/2,_=y*2,I=Math.sqrt(3)/2*v,w=s[2]-s[0],D=s[3]-s[1],P=3/4*_,C=I,Z=w/(_-y/2),Y=Math.ceil(Z);Math.round(Z)===Y&&Y++;var X=(Y*P-y/2-w)/2-y/2,T=Math.ceil(D/I),N=(D-T*I)/2,F=T*I-D>I/2;F&&(N-=I/4);for(var K=n_([]),b=0;b<Y;b++)for(var O=0;O<=T;O++){var M=b%2===1;if(!(O===0&&M)&&!(O===0&&F)){var B=b*P+s[0]-X,z=O*C+s[1]+N;M&&(z-=I/2),u?K.features.push.apply(K.features,s_([B,z],g/2,v/2)):K.features.push(r_([B,z],g/2,v/2))}}return K};function r_(n,s,a){for(var h=[],u=0;u<6;u++){var c=n[0]+s*ka[u],g=n[1]+a*Fa[u];h.push([c,g])}return h.push(h[0]),Jf([h])}function s_(n,s,a){for(var h=[],u=0;u<6;u++){var c=[];c.push(n),c.push([n[0]+s*ka[u],n[1]+a*Fa[u]]),c.push([n[0]+s*ka[(u+1)%6],n[1]+a*Fa[(u+1)%6]]),c.push(n),h.push(Jf([c]))}return h}fn.exports={isolines:im,convex:iv,within:ov,concave:cv,difference:fv,collect:dv,flip:mv,simplify:vv,bezier:Ev,tag:Iv,sample:Nv,envelope:Mv,square:wf,midpoint:zv,buffer:Vv,center:Ff,centroid:Jv,combine:jv,distance:Qe,explode:zf,bbox:Wa,tesselate:yy,bboxPolygon:Df,inside:Hr,intersect:xy,nearest:Ey,planepoint:Ef,random:Ny,tin:Jh,union:Of,bearing:$a,destination:Qa,kinks:Ty,pointOnSurface:Ay,area:Fy,along:qy,lineDistance:Vy,lineSlice:Wy,pointOnLine:Wf,pointGrid:Ky,squareGrid:Qy,triangleGrid:e_,hexGrid:i_};var ai=ot,fc=fn.exports.point=ai.point,o_=fn.exports.polygon=ai.polygon;fn.exports.lineString=ai.lineString;fn.exports.multiPoint=ai.multiPoint;fn.exports.multiPolygon=ai.multiPolygon;fn.exports.multiLineString=ai.multiLineString;fn.exports.feature=ai.feature;fn.exports.featureCollection=ai.featureCollection;fn.exports.geometryCollection=ai.geometryCollection;const gc=L.icon({iconRetinaUrl:Cp,iconUrl:Np,shadowUrl:Ip,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]}),a_={mixins:[Xg],computed:{lang(){const n=["save","cancel","longitude","latitude","graphicsManagement","polygon","point","noSiteFound","theSiteHasNotBeenSelected"];return n.reduce((s,a,h)=>(s[a]=this.$t("dataForm."+n[h]),s),{})},options(){return this.meta.options},value_field_form(){if(this.formValueField)return this.model.form[this.formValueField]}},components:{LeftSquareOutlined:Kg,RightSquareOutlined:td},mounted(){this.meta.GeographicOption&&(this.zoom=this.meta.GeographicOption.zoom,this.attributes=this.meta.GeographicOption.attributes.split(","),this.currentBaseMap=this.meta.GeographicOption.baseMap,this.geometryType=this.meta.GeographicOption.geometryType,this.center=this.meta.GeographicOption.center,this.allowMultiGeometryTypes=!1,this.allowMultiGeometries=!1,this.checkByArea=this.meta.GeographicOption.checkByArea,this.featureLayerUrl=this.meta.GeographicOption.featureLayerUrl,this.featureTitles=this.meta.GeographicOption.featureTitles,this.searchField=this.meta.GeographicOption.searchField,this.formValueField=this.meta.GeographicOption.formValueField,this.successMsg=this.meta.GeographicOption.successMsg,this.errorMsg=this.meta.GeographicOption.errorMsg,this.searchFieldPlaceHolder=this.meta.GeographicOption.searchFieldPlaceHolder),!this.meta.hidden&&this.do_render&&this.initMap()},data(){return{formInline:{search_value:""},ruleInline:{search_value:[{required:!0,message:"\u0425\u0430\u0439\u0445 \u0443\u0442\u0433\u0430 \u0430\u0430 \u043E\u0440\u0443\u0443\u043B\u043D\u0430 \u0443\u0443",trigger:"blur"}]},current:null,new_point:{lng:null,lat:null},attributes:[],geometryType:"point",points:[],openSide:!1,allowMultiGeometryTypes:!1,allowMultiGeometries:!1,checkByArea:!1,featureLayerUrl:"",featureTitles:"",searchField:"",successMsg:"",formValueField:"",errorMsg:"",searchLoading:!1,center:{lat:47.91876971846709,lng:106.91736415028574},zoom:15,map:null,currentBaseMap:0,baseMaps:[{title:"Google \u0421\u0430\u043D\u0441\u0440\u044B\u043D",thumb:"/webgis/images/baseMaps/googleSatellite.jpg",baseMap:L.tileLayer("https://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}",{name:"googleil",maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]})},{title:"Google \u0413\u0443\u0434\u0430\u043C\u0436",thumb:"/webgis/images/baseMaps/googleStreets.jpg",baseMap:L.tileLayer("https://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",{name:"googlei",maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]})},{title:"Open Street Map",baseMap:L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{name:"osm",maxZoom:19,subdomains:["a","b","c"]}),thumb:"/webgis/images/baseMaps/openstreet.jpg"}],draw:null,layer:new L.FeatureGroup,searchLayer:null,drawValue:null}},beforeMount(){this.meta.options&&(this.meta.options=null)},methods:{removeEditeLauyer(){this.layer.eachLayer(n=>{this.layer.removeLayer(n)}),this.cancelGraphic()},clearSearchLayer(){this.searchLayer&&(this.map.hasLayer(this.searchLayer)&&this.map.removeLayer(this.searchLayer),this.searchLayer=null)},handleSubmit(){let n=this.model.form[this.formValueField];if(n){this.searchLoading=!0;var s=axios.create({headers:{common:{}}});s.get(`/api/get-region/${n}`).then(a=>{if(a.data.object_id>=1){let h=`${this.featureLayerUrl}/query?returnGeometry=true&where=${this.searchField}=${a.data.object_id}&outFields=*&f=json&outSR=4326`;s.get(h).then(u=>{if(u.data.features.length>=1){u.data.features[0].geometry.rings[0];let c=[];u.data.features[0].geometry.rings.forEach(p=>{let v=[];p.forEach(y=>{v.push([y[1],y[0]])}),c.push(v)}),this.clearSearchLayer(),this.searchLayer=L.polygon(c,{color:"green"}).addTo(this.map),this.searchLayer.bindPopup(L.Util.template(this.featureTitles,u.data.features[0].attributes));let g=this.searchLayer.getBounds();this.map.fitBounds(g),this.searchLoading=!1}else this.searchLoading=!1,this.clearSearchLayer(),this.$Message.error(this.lang.noSiteFound)})}})}},cancelGraphic(){this.points=[],this.current=null,this.map.closePopup(),this.openSide=!1;let n=this.getData();if(this.checkByArea&&n)if(this.searchLayer){let s=this.layer.toGeoJSON(),a=this.searchLayer.toGeoJSON(),h=!0;a.geometry.coordinates.forEach(u=>{let c=o_([u]);s.features.forEach(g=>{if(this.geometryType=="polygon"&&g.geometry.coordinates[0].map(p=>{let v=fc(p);fn.exports.inside(v,c)&&(h=!1)}),this.geometryType=="point"){let p=fc(g.geometry.coordinates);fn.exports.inside(p,c)&&(h=!1)}})}),h?(this.model.form[this.model.component]=null,this.$Message.error(this.errorMsg)):(this.model.form[this.model.component]=n,this.$Message.success(this.successMsg))}else this.layer.eachLayer(s=>{this.map.removeLayer(s)}),this.model.form[this.model.component]=null,this.$Message.error(this.lang.theSiteHasNotBeenSelected);else this.model.form[this.model.component]=n},createFeature(n){let s=n.toGeoJSON();L.geoJSON(s).eachLayer(h=>{this.layer.addLayer(this.setLayerOptions(h))})},setLayerOptions(n){n.on("click",h=>this.geometrySelectEvent(h));let s={},a=L.DomUtil.create("div");return this.attributes.map(h=>{s[h]=n.feature.properties[h]?n.feature.properties[h]:"";let u=L.DomUtil.create("div"),c=L.DomUtil.create("br"),g=L.DomUtil.create("label");g.innerText=h;let p=L.DomUtil.create("input");p.value=s[h],L.DomEvent.addListener(p,"change",v=>{s[h]=p.value}),u.appendChild(g),u.appendChild(c),u.appendChild(p),a.appendChild(u)}),this.checkByArea||n.bindPopup(a),n.feature.properties=s,n},saveGraphic(){if(this.current){if(this.geometryType=="point"){if(this.IsValidCoordinates(this.points[0])){let s=L.latLng([this.points[0][1],this.points[0][0]]);this.current.setLatLng(s)}}else{let s=[];this.points.map(a=>{this.IsValidCoordinates(a)&&s.push(L.latLng([a[1],a[0]]))}),this.current.setLatLngs(s)}return this.cancelGraphic(),!0}let n=null;if(this.geometryType=="point")this.IsValidCoordinates(this.points[0])&&(n=L.marker([this.points[0][1],this.points[0][0]]));else{let s=[];this.points.map(a=>{this.IsValidCoordinates(a)&&s.push([a[1],a[0]])}),this.geometryType=="line"&&(n=new L.polyline(s)),this.geometryType=="polygon"&&(n=new L.polygon(s))}n&&this.createFeature(n),this.cancelGraphic()},destroy(){if(this.meta.options=null,this.map!==null){this.layer.eachLayer(h=>{this.map.removeLayer(h)}),this.map.removeLayer(this.layer),this.layer=new L.FeatureGroup,this.map.remove(),this.map=null;var n=document.getElementById(`geographic_${this.model.component}`),s=n.parentNode;s.removeChild(n);var a=document.createElement("div");a.setAttribute("id",`geographic_${this.model.component}`),a.setAttribute("class","geographic-mapx"),s.appendChild(a)}},initMap(){L.Marker.prototype.options.icon=gc,L.Draw.Marker.prototype.options.icon=gc;var n=L.DomUtil.get(`geographic_${this.model.component}`);n!=null&&(n._leaflet_id=null),this.map=L.map(`geographic_${this.model.component}`).setView([this.center.lat,this.center.lng],this.zoom),this.map.addLayer(this.baseMaps[this.currentBaseMap].baseMap),this.itemValue||(this.layer.eachLayer(s=>{this.map.removeLayer(s)}),this.map.removeLayer(this.layer)),this.draw=new L.Control.Draw({draw:{polygon:this.allowMultiGeometryTypes?!0:this.geometryType==="polygon",rectangle:this.allowMultiGeometryTypes?!0:this.geometryType==="polygon",marker:this.allowMultiGeometryTypes?!0:this.geometryType==="point",polyline:this.allowMultiGeometryTypes?!0:this.geometryType==="line",circle:!1,circlemarker:!1},edit:{featureGroup:this.layer,remove:!(this.meta&&this.meta.disabled)}}),this.map.addControl(this.draw),L.control.scale().addTo(this.map),this.setElement(),this.map.on(L.Draw.Event.CREATED,s=>{s.layerType;let a=s.layer;this.meta&&this.meta.disabled?alert(this.lang.thereZNoRightChangeInformation):(this.createFeature(a),this.cancelGraphic())}),this.map.on(L.Draw.Event.DELETED,s=>{this.meta&&this.meta.disabled?alert(this.lang.thereZNoRightChangeInformation):this.cancelGraphic()}),this.map.on(L.Draw.Event.EDITED,s=>{this.meta&&this.meta.disabled?alert(this.lang.thereZNoRightChangeInformation):this.cancelGraphic()}),this.formValueField&&this.checkByArea&&this.model.form[this.formValueField]&&this.handleSubmit()},setElement(){if(this.model.form[this.model.component]){let n=JSON.parse(this.model.form[this.model.component]);this.geometryType==="point"&&(n={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{coordinates:[n.lng,n.lat],type:"Point"}}]}),L.geoJSON(n).eachLayer(a=>{this.layer.addLayer(this.setLayerOptions(a))})}this.map.addLayer(this.layer)},geometrySelectEvent(n){if(!(this.meta&&this.meta.disabled)){if(this.current=n.target,this.points=[],n.target._latlngs){let s=[];n.target._latlngs[0]instanceof Array?(this.geometryType="polygon",s=n.target.getLatLngs()[0]):(this.geometryType="line",s=n.target.getLatLngs()),s.map(a=>{this.points.push([a.lng,a.lat])})}else{this.geometryType="point";let s=n.target.getLatLng();this.points.push([s.lng,s.lat])}this.openSide=!0}},getData(){let n=this.layer.toGeoJSON();if(n.features.length>=2){let s=0;this.layer.eachLayer(a=>{s=s+1,s<n.features.length&&this.layer.removeLayer(a)})}if(n=this.layer.toGeoJSON(),n.features.length>=1)if(this.geometryType=="point"){this.drawValue=n;let s={lat:n.features[0].geometry.coordinates[1],lng:n.features[0].geometry.coordinates[0]};return JSON.stringify(s)}else return this.drawValue=n,JSON.stringify(n);else return null},changeBaseMap(n){this.map.removeLayer(this.baseMaps[this.currentBaseMap].baseMap),this.currentBaseMap=n,this.map.options.maxZoom=20,this.map.addLayer(this.baseMaps[n].baseMap)},createNewGeometry(){let n=null;if(this.new_point.lng!==null&&this.new_point.lat===null&&(n=this.new_point.lng),this.new_point.lng===null&&this.new_point.lat!==null&&(n=this.new_point.lat),this.new_point.lng!==null&&this.new_point.lat!==null&&(this.new_point.lng=this.new_point.lng*1,this.new_point.lat=this.new_point.lat*1,this.IsValidCoordinates([this.new_point.lng,this.new_point.lat])&&(this.points.push([this.new_point.lng,this.new_point.lat]),this.resetInput())),n){let s=n.split(" ");if(s.length>=1){let a=!1;s.map(h=>{let u=h.split("	");u.length>=2?(u[0]=u[0]*1,u[1]=u[1]*1,this.IsValidCoordinates([u[0],u[1]])&&this.points.push(u)):a=!0}),a||this.resetInput()}}},resetInput(){this.new_point={lng:null,lat:null},this.$refs.lng.focus()},IsValidCoordinates(n){return n[0]&&n[1]?(n[0]=n[0]*1,n[1]=n[1]*1,this.longitude(n[0])&&this.latitude(n[1])):!1},longitude(n){return!!(this.isNumber(n)&&this.between(n,-180,180))},latitude(n){return!!(this.isNumber(n)&&this.between(n,-90,90))},isNumber(n){return typeof n=="number"},between(n,s,a){return s<=n&&a>=n}},watch:{drawValue(n,s){},value_field_form(n,s){n&&this.handleSubmit()},itemValue(n,s){n&&!s&&this.setElement(),!n&&!s&&this.editMode&&this.initMap()},do_render(n){n?this.editMode?this.itemValue===null&&this.initMap():this.initMap():this.destroy()},options(){this.meta.options&&(this.formInline.search_value=this.meta.options,this.handleSubmit())}}},u_={class:"geographic"},h_=["id"],l_={id:"base-maps"},c_=["onClick"],f_=Ft("hr",null,null,-1),g_=Ft("span",null,"Line",-1),d_=Ft("hr",null,null,-1),p_=["onUpdate:modelValue"],m_=["onUpdate:modelValue"];function v_(n,s,a,h,u,c){const g=Mr("RightSquareOutlined"),p=Mr("LeftSquareOutlined"),v=Mr("a-button"),y=Mr("a-radio"),_=Mr("a-radio-group"),I=Mr("lambda-form-item");return Vn(),Or(I,{label:n.label,name:n.model.component,meta:n.meta},{default:Si(()=>[Ft("div",u_,[Ft("div",{class:"geographic-mapx",id:`geographic_${n.model.component}`,style:{height:"100%",width:"100%"}},null,8,h_),Ft("div",l_,[Ft("ul",null,[(Vn(!0),ma(pl,null,dl(u.baseMaps,(w,D)=>(Vn(),ma("li",{key:D},[Ft("a",{href:"javascript:;",onClick:P=>c.changeBaseMap(D),class:Xu(D==u.currentBaseMap?"active":"")},Ti(w.title),11,c_)]))),128))])]),Ft("div",{id:"side_bar",class:Xu(u.openSide?"open":"")},[Rr(v,{onClick:s[0]||(s[0]=w=>u.openSide=!u.openSide),class:Xu(u.openSide?"side-toggle show":"side-toggle")},{icon:Si(()=>[u.openSide?(Vn(),Or(g,{key:0})):(Vn(),Or(p,{key:1}))]),_:1},8,["class"]),Ft("h3",null,Ti(c.lang.graphicsManagement),1),f_,u.allowMultiGeometryTypes?(Vn(),Or(_,{key:0,value:u.geometryType,"onUpdate:value":s[1]||(s[1]=w=>u.geometryType=w),class:"geometry_type"},{default:Si(()=>[Rr(y,{value:"point",disabled:u.current!==null},{default:Si(()=>[Ft("span",null,Ti(c.lang.point),1)]),_:1},8,["disabled"]),Rr(y,{value:"line",disabled:u.current!==null},{default:Si(()=>[g_]),_:1},8,["disabled"]),Rr(y,{value:"polygon",disabled:u.current!==null},{default:Si(()=>[Ft("span",null,Ti(c.lang.polygon),1)]),_:1},8,["disabled"])]),_:1},8,["value"])):Yu("",!0),d_,Ft("table",null,[Ft("thead",null,[Ft("tr",null,[Ft("th",null,Ti(c.lang.longitude),1),Ft("th",null,Ti(c.lang.latitude),1)])]),Ft("tbody",null,[(Vn(!0),ma(pl,null,dl(u.points,(w,D)=>(Vn(),ma("tr",{key:D},[Ft("td",null,[va(Ft("input",{type:"text","onUpdate:modelValue":P=>w[0]=P},null,8,p_),[[ya,w[0]]])]),Ft("td",null,[va(Ft("input",{type:"text","onUpdate:modelValue":P=>w[1]=P},null,8,m_),[[ya,w[1]]])])]))),128)),Ft("tr",null,[Ft("td",null,[va(Ft("input",{type:"text",ref:"lng","onUpdate:modelValue":s[2]||(s[2]=w=>u.new_point.lng=w),onChange:s[3]||(s[3]=(...w)=>c.createNewGeometry&&c.createNewGeometry(...w))},null,544),[[ya,u.new_point.lng]])]),Ft("td",null,[va(Ft("input",{type:"text",ref:"lat","onUpdate:modelValue":s[4]||(s[4]=w=>u.new_point.lat=w),onChange:s[5]||(s[5]=(...w)=>c.createNewGeometry&&c.createNewGeometry(...w))},null,544),[[ya,u.new_point.lat]])])])])]),u.points.length>=1?(Vn(),Or(v,{key:1,type:"success",onClick:c.saveGraphic},{default:Si(()=>[ml(Ti(c.lang.save),1)]),_:1},8,["onClick"])):Yu("",!0),u.points.length>=1?(Vn(),Or(v,{key:2,type:"warning",onClick:c.cancelGraphic},{default:Si(()=>[ml(Ti(c.lang.cancel),1)]),_:1},8,["onClick"])):Yu("",!0)],2)])]),_:1},8,["label","name","meta"])}const x_=Zg(a_,[["render",v_]]);export{x_ as default};
