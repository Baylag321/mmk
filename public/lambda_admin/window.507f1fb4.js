import{m as w,c as g,K as v}from"./mixin.875c664f.js";import{a as y,r,o as n,e as a,f as l,c as p,w as E,k as d,h as o,t as C,J as k,aj as b,ak as P}from"./entry.fff4ff4b.js";const U={inheritAttrs:!1,name:"Canvas",mixins:[w],data(){return{form_width:800,openSlidePanel:!1,exportLoading:!1}},components:{common:g,Krudtools:v},methods:{hideSide(){this.openSlidePanel=!1,this.$router.push({query:{}}),this.editMode=!1},openSide(){this.$router.push({query:{add:"true"}}),this.openSlidePanel=!0},templateEdit(e){this.$route.params.id&&this.$route.query.edit?this.$route.params.id.toString()!==e.toString()&&this.$router.push({query:{edit:"true",id:e}}):this.$router.push({query:{edit:"true",id:e}})},templateOnSuccess(){this.hideSide()}},beforeMount(){let e=this.$route.query.add,t=this.$route.query.edit,c=this.$route.query.id;e==="true"||e===!0?this.openSlidePanel=!0:(t==="true"||t===!0)&&(this.rowId=c,this.editMode=!0,this.openSlidePanel=!0)}},M=e=>(b("data-v-34e6b643"),e=e(),P(),e),q={class:"card drawer-wrappper"},I={class:"offcanvas-template"},R={class:"crud-page"},L={class:"crud-page-body"},$={key:0,class:""},A={class:"ant-drawer-content"},B={class:"ant-drawer-wrapper-body"},D={class:"ant-drawer-header"},V={class:"ant-drawer-header-title"},K={class:"ant-drawer-title"},N=M(()=>o("span",{role:"img","aria-label":"close",class:"anticon anticon-close"},[o("svg",{focusable:"false",class:"","data-icon":"close",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",viewBox:"64 64 896 896"},[o("path",{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"})])],-1)),z=[N],O={class:"ant-drawer-body"},Q={key:1,id:"drawer-container"};function j(e,t,c,H,i,s){const u=r("common"),h=r("Krudtools"),m=r("portal"),f=r("dataform"),_=r("datagrid");return n(),a("div",q,[l(u,{parent:e.parent,title:e.title,addAction:s.openSide,"hide-action":i.openSlidePanel},null,8,["parent","title","addAction","hide-action"]),i.openSlidePanel?d("",!0):(n(),p(m,{key:0,to:"header-right"},{default:E(()=>[l(h,{search:e.search,refresh:e.refresh,exportExcel:e.exportExcel,exportLoading:i.exportLoading,print:e.print,save:e.save,isPrint:e.isPrint,isExcel:e.isExcel,isExcelUpload:e.isExcelUpload,excelUploadCustomUrl:e.excelUploadCustomUrl,excelUploadMethod:e.excelUploadMethod,isRefresh:e.isRefresh,isSave:e.isSave,isSearch:!1},null,8,["search","refresh","exportExcel","exportLoading","print","save","isPrint","isExcel","isExcelUpload","excelUploadCustomUrl","excelUploadMethod","isRefresh","isSave"])]),_:1})),o("section",I,[o("div",R,[o("div",L,[i.openSlidePanel?(n(),a("div",$,[o("div",A,[o("div",B,[o("div",D,[o("div",V,[o("div",K,C(e.title),1),o("button",{"aria-label":"Close",onClick:t[0]||(t[0]=(...S)=>s.hideSide&&s.hideSide(...S)),class:"ant-drawer-close"},z)])]),o("div",O,[l(f,{ref:"form",hideTitle:!0,schemaID:e.form,title:e.title,url:e.url,editMode:e.editMode,onSuccess:s.templateOnSuccess,onReady:e.onReady,do_render:i.openSlidePanel,permissions:e.permissions,page_id:e.page_id,user_condition:e.user_condition?e.user_condition.formCondition:null,onError:e.onError,close:s.hideSide},null,8,["schemaID","title","url","editMode","onSuccess","onReady","do_render","permissions","page_id","user_condition","onError","close"])])])])])):d("",!0),i.openSlidePanel?d("",!0):(n(),a("div",Q,[o("div",{class:k(i.openSlidePanel?"dg-flex open-drawer":"dg-flex")},[e.permissions&&e.permissions.r?(n(),p(_,{key:0,ref:"grid",url:e.url,schemaID:e.grid,paginate:50,fnClone:e.clone,fnEdit:s.templateEdit,fnQuickEdit:e.quickEdit,fnView:e.view,actions:e.$props.actions,dblClick:e.$props.dbClickAction,onRowSelect:e.$props.onRowSelect,permissions:e.permissions,page_id:e.page_id,custom_condition:e.$props.custom_condition?e.$props.custom_condition:null,user_condition:e.user_condition?e.user_condition.gridCondition:null},null,8,["url","schemaID","fnClone","fnEdit","fnQuickEdit","fnView","actions","dblClick","onRowSelect","permissions","page_id","custom_condition","user_condition"])):d("",!0)],2)]))])])])])}const F=y(U,[["render",j],["__scopeId","data-v-34e6b643"]]);export{F as default};
