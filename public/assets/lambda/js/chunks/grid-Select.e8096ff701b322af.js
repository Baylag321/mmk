"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9998],{11320:(e,l,t)=>{function a(e){if(e.filterWithUser){if(e.filterWithUser&&e.filterWithUser.constructor===Array)e.filterWithUser.forEach((l=>{let t=`${l.tableField} = '${window.init.user[l.userField]}'`;""==e.filter||void 0===e.filter?e.filter=t:e.filter=e.filter+" AND "+t}));else{let l=`${e.filterWithUser.tableField} = '${window.init.user[e.filterWithUser.userField]}'`;""==e.filter||void 0===e.filter?e.filter=l:e.filter=e.filter+" AND "+l}e.filterWithUser=void 0}return console.log(e.filterWithUser),e}t.d(l,{_:()=>a})},6218:(e,l,t)=>{t.r(l),t.d(l,{default:()=>h});var a=t(91317),i=t.n(a),o=t(9669),r=t.n(o),s=t(11320);const n={props:["model","rule","label","meta","relation_data"],data:()=>({options:[],loading:!0,value:null,clearAble:!1,searchval:null}),methods:{clearState(){this.value=null,this.clearAble=!1,i().set(this.model.form,this.model.component,null)},searchChange(e){this.searchval=e}},watch:{value(e){e&&(1==this.meta.relation.multiple?i().set(this.model.form,this.model.component,e.map((e=>e.value)).join(",")):i().set(this.model.form,this.model.component,e.value),this.clearAble=!0)}},mounted(){let e=`/lambda/krud/${this.meta.schemaID}/options`;null!=this.meta.filter.relation.parentFieldOfForm&&null!=this.meta.filter.relation.parentFieldOfTable&&this.$watch("model.form."+this.meta.filter.relation.parentFieldOfForm,{handler:(l,t)=>{this.meta.filter.relation.filter=this.meta.filter.relation.parentFieldOfTable+"='"+l.toString()+"'",r().post(e,(0,s._)(this.meta.filter.relation)).then((({data:e})=>{this.options=e,this.loading=!1}))},deep:!0}),r().post(e,(0,s._)(this.meta.filter.relation)).then((({data:e})=>{if(this.options=e,this.loading=!1,null!=this.model.form[this.model.component]&&null!=this.model.form[this.model.component]){let e=this.options.findIndex((e=>e.value==this.model.form[this.model.component]));e>=0&&(this.value=this.options[e])}}))}};const h=(0,t(51900).Z)(n,(function(){var e=this,l=e.$createElement,t=e._self._c||l;return t("FormItem",{attrs:{label:e.label,prop:e.rule}},[e.meta.relation.multiple?t("multiselect",{attrs:{multiple:!0,disabled:e.meta.disabled,"track-by":"value",searchable:!0,"clear-on-select":!0,placeholder:e.label?e.label:"",label:"label",options:e.options},on:{"search-change":e.searchChange},model:{value:e.value,callback:function(l){e.value=l},expression:"value"}}):t("multiselect",{attrs:{disabled:e.meta.disabled,options:e.options,"track-by":"value",searchable:!0,"clear-on-select":!0,placeholder:e.label?e.label:"",label:"label"},on:{"search-change":e.searchChange},scopedSlots:e._u([{key:"singleLabel",fn:function(l){var t=l.option;return[e._v("\n            "+e._s(t.label)+"\n        ")]}}],null,!1,3474305198),model:{value:e.value,callback:function(l){e.value=l},expression:"value"}},[e._v(" "),t("template",{on:{mousedown:function(l){return l.preventDefault(),l.stopPropagation(),e.toggle.apply(null,arguments)}},slot:"clear"},[t("div",{staticClass:"clear-container"},[e.clearAble?t("Button",{attrs:{shape:"circle",size:"small",icon:"md-close"},on:{click:e.clearState}}):e._e()],1)])],2)],1)}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=grid-Select.e8096ff701b322af.js.map