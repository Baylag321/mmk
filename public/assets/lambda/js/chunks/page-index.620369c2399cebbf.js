"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8313],{32274:(t,e,i)=>{i.r(e),i.d(e,{default:()=>r});const s={computed:{menuMode:function(){var t=localStorage.getItem("menuMode");return t||void 0}},data:function(){return{options:{height:"1000px"},pageType:"",property:{withCrudLog:window.init.withCrudLog,withoutHeader:!0===window.init.withoutHeader,page_id:null,template:"canvas",mode:window.init.crud_mode?window.init.crud_mode:void 0,title:"",projects_id:null,grid:null,form:null,form_width:800,view_url:null,actions:[],user_condition:null,permissions:{c:!1,r:!1,u:!1,d:!1}},iframeUrl:"",iframeTitle:"",submenu:[],showSub:!1,menu:window.init.menu,cruds:window.init.cruds,permissions:window.init.permissions.permissions,pageTitle:"",subMenuId:"0",showNestedMenu:!1}},methods:{checkSub:function(){var t=this,e=this.menu.findIndex((function(e){return e.id==t.$route.params.menu_id}));if(e>=0)if(this.menu[e].children.length>=1)if(this.menu[e].children.forEach((function(e,i){e.children.length>=1&&(t.showNestedMenu=!0,t.$route.params.sub_menu_id==e.id&&(t.subMenuId=e.id))})),this.pageTitle=this.getTitle(this.menu[e]),this.pageTitle=this.getTitle(this.menu[e]),this.$route.matched.length<=1){var i=this.getShowAbleChild(this.menu[e].children);i&&this.$router.push("/p/".concat(this.$route.params.menu_id,"/").concat(i.id))}else this.subMenu=this.menu[e].children,this.showSub=!0;else this.showSub=!1,this.getPage()},getShowAbleChild:function(t){var e=this,i=t.findIndex((function(t){return e.can(t)}));return i>=0?t[i]:null},can:function(t){return!!this.permissions[t.id]&&!!this.permissions[t.id].show},getTitle:function(t){if("crud"==t.link_to){var e=this.cruds.findIndex((function(e){return e.id==t.url}));return e>=0?this.cruds[e].title:""}return t.title},getPage:function(){var t=this,e=this.menu.findIndex((function(e){return e.id==t.$route.params.menu_id}));if(e>=0){var i=this.menu[e];switch(this.pageType=i.link_to,this.pageType){case"crud":var s=this.cruds.findIndex((function(t){return t.id==i.url}));if(s>=0){this.property.page_id=i.id,this.property.title=this.cruds[s].title,this.property.projects_id=this.cruds[s].projects_id,this.property.grid=this.cruds[s].grid,this.property.form=this.cruds[s].form,this.property.template=this.cruds[s].template,this.property.main_tab_title=this.cruds[s].main_tab_title,this.property.form_width=this.cruds[s].form_width?this.cruds[s].form_width:null,this.property.view_url=this.cruds[s].view_url,this.property.permissions.c=this.permissions[i.id].c,this.property.permissions.r=this.permissions[i.id].r,this.property.permissions.u=this.permissions[i.id].u,this.property.permissions.d=this.permissions[i.id].d;var r={};this.permissions[i.id].formCondition&&(r.formCondition=this.permissions[i.id].formCondition),this.permissions[i.id].gridCondition&&(r.gridCondition=this.permissions[i.id].gridCondition),r&&(this.property.user_condition=r)}break;case"link":window.location=this.menu[e].url;break;case"router-link":console.log(this.menu[e].url),this.$router.push(this.menu[e].url);break;case"iframe":this.iframeUrl=i.url,this.iframeTitle=i.title}}}},mounted:function(){this.checkSub()}};const r=(0,i(51900).Z)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"page"},[t.showSub?i("router-view",{key:t.$route.path},[i("nav",{directives:[{name:"show",rawName:"v-show",value:t.showSub&&"nested"!=t.menuMode,expression:"showSub && menuMode != 'nested'"}],attrs:{slot:"v-nav"},slot:"v-nav"},[i("div",{staticClass:"card sub-nav-list"},[i("h3",{staticClass:"card-header"},[t._v(t._s(t.pageTitle))]),t._v(" "),t.showNestedMenu?i("Collapse",{attrs:{simple:""},model:{value:t.subMenuId,callback:function(e){t.subMenuId=e},expression:"subMenuId"}},t._l(t.subMenu,(function(e,s){return t.can(e)&&e.children.length>=1?i("Panel",{key:s,attrs:{name:e.id}},[i("span",{domProps:{innerHTML:t._s(t.getTitle(e))}}),t._v(" "),i("ul",{staticClass:"card-body",attrs:{slot:"content"},slot:"content"},t._l(e.children,(function(s,r){return t.can(s)?i("li",{key:r},["link"!=s.link_to&&"router-link"!=s.link_to?i("router-link",{attrs:{to:"/p/"+t.$route.params.menu_id+"/"+e.id+"/"+s.id}},[s.icon?i("i",{class:s.icon}):t._e(),t._v(" "),i("span",{domProps:{innerHTML:t._s(t.getTitle(s))}})]):t._e(),t._v(" "),"router-link"==s.link_to?i("router-link",{attrs:{to:s.url}},[s.icon?i("i",{class:s.icon}):t._e(),t._v(" "),i("span",{domProps:{innerHTML:t._s(t.getTitle(s))}})]):t._e(),t._v(" "),"link"==s.link_to?i("a",{attrs:{href:s.url,target:e.target}},[s.icon?i("i",{class:s.icon}):t._e(),t._v(" "),i("span",{domProps:{innerHTML:t._s(t.getTitle(s))}})]):t._e()],1):t._e()})),0)]):t._e()})),1):t._e(),t._v(" "),i("ul",{staticClass:"card-body"},t._l(t.subMenu,(function(e,s){return t.can(e)&&e.children.length<=0?i("li",{key:s},["link"!=e.link_to&&"router-link"!=e.link_to?i("router-link",{attrs:{to:"/p/"+t.$route.params.menu_id+"/"+e.id}},[e.icon?i("i",{class:e.icon}):t._e(),t._v(" "),i("span",{domProps:{innerHTML:t._s(t.getTitle(e))}})]):"router-link"==e.link_to?i("router-link",{attrs:{to:e.url}},[e.icon?i("i",{class:e.icon}):t._e(),t._v(" "),i("span",{domProps:{innerHTML:t._s(t.getTitle(e))}})]):"link"==e.link_to?i("a",{attrs:{href:e.url,target:e.target}},[e.icon?i("i",{class:e.icon}):t._e(),t._v(" "),i("span",{domProps:{innerHTML:t._s(t.getTitle(e))}})]):t._e()],1):t._e()})),0)],1)])]):t._e(),t._v(" "),t.showSub?t._e():i("div",{class:"iframe"==t.pageType?"iframe-page":"sub-page"},["crud"==t.pageType?i("krud",{staticClass:"material",attrs:{template:t.property.template,property:t.property}},[i("user-control",{attrs:{slot:"right"},slot:"right"})],1):t._e(),t._v(" "),"iframe"==t.pageType?i("iframe",{attrs:{src:t.iframeUrl}}):t._e(),t._v(" "),"iframe"==t.pageType&&t.property.withoutHeader?i("portal",{attrs:{to:"header-left"}},[i("h3",[t._v(t._s(t.iframeTitle))])]):t._e()],1)],1)}),[],!1,null,null,null).exports},51900:(t,e,i)=>{function s(t,e,i,s,r,n,o,u){var a,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=i,l._compiled=!0),s&&(l.functional=!0),n&&(l._scopeId="data-v-"+n),o?(a=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=a):r&&(a=u?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),a)if(l.functional){l._injectStyles=a;var d=l.render;l.render=function(t,e){return a.call(e),d(t,e)}}else{var c=l.beforeCreate;l.beforeCreate=c?[].concat(c,a):[a]}return{exports:t,options:l}}i.d(e,{Z:()=>s})}}]);
//# sourceMappingURL=page-index.620369c2399cebbf.js.map