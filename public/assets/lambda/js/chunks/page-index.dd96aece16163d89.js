"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8313],{94935:(e,i,t)=>{t.r(i),t.d(i,{default:()=>r});const s={computed:{menuMode(){let e=localStorage.getItem("menuMode");return e||void 0}},data:()=>({options:{height:"1000px"},pageType:"",property:{withCrudLog:window.init.withCrudLog,withoutHeader:!0===window.init.withoutHeader,page_id:null,template:"canvas",mode:window.init.crud_mode?window.init.crud_mode:void 0,title:"",projects_id:null,grid:null,form:null,form_width:800,view_url:null,actions:[],user_condition:null,permissions:{c:!1,r:!1,u:!1,d:!1,gridDeleteConditionJS:"",gridEditConditionJS:""}},iframeUrl:"",iframeTitle:"",submenu:[],showSub:!1,menu:window.init.menu,cruds:window.init.cruds,permissions:window.init.permissions.permissions,pageTitle:"",subMenuId:"0",showNestedMenu:!1}),methods:{checkSub(){let e=this.menu.findIndex((e=>e.id==this.$route.params.menu_id));if(e>=0)if(this.menu[e].children.length>=1)if(this.menu[e].children.forEach(((e,i)=>{e.children.length>=1&&(this.showNestedMenu=!0,this.$route.params.sub_menu_id==e.id&&(this.subMenuId=e.id))})),this.pageTitle=this.getTitle(this.menu[e]),this.pageTitle=this.getTitle(this.menu[e]),this.$route.matched.length<=1){let i=this.getShowAbleChild(this.menu[e].children);i&&this.$router.push(`/p/${this.$route.params.menu_id}/${i.id}`)}else this.subMenu=this.menu[e].children,this.showSub=!0;else this.showSub=!1,this.getPage()},getShowAbleChild(e){let i=e.findIndex((e=>this.can(e)));return i>=0?e[i]:null},can(e){return!!this.permissions[e.id]&&!!this.permissions[e.id].show},getTitle(e){if("crud"==e.link_to){let i=this.cruds.findIndex((i=>i.id==e.url));return i>=0?this.cruds[i].title:""}return e.title},getPage(){let e=this.menu.findIndex((e=>e.id==this.$route.params.menu_id));if(e>=0){let i=this.menu[e];switch(this.pageType=i.link_to,this.pageType){case"crud":let t=this.cruds.findIndex((e=>e.id==i.url));if(t>=0){this.property.page_id=i.id,this.property.title=this.cruds[t].title,this.property.projects_id=this.cruds[t].projects_id,this.property.grid=this.cruds[t].grid,this.property.form=this.cruds[t].form,this.property.template=this.cruds[t].template,this.property.main_tab_title=this.cruds[t].main_tab_title,this.property.form_width=this.cruds[t].form_width?this.cruds[t].form_width:null,this.property.view_url=this.cruds[t].view_url,this.property.permissions.c=this.permissions[i.id].c,this.property.permissions.r=this.permissions[i.id].r,this.property.permissions.u=this.permissions[i.id].u,this.property.permissions.d=this.permissions[i.id].d,this.property.permissions.gridDeleteConditionJS=this.permissions[i.id].gridDeleteConditionJS,this.property.permissions.gridEditConditionJS=this.permissions[i.id].gridEditConditionJS;let e={};this.permissions[i.id].formCondition&&(e.formCondition=this.permissions[i.id].formCondition),this.permissions[i.id].gridCondition&&(e.gridCondition=this.permissions[i.id].gridCondition),e&&(this.property.user_condition=e)}break;case"link":window.location=this.menu[e].url;break;case"router-link":console.log(this.menu[e].url),this.$router.push(this.menu[e].url);break;case"iframe":this.iframeUrl=i.url,this.iframeTitle=i.title}}}},mounted(){this.checkSub()}};const r=(0,t(51900).Z)(s,(function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("section",{staticClass:"page"},[e.showSub?t("router-view",{key:e.$route.path},[t("nav",{directives:[{name:"show",rawName:"v-show",value:e.showSub&&"nested"!=e.menuMode,expression:"showSub && menuMode != 'nested'"}],attrs:{slot:"v-nav"},slot:"v-nav"},[t("div",{staticClass:"card sub-nav-list"},[t("h3",{staticClass:"card-header"},[e._v(e._s(e.pageTitle))]),e._v(" "),e.showNestedMenu?t("Collapse",{attrs:{simple:""},model:{value:e.subMenuId,callback:function(i){e.subMenuId=i},expression:"subMenuId"}},e._l(e.subMenu,(function(i,s){return e.can(i)&&i.children.length>=1?t("Panel",{key:s,attrs:{name:i.id}},[t("span",{domProps:{innerHTML:e._s(e.getTitle(i))}}),e._v(" "),t("ul",{staticClass:"card-body",attrs:{slot:"content"},slot:"content"},e._l(i.children,(function(s,r){return e.can(s)?t("li",{key:r},["link"!=s.link_to&&"router-link"!=s.link_to?t("router-link",{attrs:{to:"/p/"+e.$route.params.menu_id+"/"+i.id+"/"+s.id}},[s.icon?t("i",{class:s.icon}):e._e(),e._v(" "),t("span",{domProps:{innerHTML:e._s(e.getTitle(s))}})]):e._e(),e._v(" "),"router-link"==s.link_to?t("router-link",{attrs:{to:s.url}},[s.icon?t("i",{class:s.icon}):e._e(),e._v(" "),t("span",{domProps:{innerHTML:e._s(e.getTitle(s))}})]):e._e(),e._v(" "),"link"==s.link_to?t("a",{attrs:{href:s.url,target:i.target}},[s.icon?t("i",{class:s.icon}):e._e(),e._v(" "),t("span",{domProps:{innerHTML:e._s(e.getTitle(s))}})]):e._e()],1):e._e()})),0)]):e._e()})),1):e._e(),e._v(" "),t("ul",{staticClass:"card-body"},e._l(e.subMenu,(function(i,s){return e.can(i)&&i.children.length<=0?t("li",{key:s},["link"!=i.link_to&&"router-link"!=i.link_to?t("router-link",{attrs:{to:"/p/"+e.$route.params.menu_id+"/"+i.id}},[i.icon?t("i",{class:i.icon}):e._e(),e._v(" "),t("span",{domProps:{innerHTML:e._s(e.getTitle(i))}})]):"router-link"==i.link_to?t("router-link",{attrs:{to:i.url}},[i.icon?t("i",{class:i.icon}):e._e(),e._v(" "),t("span",{domProps:{innerHTML:e._s(e.getTitle(i))}})]):"link"==i.link_to?t("a",{attrs:{href:i.url,target:i.target}},[i.icon?t("i",{class:i.icon}):e._e(),e._v(" "),t("span",{domProps:{innerHTML:e._s(e.getTitle(i))}})]):e._e()],1):e._e()})),0)],1)])]):e._e(),e._v(" "),e.showSub?e._e():t("div",{class:"iframe"==e.pageType?"iframe-page":"sub-page"},["crud"==e.pageType?t("krud",{staticClass:"material",attrs:{template:e.property.template,property:e.property}},[t("user-control",{attrs:{slot:"right"},slot:"right"})],1):e._e(),e._v(" "),"iframe"==e.pageType?t("iframe",{attrs:{src:e.iframeUrl}}):e._e(),e._v(" "),"iframe"==e.pageType&&e.property.withoutHeader?t("portal",{attrs:{to:"header-left"}},[t("h3",[e._v(e._s(e.iframeTitle))])]):e._e()],1)],1)}),[],!1,null,null,null).exports},51900:(e,i,t)=>{function s(e,i,t,s,r,n,o,d){var l,a="function"==typeof e?e.options:e;if(i&&(a.render=i,a.staticRenderFns=t,a._compiled=!0),s&&(a.functional=!0),n&&(a._scopeId="data-v-"+n),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},a._ssrRegister=l):r&&(l=d?function(){r.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(a.functional){a._injectStyles=l;var u=a.render;a.render=function(e,i){return l.call(i),u(e,i)}}else{var h=a.beforeCreate;a.beforeCreate=h?[].concat(h,l):[l]}return{exports:e,options:a}}t.d(i,{Z:()=>s})}}]);
//# sourceMappingURL=page-index.dd96aece16163d89.js.map