{"version":3,"file":"assets/lambda/js/chunks/form-field-ImageSubform.7adc7553a9074588.js","mappings":"kHAsBA,MCtB2Q,EDsB3Q,CACE,MAAF,4CAEE,QAHF,WAII,KAAJ,8EAEE,KANF,WAOI,MAAJ,CACM,YAAN,GACM,WAAN,GACM,WAAN,EACM,aAAN,KAIE,MAAF,CACI,aADJ,SACA,GAAM,IAAN,OACA,0BACM,QAAN,yDACQ,GAAR,yCAEU,IAAV,oDAEA,mBACY,KAAZ,+BACc,MAAd,CACgB,OAAhB,WACgB,SAAhB,WACgB,KAAhB,WAIY,KAAZ,sBACc,EAAd,4CAIU,KAAV,yBACU,KAAV,cACU,KAAV,wCAME,QAAF,CACI,WADJ,SACA,GACM,KAAN,aACM,KAAN,gBAGI,QANJ,SAMA,GACM,KAAN,oCAGI,aAVJ,SAUA,GACM,IAAN,6BACM,KAAN,6CACM,KAAN,sCACM,KAAN,kEACQ,MAAR,CACU,KAAV,OACU,SAAV,gBAKI,aAtBJ,eEjDA,SAXgB,E,SAAA,GACd,GCRW,WAAa,IAAIA,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,yBAAyB,CAACF,EAAG,SAAS,CAACG,IAAI,SAASD,YAAY,gBAAgBE,MAAM,CAAC,oBAAmB,EAAK,OAAS,sBAAsB,aAAaR,EAAIS,SAASC,MAAM,CAACC,MAAOX,EAAIU,MAAME,KAAKZ,EAAIU,MAAMG,WAAYC,SAAS,SAAUC,GAAMf,EAAIgB,KAAKhB,EAAIU,MAAME,KAAMZ,EAAIU,MAAMG,UAAWE,IAAME,WAAW,gCAAgC,CAACb,EAAG,SAAS,CAACI,MAAM,CAAC,KAAO,WAAW,CAA2C,MAAzCP,KAAKS,MAAME,KAAKX,KAAKS,MAAMG,WAAoBT,EAAG,MAAM,CAACE,YAAY,kCAAkCE,MAAM,CAAC,IAAMP,KAAKS,MAAME,KAAKX,KAAKS,MAAMG,WAAW,IAAM,WAAWb,EAAIkB,KAAKlB,EAAImB,GAAG,KAAKf,EAAG,MAAM,CAACA,EAAG,IAAI,CAACE,YAAY,iBAAiBN,EAAImB,GAAG,qBAAqBnB,EAAIoB,GAAGpB,EAAIqB,OAAO,uBAAuB,IAAI,KACpxB,IDUpB,EACA,KACA,KACA,MAI8B","sources":["webpack:///../../vue/dataform/src/elements/ImageSubform.vue","webpack:///../../vue/dataform/src/elements/ImageSubform.vue?f186","webpack:///../../vue/dataform/src/elements/ImageSubform.vue?3de5","webpack:///../../vue/dataform/src/elements/ImageSubform.vue?8159"],"sourcesContent":["<template>\n        <div class=\"subform-image-wrapper\">\n            <Upload\n                ref=\"upload\"\n                :with-credentials=\"true\"\n                v-model=\"model.form[model.component]\"\n                action=\"/lambda/krud/upload\"\n                class=\"subform-image\"\n                :on-success=\"success\">\n                <Button type=\"dashed\">\n                    <img class=\"preview-img subform-img-preview\" v-if=\"this.model.form[this.model.component] != null\" :src=\"this.model.form[this.model.component]\"\n                         alt=\"image\">\n                    <div>\n                        <i class=\"tu ti-camera\"></i>\n                        {{ label }}\n                    </div>\n                </Button>\n            </Upload>\n        </div>\n</template>\n\n<script>\n    export default {\n        props: [\"model\", \"label\", \"rule\", \"meta\", \"do_render\"],\n\n        mounted() {\n            this.uploadList = typeof this.$refs.upload.fileList != 'undefined' ? this.$refs.upload.fileList : [];\n        },\n        data() {\n            return {\n                defaultList: [],\n                uploadList: [],\n                showImage: false,\n                showImageUrl: ''\n            }\n        },\n\n        watch: {\n            'model.form'(val) {\n                let itemModel = val[this.model.component];\n                if (typeof this.meta.file.isMultiple !== 'undefined' && this.meta.file.isMultiple) {\n                    if (typeof itemModel == 'string' && typeof itemModel != 'undefined' && itemModel != null) {\n\n                        let list = JSON.parse(this.model.form[this.model.component]);\n\n                        if (Array.isArray(list)) {\n                            this.defaultList = list.map(item => {\n                                return {\n                                    status: 'finished',\n                                    response: item.response,\n                                    name: item.name\n                                }\n                            });\n\n                            this.$nextTick(() => {\n                                this.uploadList = this.$refs.upload.fileList;\n                            })\n                        }\n                    } else {\n                        this.$refs.upload.fileList = [];\n                        this.uploadList = [];\n                        this.model.form[this.model.component] = null;\n                    }\n                }\n            }\n        },\n\n        methods: {\n            handleView(imageUrl) {\n                this.showImage = true;\n                this.showImageUrl = imageUrl;\n            },\n\n            success(val) {\n                    this.model.form[this.model.component] = val;\n            },\n\n            handleRemove(file) {\n                const fileList = this.$refs.upload.fileList;\n                this.$refs.upload.fileList.splice(fileList.indexOf(file), 1);\n                this.uploadList = this.$refs.upload.fileList;\n                this.model.form[this.model.component] = this.uploadList.map(item => {\n                    return {\n                        name: item.name,\n                        response: item.response\n                    }\n                })\n            },\n\n            beforeUpload() {\n                // const check = this.uploadList.length < 5;\n                // if (!check) {\n                //     this.$Notice.warning({\n                //         title: 'Up to five pictures can be uploaded.'\n                //     });\n                // }\n                // return check;\n            }\n        }\n    };\n</script>\n\n","import mod from \"-!../../../../starter-apps/lambda-go/node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../starter-apps/lambda-go/node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageSubform.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../starter-apps/lambda-go/node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../starter-apps/lambda-go/node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageSubform.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ImageSubform.vue?vue&type=template&id=29b81ff8&\"\nimport script from \"./ImageSubform.vue?vue&type=script&lang=js&\"\nexport * from \"./ImageSubform.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../starter-apps/lambda-go/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"subform-image-wrapper\"},[_c('Upload',{ref:\"upload\",staticClass:\"subform-image\",attrs:{\"with-credentials\":true,\"action\":\"/lambda/krud/upload\",\"on-success\":_vm.success},model:{value:(_vm.model.form[_vm.model.component]),callback:function ($$v) {_vm.$set(_vm.model.form, _vm.model.component, $$v)},expression:\"model.form[model.component]\"}},[_c('Button',{attrs:{\"type\":\"dashed\"}},[(this.model.form[this.model.component] != null)?_c('img',{staticClass:\"preview-img subform-img-preview\",attrs:{\"src\":this.model.form[this.model.component],\"alt\":\"image\"}}):_vm._e(),_vm._v(\" \"),_c('div',[_c('i',{staticClass:\"tu ti-camera\"}),_vm._v(\"\\n                \"+_vm._s(_vm.label)+\"\\n            \")])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"names":["_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","success","model","value","form","component","callback","$$v","$set","expression","_e","_v","_s","label"],"sourceRoot":""}