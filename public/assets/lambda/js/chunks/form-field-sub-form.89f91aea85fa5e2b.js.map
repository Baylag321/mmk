{"version":3,"file":"assets/lambda/js/chunks/form-field-sub-form.89f91aea85fa5e2b.js","mappings":"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","sources":["webpack:///../../vue/dataform/src/elements/subform/Form.vue?b726","webpack:///../../vue/dataform/src/elements/subform/Form.vue","webpack:///../../vue/dataform/src/elements/subform/Form.vue?ff01","webpack:///../../vue/dataform/src/elements/subform/Form.vue?9e84","webpack:///../../vue/dataform/src/elements/subform/GridForm.vue?176c","webpack:///../../vue/dataform/src/elements/subform/GridForm.vue","webpack:///../../vue/dataform/src/elements/subform/GridForm.vue?fba5","webpack:///../../vue/dataform/src/elements/subform/GridForm.vue?5f3c"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"subform-grid sub-modal-form\",style:(_vm.subStyle)},[(!_vm.form.min_height && !_vm.form.disableCreate)?_c('div',{staticClass:\"subform-header\"},[_vm._v(\"\\n        \"+_vm._s(_vm.form.name)+\"\\n        \"),_c('Button',{staticClass:\"sub-form-add-btn\",attrs:{\"shape\":\"circle\",\"type\":\"success\",\"size\":\"small\",\"icon\":\"md-add\"},on:{\"click\":_vm.add}})],1):_vm._e(),_vm._v(\" \"),(_vm.form.min_height ? true: this.listData.length >= 1)?_c('table',{staticClass:\"sub-form-grid\",attrs:{\"border\":\"1\"}},[_c('thead',[_c('tr',[(_vm.form.showRowNumber)?_c('th',{staticClass:\"row-number\"},[_vm._v(\"ДД\")]):_vm._e(),_vm._v(\" \"),_vm._l((_vm.form.schema),function(item){return (item.label != '' && !item.hidden)?_c('th',{key:item.index,on:{\"click\":function($event){return _vm.sort(item)}}},[_vm._v(\"\\n                \"+_vm._s(item.label)+\" \"),_c('i',{staticClass:\"ti-exchange-vertical\"})]):_vm._e()}),_vm._v(\" \"),_c('th',{staticClass:\"action\"},[_vm._v(\"...\")])],2)]),_vm._v(\" \"),_c('tbody',_vm._l((_vm.listData),function(item,index){return _c('grid-form',{key:index,attrs:{\"f\":item.form,\"model\":item.model,\"editMode\":_vm.editMode,\"relations\":_vm.relations,\"formula\":_vm.formula}},[_c('template',{slot:\"action\"},[_c('a',{staticClass:\"sub-edit\",attrs:{\"href\":\"javscript:void(0)\"},on:{\"click\":function (){ return _vm.edit(index); }}},[_c('Icon',{attrs:{\"type\":\"md-create\"}})],1),_vm._v(\" \"),(!_vm.form.disableDelete)?_c('a',{attrs:{\"href\":\"javscript:void(0)\"},on:{\"click\":function (){ return _vm.remove(index); }}},[_c('Icon',{attrs:{\"type\":\"ios-trash\"}})],1):_vm._e()]),_vm._v(\" \"),(_vm.form.showRowNumber)?_c('template',{slot:\"rowNumber\"},[_c('span',[_vm._v(_vm._s(index + 1))])]):_vm._e()],2)}),1),_vm._v(\" \"),(_vm.hasEq)?_c('tfoot',[_c('tr',[_vm._l((_vm.equationData),function(item,index){return _c('td',{key:index},[(item.preStaticWord!=null && item.preStaticWord!='')?_c('span',[_vm._v(\" \"+_vm._s(item.preStaticWord)+\" \")]):_vm._e(),_vm._v(\" \"),(item.hasEquation)?_c('span',[_vm._v(_vm._s(item.data.toLocaleString()))]):_vm._e(),_vm._v(\" \"),(item.prefix!=null && item.prefix!='')?_c('span',[_vm._v(\" \"+_vm._s(item.prefix))]):_vm._e()])}),_vm._v(\" \"),_c('td')],2)]):_vm._e()]):_vm._e(),_vm._v(\" \"),(_vm.form.min_height)?_c('a',{staticClass:\"sub-grid-add\",attrs:{\"href\":\"javascript:void(0)\"},on:{\"click\":_vm.add}},[_c('Icon',{attrs:{\"type\":\"plus\"}}),_vm._v(\"\\n        \"+_vm._s(_vm.lang.save)+\"\\n    \")],1):_vm._e(),_vm._v(\" \"),_c('paper-modal',{staticClass:\"form-modal\",attrs:{\"name\":(\"form-modal-\" + (_vm.form.formId)),\"min-width\":200,\"min-height\":100,\"pivot-y\":0.5,\"adaptive\":true,\"reset\":true,\"draggable\":true,\"resizable\":true,\"draggable\":\".form-tool\",\"width\":\"800\",\"height\":\"70%\"}},[_c('section',{staticClass:\"form-modal\"},[_c('div',{staticClass:\"form-tool\"},[_c('h4',[_vm._v(_vm._s(_vm.form.name))]),_vm._v(\" \"),_c('div',{staticClass:\"form-tool-actions\"},[_c('a',{attrs:{\"href\":\"javascript:void(0)\"},on:{\"click\":_vm.closeModal}},[_c('i',{staticClass:\"ti-close\"})])])]),_vm._v(\" \"),_c('div',{staticClass:\"form-body\"},[(_vm.modal_show)?_c('dataform',{ref:\"form\",attrs:{\"schemaID\":_vm.form.formId,\"do_render\":_vm.modal_show,\"editMode\":_vm.editIndex >= 0 ? true : false,\"isSubForm\":true,\"onSuccess\":_vm.onSuccess,\"onReady\":_vm.formReady,\"onError\":_vm.onError}}):_vm._e()],1)])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"subform-grid sub-modal-form\" :style=\"subStyle\">\n        <div class=\"subform-header\" v-if=\"!form.min_height && !form.disableCreate\">\n            {{ form.name }}\n            <Button shape=\"circle\" type=\"success\" size=\"small\" @click=\"add\" icon=\"md-add\"\n                    class=\"sub-form-add-btn\"></Button>\n        </div>\n        <table class=\"sub-form-grid\" border=\"1\" v-if=\"form.min_height ? true: this.listData.length >= 1\">\n            <thead>\n            <tr>\n                <th class=\"row-number\" v-if=\"form.showRowNumber\">ДД</th>\n                <th @click=\"sort(item)\" v-for=\"item in form.schema\" v-if=\"item.label != '' && !item.hidden\"\n                    :key=\"item.index\">\n                    {{ item.label }} <i class=\"ti-exchange-vertical\"/>\n                </th>\n                <th class=\"action\">...</th>\n            </tr>\n            </thead>\n\n            <tbody>\n\n            <grid-form v-for=\"(item, index) in listData\"\n                       :key=\"index\"\n                       :f=\"item.form\"\n                       :model=\"item.model\"\n                       :editMode=\"editMode\"\n                       :relations=\"relations\"\n                       :formula=\"formula\">\n                <template slot=\"action\">\n                    <a href=\"javscript:void(0)\" @click=\"()=>edit(index)\" class=\"sub-edit\">\n                        <Icon type=\"md-create\"/>\n                    </a>\n                    <a href=\"javscript:void(0)\" @click=\"()=>remove(index)\" v-if=\"!form.disableDelete\">\n                        <Icon type=\"ios-trash\"/>\n                    </a>\n                </template>\n                <template slot=\"rowNumber\" v-if=\"form.showRowNumber\">\n                    <span>{{ index + 1 }}</span>\n                </template>\n            </grid-form>\n            </tbody>\n            <tfoot v-if=\"hasEq\">\n            <tr>\n                <td v-for=\"(item, index) in equationData\" :key=\"index\">\n                    <span v-if=\"item.preStaticWord!=null && item.preStaticWord!=''\"> {{ item.preStaticWord }} </span>\n                    <span v-if=\"item.hasEquation\">{{ item.data.toLocaleString() }}</span>\n                    <span v-if=\"item.prefix!=null && item.prefix!=''\"> {{ item.prefix }}</span>\n                </td>\n                <td>\n                </td>\n            </tr>\n            </tfoot>\n        </table>\n        <a class=\"sub-grid-add\" href=\"javascript:void(0)\" @click=\"add\" v-if=\"form.min_height\">\n            <Icon type=\"plus\"></Icon>\n            {{ lang.save }}\n        </a>\n\n        <paper-modal\n            :name=\"`form-modal-${form.formId}`\"\n            class=\"form-modal\"\n            :min-width=\"200\"\n            :min-height=\"100\"\n            :pivot-y=\"0.5\"\n            :adaptive=\"true\"\n            :reset=\"true\"\n            :draggable=\"true\"\n            :resizable=\"true\"\n            draggable=\".form-tool\"\n            width=\"800\"\n            height=\"70%\"\n        >\n            <section class=\"form-modal\">\n                <div class=\"form-tool\">\n\n                    <h4>{{ form.name }}</h4>\n                    <div class=\"form-tool-actions\">\n                        <a href=\"javascript:void(0)\" @click=\"closeModal\">\n                            <i class=\"ti-close\"></i>\n                        </a>\n                    </div>\n                </div>\n\n                <div class=\"form-body\">\n\n                    <dataform ref=\"form\" v-if=\"modal_show\" :schemaID=\"form.formId\"\n                              :do_render=\"modal_show\"\n                              :editMode=\"editIndex >= 0 ? true : false\"\n                              :isSubForm=\"true\"\n                              :onSuccess=\"onSuccess\"\n                              :onReady=\"formReady\"\n                              :onError=\"onError\"></dataform>\n                </div>\n            </section>\n        </paper-modal>\n    </div>\n</template>\n\n<script>\nimport {element} from \"../index\";\nimport GridForm from \"./GridForm\";\n\nconst DataForm = () => import(/* webpackChunkName: \"Dataform-el\" */'../../Dataform');\nexport default {\n    props: [\"form\", \"model\", \"editMode\", \"relations\", \"formula\"],\n    components: {\n        \"grid-form\": GridForm,\n        \"dataform\": DataForm\n    },\n    mounted() {\n        this.equationRenderer();\n\n        this.form.schema.forEach(field => {\n            field.disabled = true;\n        })\n\n    },\n    computed: {\n            lang() {\n                const labels = ['pleaseCompleteFirstLine', ];\n                return labels.reduce((obj, key, i) => {\n                    obj[key] = this.$t('dataForm.' + labels[i]);\n                    return obj;\n                }, {});\n            },\n\n        subStyle() {\n            if (this.form.min_height) {\n                return {\n                    minHeight: this.form.min_height + 'px',\n                    background: '#f3f4f5'\n                }\n            } else {\n                return undefined;\n            }\n        },\n        Lang() {\n            const labels = [ 'add',];\n            return labels.reduce((obj, key, i) => {\n                obj[key] = this.$t('dataForm.' + labels[i]);\n                return obj;\n            }, {});\n        },\n    },\n    watch: {\n        listData: {\n            handler: function (curr, old) {\n                if (this.hasEq) {\n                    this.equationData.map(eq => {\n                        if (eq.hasEquation) {\n                            eq.data = -1;\n                            let count = 0;\n                            switch (eq.equation) {\n                                case \"SUM\": {\n                                    eq.data = 0;\n                                    curr.map(it => {\n                                        eq.data += Number(isNaN(parseInt(it.model[eq.model], 10)) ? 0 : it.model[eq.model]);\n                                    });\n                                    break;\n                                }\n                                case \"COUNT\": {\n                                    eq.data = 0;\n                                    curr.map(it => {\n                                        eq.data += Number(1);\n                                    });\n                                    break;\n                                }\n                                case \"MIN\": {\n                                    curr.map(it => {\n                                        if (eq.data == -1) {\n                                            eq.data = it.model[eq.model];\n                                        } else {\n                                            eq.data = Math.min(eq.data, it.model[eq.model]);\n                                        }\n                                    });\n                                    break;\n                                }\n                                case \"MAX\": {\n                                    eq.data = 0;\n                                    curr.map(it => {\n                                        eq.data = Math.max(eq.data, it.model[eq.model]);\n                                    });\n                                    break;\n                                }\n                                case \"AVG\": {\n                                    eq.data = 0;\n                                    curr.map(it => {\n                                        count++;\n                                        eq.data += Number(it.model[eq.model]);\n                                    });\n                                    eq.data = Number(eq.data / count);\n                                    break;\n                                }\n                            }\n                        }\n                    });\n                }\n            },\n            deep: true\n        }\n    },\n    data() {\n        return {\n            listData: [],\n            equationData: [],\n            currentSortDir: 'asc',\n            hasEq: false,\n            modal_show: false,\n            editIndex: -1,\n        };\n    },\n    methods: {\n        showAddModal() {\n            this.modal_show = true;\n            this.$modal.show(`form-modal-${this.form.formId}`);\n        },\n        closeModal() {\n            this.modal_show = false;\n            this.editIndex = -1;\n            this.$modal.hide(`form-modal-${this.form.formId}`);\n        },\n        formReady(formData, subSchema) {\n\n            let parentFieldIndex = subSchema.findIndex(field => field.model == this.form.parent);\n\n            if (parentFieldIndex > 0) {\n                subSchema[parentFieldIndex].hidden = true;\n            }\n\n            if (this.editIndex >= 0) {\n                this.$refs.form.editModel(this.listData[this.editIndex].model[this.form.identity], {...this.listData[this.editIndex].model});\n            }\n\n\n        },\n        onError() {\n\n        },\n        onSuccess(data) {\n\n            console.log(data)\n            if (this.editIndex >= 0) {\n\n                Object.keys(data).forEach(itemKey => {\n                    if (\n                        this.listData[this.editIndex].form.identity == itemKey\n                    ) {\n                        return;\n                    }\n\n                    if (\n                        (itemKey == \"created_at\" || itemKey == \"updated_at\")\n                    ) {\n                        return;\n                    }\n\n                    Vue.set(this.listData[this.editIndex].model, itemKey, data[itemKey]);\n\n                });\n\n            } else {\n                let clonedForm = _.cloneDeep(this.form);\n                let clonedFormModel = {};\n                Object.keys(data).forEach(key => {\n                    let schemaIndex = clonedForm.schema.findIndex(schema => schema.model == 'key')\n                    if (schemaIndex >= 0) {\n                        if (\n                            clonedForm.identity == clonedForm.schema[schemaIndex].model ||\n                            clonedForm.schema[schemaIndex].formType == null\n                        ) {\n                            return;\n                        }\n\n                        if (\n                            clonedForm.timestamp &&\n                            (clonedForm.schema[schemaIndex].model == \"created_at\" || clonedForm.schema[schemaIndex].model == \"updated_at\")\n                        ) {\n                            return;\n                        }\n                    }\n\n                    Vue.set(clonedFormModel, key, data[key]);\n                });\n\n                let listItem = {\n                    form: clonedForm,\n                    model: clonedFormModel\n                };\n\n                let subItems = this.model.form[this.model.component];\n\n                if (subItems == undefined) {\n                    subItems = [];\n                }\n                subItems.push(clonedFormModel);\n                Vue.set(this.model.form, this.model.component, subItems);\n\n                this.listData.push(listItem);\n            }\n\n\n            this.closeModal();\n        },\n        element: element,\n        checkAddable() {\n            return new Promise((resolve, reject) => {\n                let obj = this.listData[this.listData.length - 1];\n                if (obj) {\n                    let hasValue = false;\n                    let lastModel = obj.model;\n\n                    for (let key in lastModel) {\n                        if (\n                            typeof lastModel[key] != undefined &&\n                            lastModel[key] != null &&\n                            lastModel[key] != \"\" &&\n                            lastModel[key] != false\n                        ) {\n                            hasValue = true;\n                        }\n                    }\n                    if (hasValue) {\n                        resolve(true)\n                    } else {\n                        alert(this.lang.pleaseCompleteFirstLine);\n                        reject(false);\n                    }\n                } else {\n                    resolve(true);\n                }\n            });\n        },\n        addSubForm() {\n            let clonedForm = _.cloneDeep(this.form);\n            let clonedFormModel = {};\n            clonedForm.schema.forEach(item => {\n                if (\n                    clonedForm.identity == item.model ||\n                    item.formType == null\n                ) {\n                    return;\n                }\n\n                if (\n                    clonedForm.timestamp &&\n                    (item.model == \"created_at\" || item.model == \"updated_at\")\n                ) {\n                    return;\n                }\n\n                Vue.set(clonedFormModel, item.model, item.default);\n            });\n\n            let listItem = {\n                form: clonedForm,\n                model: clonedFormModel\n            };\n\n\n            if (this.model.form[this.model.component] == undefined) {\n                this.model.form[this.model.component] = [];\n            }\n            this.model.form[this.model.component].push(clonedFormModel);\n            this.listData.push(listItem);\n        },\n        add() {\n            this.editIndex = -1;\n            this.showAddModal()\n        },\n        fillData() {\n            this.listData = [];\n\n            setTimeout(() => {\n\n                this.model.form[this.model.component].forEach(item => {\n                    let listItem = {\n                        form: _.cloneDeep(this.form),\n                        model: item\n                    };\n                    this.listData.push(listItem);\n                });\n\n                // console.log(this.model.form[this.model.component]);\n\n            }, 100);\n        },\n        equationRenderer() {\n            this.equationData = [];\n            this.form.schema.map(item => {\n                if (item.label != '' && !item.hidden) {\n                    if (item.hasEquation) this.hasEq = true;\n                    this.equationData.push({\n                        hasEquation: item.hasEquation,\n                        equation: item.equations,\n                        prefix: item.prefix,\n                        model: item.model,\n                        preStaticWord: item.preStaticWord,\n                        data: 0\n                    });\n                }\n            });\n        },\n        edit(index) {\n            this.model.form[this.form.model][index];\n\n            this.editIndex = index;\n            this.showAddModal();\n\n        },\n        remove(index) {\n            this.model.form[this.form.model].splice(index, 1);\n            this.listData.splice(index, 1);\n        },\n\n        reset() {\n            this.model.form[this.form.model] = [];\n            this.listData = [];\n        },\n\n        sort(item) {\n            let sortStatus = 1;\n            this.currentSortDir = this.currentSortDir === 'asc' ? 'desc' : 'asc';\n            this.currentSort = this.currentSortDir === 'desc' ? -1 : 1;\n            this.currentSort = item.model;\n            this.listData.sort((a, b) => {\n                if (this.currentSortDir === 'desc') sortStatus = -1;\n                if (a.model[this.currentSort] < b.model[this.currentSort]) return -1 * sortStatus;\n                if (a.model[this.currentSort] > b.model[this.currentSort]) return 1 * sortStatus;\n                return 0;\n            });\n        }\n    }\n};\n</script>\n","import mod from \"-!../../../../../starter-apps/lambda-go/node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../../starter-apps/lambda-go/node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../starter-apps/lambda-go/node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../../starter-apps/lambda-go/node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Form.vue?vue&type=template&id=2eb16f6b&\"\nimport script from \"./Form.vue?vue&type=script&lang=js&\"\nexport * from \"./Form.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../starter-apps/lambda-go/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tr',[(_vm.f.showRowNumber)?_c('td',{staticClass:\"row-number\"},[_vm._t(\"rowNumber\")],2):_vm._e(),_vm._v(\" \"),_vm._l((_vm.f.schema),function(item){return (typeof item.formType !== 'undefined' && item.formType !== null && item.model && !item.hidden && item.model!=_vm.f.identity && item.model!=_vm.f.parent && item.model!='updated_at'&& item.model!='created_at')?_c('td',{key:item.index},[(_vm.model)?_c(_vm.element(item.formType),{tag:\"component\",attrs:{\"model\":{form: _vm.model, component: item.model},\"size\":\"small\",\"label\":item.label ? item.label : (\"[\" + (item.model) + \"]\"),\"meta\":_vm.setMeta(item),\"getSchemaRelationByModel\":_vm.getSchemaRelationByModel,\"relation_data\":_vm.getRelation(item)}}):_vm._e()],1):_vm._e()}),_vm._v(\" \"),_c('td',{staticClass:\"action\"},[_vm._t(\"action\")],2)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <tr>\n        <td class=\"row-number\" v-if=\"f.showRowNumber\">\n            <slot name=\"rowNumber\"></slot>\n        </td>\n        <td v-for=\"item in f.schema\"\n            v-if=\"typeof item.formType !== 'undefined' && item.formType !== null && item.model && !item.hidden && item.model!=f.identity && item.model!=f.parent && item.model!='updated_at'&& item.model!='created_at'\"\n            :key=\"item.index\">\n            <!--{{item.hidden}}-->\n            <!--{{item.model}}-->\n            <component :is=\"element(item.formType)\"\n                       :model=\"{form: model, component: item.model}\"\n                       v-if=\"model\"\n                       size=\"small\"\n                       :label=\"item.label ? item.label : `[${item.model}]`\"\n                       :meta=\"setMeta(item)\"\n                       :getSchemaRelationByModel=\"getSchemaRelationByModel\"\n                       :relation_data=\"getRelation(item)\">\n            </component>\n        </td>\n        <td class=\"action\" >\n            <slot name=\"action\"></slot>\n        </td>\n    </tr>\n</template>\n\n<script>\n    import {element} from \"../index\";\n    import {getRule} from \"../../rule\";\n    import {doFormula, doTrigger} from \"../../utils/formula_and_trigger.js\";\n    import {getRelationData} from \"../../utils/helpers\";\n\n    export default {\n        props: [\"f\", \"model\", \"editMode\", \"relations\", \"formula\"],\n        created() {\n\n            this.f.data = {};\n            this.f.schema.forEach(item => {\n\n                if (this.f.identity == item.model || item.formType == null) {\n                    return;\n                }\n                if (\n                    this.f.timestamp &&\n                    (item.model == \"created_at\" || item.model == \"updated_at\")\n                ) {\n                    return;\n                }\n                if (this.editMode) {\n                    this.setModel(item.model, this.model[item.model], item.formType);\n                } else {\n                    this.setModel(item.model, item.default, item.formType);\n                }\n\n                this.$watch(\"model.\" + item.model, {\n                    handler: (value, oldValue) => {\n                        this.afterChange(item.model, value, oldValue);\n                    },\n                    deep: true\n                });\n            });\n        },\n\n        methods: {\n            element: element,\n            setModel(name, value, type) {\n                switch (type) {\n                    case \"Switch\":\n                        let val = false;\n                        if (value == \"true\" || value == 1) {\n                            val = true;\n                        }\n                        this.model[name] = val_;\n                        this.f.data[name] = val_;\n                        break;\n                    case \"Checkbox\":\n                        let val_ = 0;\n                        if (value == \"true\" || value == 1) {\n                            val_ = 1;\n                        }\n                        this.model[name] = val_;\n                        this.f.data[name] = val_;\n                        break;\n\n                    default:\n                        this.f.data[name] = value;\n                }\n            },\n\n            setMeta(item) {\n                delete item[\"table\"];\n                delete item[\"rules\"];\n                delete item[\"label\"];\n                delete item[\"span\"];\n                delete item[\"default\"];\n                // item.schemaId = this.$route.params.id;\n                // if (this.$route.params.form) {\n                //     console.log(this.$route.params.form)\n                //     item.schemaID = this.$route.params.form;\n                // }\n                // else {\n                //     console.log(this.$route.params.id)\n                //     item.schemaID = this.$route.params.id;\n                // }\n                return item;\n            },\n\n            getSchemaIndex(model) {\n                return this.f.schema.findIndex(item => item.model == model);\n            },\n\n            afterChange(model, val, oldValue) {\n                doTrigger(model, val, this.model, this.f.schema, this.$refs, this.$Notice);\n                doFormula(this.formula, model, this.model, this.f.schema, this.f.rule, this.f.model);\n            },\n\n            getSchemaRelationByModel(model) {\n                let index = this.f.schema.findIndex(item => item.model == model);\n                if (index >= 0)\n                    return getRelationData(this.f.schema[index], this.relations)\n                else\n                    return null\n            },\n            getRelation(item) {\n                return getRelationData(item, this.relations)\n            }\n        }\n    };\n</script>\n\n","import mod from \"-!../../../../../starter-apps/lambda-go/node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../../starter-apps/lambda-go/node_modules/vue-loader/lib/index.js??vue-loader-options!./GridForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../starter-apps/lambda-go/node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../../starter-apps/lambda-go/node_modules/vue-loader/lib/index.js??vue-loader-options!./GridForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GridForm.vue?vue&type=template&id=20f26b62&\"\nimport script from \"./GridForm.vue?vue&type=script&lang=js&\"\nexport * from \"./GridForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../starter-apps/lambda-go/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["_vm","this","_h","$createElement","_c","_self","staticClass","style","form","min_height","disableCreate","_e","_v","_s","name","attrs","on","add","listData","length","_l","item","label","hidden","key","index","$event","sort","model","editMode","relations","formula","slot","edit","disableDelete","remove","preStaticWord","data","toLocaleString","prefix","lang","save","closeModal","ref","formId","modal_show","editIndex","onSuccess","formReady","onError","f","_t","formType","identity","parent","element","tag","component","setMeta","getSchemaRelationByModel","getRelation"],"sourceRoot":""}