{"version":3,"file":"assets/lambda/js/chunks/form-field-Image.d3c09ff41ac7395c.js","mappings":"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","sources":["webpack:///../../lambda-builder/src/modules/dataform/elements/Image.vue","webpack:///../../lambda-builder/src/modules/dataform/elements/Image.vue?8d6c","webpack:///../../lambda-builder/src/modules/dataform/elements/Image.vue?2a65","webpack:///../../lambda-builder/src/modules/dataform/elements/Image.vue?5539"],"sourcesContent":["<template>\n    <FormItem :prop=rule>\n        <div class=\"multi-upload\" v-if=\"meta.file && meta.file.isMultiple == true\">\n            <label>{{ label }}</label>\n\n            <div class=\"multi-upload-list\">\n                <div class=\"upload-list\" v-for=\"item in uploadList\" :key=\"item.index\">\n                    <template v-if=\"item.status == 'finished'\">\n                        <img v-if=\"item.response\" :src=\"`${url ? url : ''}${item.response}`\" @click=\"handleView(item.response)\">\n                        <div class=\"upload-control\" @click=\"handleRemove(item)\"\n                             v-show=\"meta && meta.disabled ? false : true\">{{ lang._delete }}\n                        </div>\n                    </template>\n\n                    <template v-else>\n                        <Progress v-if=\"item.showProgress\" :percent=\"item.percentage\" hide-info></Progress>\n                    </template>\n                </div>\n\n                <Upload\n                    ref=\"upload\"\n                    multiple\n                    :with-credentials=\"true\"\n                    :action=\"`${url ? url : ''}/lambda/krud/upload`\"\n                    :show-upload-list=\"false\"\n                    :default-file-list=\"defaultList\"\n                    :on-success=\"success\"\n                    :before-upload=\"beforeUpload\"\n                    :disabled=\"meta && meta.disabled ? meta.disabled : false\"\n                >\n                    <div class=\"upload-handler\">\n                        <i class=\"ti ti-camera\"></i>\n                    </div>\n                </Upload>\n            </div>\n        </div>\n\n        <Upload\n            ref=\"upload\"\n            v-else\n            :with-credentials=\"true\"\n            v-model=\"model.form[model.component]\"\n            :action=\"`${url ? url : ''}/lambda/krud/upload`\"\n            :on-success=\"success\"\n            :disabled=\"meta && meta.disabled ? meta.disabled : false\">\n            <Button type=\"dashed\">\n                <img class=\"preview-img\" v-if=\"this.model.form[this.model.component] != null\"\n\n                     :src=\"`${url ? url : ''}${model.form[model.component]}`\"\n                     alt=\"image\">\n                <div>\n                    <i class=\"ti ti-camera\"></i>\n                    {{ label }}\n                </div>\n            </Button>\n        </Upload>\n\n        <Modal :title=\"lang.viewPhotos\" v-model=\"showImage\" width=\"1000px\">\n            <img\n\n                 :src=\"`${url ? url : ''}${showImageUrl}`\"\n                 v-if=\"showImage\" style=\"width: 100%\">\n        </Modal>\n    </FormItem>\n</template>\n\n<script>\n\nexport default {\n    props: [\"model\", \"label\", \"rule\", \"meta\", \"do_render\", \"url\"],\n    computed: {\n        lang() {\n            const labels = ['viewPhotos', '_delete'\n            ];\n            return labels.reduce((obj, key, i) => {\n                obj[key] = this.$t('dataForm.' + labels[i]);\n                return obj;\n            }, {});\n        },\n    },\n    mounted() {\n        this.uploadList = typeof this.$refs.upload.fileList != 'undefined' ? this.$refs.upload.fileList : [];\n    },\n    data() {\n        return {\n            defaultList: [],\n            uploadList: [],\n            showImage: false,\n            showImageUrl: ''\n        }\n    },\n\n    watch: {\n        'model.form'(val) {\n\n            let itemModel = val[this.model.component];\n            if (typeof this.meta.file.isMultiple !== 'undefined' && this.meta.file.isMultiple) {\n                if (typeof itemModel == 'string' && typeof itemModel != 'undefined' && itemModel != null) {\n\n                    let list = JSON.parse(this.model.form[this.model.component]);\n\n                    if (Array.isArray(list)) {\n                        this.defaultList = list.map(item => {\n                            return {\n                                status: 'finished',\n                                response: item.response,\n                                name: item.name\n                            }\n                        });\n\n                        this.$nextTick(() => {\n                            this.uploadList = this.$refs.upload.fileList;\n                        })\n                    }\n                } else {\n                    this.$refs.upload.fileList = [];\n                    this.uploadList = [];\n                    this.model.form[this.model.component] = null;\n                }\n            }\n        },\n        do_render(value) {\n            if (!value) {\n\n                this.$refs.upload.fileList = [];\n            }\n        }\n\n    },\n\n    methods: {\n\n        handleView(imageUrl) {\n            this.showImage = true;\n            this.showImageUrl = imageUrl;\n        },\n\n        success(val) {\n\n            if (this.meta.file.isMultiple) {\n                this.uploadList = this.$refs.upload.fileList;\n                this.model.form[this.model.component] = JSON.stringify(this.uploadList.map(item => {\n                    return {\n                        name: item.name,\n                        response: item.response\n                    }\n                }));\n            } else {\n                this.model.form[this.model.component] = val;\n            }\n        },\n\n        handleRemove(file) {\n            const fileList = this.$refs.upload.fileList;\n            this.$refs.upload.fileList.splice(fileList.indexOf(file), 1);\n            this.uploadList = this.$refs.upload.fileList;\n            this.model.form[this.model.component] = this.uploadList.map(item => {\n                return {\n                    name: item.name,\n                    response: item.response\n                }\n            })\n        },\n\n        beforeUpload() {\n            // const check = this.uploadList.length < 5;\n            // if (!check) {\n            //     this.$Notice.warning({\n            //         title: 'Up to five pictures can be uploaded.'\n            //     });\n            // }\n            // return check;\n        }\n    }\n};\n</script>\n","import mod from \"-!../../../../../starter-apps/go/node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../../starter-apps/go/node_modules/vue-loader/lib/index.js??vue-loader-options!./Image.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../starter-apps/go/node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../../starter-apps/go/node_modules/vue-loader/lib/index.js??vue-loader-options!./Image.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Image.vue?vue&type=template&id=24b99456&\"\nimport script from \"./Image.vue?vue&type=script&lang=js&\"\nexport * from \"./Image.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../starter-apps/go/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('FormItem',{attrs:{\"prop\":_vm.rule}},[(_vm.meta.file && _vm.meta.file.isMultiple == true)?_c('div',{staticClass:\"multi-upload\"},[_c('label',[_vm._v(_vm._s(_vm.label))]),_vm._v(\" \"),_c('div',{staticClass:\"multi-upload-list\"},[_vm._l((_vm.uploadList),function(item){return _c('div',{key:item.index,staticClass:\"upload-list\"},[(item.status == 'finished')?[(item.response)?_c('img',{attrs:{\"src\":(\"\" + (_vm.url ? _vm.url : '') + (item.response))},on:{\"click\":function($event){return _vm.handleView(item.response)}}}):_vm._e(),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.meta && _vm.meta.disabled ? false : true),expression:\"meta && meta.disabled ? false : true\"}],staticClass:\"upload-control\",on:{\"click\":function($event){return _vm.handleRemove(item)}}},[_vm._v(_vm._s(_vm.lang._delete)+\"\\n                    \")])]:[(item.showProgress)?_c('Progress',{attrs:{\"percent\":item.percentage,\"hide-info\":\"\"}}):_vm._e()]],2)}),_vm._v(\" \"),_c('Upload',{ref:\"upload\",attrs:{\"multiple\":\"\",\"with-credentials\":true,\"action\":((_vm.url ? _vm.url : '') + \"/lambda/krud/upload\"),\"show-upload-list\":false,\"default-file-list\":_vm.defaultList,\"on-success\":_vm.success,\"before-upload\":_vm.beforeUpload,\"disabled\":_vm.meta && _vm.meta.disabled ? _vm.meta.disabled : false}},[_c('div',{staticClass:\"upload-handler\"},[_c('i',{staticClass:\"ti ti-camera\"})])])],2)]):_c('Upload',{ref:\"upload\",attrs:{\"with-credentials\":true,\"action\":((_vm.url ? _vm.url : '') + \"/lambda/krud/upload\"),\"on-success\":_vm.success,\"disabled\":_vm.meta && _vm.meta.disabled ? _vm.meta.disabled : false},model:{value:(_vm.model.form[_vm.model.component]),callback:function ($$v) {_vm.$set(_vm.model.form, _vm.model.component, $$v)},expression:\"model.form[model.component]\"}},[_c('Button',{attrs:{\"type\":\"dashed\"}},[(this.model.form[this.model.component] != null)?_c('img',{staticClass:\"preview-img\",attrs:{\"src\":(\"\" + (_vm.url ? _vm.url : '') + (_vm.model.form[_vm.model.component])),\"alt\":\"image\"}}):_vm._e(),_vm._v(\" \"),_c('div',[_c('i',{staticClass:\"ti ti-camera\"}),_vm._v(\"\\n                \"+_vm._s(_vm.label)+\"\\n            \")])])],1),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":_vm.lang.viewPhotos,\"width\":\"1000px\"},model:{value:(_vm.showImage),callback:function ($$v) {_vm.showImage=$$v},expression:\"showImage\"}},[(_vm.showImage)?_c('img',{staticStyle:{\"width\":\"100%\"},attrs:{\"src\":(\"\" + (_vm.url ? _vm.url : '') + _vm.showImageUrl)}}):_vm._e()])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"names":["_vm","this","_h","$createElement","_c","_self","attrs","rule","meta","file","isMultiple","staticClass","_v","_s","label","_l","item","key","index","status","url","on","$event","handleView","response","_e","directives","name","rawName","value","disabled","expression","handleRemove","lang","_delete","percentage","ref","defaultList","success","beforeUpload","model","form","component","callback","$$v","$set","viewPhotos","showImage","staticStyle","showImageUrl"],"sourceRoot":""}