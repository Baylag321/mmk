{"version":3,"file":"assets/lambda/js/chunks/form-field-GridSelector.9d7cb101522d1314.js","mappings":"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","sources":["webpack:///../../vue/dataform/src/elements/GridSelector.vue","webpack:///../../vue/dataform/src/elements/GridSelector.vue?9089","webpack:///../../vue/dataform/src/elements/GridSelector.vue?e876","webpack:///../../vue/dataform/src/elements/GridSelector.vue?5f0b"],"sourcesContent":["<template>\n    <div class=\"subform-grid\">\n        <FormItem :label=label :prop=rule>\n            <div class=\"subform-header\" >\n                {{ meta.GSOption.sourceGridModalTitle }}\n\n            </div>\n            <table border=\"1\" >\n                <thead>\n                <tr>\n\n                    <th v-for=\"item in meta.GSOption.sourceGridTargetColumns\"\n                        :key=\"item.index\">\n                        {{ item.label }}\n                    </th>\n                    <th class=\"action\">...</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr>\n\n                    <td v-for=\"item in meta.GSOption.sourceGridTargetColumns\"\n                        :key=\"item.index\">\n                        {{selectedRow[item.model]}}\n                    </td>\n                    <td class=\"action\">\n                        <a href=\"javascript:void(0);\" @click=\"showAddSourceModal\" v-if=\"!meta.disabled\">\n                            <Icon type=\"md-search\" />\n                        </a>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n        </FormItem>\n\n        <paper-modal\n            :name=\"`grid-modal-${meta.GSOption.sourceGridID}`\"\n            class=\"form-modal\"\n            :min-width=\"200\"\n            :min-height=\"100\"\n            :pivot-y=\"0.5\"\n            :adaptive=\"true\"\n            :reset=\"true\"\n            :draggable=\"true\"\n            :resizable=\"true\"\n            draggable=\".form-tool\"\n            width=\"800\"\n            height=\"70%\"\n        >\n            <section class=\"form-modal source-grid\">\n                <div class=\"form-tool \">\n\n                    <h4>{{ meta.GSOption.sourceGridModalTitle }}</h4>\n                    <div class=\"form-tool-actions\">\n                        <a href=\"javascript:void(0)\" @click=\"closeSourceModal\">\n                            <i class=\"ti-close\"></i>\n                        </a>\n                    </div>\n                </div>\n\n                <div class=\"form-body\" v-if=\"modal_grid_show\">\n\n                    <div v-if=\"meta.GSOption.sourceGridTitle && meta.GSOption.sourceGridDescription\" class=\"source-grid-description\">\n                        <h3>\n                            {{meta.GSOption.sourceGridTitle}}\n                        </h3>\n                        <p v-html=\"meta.GSOption.sourceGridDescription\">\n\n                        </p>\n                    </div>\n                    <datagrid\n                        :schemaID=\"meta.GSOption.sourceGridID\"\n                        :url=\"sourceGridUrl()\"\n                        :onRowSelect=\"onRowSelect\"\n                        :paginate=\"50\"\n                        :hasSelection=\"true\"\n                        :gridSelector=\"true\"\n                        :user_condition=\"user_condition\"\n                        :permissions=\"{\n                          c:false,\n                          r:true,\n                          u:false,\n                          d:false,\n                      }\"\n                    />\n                    <div class=\"add-from-pre-source\">\n                        <Button shape=\"circle\" type=\"success\" size=\"small\" @click=\"addFromPreSource\" :disabled=\"preSource.length == 0\" icon=\"md-add\"\n                                class=\"sub-form-add-btn\">Сонгох</Button>\n                    </div>\n                </div>\n            </section>\n        </paper-modal>\n    </div>\n</template>\n\n<script>\n\nexport default {\n    props: [\"model\", \"rule\", \"label\", \"meta\"],\n    data() {\n        return {\n            preSource:[],\n            modal_grid_show: false,\n            user_condition:null,\n            selectedRow:{}\n        };\n    },\n\n    computed: {\n        value() {\n            return this.model.form[this.model.component];\n\n\n        },\n    },\n\n    watch: {\n        value(value, oldValue){\n            if(this.value === null || this.value === 0 || this.value === \"\"){\n                this.selectedRow = {}\n            }\n            if (value && !oldValue){\n                if(Object.keys(this.selectedRow).length ==0){\n                  this.callRowData();\n                }\n\n            }\n        }\n    },\n\n    mounted() {\n        if(this.meta.GSOption.sourceGridUserCondition !== undefined && this.meta.GSOption.sourceGridUserCondition !== null && this.meta.GSOption.sourceGridUserCondition != \"\"){\n            this.user_condition = JSON.parse(this.meta.GSOption.sourceGridUserCondition)\n        }\n    },\n\n    methods: {\n        callRowData(){\n\n            let filter = {}\n\n            filter[this.meta.GSOption.sourceGridValueField] = this.value;\n\n            axios.post(`${this.sourceGridUrl()}/lambda/puzzle/grid/data/${this.meta.GSOption.sourceGridID}?&paginate=1&page=1&sort=id&order=desc`, filter).then(({data})=>{\n\n               if(data.data.length >= 1){\n                   this.selectedRow = data.data[0];\n               }\n\n            })\n        },\n        onRowSelect(rows){\n            this.preSource = rows;\n        },\n        sourceGridUrl(){\n\n            if(window.init.microserviceSettings) {\n                let si = window.init.microserviceSettings.findIndex(set=>set.project_id == this.meta.GSOption.sourceMicroserviceID);\n\n                if(si >= 0){\n                    return  window.init.microserviceSettings[si].production_url;\n                } else {\n                    return \"\"\n                }\n            } else {\n                return \"\"\n            }\n        },\n        showAddSourceModal() {\n            this.modal_grid_show = true;\n            this.$modal.show(`grid-modal-${this.meta.GSOption.sourceGridID}`);\n        },\n        closeSourceModal() {\n            this.modal_grid_show = false;\n            this.$modal.hide(`grid-modal-${this.meta.GSOption.sourceGridID}`);\n        },\n        addFromPreSource(){\n            this.selectedRow = {}\n            if(this.preSource && this.meta.GSOption.sourceGridTargetColumns){\n                if(this.preSource.length >= 1){\n                    this.selectedRow = this.preSource[0];\n\n                    this.model.form[this.model.component] = this.selectedRow[this.meta.GSOption.sourceGridValueField]\n                }\n\n            }\n            this.closeSourceModal();\n\n        },\n\n    }\n};\n</script>\n\n\n","import mod from \"-!../../../../starter-apps/starter-go/node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../starter-apps/starter-go/node_modules/vue-loader/lib/index.js??vue-loader-options!./GridSelector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../starter-apps/starter-go/node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../starter-apps/starter-go/node_modules/vue-loader/lib/index.js??vue-loader-options!./GridSelector.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GridSelector.vue?vue&type=template&id=67a8218a&\"\nimport script from \"./GridSelector.vue?vue&type=script&lang=js&\"\nexport * from \"./GridSelector.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../starter-apps/starter-go/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"subform-grid\"},[_c('FormItem',{attrs:{\"label\":_vm.label,\"prop\":_vm.rule}},[_c('div',{staticClass:\"subform-header\"},[_vm._v(\"\\n            \"+_vm._s(_vm.meta.GSOption.sourceGridModalTitle)+\"\\n\\n        \")]),_vm._v(\" \"),_c('table',{attrs:{\"border\":\"1\"}},[_c('thead',[_c('tr',[_vm._l((_vm.meta.GSOption.sourceGridTargetColumns),function(item){return _c('th',{key:item.index},[_vm._v(\"\\n                    \"+_vm._s(item.label)+\"\\n                \")])}),_vm._v(\" \"),_c('th',{staticClass:\"action\"},[_vm._v(\"...\")])],2)]),_vm._v(\" \"),_c('tbody',[_c('tr',[_vm._l((_vm.meta.GSOption.sourceGridTargetColumns),function(item){return _c('td',{key:item.index},[_vm._v(\"\\n                    \"+_vm._s(_vm.selectedRow[item.model])+\"\\n                \")])}),_vm._v(\" \"),_c('td',{staticClass:\"action\"},[(!_vm.meta.disabled)?_c('a',{attrs:{\"href\":\"javascript:void(0);\"},on:{\"click\":_vm.showAddSourceModal}},[_c('Icon',{attrs:{\"type\":\"md-search\"}})],1):_vm._e()])],2)])])]),_vm._v(\" \"),_c('paper-modal',{staticClass:\"form-modal\",attrs:{\"name\":(\"grid-modal-\" + (_vm.meta.GSOption.sourceGridID)),\"min-width\":200,\"min-height\":100,\"pivot-y\":0.5,\"adaptive\":true,\"reset\":true,\"draggable\":true,\"resizable\":true,\"draggable\":\".form-tool\",\"width\":\"800\",\"height\":\"70%\"}},[_c('section',{staticClass:\"form-modal source-grid\"},[_c('div',{staticClass:\"form-tool \"},[_c('h4',[_vm._v(_vm._s(_vm.meta.GSOption.sourceGridModalTitle))]),_vm._v(\" \"),_c('div',{staticClass:\"form-tool-actions\"},[_c('a',{attrs:{\"href\":\"javascript:void(0)\"},on:{\"click\":_vm.closeSourceModal}},[_c('i',{staticClass:\"ti-close\"})])])]),_vm._v(\" \"),(_vm.modal_grid_show)?_c('div',{staticClass:\"form-body\"},[(_vm.meta.GSOption.sourceGridTitle && _vm.meta.GSOption.sourceGridDescription)?_c('div',{staticClass:\"source-grid-description\"},[_c('h3',[_vm._v(\"\\n                        \"+_vm._s(_vm.meta.GSOption.sourceGridTitle)+\"\\n                    \")]),_vm._v(\" \"),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.meta.GSOption.sourceGridDescription)}})]):_vm._e(),_vm._v(\" \"),_c('datagrid',{attrs:{\"schemaID\":_vm.meta.GSOption.sourceGridID,\"url\":_vm.sourceGridUrl(),\"onRowSelect\":_vm.onRowSelect,\"paginate\":50,\"hasSelection\":true,\"gridSelector\":true,\"user_condition\":_vm.user_condition,\"permissions\":{\n                      c:false,\n                      r:true,\n                      u:false,\n                      d:false,\n                  }}}),_vm._v(\" \"),_c('div',{staticClass:\"add-from-pre-source\"},[_c('Button',{staticClass:\"sub-form-add-btn\",attrs:{\"shape\":\"circle\",\"type\":\"success\",\"size\":\"small\",\"disabled\":_vm.preSource.length == 0,\"icon\":\"md-add\"},on:{\"click\":_vm.addFromPreSource}},[_vm._v(\"Сонгох\")])],1)],1):_vm._e()])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"names":["_vm","this","_h","$createElement","_c","_self","staticClass","attrs","label","rule","_v","_s","meta","GSOption","sourceGridModalTitle","_l","item","key","index","selectedRow","model","disabled","_e","on","showAddSourceModal","closeSourceModal","sourceGridTitle","sourceGridDescription","domProps","sourceGridID","sourceGridUrl","onRowSelect","user_condition","c","r","u","d","preSource","length","addFromPreSource"],"sourceRoot":""}