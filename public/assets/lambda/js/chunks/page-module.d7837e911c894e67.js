"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5179],{46572:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const s={name:"settings.vue",props:["menuId"],data:()=>({title:"",menu:[],cruds:window.init.cruds,property:{template:"canvas",mode:window.init.crud_mode?window.init.crud_mode:void 0,title:"",projects_id:null,grid:null,form:null,view_url:null,actions:[],user_condition:null,permissions:{c:!1,r:!1,u:!1,d:!1,gridDeleteConditionJS:"",gridEditConditionJS:""}}}),created(){this.getMenu()},methods:{getMenu(){axios.get(`/lambda/krud/menu_form/edit/${this.menuId}`).then((({data:t})=>{this.menu=JSON.parse(t.data.schema),console.log(this.menu),this.title=t.data.name}))},getCrud(t){if(this.cruds){let e=this.cruds.findIndex((e=>e.id==t));if(e>=0){this.property.title=this.cruds[e].title,this.property.projects_id=this.cruds[e].projects_id,this.property.grid=this.cruds[e].grid,this.property.form=this.cruds[e].form,this.property.template=this.cruds[e].template,this.property.main_tab_title=this.cruds[e].main_tab_title,this.property.form_width=this.cruds[e].form_width?this.cruds[e].form_width:null,this.property.view_url=this.cruds[e].view_url,this.property.permissions.c=!0,this.property.permissions.r=!0,this.property.permissions.u=!0,this.property.permissions.d=!1;let t={};t&&(this.property.user_condition=t),this.$modal.show("crud-modal")}}else axios.get(`/api/krud/${t}`).then((({data:t})=>{this.property.grid=t.grid,this.property.form=t.form,this.$modal.show("crud-modal")}))},showCrud(){this.$modal.show("crud-modal")},getTitle(t){if("crud"==t.link_to){let e=this.cruds.findIndex((e=>e.id==t.url));return e>=0?this.cruds[e].title:""}return t.title}}};var i=r(51900);const o={components:{Settings:(0,i.Z)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"settings-module"},[t._l(t.menu,(function(e){return r("div",{key:e.id,staticClass:"module"},[r("h2",[t._v(t._s(e.title))]),t._v(" "),r("div",{staticClass:"sub-module"},t._l(e.children,(function(e){return r("div",{staticClass:"sub-module-item"},["crud"==e.link_to?r("a",{attrs:{href:"javascript:void(0)"},on:{click:function(r){return t.getCrud(e.url)}}},[r("i",{class:e.icon}),t._v(" "),r("span",{domProps:{innerHTML:t._s(t.getTitle(e))}})]):r("a",{attrs:{href:"#"}},[r("i",{class:e.icon}),t._v(" "),r("span",{domProps:{innerHTML:t._s(t.getTitle(e))}})])])})),0)])})),t._v(" "),r("paper-modal",{staticClass:"page-modal",attrs:{name:"crud-modal","min-width":200,"min-height":200,"pivot-y":.5,adaptive:!0,reset:!0,resizable:!0,width:"90%",height:"90%"}},[r("krud",{staticClass:"material",attrs:{template:t.property.template,property:t.property}})],1)],2)}),[],!1,null,null,null).exports},computed:{withoutHeader:()=>!0===window.init.withoutHeader}};const n=(0,i.Z)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",["agent"==t.$route.params.module?r("agent",[r("user-control",{attrs:{slot:"user-control"},slot:"user-control"})],1):t._e(),t._v(" "),"profile"==t.$route.params.module?r("agent-form",{attrs:{type:"profile",withoutHeader:t.withoutHeader}},[r("user-control",{attrs:{slot:"user-control"},slot:"user-control"})],1):t._e(),t._v(" "),"password"==t.$route.params.module?r("agent-form",{attrs:{type:"password",withoutHeader:t.withoutHeader}},[r("user-control",{attrs:{slot:"user-control"},slot:"user-control"})],1):t._e(),t._v(" "),"notify"==t.$route.params.module?r("notif-list"):t._e(),t._v(" "),"logger"==t.$route.params.module?r("logger"):t._e(),t._v(" "),"settings"==t.$route.params.module?r("settings",{attrs:{"menu-id":t.$route.query.id}}):t._e()],1)}),[],!1,null,null,null).exports},51900:(t,e,r)=>{function s(t,e,r,s,i,o,n,d){var a,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=r,l._compiled=!0),s&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),n?(a=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},l._ssrRegister=a):i&&(a=d?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),a)if(l.functional){l._injectStyles=a;var u=l.render;l.render=function(t,e){return a.call(e),u(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,a):[a]}return{exports:t,options:l}}r.d(e,{Z:()=>s})}}]);
//# sourceMappingURL=page-module.d7837e911c894e67.js.map