"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1691],{90562:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var i=a(20629);function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const n={props:["title","type","src","preview","prefix"],computed:s(s({},(0,i.Se)({user:"user"})),{},{lang:function(){var e=this,t=["add","pleaseEnterSearchValue","pleaseWait","deleteData","yes","no","name","copy","table","basicTable","selectTable"];return t.reduce((function(a,i,l){return a[i]=e.$t("components."+t[l]),a}),{})},_form:function(){var e=this,t=["savedSuccessfull","formIformationSavedSuccessfull","successDeleted"];return t.reduce((function(a,i,l){return a[i]=e.$t("alertMessage."+t[l]),a}),{})}}),data:function(){return{duplicateModal:!1,loading:!0,listData:[],filteredList:[],duplicateData:{schema:{},name:null,id:null},tableList:window.init.dbSchema.tableList,viewList:window.init.dbSchema.viewList}},created:function(){this.getData()},methods:{getData:function(){var e=this;axios.get(this.$props.src).then((function(t){var a=t.data;e.loading=!1,e.filteredList=e.listData=a.data}))},doDuplicate:function(){var e=this,t="/lambda/puzzle/schema/form";"grid"==this.type&&(t="/lambda/puzzle/schema/grid",this.duplicateData.schema.schema.forEach((function(t){t.table=e.duplicateData.schema.model})));var a={name:this.duplicateData.name,schema:JSON.stringify(this.duplicateData.schema)};axios.post(t,a).then((function(t){t.data.status?(e.$Notice.success({title:"".concat(e._form.savedSuccessfull),desc:'"'.concat(e.formName,'" ').concat(e._form.formIformationSavedSuccessfull)}),e.duplicateModal=!1,e.duplicateData={schema:{},name:null,id:null},e.getData()):e.$Notice.error({title:"".concat(e._form.errorSaving)})}))},duplicate:function(e,t){var a=this,i="/lambda/puzzle/schema/form/".concat(e,"/builder");"grid"==this.type&&(i="/lambda/puzzle/schema/grid/".concat(e)),axios.get(i).then((function(t){var i=t.data;a.duplicateData.name=i.data.hasOwnProperty("name")?i.data.name:i.data.model,a.duplicateData.schema=JSON.parse(i.data.schema),a.duplicateData.id=e,a.duplicateModal=!0})).catch((function(e){console.log(e)}))},deleteListItem:function(e){var t=this;axios.delete("/lambda/puzzle/delete/vb_schemas/".concat(this.type,"/").concat(e)).then((function(a){t.filteredList=t.filteredList.filter((function(t){return t.id!==e})),t.listData=t.listData.filter((function(t){return t.id!==e})),t.$Message.success("".concat(t._form.successDeleted))}))},cancel:function(){},filterList:function(e){var t=this,a=e.target.value;t.filteredList=""!=a?t.listData.filter((function(e){return e.name.toString().toLowerCase().indexOf(a.toLowerCase())>=0})):t.listData}}};var c=a(51900);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){u(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const p={components:{"list-view":(0,c.Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"page page-list"},[a("div",{staticClass:"page-list-header"},[a("h3",[e._v(e._s(e.title)+" ("+e._s(e.listData.length)+")")]),e._v(" "),a("div",{staticClass:"page-list-header-search"},[a("Input",{staticStyle:{width:"200px"},attrs:{icon:"ios-search",placeholder:e.lang.pleaseEnterSearchValue},on:{"on-keyup":e.filterList}})],1),e._v(" "),a("div",{staticClass:"page-list-header-control"},[a("router-link",{staticClass:"btn-del",attrs:{to:(e.prefix?e.prefix:"")+"/"+e.type+"/builder"}},[a("Button",{attrs:{type:"success"}},[a("Icon",{attrs:{type:"md-add"}}),e._v("\n                    "+e._s(e.lang.add)+"\n                ")],1)],1)],1)]),e._v(" "),e.loading?a("div",{staticClass:"loader"},[a("div",{staticClass:"loader-wrapper"},[e._m(0),e._v(" "),a("h3",[e._v(e._s(e.lang.pleaseWait))])])]):a("Row",{directives:[{name:"slimscroll",rawName:"v-slimscroll",value:{height:"100%-30",size:7,alwaysVisible:!0,wheelStep:7,color:"#2C3A47"},expression:"{height:'100%-30',size:7,alwaysVisible: true,wheelStep:7,color:'#2C3A47'}"}],staticClass:"pz-list",attrs:{gutter:16}},e._l(e.filteredList,(function(t){return a("Col",{key:t.index,attrs:{xs:24,sm:12,md:8,lg:6}},[a("div",{staticClass:"pz-list-item"},[a("div",{staticClass:"pz-list-item-body"},[a("h3",[e._v(e._s(t.name))]),e._v(" "),a("small",[e._v(e._s(t.created_at))])]),e._v(" "),a("div",{staticClass:"pz-list-item-control"},["hidden"!=e.preview?a("router-link",{staticClass:"btn-preview",attrs:{to:(e.prefix?e.prefix:"")+"/"+e.type+"/preview/"+t.id}},[a("Icon",{attrs:{type:"ios-eye"}})],1):e._e(),e._v("Â \n                    "),"form"==e.type||"grid"==e.type?a("a",{staticClass:"btn-preview",attrs:{href:"javascript:void(0);"},on:{click:function(a){return e.duplicate(t.id,e.type)}}},[a("Icon",{attrs:{type:"md-copy"}})],1):e._e(),e._v(" "),a("span",[a("router-link",{staticClass:"btn-edit",attrs:{to:(e.prefix?e.prefix:"")+"/"+e.type+"/builder/"+t.id}},[a("Icon",{attrs:{type:"md-create"}})],1),e._v(" "),a("Poptip",{attrs:{confirm:"",title:e.lang.deleteData,confirm:"",width:"180","ok-text":e.lang.yes,"cancel-text":e.lang.no},on:{"on-ok":function(a){return e.deleteListItem(t.id)},"on-cancel":e.cancel}},[a("a",{staticClass:"btn-del",attrs:{href:"javascript:void(0)"}},[a("Icon",{attrs:{type:"ios-trash"}})],1)])],1)],1)])])})),1),e._v(" "),a("Modal",{attrs:{title:e.lang.copy,"ok-text":e.lang.copy},on:{"on-ok":e.doDuplicate},model:{value:e.duplicateModal,callback:function(t){e.duplicateModal=t},expression:"duplicateModal"}},[a("label",[e._v(e._s(e.lang.name))]),e._v(" "),a("Input",{staticStyle:{width:"100%"},attrs:{placeholder:e.lang.name},model:{value:e.duplicateData.name,callback:function(t){e.$set(e.duplicateData,"name",t)},expression:"duplicateData.name"}}),e._v(" "),a("label",[e._v(e._s(e.lang.table)+" (DB table)")]),e._v(" "),"form"==e.type?a("Select",{staticStyle:{width:"100%"},attrs:{placeholder:e.lang.selectTable,clearable:"",filterable:""},model:{value:e.duplicateData.schema.model,callback:function(t){e.$set(e.duplicateData.schema,"model",t)},expression:"duplicateData.schema.model"}},e._l(e.tableList,(function(t){return a("Option",{key:t.index,attrs:{value:t}},[e._v(e._s(t))])})),1):e._e(),e._v(" "),"grid"==e.type?a("Select",{staticStyle:{width:"100%"},attrs:{placeholder:e.lang.selectTable,clearable:"",filterable:""},model:{value:e.duplicateData.schema.model,callback:function(t){e.$set(e.duplicateData.schema,"model",t)},expression:"duplicateData.schema.model"}},[a("OptionGroup",{attrs:{label:"Table list"}},e._l(e.tableList,(function(t){return a("Option",{key:t.index,attrs:{value:t}},[e._v(e._s(t))])})),1),e._v(" "),a("OptionGroup",{attrs:{label:"View list"}},e._l(e.viewList,(function(t){return a("Option",{key:t.index,attrs:{value:t}},[e._v(e._s(t))])})),1)],1):e._e(),e._v(" "),"grid"==e.type?a("label",[e._v(e._s(e.lang.basicTable)+" (DB table)")]):e._e(),e._v(" "),"grid"==e.type?a("Select",{staticStyle:{width:"100%"},attrs:{placeholder:e.lang.selectTable,clearable:"",filterable:""},model:{value:e.duplicateData.schema.mainTable,callback:function(t){e.$set(e.duplicateData.schema,"mainTable",t)},expression:"duplicateData.schema.mainTable"}},e._l(e.tableList,(function(t){return a("Option",{key:t.index,attrs:{value:t}},[e._v(e._s(t))])})),1):e._e()],1)],1)}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lds-roller"},[a("div"),e._v(" "),a("div"),e._v(" "),a("div"),e._v(" "),a("div"),e._v(" "),a("div"),e._v(" "),a("div"),e._v(" "),a("div"),e._v(" "),a("div")])}],!1,null,null,null).exports},computed:d(d({},(0,i.Se)({user:"user"})),{},{lang:function(){var e=this,t=["database","view"];return t.reduce((function(a,i,l){return a[i]=e.$t("dataSource."+t[l]),a}),{})}}),methods:{}};const f=(0,c.Z)(p,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("list-view",{attrs:{src:"/lambda/puzzle/schema/datasource",title:e.lang.database+" "+e.lang.view,type:"datasource",data:e.listData,preview:"hidden"}})}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=admin-module-datasource-list.5d54878109761c06.js.map