"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4656],{57203:(e,t,s)=>{s.d(t,{Z:()=>n});const i={props:["refresh","exportExcel","print","search","save","options","isExcel","isPrint","isRefresh","isSave","isSearch","exportLoading"],data:()=>({searchModel:null}),computed:{lang(){const e=["_save","re_call","_print","download_file"];return e.reduce(((t,s,i)=>(t[s]=this.$t("crud."+e[i]),t)),{})}},methods:{searchGrid(e){e.preventDefault(),this.$props.search(this.searchModel)}}};const n={props:["title","icon","main_tab_title","grid","form","projects_id","hideHeader","hasSelection","actions","dbClickAction","onRowSelect","rowCurrentChange","permissions","user_condition","custom_condition","view_url","mode","onPropertySuccess","onPropertyError","page_id","withoutHeader","withCrudLog"],components:{krudtools:(0,s(51900).Z)(i,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"crud-page-header-right-inside"},[s("Tooltip",{attrs:{content:e.lang._save}},[e.isSave?s("a",{staticClass:"btnLine",on:{click:e.$props.save}},[s("i",{staticClass:"ti-save"})]):e._e()]),e._v(" "),s("Tooltip",{attrs:{content:e.lang.re_call}},[e.isRefresh?s("a",{staticClass:"btnLine",on:{click:e.$props.refresh}},[s("i",{staticClass:"ti-reload"})]):e._e()]),e._v(" "),e.isPrint?s("Tooltip",{attrs:{content:e.lang._print}},[s("a",{staticClass:"btnLine",on:{click:e.$props.print}},[s("i",{staticClass:"ti-printer"})])]):e._e(),e._v(" "),e.isExcel?s("Tooltip",{attrs:{content:e.lang.download_file}},[e.$props.exportLoading?s("a",{staticClass:"btnLine",attrs:{href:"javascript:void(0)"}},[s("Spin",[s("Icon",{staticClass:"spin-icon-load",attrs:{type:"ios-loading",size:"18"}})],1)],1):s("a",{staticClass:"btnLine",on:{click:e.$props.exportExcel}},[s("i",{staticClass:"ti-download"})])]):e._e(),e._v(" "),e.isSearch?s("form",{on:{submit:e.searchGrid}},[s("div",{staticClass:"right-search"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchModel,expression:"searchModel"}],staticClass:"right-search-input",attrs:{placeholder:e.$static_words?e.$static_words.search:"Хайх..."},domProps:{value:e.searchModel},on:{input:function(t){t.target.composing||(e.searchModel=t.target.value)}}}),e._v(" "),s("i",{staticClass:"ti-search"})])]):e._e()],1)}),[],!1,null,null,null).exports},data:()=>({closeByBtn:window.init.closeByBtn,gridSrc:"",formSrc:"",editMode:!1,searchModel:"",form_width:600,exportLoading:!1,isPrint:!1,isExcel:!1,isRefresh:!1,isSave:!1,rowId:null}),computed:{hasVNavSlot(){return!!this.$slots["v-nav"]},hasNavSlot(){return!!this.$slots.nav},hasLeftSlot(){return!!this.$slots.left}},methods:{view(e){this.rowId=e,this.editMode=!0,this.$refs.form.viewMode=!0,this.$refs.form.editModel(e),this.templateEdit&&this.templateEdit()},edit(e){this.rowId=e,this.editMode=!0,this.$refs.form.editModel(e),this.templateEdit&&this.templateEdit()},clone(e){this.$refs.form.cloneModel(e),this.templateEdit&&this.templateEdit()},quickEdit(e){console.log(e)},refresh(){this.searchModel=null,this.$refs.grid.refresh()},search(e){this.$refs.grid.searchData(e,1)},stopLoading(e){this.exportLoading=!1,e||this.$Message.error("Татах үед алдаа гарлаа!")},exportExcel(){this.exportLoading=!0,this.$refs.grid.exportExcel(this.stopLoading)},print(){this.$refs.grid.print()},save(){this.$refs.grid.saveGridData()},onSuccess(e){void 0!==this.mode&&this.mode&&"refresh"==this.mode?this.$refs.grid.refresh():this.editMode?this.$refs.grid.update(e):this.$refs.grid.append(e),this.editMode=!1,this.templateOnSuccess&&this.templateOnSuccess(e),this.onPropertySuccess&&this.onPropertySuccess()},onError(e){this.templateOnError&&this.templateOnError(),this.onPropertyError&&this.onPropertyError()}}}},58847:(e,t,s)=>{s.d(t,{Z:()=>a});var i=s(94015),n=s.n(i),o=s(23645),r=s.n(o)()(n());r.push([e.id,".blackout[data-v-18026760]{background-color:rgba(0,0,0,.3);height:100vh;left:0;position:fixed;top:0;width:100vw;z-index:10}.dock[data-v-18026760]{box-shadow:-2px 3px 3px rgba(0,0,0,.2);position:absolute;right:0;top:0;z-index:3000}.dock[data-v-18026760],section[data-v-18026760]{height:100%;overflow:hidden}section[data-v-18026760]{box-sizing:border-box;display:inline-block;position:relative}.panel>div[data-v-18026760]{height:100%;overflow:auto}.panel.default[data-v-18026760]{background-color:#fff}.action-close[data-v-18026760]{cursor:pointer;font-size:24px;position:absolute;right:12px;top:6px}.action-extra.default[data-v-18026760]{bottom:1rem;cursor:pointer;position:absolute;right:1rem}.vsp-br[data-v-18026760]{border-right:2px solid rgba(0,0,0,.2)}.vsp-bl[data-v-18026760]{border-left:2px solid rgba(0,0,0,.1)}.slide-out-enter-active[data-v-18026760],.slide-out-leave-active[data-v-18026760]{transition:transform .4s cubic-bezier(.215,.61,.355,1)}.slide-out-enter[data-v-18026760],.slide-out-leave-to[data-v-18026760]{transform:translateX(100%)}.fade-enter-active[data-v-18026760],.fade-leave-active[data-v-18026760]{transition:opacity .4s ease-in}.fade-enter[data-v-18026760],.fade-leave-to[data-v-18026760]{opacity:0}.bg-transparent[data-v-18026760]{background-color:transparent!important}","",{version:3,sources:["webpack://./node_modules/@lambda-platform/krud/src/components/slidePanel.vue"],names:[],mappings:"AA2QA,2BAOA,+BAAA,CAFA,YAAA,CAFA,MAAA,CAFA,cAAA,CACA,KAAA,CAEA,WAAA,CAEA,UAEA,CAEA,uBAMA,sCAAA,CALA,iBAAA,CAEA,OAAA,CADA,KAAA,CAGA,YAGA,CAEA,gDANA,WAAA,CAGA,eASA,CANA,yBAIA,qBAAA,CAFA,oBAAA,CADA,iBAKA,CAEA,4BACA,WAAA,CACA,aACA,CAEA,gCACA,qBACA,CAEA,+BAIA,cAAA,CACA,cAAA,CAJA,iBAAA,CAEA,UAAA,CADA,OAIA,CAEA,uCAEA,WAAA,CAEA,cAAA,CAHA,iBAAA,CAEA,UAEA,CAEA,yBACA,qCACA,CAEA,yBACA,oCACA,CAEA,kFAEA,sDACA,CAEA,uEAEA,0BACA,CAEA,wEAEA,8BACA,CAEA,6DAEA,SACA,CAEA,iCACA,sCACA",sourcesContent:['<template>\n    <div>\n        <transition name="fade">\n            <div v-if="isVisibleDock" class="blackout" @click="closeAll"></div>\n        </transition>\n        <transition name="slide-out" v-on:enter="d_enter">\n            <div v-show="isVisibleDock" ref="dock" class="dock" :style="_style(0)" :class="_class(0)">\n                <transition-group name="slide-out" v-on:before-leave="s_beforeLeave" v-on:afterLeave="s_afterLeave">\n                    <section v-for="(isVisible, i) in isVisibleSections" v-if="isVisible" ref="section" class="panel"\n                             :key="\'k\'+i" :style="_style(i+1)" :class="_class(i+1)">\n                        <a href="#" class="action-close" @click.prevent="close(i)">\n                            <Icon type="ios-close-circle-outline" />\n                        </a>\n                        <slot></slot>\n                    </section>\n                </transition-group>\n            </div>\n        </transition>\n    </div>\n</template>\n\n<script>\nlet easeOutCubic = "cubic-bezier(0.215, 0.61, 0.355, 1)";\nlet easeOutSine = "cubic-bezier(0.39, 0.575, 0.565, 1)";\nlet bz_func = easeOutCubic;\n\nexport default {\n    name: "VueSideoutPanel",\n\n    props: {\n        closeByBtn: {\n            default: false,\n            required: false\n        },\n        value: {\n//            type: Boolean,\n            default: false,\n            required: true\n        },\n        count: {\n//            type: Number,\n            default: 1,\n            validator(v) {\n                return v > 0 && v <= 2;\n            }\n        },\n        closeHtml: {\n//            type: String,\n            default: "Close"\n        },\n        closeAllHtml: {\n            type: String,\n            default: "Close all"\n        },\n        widths: {\n            type: Array,\n            default() {\n                if (this.count == 1) return ["100%"];\n                else return ["100%", "50%"];\n            },\n            validator(v) {\n                return v.reduce(\n                    (a, b) => a && /col-(\\w+-)?\\d+|\\d+px|\\d+%/.test(b),\n                    true\n                );\n            }\n        },\n        classes: {\n            type: Array,\n            default() {\n                return new Array(5).fill("default");\n            },\n            validator(v) {\n                return v.reduce(\n                    (a, b) => a && (!b || typeof b == "string"),\n                    true\n                );\n            }\n        },\n        styles: {\n            type: Array,\n            default() {\n                return [{}, {}, {}, {}, {}];\n            },\n            validator(v) {\n                return v.reduce(\n                    (a, b) => a && (!b || typeof b == "object"),\n                    true\n                );\n            }\n        }\n    },\n\n    data() {\n        return {\n            isVisibleDock: this.value,\n            isVisibleSections: [],\n            isShifted: false,\n            d_styles: [],\n            d_classes: []\n        };\n    },\n\n    created() {\n        this.init();\n    },\n\n    watch: {\n        value() {\n            this.isVisibleDock = this.value;\n        },\n        widths() {\n            this.init();\n        }\n    },\n\n    computed: {\n        isVisibleCloseAll() {\n            return this.count == 2 && !this.isShifted;\n        }\n    },\n\n    methods: {\n        init() {\n            this.isShifted = false;\n\n            this.d_styles = [];\n            this.d_classes = [];\n\n            for (let i = 0; i < 5; i++) {\n                if (this.classes[i] && this.classes[i].length >= 0) {\n                    i == 2 && this.classes[i] == "same"\n                        ? this.d_classes.push(this.classes[i - 1])\n                        : this.d_classes.push(this.classes[i]);\n                } else {\n                    this.d_classes.push("default");\n                }\n            }\n            if (this.count == 2) {\n                this.d_classes[1] += " vsp-br";\n                this.d_classes[2] += " vsp-bl";\n            }\n            for (let i = 0; i < 5; i++) {\n                i == 2 && this.styles[i] && this.styles[i].same\n                    ? this.d_styles.push(\n                    Object.assign({}, this.styles[i - 1] || {})\n                    )\n                    : this.d_styles.push(this.styles[i] || {});\n            }\n\n            let isSecondSet = false;\n            if (this.count == 1) {\n                this.widths[0] = this.widths[0] || this.widths[1];\n                this.widths[1] = "100%";\n            } else if (/\\d+%/.test(this.widths[1])) {\n                this.d_styles[2].width = `${100 -\n                this.widths[1].slice(0, -1)}%`;\n                isSecondSet = true;\n            }\n            this.widths.forEach((_w, i) => {\n                if (/col-(\\w+-)?\\d+/.test(_w)) {\n                    this.d_classes[i] += " " + _w;\n                } else {\n                    if (i == 2 && isSecondSet) return;\n                    this.d_styles[i].width = _w;\n                }\n            });\n\n            this.isVisibleSections = new Array(this.count).fill(1);\n        },\n\n        _style(index) {\n            return this.d_styles[index];\n        },\n\n        _class(index) {\n            return this.d_classes[index];\n        },\n\n        setTransform(el, v) {\n            [\n                "webkitTransform",\n                "MozTransform",\n                "msTransform",\n                "OTransform",\n                "transform"\n            ].forEach(t => {\n                el.style[t] = v[0];\n            });\n            el.style.transitionTimingFunction = v[1];\n            el.style.transitionDuration = v[2];\n        },\n\n        d_shift() {\n            let cx = -this.$refs.section[1].offsetWidth;\n            this.setTransform(this.$refs.dock, ["right", bz_func, ".8s"]);\n            this.$refs.dock.style.right = `${cx}px`;\n            this.isShifted = true;\n        },\n\n        s_beforeLeave() {\n            if (this.isVisibleSections[1]) {\n                this.$refs.dock.style.boxShadow = "none";\n                this.$refs.section[1].style.boxShadow =\n                    "-3px 3px 9px rgba(0, 0, 0, 0.3)";\n            } else {\n                this.d_shift();\n            }\n        },\n\n        s_afterLeave() {\n            if (this.isVisibleSections[1]) {\n                this.$refs.dock.style.boxShadow =\n                    "-3px 3px 9px rgba(0, 0, 0, 0.3)";\n                this.$refs.dock.style.width =\n                    this.$refs.section[0].offsetWidth + "px";\n                this.$refs.section[0].style.width = "100%";\n            }\n        },\n\n        d_enter() {\n            this.count == 2 && !this.showExtra && this.d_shift();\n        },\n\n        closeDock() {\n            this.isVisibleDock = false;\n            this.init();\n            this.$emit("close");\n        },\n\n        close(index) {\n            if (this.count == 1) {\n                this.closeDock();\n            } else if (this.isShifted) {\n                this.setTransform(this.$refs.dock, [\n                    "right",\n                    easeOutSine,\n                    "1.2s"\n                ]);\n                this.closeDock();\n            } else if (index == 0) {\n                this.$set(this.isVisibleSections, 0, 0);\n            } else if (index == 1 && this.isVisibleSections[0]) {\n                this.d_shift();\n            } else {\n                this.closeDock();\n            }\n        },\n\n        closeAll() {\n            if(!this.closeByBtn) {\n                if (this.isShifted) {\n                    this.setTransform(this.$refs.dock, [\n                        "right",\n                        easeOutSine,\n                        "1.2ss"\n                    ]);\n                }\n                this.closeDock();\n            }\n        }\n    }\n};\n<\/script>\n\n\n<style scoped>\n.blackout {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n    z-index: 10;\n    background-color: rgba(0, 0, 0, 0.3);\n}\n\n.dock {\n    position: absolute;\n    top: 0;\n    right: 0;\n    height: 100%;\n    z-index: 3000;\n    box-shadow: -2px 3px 3px rgba(0, 0, 0, 0.2);\n    overflow: hidden;\n}\n\nsection {\n    position: relative;\n    display: inline-block;\n    height: 100%;\n    box-sizing: border-box;\n    overflow: hidden;\n}\n\n.panel > div {\n    height: 100%;\n    overflow: auto;\n}\n\n.panel.default {\n    background-color: #fff;\n}\n\n.action-close {\n    position: absolute;\n    top: 6px;\n    right: 12px;\n    cursor: pointer;\n    font-size: 24px;\n}\n\n.action-extra.default {\n    position: absolute;\n    bottom: 1rem;\n    right: 1rem;\n    cursor: pointer;\n}\n\n.vsp-br {\n    border-right: 2px solid rgba(0, 0, 0, 0.2);\n}\n\n.vsp-bl {\n    border-left: 2px solid rgba(0, 0, 0, 0.1);\n}\n\n.slide-out-enter-active,\n.slide-out-leave-active {\n    transition: transform 0.4s cubic-bezier(0.215, 0.61, 0.355, 1);\n}\n\n.slide-out-enter,\n.slide-out-leave-to {\n    transform: translateX(100%);\n}\n\n.fade-enter-active,\n.fade-leave-active {\n    transition: opacity 0.4s ease-in;\n}\n\n.fade-enter,\n.fade-leave-to {\n    opacity: 0;\n}\n\n.bg-transparent {\n    background-color: transparent !important;\n}\n</style>\n'],sourceRoot:""}]);const a=r},23645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s=e(t);return t[2]?"@media ".concat(t[2]," {").concat(s,"}"):s})).join("")},t.i=function(e,s,i){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(i)for(var o=0;o<this.length;o++){var r=this[o][0];null!=r&&(n[r]=!0)}for(var a=0;a<e.length;a++){var l=[].concat(e[a]);i&&n[l[0]]||(s&&(l[2]?l[2]="".concat(s," and ").concat(l[2]):l[2]=s),t.push(l))}},t}},94015:e=>{function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==s)return;var i,n,o=[],r=!0,a=!1;try{for(s=s.call(e);!(r=(i=s.next()).done)&&(o.push(i.value),!t||o.length!==t);r=!0);}catch(e){a=!0,n=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw n}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,i=new Array(t);s<t;s++)i[s]=e[s];return i}e.exports=function(e){var s=t(e,4),i=s[1],n=s[3];if(!n)return i;if("function"==typeof btoa){var o=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),a="/*# ".concat(r," */"),l=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[i].concat(l).concat([a]).join("\n")}return[i].join("\n")}},93379:(e,t,s)=>{var i,n=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},o=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}(),r=[];function a(e){for(var t=-1,s=0;s<r.length;s++)if(r[s].identifier===e){t=s;break}return t}function l(e,t){for(var s={},i=[],n=0;n<e.length;n++){var o=e[n],l=t.base?o[0]+t.base:o[0],c=s[l]||0,d="".concat(l," ").concat(c);s[l]=c+1;var h=a(d),u={css:o[1],media:o[2],sourceMap:o[3]};-1!==h?(r[h].references++,r[h].updater(u)):r.push({identifier:d,updater:m(u,t),references:1}),i.push(d)}return i}function c(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var n=s.nc;n&&(i.nonce=n)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var r=o(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var d,h=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function u(e,t,s,i){var n=s?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=h(t,n);else{var o=document.createTextNode(n),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(o,r[t]):e.appendChild(o)}}function f(e,t,s){var i=s.css,n=s.media,o=s.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var p=null,v=0;function m(e,t){var s,i,n;if(t.singleton){var o=v++;s=p||(p=c(t)),i=u.bind(null,s,o,!1),n=u.bind(null,s,o,!0)}else s=c(t),i=f.bind(null,s,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var s=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<s.length;i++){var n=a(s[i]);r[n].references--}for(var o=l(e,t),c=0;c<s.length;c++){var d=a(s[c]);0===r[d].references&&(r[d].updater(),r.splice(d,1))}s=o}}}},29491:(e,t,s)=>{s.d(t,{Z:()=>n});const i={name:"crudLog",props:["form","grid","rowId"],data:()=>({logs:[],reads:[],logColumns:[{title:"Бүртгэлийн төрөл",key:"action"},{title:"Хэрэглэгч",key:"user"},{title:"Огноо",key:"created_at"}],readColumns:[{title:"Хэрэглэгч",key:"user"},{title:"Огноо",key:"created_at"}]}),computed:{lang(){const e=["registration_history","Information_viewing_history"];return e.reduce(((t,s,i)=>(t[s]=this.$t("crud."+e[i]),t)),{})}},methods:{getLog(){this.logs=[],this.reads=[],axios.post("/lambda/puzzle/grid/data/crud_log?&paginate=5000&page=1&sort=id&order=desc",{schemaId:this.form,row_id:this.rowId}).then((e=>{e.data.data.forEach((e=>{"edit"!=e.action&&this.logs.push({action:"store"==e.action?"Бүртгэсэн":"Зассан",user:e.last_name.charAt(0)+"."+e.first_name,created_at:moment(e.created_at).format("YYYY-MM-DD HH:mm:ss")}),"edit"==e.action&&this.reads.push({user:e.last_name.charAt(0)+"."+e.first_name,created_at:moment(e.created_at).format("YYYY-MM-DD HH:mm:ss")})}))}))}},watch:{rowId(){this.getLog()}},mounted(){this.getLog()}};const n=(0,s(51900).Z)(i,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"crud-log"},[s("div",{staticClass:"fieldset"},[s("legend",[e._v(e._s(e.lang.lang))]),e._v(" "),s("Table",{attrs:{columns:e.logColumns,data:e.logs,size:"small",height:e.logs.length>=3?200:100}})],1),e._v(" "),s("div",{staticClass:"fieldset"},[s("legend",[e._v(e._s(e.lang.Information_viewing_history))]),e._v(" "),s("Table",{attrs:{columns:e.readColumns,data:e.reads,size:"small",height:e.reads.length>=3?200:80}})],1)])}),[],!1,null,null,null).exports},94140:(e,t,s)=>{s.d(t,{Z:()=>c});let i="cubic-bezier(0.39, 0.575, 0.565, 1)";const n={name:"VueSideoutPanel",props:{closeByBtn:{default:!1,required:!1},value:{default:!1,required:!0},count:{default:1,validator:e=>e>0&&e<=2},closeHtml:{default:"Close"},closeAllHtml:{type:String,default:"Close all"},widths:{type:Array,default(){return 1==this.count?["100%"]:["100%","50%"]},validator:e=>e.reduce(((e,t)=>e&&/col-(\w+-)?\d+|\d+px|\d+%/.test(t)),!0)},classes:{type:Array,default:()=>new Array(5).fill("default"),validator:e=>e.reduce(((e,t)=>e&&(!t||"string"==typeof t)),!0)},styles:{type:Array,default:()=>[{},{},{},{},{}],validator:e=>e.reduce(((e,t)=>e&&(!t||"object"==typeof t)),!0)}},data(){return{isVisibleDock:this.value,isVisibleSections:[],isShifted:!1,d_styles:[],d_classes:[]}},created(){this.init()},watch:{value(){this.isVisibleDock=this.value},widths(){this.init()}},computed:{isVisibleCloseAll(){return 2==this.count&&!this.isShifted}},methods:{init(){this.isShifted=!1,this.d_styles=[],this.d_classes=[];for(let e=0;e<5;e++)this.classes[e]&&this.classes[e].length>=0?2==e&&"same"==this.classes[e]?this.d_classes.push(this.classes[e-1]):this.d_classes.push(this.classes[e]):this.d_classes.push("default");2==this.count&&(this.d_classes[1]+=" vsp-br",this.d_classes[2]+=" vsp-bl");for(let e=0;e<5;e++)2==e&&this.styles[e]&&this.styles[e].same?this.d_styles.push(Object.assign({},this.styles[e-1]||{})):this.d_styles.push(this.styles[e]||{});let e=!1;1==this.count?(this.widths[0]=this.widths[0]||this.widths[1],this.widths[1]="100%"):/\d+%/.test(this.widths[1])&&(this.d_styles[2].width=100-this.widths[1].slice(0,-1)+"%",e=!0),this.widths.forEach(((t,s)=>{if(/col-(\w+-)?\d+/.test(t))this.d_classes[s]+=" "+t;else{if(2==s&&e)return;this.d_styles[s].width=t}})),this.isVisibleSections=new Array(this.count).fill(1)},_style(e){return this.d_styles[e]},_class(e){return this.d_classes[e]},setTransform(e,t){["webkitTransform","MozTransform","msTransform","OTransform","transform"].forEach((s=>{e.style[s]=t[0]})),e.style.transitionTimingFunction=t[1],e.style.transitionDuration=t[2]},d_shift(){let e=-this.$refs.section[1].offsetWidth;this.setTransform(this.$refs.dock,["right","cubic-bezier(0.215, 0.61, 0.355, 1)",".8s"]),this.$refs.dock.style.right=`${e}px`,this.isShifted=!0},s_beforeLeave(){this.isVisibleSections[1]?(this.$refs.dock.style.boxShadow="none",this.$refs.section[1].style.boxShadow="-3px 3px 9px rgba(0, 0, 0, 0.3)"):this.d_shift()},s_afterLeave(){this.isVisibleSections[1]&&(this.$refs.dock.style.boxShadow="-3px 3px 9px rgba(0, 0, 0, 0.3)",this.$refs.dock.style.width=this.$refs.section[0].offsetWidth+"px",this.$refs.section[0].style.width="100%")},d_enter(){2==this.count&&!this.showExtra&&this.d_shift()},closeDock(){this.isVisibleDock=!1,this.init(),this.$emit("close")},close(e){1==this.count?this.closeDock():this.isShifted?(this.setTransform(this.$refs.dock,["right",i,"1.2s"]),this.closeDock()):0==e?this.$set(this.isVisibleSections,0,0):1==e&&this.isVisibleSections[0]?this.d_shift():this.closeDock()},closeAll(){this.closeByBtn||(this.isShifted&&this.setTransform(this.$refs.dock,["right",i,"1.2ss"]),this.closeDock())}}};var o=s(93379),r=s.n(o),a=s(58847),l={insert:"head",singleton:!1};r()(a.Z,l);a.Z.locals;const c=(0,s(51900).Z)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("transition",{attrs:{name:"fade"}},[e.isVisibleDock?s("div",{staticClass:"blackout",on:{click:e.closeAll}}):e._e()]),e._v(" "),s("transition",{attrs:{name:"slide-out"},on:{enter:e.d_enter}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isVisibleDock,expression:"isVisibleDock"}],ref:"dock",staticClass:"dock",class:e._class(0),style:e._style(0)},[s("transition-group",{attrs:{name:"slide-out"},on:{"before-leave":e.s_beforeLeave,afterLeave:e.s_afterLeave}},e._l(e.isVisibleSections,(function(t,i){return t?s("section",{key:"k"+i,ref:"section",refInFor:!0,staticClass:"panel",class:e._class(i+1),style:e._style(i+1)},[s("a",{staticClass:"action-close",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.close(i)}}},[s("Icon",{attrs:{type:"ios-close-circle-outline"}})],1),e._v(" "),e._t("default")],2):e._e()})),0)],1)])],1)}),[],!1,null,"18026760",null).exports},61313:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});var i=s(94140),n=s(29491);const o={mixins:[s(57203).Z],data:()=>({form_width:800,openSlidePanel:!1,exportLoading:!1}),components:{"slide-panel":i.Z,"crud-log":n.Z},computed:{lang(){const e=["_add","Information_viewing_history"];return e.reduce(((t,s,i)=>(t[s]=this.$t("crud."+e[i]),t)),{})}},methods:{templateEdit(){this.openSlidePanel=!0},templateOnSuccess(){this.openSlidePanel=!1},templateOnError(){},onReady(e){this.form_width=e.width}}};const r=(0,s(51900).Z)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"offcanvas-template"},[s("div",{staticClass:"crud-page"},[e.withoutHeader?s("portal",{attrs:{to:"header-left"}},[s("h3",[e._v(e._s(e.title))]),e._v(" "),!e.permissions||e.permissions.c?s("span",{staticClass:"divider"}):e._e(),e._v(" "),!e.permissions||e.permissions.c?s("Button",{attrs:{type:"success",shape:"circle",size:"small",icon:"md-add"},on:{click:function(t){e.openSlidePanel=!0,e.editMode=!1}}},[e._v("\n                "+e._s(e.lang._add)+"\n            ")]):e._e()],1):e._e(),e._v(" "),e.withoutHeader?s("portal",{attrs:{to:"header-right"}},[s("krudtools",{attrs:{search:e.search,refresh:e.refresh,exportExcel:e.exportExcel,importExcel:e.importExcel,exportLoading:e.exportLoading,print:e.print,save:e.save,isPrint:e.isPrint,isExcel:e.isExcel,isExcelUpload:e.isExcelUpload,isRefresh:e.isRefresh,isSave:e.isSave}})],1):e._e(),e._v(" "),e.withoutHeader?e._e():s("div",{staticClass:"crud-page-header"},[e.hasNavSlot?s("div",{staticClass:"crud-page-header-left"},[e._t("nav"),e._v(" "),!e.permissions||e.permissions.c?s("span",{staticClass:"divider"}):e._e(),e._v(" "),!e.permissions||e.permissions.c?s("Button",{attrs:{type:"success",shape:"circle",size:"small",icon:"md-add"},on:{click:function(t){e.openSlidePanel=!0,e.editMode=!1}}},[e._v("\n                    "+e._s(e.lang._add)+"}\n                ")]):e._e()],2):s("div",{class:"crud-page-header-left "+(e.hasNavSlot?"":"no-nav")},[null!=e.$props.title?s("h3",[e._v(e._s(e.$props.title.replace("-"," ")))]):e._e(),e._v(" "),!e.permissions||e.permissions.c?s("span",{staticClass:"divider"}):e._e(),e._v(" "),!e.permissions||e.permissions.c?s("Button",{attrs:{type:"success",shape:"circle",size:"small",icon:"md-add"},on:{click:function(t){e.openSlidePanel=!0,e.editMode=!1}}},[e._v("\n                    "+e._s(e.lang._add)+"\n                ")]):e._e()],1),e._v(" "),s("div",{staticClass:"crud-page-header-right"},[s("div",{staticClass:"tooloptions"},[e._t("tooloptions")],2),e._v(" "),s("krudtools",{attrs:{search:e.search,refresh:e.refresh,exportExcel:e.exportExcel,exportLoading:e.exportLoading,print:e.print,save:e.save,isPrint:e.isPrint,isExcel:e.isExcel,isRefresh:e.isRefresh,isSave:e.isSave}}),e._v(" "),e._t("right")],2)]),e._v(" "),s("div",{staticClass:"crud-page-body"},[e.hasVNavSlot?s("div",{staticClass:"v-nav"},[e._t("v-nav")],2):e._e(),e._v(" "),s("div",{staticClass:"dg-flex"},[!e.permissions||e.permissions.r?s("datagrid",{ref:"grid",attrs:{schemaID:e.grid,paginate:50,fnClone:e.clone,fnEdit:e.edit,fnQuickEdit:e.quickEdit,fnView:e.view,actions:e.$props.actions,dblClick:e.$props.dbClickAction,onRowSelect:e.$props.onRowSelect,permissions:e.permissions,page_id:e.page_id,custom_condition:e.$props.custom_condition?e.$props.custom_condition:null,user_condition:e.user_condition?e.user_condition.gridCondition:null}}):e._e()],1)]),e._v(" "),s("slide-panel",{attrs:{widths:[e.form_width?e.form_width:"600px"],closeByBtn:!0,withCrudLog:e.withCrudLog},on:{close:function(t){e.openSlidePanel=!1}},model:{value:e.openSlidePanel,callback:function(t){e.openSlidePanel=t},expression:"openSlidePanel"}},[s("div",{class:e.withCrudLog&&e.editMode?"with-crud-log":""},[s("dataform",{ref:"form",attrs:{schemaID:e.form,editMode:e.editMode,onSuccess:e.onSuccess,onReady:e.onReady,do_render:e.openSlidePanel,permissions:e.permissions,page_id:e.page_id,user_condition:e.user_condition?e.user_condition.formCondition:null,onError:e.onError}})],1)])],1)])}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=krud-window.2bb40902227c4514.js.map